(self.webpackChunktkfmtools=self.webpackChunktkfmtools||[]).push([[182],{74772:function(e,t,n){"use strict";n.d(t,{Q:function(){return s},qg:function(){return f},cP:function(){return g}});var r=n(67294),a=n(50009),i=n(17900),l=n(93175),o=n(16855),c=(0,a.ZP)(l.Z).withConfig({displayName:"Card__StyledImg",componentId:"sc-1duszqx-0"})(["display:flex;justify-content:center;align-items:center;width:100%;background-repeat:no-repeat;"]),u=a.ZP.div.withConfig({displayName:"Card__ImgWrapper",componentId:"sc-1duszqx-1"})(["display:flex;align-items:center;justify-content:center;"]),s=function(e){var t=e.children,n=e.className,a=e.imgType,i=e.imgId,l=e.alt;return e.isBackground?r.createElement(c,{className:n,name:a+"_"+i,isBackground:!0,alt:l},t):r.createElement(u,{className:n},r.createElement(c,{name:a+"_"+i,alt:l}),t)},d=(0,a.ZP)(s).withConfig({displayName:"Card__ItemImg",componentId:"sc-1duszqx-2"})(["> div:first-child{width:2.5rem;height:2.5rem;margin-right:.4rem;user-select:none;}"]),m=a.ZP.div.withConfig({displayName:"Card__TextWrapper",componentId:"sc-1duszqx-3"})(["white-space:nowrap;font-size:medium;font-weight:normal;"]),f=function(e){var t=e.className,n=e.id,a=(0,i.f)().itemString;return r.createElement(d,{className:t,imgType:"item",imgId:n,alt:""},r.createElement(m,null,a.name[n]))},p=(0,a.ZP)(o.Z).withConfig({displayName:"Card__StyledTable",componentId:"sc-1duszqx-4"})(["&& .MuiTableCell-root{font-size:.9rem;padding:.3rem;padding-left:.75rem;}"]),g=function(e){var t=e.className,n=e.children,a=e.striped;return r.createElement(p,{className:t,$striped:a},n)}},47233:function(e,t,n){"use strict";n.d(t,{Ps:function(){return y},ac:function(){return E}});var r=n(19756),a=n(67294),i=n(50009),l=n(86300),o=n(99395),c=n(49400),u=n(17900),s=n(74772),d=n(28437),m=n(68912),f=(0,i.ZP)(s.Q).withConfig({displayName:"CharCard__StyledCard",componentId:"sc-1p8ym1z-0"})(["flex-direction:column;align-items:flex-end;justify-content:space-around;width:100%;min-width:10rem;height:3.6rem;background-repeat:no-repeat;background-size:6rem 6rem;background-position:0 -1.6rem;"]),p=i.ZP.div.withConfig({displayName:"CharCard__TextWrapper",componentId:"sc-1p8ym1z-1"})(["margin-left:0;margin-right:1rem;transition:all 0.3s ease;text-transform:none;text-shadow:0 0 1px ",",-2px 0 1px  ",",2px 0 1px  ",",0 -2px 1px ",",0 2px 1px  ",",2px 2px 1px ",",2px -2px 1px ",",-2px 2px 1px ",",-2px -2px 1px ",";"],(function(e){return e.theme.colors.surface}),(function(e){return e.theme.colors.surface}),(function(e){return e.theme.colors.surface}),(function(e){return e.theme.colors.surface}),(function(e){return e.theme.colors.surface}),(function(e){return e.theme.colors.surface}),(function(e){return e.theme.colors.surface}),(function(e){return e.theme.colors.surface}),(function(e){return e.theme.colors.surface})),g=(0,i.ZP)(p).withConfig({displayName:"CharCard__TitleText",componentId:"sc-1p8ym1z-2"})(["font-size:small;"]),h=function(e){var t=e.className,n=e.id,r=(0,u.f)().charString;return a.createElement(f,{className:t,imgType:"char_small",imgId:n,alt:"",isBackground:!0},a.createElement(g,null,r.name[n].split(" ").slice(0,-1).join(" ")),a.createElement(p,null,r.name[n].split(" ").slice(-1)[0]))},y=(0,i.ZP)(h).withConfig({displayName:"CharCard__ResponsiveCharCard",componentId:"sc-1p8ym1z-3"})(["@media screen and (min-width:","px){flex-direction:row;align-items:center;justify-content:flex-start;> div{margin-left:7rem}> div:last-child{margin-left:-.6rem;}}"],(function(e){return e.$textWrapConfig})),b=i.ZP.div.withConfig({displayName:"CharCard__TagWrapper",componentId:"sc-1p8ym1z-4"})(["display:flex;flex-direction:row;"]),v=i.ZP.div.withConfig({displayName:"CharCard__IconWrapper",componentId:"sc-1p8ym1z-5"})(["margin-bottom:.1rem;margin-left:.25rem;margin-right:.4rem;> svg{width:1.2rem;fill:",";color:",";}"],(function(e){return e.theme.colors.secondary}),(function(e){return e.theme.colors.secondary})),C=function(e){var t=e.type,n=e.tag,r=(0,u.f)().charString,i={attribute:d.XV,position:d.$g,race:d.i6,body:d.cp,oppai:d.JU,rank:d.U2,else:d.fP};return a.createElement(o.Z,null,a.createElement(c.Z,null,a.createElement(b,null,a.createElement(v,null,i[t]),r.tags[n])))},E=function(e){var t=e.id,n=(0,u.f)().charString,i=m.find((function(e){return e.id===t})).tags,d=i.available,f=(0,r.Z)(i,["available"]);return d?a.createElement(s.cP,{striped:!0},a.createElement(l.Z,null,Object.entries(f).map((function(e,t){return"else"===e[0]?e[1].map((function(e){return a.createElement(C,{key:e,type:"else",tag:e})})):e[1]>=0?a.createElement(C,{key:e[1],type:e[0],tag:e[1]}):null})))):a.createElement(s.cP,{striped:!0},a.createElement(l.Z,null,a.createElement(o.Z,null,a.createElement(c.Z,null,n.tagWarnMsg))))};t.ZP=h},24452:function(e,t,n){"use strict";var r=n(67294),a=n(50009),i=n(50033),l=n(17900),o=n(25072),c=n(87001),u=(0,a.ZP)(i.Z).withConfig({displayName:"ResultTablePanel__TableWrapper",componentId:"lhulap-0"})(["max-height:",";overflow-x:hidden;overflow-y:auto;"],(function(e){return e.$maxHeight})),s=(0,a.ZP)(c.ZP).withConfig({displayName:"ResultTablePanel__StyledSortableTable",componentId:"lhulap-1"})(["img{width:1.8rem;height:1.8rem;}td{padding-left:.75rem;}"]);t.Z=function(e){var t=e.data,n=e.head,a=e.body,i=e.sortFunc,c=e.defaultSortKey,d=e.handleModalOpen,m=e.maxHeight,f=e.striped,p=(0,l.f)().pageString;return r.createElement(r.Fragment,null,r.createElement(o.Z,{title:p.items.drop.filter.resultTitle,withHelp:!0,onClickHelp:d,border:!0}),r.createElement(u,{$maxHeight:m},r.createElement(s,{data:t,head:n,body:a,sortFunc:i,defaultSortKey:c,striped:f})))}},7632:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return te}});var r=n(85061),a=n(87757),i=n.n(a),l=n(67294),o=n(50009),c=n(4093),u=n(86300),s=n(99395),d=n(49400),m=n(71065),f=n(136),p=n(34621),g=n(86015),h=n(54480),y=n(17900),b=n(47378),v=n(24452),C=n(87001),E=n(25072),x=n(50208),w=n(67e3),Z=n(82195),S=n(50190),k=n(47233),_=n(22776),I=n(67993),T=n(79520),P=n(28437),N=JSON.parse('[{"type":"attribute","range":[0,5]},{"type":"position","range":[5,10]},{"type":"race","range":[10,13]},{"type":"body","range":[13,15]},{"type":"oppai","range":[15,18]},{"type":"rank","range":[18,21]},{"type":"else","range":[21,33]}]'),O=n(68912),z=i().mark(ee);function B(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var M=function(e){var t=e.value,n=e.onChange,a=e.layoutConfig,i=e.groupRange,o=(0,y.f)().charString,c={attribute:P.XV,position:P.$g,race:P.i6,body:P.cp,oppai:P.JU,rank:P.U2,else:P.fP};return l.createElement(Z.Z,{value:t,onChange:n,layoutConfig:a},N.slice(i[0],i[1]).map((function(e){return(0,r.Z)(Array(e.range[1]).keys()).slice(e.range[0]).map((function(t){return l.createElement(Z.C,{value:t,key:t},c[e.type],o.tags[t])}))})))},H=o.ZP.div.withConfig({displayName:"filter__BtnGroupWrapper",componentId:"sc-1hqyze1-0"})(["position:relative;padding:.5rem;padding-top:.8rem;margin:1rem 0;border-radius:.25rem;border:1px solid ",";background-color:",";"],(function(e){return e.theme.colors.secondary}),(function(e){return e.theme.colors.surface})),W=(0,o.ZP)(w.qc).withConfig({displayName:"filter__AttributeChip",componentId:"sc-1hqyze1-1"})(["&&{position:absolute;z-index:1;top:-.6rem;width:",";background-color:brown;color:white;}"],(function(e){return"en"===e.$lang?"4.5rem":"auto"})),q={en:{1400:5,1160:4,1e3:3,768:4,580:3,0:2},"zh-TW":{1260:6,1080:5,1e3:4,768:5,550:4,355:3,0:2}},V=function(e){var t=e.filterBtnValue,n=e.handleBtnGroupChange,r=e.groupBtnByClass,a=(0,y.f)(),i=a.userLanguage,o=a.charString;return l.createElement("div",null,r?N.map((function(e,r){return l.createElement(H,{key:r},l.createElement(W,{label:o.tagAttributes[e.type],$lang:i}),l.createElement(M,{value:t.filter((function(t){return t>=e.range[0]&&t<e.range[1]})),onChange:n(r),layoutConfig:q[i],groupRange:[r,r+1]}))})):l.createElement(H,null,l.createElement(M,{value:t,onChange:n(),layoutConfig:q[i],groupRange:[0,7]})))},A=(0,o.ZP)(E.Z).withConfig({displayName:"filter__StyledHeader",componentId:"sc-1hqyze1-2"})(["padding-bottom:.4rem;"]),R=o.ZP.div.withConfig({displayName:"filter__IconWrapper",componentId:"sc-1hqyze1-3"})(["svg{width:1.2rem;height:1.2rem;margin-right:.4rem;margin-bottom:.2rem;fill:",";color:",";}"],(function(e){return e.theme.colors.onSurface}),(function(e){return e.theme.colors.onSurface})),$=(0,o.ZP)(S.P).withConfig({displayName:"filter__StyledSelect",componentId:"sc-1hqyze1-4"})(["&& > div > div{padding-right:1.4rem;}"]),L=function(e){var t=e.clearBtnValue,n=e.filterBtnValue,a=e.enlistHour,i=e.handleBtnGroupChange,o=e.handleEnlistHourChange,c=e.handleModalOpen,u=e.groupBtnByClass,s=(0,y.f)().pageString,d=(0,l.useState)("00"),m=d[0],f=d[1];return l.createElement(l.Fragment,null,l.createElement(E.Z,{title:s.enlist.filter.tagSelectTitle,titleIcon:P.lO,end:l.createElement(l.Fragment,null,l.createElement(x.Io,{onClick:t,tooltipText:s.enlist.filter.deleteTooltip},P.pJ),l.createElement(x.Io,{onClick:c,tooltipText:s.enlist.filter.settingTooltip},P.qY)),border:!0}),l.createElement(V,{filterBtnValue:n,handleBtnGroupChange:i,groupBtnByClass:u}),l.createElement(A,{title:s.enlist.filter.timeSelectTitle,titleIcon:P.T3,border:!0}),l.createElement($,{values:(0,r.Z)(Array(10).keys()).slice(1),value:a,variant:"outlined",size:"small",inputProps:{"aria-label":"recruitment-hour"},onChange:o}),"ï¼š",l.createElement($,{values:["00","10","20","30","40","50"],value:m,variant:"outlined",size:"small",inputProps:{"aria-label":"recruitment-minute"},onChange:function(e){return f(e.target.value)}}))},F=function(e){var t=e.requestSort,n=e.getSortDirection,r=(0,y.f)().pageString;return l.createElement(c.Z,null,l.createElement(s.Z,null,r.enlist.filter.tableHead.map((function(e,r){return l.createElement(C.Re,{key:r,onClick:function(){return t(e.attr)},direction:n(e.attr)},e.title)}))))},J=(0,p.Z)({tooltip:{right:"0",fontSize:"1rem",whiteSpace:"pre"}})(m.ZP),G=function(e){var t=e.children,n=e.char,r=(0,y.f)().charString,a=n.distinctTagCombs.map((function(e){return e.map((function(e){return r.tags[e]})).join(", ")})).join("\n");return l.createElement(J,{title:a,TransitionComponent:f.Z,placement:"bottom",arrow:!0},t)},U=o.ZP.div.withConfig({displayName:"filter__CharCardWrapper",componentId:"sc-1hqyze1-5"})(["display:flex;flex-direction:row;justify-content:flex-start;margin-left:-.75rem;width:max-content;"]),D=(0,o.ZP)(R).withConfig({displayName:"filter__StarIconWrapper",componentId:"sc-1hqyze1-6"})(["display:flex;"," align-items:center;svg{width:1.2rem;height:1.2rem;margin:0;margin-left:-.6rem;}"],(function(e){return e.$hidden?"visibility: hidden;":void 0})),K={"zh-TW":1360,en:1360};function Q(e){var t=e.sortedData,n=(0,y.f)(),r=n.userLanguage,a=n.charString;return l.createElement(u.Z,null,t.map((function(e){return l.createElement(s.Z,{key:e.id},l.createElement(d.Z,null,l.createElement(G,{char:e},l.createElement(U,null,l.createElement(k.Ps,{id:e.id,$textWrapConfig:K[r]}),l.createElement(D,{$hidden:0===e.distinctTagCombs.length},P.r7)))),l.createElement(d.Z,null,0===(t=e.rarity)?"N":1===t?"R":2===t?"SR":"SSR"),l.createElement(d.Z,null,e.appliedTags.map((function(e){return a.tags[e]})).join(", ")));var t})))}var X=(0,o.ZP)(_.WQ).withConfig({displayName:"filter__StyledModal",componentId:"sc-1hqyze1-7"})(["> div:nth-child(3){top:25%;width:30%;min-width:max-content;}"]),Y=function(e){var t=e.open,n=e.onClose,r=e.radioValue,a=e.handleRadioChange,i=(0,y.f)().pageString;return l.createElement(X,{title:i.enlist.filter.settingModal.title,open:t,onClose:n,ariaLabelledby:"setting-modal-title",ariaDescribedby:"setting-modal-description"},l.createElement(I.Z,{label:i.enlist.filter.settingModal.groupLabel,value:r,handleChange:a},i.enlist.filter.settingModal.labels.map((function(e){return l.createElement(I.Y,{label:e,value:e,key:e})}))))};function ee(e,t){var n,a,l,o,c;return i().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:n=0;case 1:if(!(n<e.length)){i.next=18;break}if(1!==t){i.next=7;break}return i.next=5,[e[n]];case 5:i.next=15;break;case 7:a=ee(e.slice(n+1,e.length),t-1),l=B(a);case 9:if((o=l()).done){i.next=15;break}return c=o.value,i.next=13,[e[n]].concat((0,r.Z)(c));case 13:i.next=9;break;case 15:n++,i.next=1;break;case 18:case"end":return i.stop()}}),z)}var te=function(){var e=(0,l.useState)({filterBtnValue:[],characters:[],enlistHour:"9",isHelpModalOpen:!1,isSettingModalOpen:!1,isSnackbarOpen:!1}),t=e[0],n=e[1],a=(0,y.f)(),i=a.pageString,o=a.charString,c=i.enlist.filter.settingModal.labels,u=(0,g.Z)("group-btns-by-class",c,"undefined"==typeof window||window.innerWidth<=1e3?1:0),s=u.layout,d=u.setLayout,m=s===c[0];(0,l.useEffect)((function(){var e=t.filterBtnValue.slice();0===e.length&&n((function(e){return Object.assign({},e,{characters:[]})})),e.sort();var a=O.filter((function(e){return e.tags.available}));a=a.map((function(e){var t=e.id,n=e.rarity,r=e.tags;return Object.assign({id:t,rarity:n},r)}));for(var i=[],l=e.length;l>0;l--){Array.from(ee(e,l)).forEach((function(e){var n=JSON.parse(JSON.stringify(a));e.includes(20)||(n=n.filter((function(e){return e.rarity<3})),t.enlistHour<4&&!e.includes(19)&&(n=n.filter((function(e){return e.rarity<2}))));var l=0;if(N.forEach((function(t){if(l===e.length||0===n.length)return!1;(0,r.Z)(Array(t.range[1]).keys()).slice(t.range[0]).forEach((function(r){e.includes(r)&&(l++,n=r<21?n.filter((function(e){return e[t.type]===r})):n.filter((function(e){return e[t.type].includes(r)})))}))})),1===n.length&&l<=3){var o=!1;i.forEach((function(t){if(t.id===n[0].id){o=!0;for(var r=function(n){e.every((function(e){return t.distinctTagCombs[n].includes(e)}))&&t.distinctTagCombs.splice(n,1)},a=t.distinctTagCombs.length-1;a>=0;a--)r(a);return t.distinctTagCombs.push(e),!1}})),o||i.push({id:n[0].id,rarity:n[0].rarity,attribute:n[0].attribute,position:n[0].position,appliedTags:e,distinctTagCombs:[e]})}else n.forEach((function(t){var n=!1;i.forEach((function(e){if(e.id===t.id)return n=!0,!1})),n||i.push({id:t.id,rarity:t.rarity,attribute:t.attribute,position:t.position,appliedTags:e,distinctTagCombs:[]})}))}))}n((function(e){return Object.assign({},e,{characters:i})})),dataLayer&&5===e.length&&dataLayer.push({event:"five_tags_selected",character_tag_combination:e})}),[t.filterBtnValue,t.enlistHour]);var f=function(e){return function(){n((function(t){return Object.assign({},t,{isHelpModalOpen:e})}))}},p=function(e){return function(){n((function(t){return Object.assign({},t,{isSettingModalOpen:e})}))}};return l.createElement(l.Fragment,null,l.createElement(b.Z,{title:i.enlist.filter.helmet.title,description:i.enlist.filter.helmet.description,path:"/enlist/filter/"}),l.createElement(h.Z,{panelsWidth:["60%","40%"]},l.createElement(L,{handleBtnGroupChange:function(e){return function(a,i){var l;if(void 0!==e){var o,c=N.map((function(e){return t.filterBtnValue.filter((function(t){return t>=e.range[0]&&t<e.range[1]}))}));c[e]=i,l=(o=[]).concat.apply(o,(0,r.Z)(c))}else l=i;l.length>5?n((function(e){return Object.assign({},e,{isSnackbarOpen:!0})})):n((function(e){return Object.assign({},e,{filterBtnValue:l})}))}},clearBtnValue:function(){n((function(e){return Object.assign({},e,{filterBtnValue:[]})}))},enlistHour:t.enlistHour,handleEnlistHourChange:function(e){n((function(t){return Object.assign({},t,{enlistHour:e.target.value})}))},filterBtnValue:t.filterBtnValue,handleModalOpen:p(!0),groupBtnByClass:m}),l.createElement(v.Z,{data:t.characters,head:l.createElement(F,null),body:l.createElement(Q,null),sortFunc:function(e,t){e.sort((function(e,n){var r,a;return"appliedTags"===t.key?(r=e[t.key].join(""),a=n[t.key].join("")):"name"===t.key?(r=o.name[e.id],a=o.name[n.id]):(r=e[t.key],a=n[t.key]),r<a?"asc"===t.direction?-1:1:r>a?"asc"===t.direction?1:-1:0}))},defaultSortKey:"rarity",handleModalOpen:f(!0),maxHeight:m?"calc(100vh - 5rem)":"calc(100vh - 16rem)",striped:!0})),l.createElement(Y,{open:t.isSettingModalOpen,onClose:p(!1),radioValue:s,handleRadioChange:function(e){n((function(e){return Object.assign({},e,{isSettingModalOpen:!1})})),d(e.target.value)}}),l.createElement(_.p2,{title:i.enlist.filter.helpModal.title,open:t.isHelpModalOpen,onClose:f(!1),content:i.enlist.filter.helpModal.content,ariaLabelledby:"help-modal-title",ariaDescribedby:"help-modal-description"}),l.createElement(T.Z,{open:t.isSnackbarOpen,onClose:function(){n((function(e){return Object.assign({},e,{isSnackbarOpen:!1})}))},message:i.enlist.filter.snackbarMsg,type:"warn"}))}}}]);
//# sourceMappingURL=component---src-pages-enlist-filter-js-c763f87877260b94055b.js.map