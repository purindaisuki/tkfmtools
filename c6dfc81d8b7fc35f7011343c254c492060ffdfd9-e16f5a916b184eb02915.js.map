{"version":3,"sources":["webpack:///./src/components/CharPotential.js"],"names":["Select","styled","Form","Control","props","theme","colors","surface","onSurface","secondary","NumForm","as","minNum","maxNum","onChange","disabled","Group","Array","keys","slice","map","i","value","key","TwoStageForm","title","handleSelect","subMinNum","selectAttrs","Row","Col","IconWrapper","div","ContainerBody","CharImgWrapper","ImageSupplier","Gutter","CharSelectPanel","children","className","character","lumpNRChars","useContext","LanguageContext","pageString","charString","widthConfig","default","992","RaceIcon","characters","potential","characterPanelTitle","name","alt","onSubmit","event","preventDefault","characterSelectTitle","charData","char","idx","rarity","id","MaterialWrapper","span","Object","entries","$layoutConfig","entry","MaterialImg","MaterialBox","result","layoutConfig","itemString","items","item","money","OtherImg","PictureSquare","HelpIconWrapper","HeaderWithHelp","titleIcon","handleModalOpen","onClick","HelpIcon","StyledPanel","FilterPanel","MaterialContainer","resultLayoutConfig","1360","1200","768","0","624","ResultPanel","userLanguage","useState","modalOpen","setModalOpen","ItemIcon","resultDemandTitle","BuffIcon","resultBuffTitle","buff","ATK","HP","PASSIVE","handleModalClose","content","modal","calcPotential","from","to","type","find","c","potentialType","stages","potentialData","stage","j","pattern","rank","num","itemMap","parsedItem","parseInt","toString","CalculatorContainer","TableGutter","resultPanelWidthConfig","CharPotential","currStage","currSub","targetStage","targetSub","undefined","state","setState","attr","newState","selected","target","Math","max","round","maxStage","currentSelectTitle","targetSelectTitle"],"mappings":"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","file":"c6dfc81d8b7fc35f7011343c254c492060ffdfd9-e16f5a916b184eb02915.js","sourcesContent":["import React, { useContext, useState } from 'react';\r\nimport styled from 'styled-components';\r\nimport { Col, Form } from 'react-bootstrap';\r\nimport { ContainerHeader, FilterPanel, HelpModal } from '../components/FilterComponents';\r\nimport ImageSupplier from './ImageSupplier';\r\nimport charData from '../gamedata/character.json';\r\nimport potentialData from '../gamedata/potential.json';\r\nimport { LanguageContext } from './LanguageProvider';\r\nimport { BuffIcon, ItemIcon, RaceIcon, HelpIcon } from './icon';\r\n\r\nexport const Select = styled(Form.Control)`\r\n    && {\r\n        background-color: ${props => props.theme.colors.surface};\r\n        color: ${props => props.theme.colors.onSurface};\r\n        border-radius: .25rem;\r\n        padding: .1rem;\r\n        border: 1px solid ${props => props.theme.colors.secondary};\r\n        width: 100%;\r\n        height: 1.6rem;\r\n        &:focus {\r\n            box-shadow: 0 0 .4rem ${props => props.theme.colors.secondary};\r\n        }\r\n    }\r\n`\r\nexport const NumForm = ({\r\n    as,\r\n    minNum,\r\n    maxNum,\r\n    onChange,\r\n    disabled\r\n}) => (\r\n    <Form.Group as={as}>\r\n        <Select\r\n            as=\"select\"\r\n            onChange={onChange}\r\n            disabled={disabled}\r\n        >\r\n            {disabled\r\n                ? <option>-</option>\r\n                : [...Array(maxNum + 1).keys()].slice(minNum)\r\n                    .map(i => <option value={i} key={i}>{i}</option>)}\r\n        </Select>\r\n    </Form.Group>\r\n)\r\n\r\nexport const TwoStageForm = ({\r\n    title,\r\n    handleSelect,\r\n    subMinNum,\r\n    minNum,\r\n    maxNum,\r\n    selectAttrs,\r\n}) => (\r\n    <>\r\n        {title}\r\n        <Form.Row>\r\n            <NumForm\r\n                as={Col}\r\n                minNum={minNum}\r\n                maxNum={maxNum}\r\n                onChange={handleSelect(selectAttrs[0])}\r\n            />\r\n            {'â€“'}\r\n            <NumForm\r\n                as={Col}\r\n                minNum={subMinNum}\r\n                maxNum={6}\r\n                onChange={handleSelect(selectAttrs[1])}\r\n            />\r\n        </Form.Row>\r\n    </>\r\n)\r\n\r\nconst IconWrapper = styled.div`\r\n    svg {\r\n        width: 1.2rem;\r\n        height: 1.2rem;\r\n        margin-right: .4rem;\r\n        fill: ${props => props.theme.colors.onSurface};\r\n    }\r\n`\r\nconst ContainerBody = styled.div`\r\n    display: flex;\r\n    flex-direction: row;\r\n    justify-content: space-around;\r\n    form {\r\n        width: 13.5rem;\r\n        > div:last-child > div {\r\n        margin-bottom: 0;\r\n        }\r\n    }\r\n`\r\nconst CharImgWrapper = styled(ImageSupplier)`\r\n    width: 5.2rem;\r\n    margin-right: 1rem;\r\n    border: 2px solid ${props => props.theme.colors.secondary};\r\n    border-radius: .25rem;\r\n`\r\nconst Gutter = styled.div`\r\n    margin-top: 4rem;\r\n`\r\nexport const CharSelectPanel = ({\r\n    children,\r\n    className,\r\n    character,\r\n    handleSelect,\r\n    lumpNRChars,\r\n}) => {\r\n    const { pageString, charString } = useContext(LanguageContext)\r\n\r\n    const widthConfig = {\r\n        default: '25%',\r\n        992: '100%',\r\n    }\r\n\r\n    return (\r\n        <FilterPanel\r\n            widthConfig={widthConfig}\r\n            className={className}\r\n        >\r\n            <ContainerHeader\r\n                title={\r\n                    <IconWrapper>\r\n                        {RaceIcon}\r\n                        {pageString.characters.potential.characterPanelTitle}\r\n                    </IconWrapper>\r\n                }\r\n            />\r\n            <ContainerBody>\r\n                <CharImgWrapper\r\n                    name={`char_${character}.png`}\r\n                    alt=''\r\n                />\r\n                <Form onSubmit={(event) => event.preventDefault()}>\r\n                    {pageString.characters.potential.characterSelectTitle}\r\n                    <Form.Row>\r\n                        <Form.Group as={Col}>\r\n                            <Select\r\n                                as=\"select\"\r\n                                onChange={handleSelect('character')}\r\n                            >\r\n                                {charData.map((char, idx) => {\r\n                                    if (char.rarity < 2 && lumpNRChars) {\r\n                                        return false\r\n                                    }\r\n\r\n                                    return (\r\n                                        <option value={char.id} key={idx}>\r\n                                            {charString.name[char.id]}\r\n                                        </option>\r\n                                    )\r\n                                })}\r\n                                {lumpNRChars\r\n                                    ? <option value={'nr'} key={'nr'}>\r\n                                        {charString.name['nr']}\r\n                                    </option>\r\n                                    : null}\r\n                            </Select>\r\n                        </Form.Group>\r\n                    </Form.Row>\r\n                    {children}\r\n                </Form>\r\n            </ContainerBody>\r\n        </FilterPanel >\r\n    )\r\n}\r\n\r\nconst MaterialWrapper = styled.span`\r\n    display: inline-flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    padding: 0 .4rem;\r\n    margin: .2rem 0;\r\n    ${props => Object.entries(props.$layoutConfig).map(entry => (\r\n    `@media screen and (min-width: ${entry[0]}px) {\r\n            width: calc(100% / ${entry[1]});\r\n        }\r\n        `\r\n))}\r\n    > div {\r\n        display: flex;\r\n        align-items: center;\r\n    }\r\n`\r\nconst MaterialImg = styled(ImageSupplier)`\r\n    width: 2rem;\r\n    height: 2rem;\r\n    margin-right: .4rem;\r\n`\r\nconst MaterialBox = ({\r\n    result,\r\n    layoutConfig\r\n}) => {\r\n    const { itemString } = useContext(LanguageContext)\r\n\r\n    if (!result.items) return null\r\n\r\n    return (\r\n        <>\r\n            {Object.entries(result.items).map((item, idx) => (\r\n                <MaterialWrapper\r\n                    key={idx}\r\n                    $layoutConfig={layoutConfig}\r\n                >\r\n                    <div>\r\n                        <MaterialImg\r\n                            name={`item_${item[0]}.png`}\r\n                            alt=''\r\n                        />\r\n                        {itemString.name[item[0]]}\r\n                    </div>\r\n                    {item[1]}\r\n                </MaterialWrapper>\r\n            ))}\r\n            <MaterialWrapper\r\n                $layoutConfig={layoutConfig}\r\n            >\r\n                <MaterialImg\r\n                    name='money.png'\r\n                    alt='money'\r\n                />\r\n                {result.money}\r\n            </MaterialWrapper>\r\n        </>\r\n    )\r\n}\r\n\r\nconst OtherImg = styled(ImageSupplier)`\r\n    width: 1.6rem;\r\n    height: 1.6rem;\r\n    margin-right: .4rem;\r\n`\r\nconst PictureSquare = ({\r\n    children,\r\n    layoutConfig,\r\n    name,\r\n    alt\r\n}) => (\r\n    <MaterialWrapper\r\n        $layoutConfig={layoutConfig}\r\n    >\r\n        <div>\r\n            <OtherImg\r\n                name={name}\r\n                alt={alt}\r\n            />\r\n            {children}\r\n        </div>\r\n    </MaterialWrapper>\r\n)\r\n\r\nconst HelpIconWrapper = styled.div`\r\n    margin-right: auto;\r\n    svg {\r\n        fill: ${props => props.theme.colors.secondary};\r\n        width: 1.4rem;\r\n        height: 1.4rem;\r\n        margin-left: .4rem;\r\n        cursor: pointer;\r\n        vertical-align: top;\r\n    }\r\n`\r\nexport const HeaderWithHelp = ({\r\n    titleIcon,\r\n    title,\r\n    handleModalOpen\r\n}) => (\r\n    <ContainerHeader\r\n        title={\r\n            <IconWrapper>\r\n                {titleIcon}\r\n                {title}\r\n                <HelpIconWrapper\r\n                    onClick={handleModalOpen}\r\n                >\r\n                    {HelpIcon}\r\n                </HelpIconWrapper>\r\n            </IconWrapper>\r\n        }\r\n    />\r\n)\r\n\r\nconst StyledPanel = styled(FilterPanel)`\r\n    @media screen and (max-width: 992px) {\r\n        width: ${props => props.widthConfig[992]};\r\n        margin-left: calc(100% - ${props => props.widthConfig[992]});\r\n        position: relative;\r\n        margin-top: 1rem;\r\n    }\r\n`\r\nconst MaterialContainer = styled.div`\r\n    display: flex;\r\n    flex-direction: row;\r\n    flex-wrap: wrap;\r\n    margin-bottom: 1rem;\r\n    min-height: 6rem;\r\n`\r\nconst resultLayoutConfig = {\r\n    'en': {\r\n        1360: 5,\r\n        1200: 4,\r\n        768: 3,\r\n        0: 2\r\n    },\r\n    'zh-TW': {\r\n        1360: 6,\r\n        1200: 5,\r\n        768: 4,\r\n        624: 3,\r\n        0: 2\r\n    }\r\n}\r\n\r\nconst ResultPanel = ({\r\n    widthConfig,\r\n    result\r\n}) => {\r\n    const { userLanguage, pageString } = useContext(LanguageContext)\r\n\r\n    const [modalOpen, setModalOpen] = useState(false)\r\n\r\n    return (\r\n        <StyledPanel widthConfig={widthConfig}>\r\n            <div>\r\n                <HeaderWithHelp \r\n                    titleIcon={ItemIcon}\r\n                    title={pageString.characters.potential.resultDemandTitle}\r\n                    handleModalOpen={() => setModalOpen(true)}\r\n                />\r\n                <MaterialContainer>\r\n                    <MaterialBox\r\n                        result={result}\r\n                        layoutConfig={resultLayoutConfig[userLanguage]}\r\n                    />\r\n                </MaterialContainer>\r\n            </div>\r\n            <div>\r\n                <ContainerHeader\r\n                    title={\r\n                        <IconWrapper>\r\n                            {BuffIcon}\r\n                            {pageString.characters.potential.resultBuffTitle}\r\n                        </IconWrapper>\r\n                    }\r\n                />\r\n                <div>\r\n                    <PictureSquare\r\n                        layoutConfig={resultLayoutConfig[userLanguage]}\r\n                        name='ui_small_atk.png'\r\n                        alt='ATK'\r\n                    >\r\n                        {`${result.buff.ATK} %`}\r\n                    </PictureSquare>\r\n                    <PictureSquare\r\n                        layoutConfig={resultLayoutConfig[userLanguage]}\r\n                        name='ui_small_hp.png'\r\n                        alt='HP'\r\n                    >\r\n                        {`${result.buff.HP} %`}\r\n                    </PictureSquare>\r\n                    <PictureSquare\r\n                        layoutConfig={resultLayoutConfig[userLanguage]}\r\n                        name='ui_small_potentialPassive.png'\r\n                        alt='Passive'\r\n                    >\r\n                        {`${result.buff.PASSIVE === 0 ? '-'\r\n                            : result.buff.PASSIVE === 1 ? '1'\r\n                                : result.buff.PASSIVE === 2 ? '2'\r\n                                    : '1 & 2'\r\n                            }`}\r\n                    </PictureSquare>\r\n                </div>\r\n            </div>\r\n            <HelpModal\r\n                modalOpen={modalOpen}\r\n                handleModalClose={() => setModalOpen(false)}\r\n                content={pageString.characters.potential.modal}\r\n            />\r\n        </StyledPanel>\r\n    )\r\n}\r\n\r\nexport const calcPotential = (char, from, to) => {\r\n    const result = {\r\n        items: {},\r\n        money: 0,\r\n        buff: {\r\n            ATK: 0,\r\n            HP: 0,\r\n            PASSIVE: 0\r\n        },\r\n    }\r\n    const type = (char === 'nr' || char[0] === '4' || char[0] === '3')\r\n        ? 3\r\n        : charData.find(c => c.id === char).potentialType\r\n\r\n    const stages = potentialData.type[type]\r\n    for (let i = from[0] - 1; i < to[0] - 1 + 1; i++) {\r\n        let stage = stages[i]\r\n        for (\r\n            let j = i === from[0] - 1 ? from[1] - 1 : 0;\r\n            j < (i === to[0] - 1 ? to[1] : 6);\r\n            j++\r\n        ) {\r\n            if (j < 0) continue\r\n\r\n            let id = stage.pattern[j] + stage.rank[j]\r\n            if (result.items[id]) {\r\n                result.items[id] += stage.num[j]\r\n            } else {\r\n                result.items[id] = stage.num[j]\r\n            }\r\n            result.money += (i + 1) * 8000\r\n            let buff = potentialData.itemMap[stage.pattern[j]].type\r\n            result.buff[buff] += stage.buff[j]\r\n        }\r\n    }\r\n    // parse result\r\n    let parsedItem = {}\r\n    for (const [key, value] of Object.entries(result.items)) {\r\n        let itemId = potentialData.itemMap[key[0]].id.map(id => (\r\n            key[1] === '9' ? '902'\r\n                : key[1] === '8' ? '901'\r\n                    : (parseInt(key[1]) * 100 + id).toString()\r\n        ))\r\n        for (let i of itemId) {\r\n            if (parsedItem[i]) {\r\n                parsedItem[i] += value\r\n            } else {\r\n                parsedItem[i] = value\r\n            }\r\n        }\r\n    }\r\n\r\n    result.items = parsedItem\r\n    return result\r\n}\r\n\r\nconst CalculatorContainer = styled.div`\r\n    display: table;\r\n    width: 100%;\r\n    > div {\r\n        display: table-cell;\r\n    }\r\n    @media screen and (max-width: 992px) {\r\n        display: block;\r\n        > div {\r\n            display: block; \r\n        }\r\n    }\r\n`\r\nconst TableGutter = styled.div`\r\n    width: 1rem;\r\n    @media screen and (max-width: 992px) {\r\n        display: hidden;\r\n    }\r\n`\r\nconst resultPanelWidthConfig = {\r\n    default: 'calc(75% - 1rem)',\r\n    992: '100%',\r\n}\r\nexport default function CharPotential() {\r\n    const { pageString } = useContext(LanguageContext)\r\n\r\n    const [state, setState] = useState({\r\n        character: '101',\r\n        currStage: 1,\r\n        currSub: 1,\r\n        targetStage: 1,\r\n        targetSub: 1,\r\n        result: {\r\n            items: undefined,\r\n            money: 0,\r\n            buff: {\r\n                ATK: 0,\r\n                HP: 0,\r\n                PASSIVE: 0\r\n            },\r\n        },\r\n    })\r\n\r\n    const handleSelect = (attr) => (event) => {\r\n        let newState = { ...state }\r\n\r\n        const selected = event.target.value\r\n\r\n        newState[attr] = attr === 'character' ? selected : parseInt(selected)\r\n\r\n        // validate auto updated values\r\n        if (selected === 'nr') {\r\n            newState.currStage = state.currStage > 6 ? 1 : state.currStage\r\n            newState.targetStage = state.targetStage > 6 ? 1 : state.targetStage\r\n        }\r\n\r\n        // make sure target is always not smaller than current\r\n        newState.targetStage = Math.max(newState.targetStage, newState.currStage)\r\n        if (newState.targetStage === newState.currStage) {\r\n            newState.targetSub = Math.max(newState.targetSub, newState.currSub)\r\n        }\r\n\r\n        const result = calcPotential(\r\n            newState.character,\r\n            [newState.currStage, newState.currSub],\r\n            [newState.targetStage, newState.targetSub]\r\n        )\r\n\r\n        result.buff.ATK = Math.round(result.buff.ATK * 100) / 100\r\n        result.buff.HP = Math.round(result.buff.HP * 100) / 100\r\n\r\n        newState.result = result\r\n        setState(newState)\r\n    }\r\n\r\n    const maxStage = state.character === 'nr' ? 6 : 12\r\n\r\n    return (\r\n        <CalculatorContainer\r\n            resultPanelWidthConfig={resultPanelWidthConfig}\r\n        >\r\n            <CharSelectPanel\r\n                handleSelect={handleSelect}\r\n                character={state.character}\r\n                lumpNRChars\r\n            >\r\n                <Gutter />\r\n                <TwoStageForm\r\n                    title={pageString.characters.potential.currentSelectTitle}\r\n                    subMinNum={1}\r\n                    minNum={1}\r\n                    maxNum={maxStage}\r\n                    selectAttrs={['currStage', 'currSub']}\r\n                    handleSelect={handleSelect}\r\n                />\r\n                <TwoStageForm\r\n                    title={pageString.characters.potential.targetSelectTitle}\r\n                    subMinNum={state.currStage === state.targetStage ? state.currSub : 1}\r\n                    minNum={state.currStage}\r\n                    maxNum={maxStage}\r\n                    selectAttrs={['targetStage', 'targetSub']}\r\n                    handleSelect={handleSelect}\r\n                />\r\n            </CharSelectPanel>\r\n            <TableGutter />\r\n            <ResultPanel\r\n                widthConfig={resultPanelWidthConfig}\r\n                result={state.result}\r\n            />\r\n        </CalculatorContainer>\r\n    )\r\n}\r\n"],"sourceRoot":""}