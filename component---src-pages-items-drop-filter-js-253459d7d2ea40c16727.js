"use strict";(self.webpackChunktkfmtools=self.webpackChunktkfmtools||[]).push([[302],{24452:function(e,t,r){var a=r(67294),n=r(50009),l=r(50033),i=r(18256),o=r(25072),c=r(87001),s=(0,n.ZP)(l.Z).withConfig({displayName:"ResultTablePanel__TableWrapper",componentId:"sc-lhulap-0"})(["max-height:",";overflow-x:hidden;overflow-y:auto;"],(e=>e.$maxHeight)),p=(0,n.ZP)(c.ZP).withConfig({displayName:"ResultTablePanel__StyledSortableTable",componentId:"sc-lhulap-1"})(["img{width:1.8rem;height:1.8rem;}td{padding-left:0.75rem;}"]);t.Z=e=>{var{data:t,head:r,body:n,sortFunc:l,defaultSortKey:c,handleModalOpen:m,maxHeight:d,striped:g,headerEnd:u}=e,{pageString:f}=(0,i.f)();return a.createElement(a.Fragment,null,a.createElement(o.ZP,{title:f.items.drop.filter.resultTitle,withHelp:!0,onClickHelp:m,end:u,border:!0}),a.createElement(s,{$maxHeight:d},a.createElement(p,{data:t,head:r,body:n,sortFunc:l,defaultSortKey:c,striped:g})))}},26465:function(e,t,r){r.r(t),r.d(t,{default:function(){return K}});var a=r(45987),n=r(4942),l=r(67294),i=r(50009),o=r(4093),c=r(86300),s=r(99395),p=r(49400),m=r(54480),d=r(18256),g=r(47378),u=r(24452),f=r(87001),h=r(25072),y=r(22727),b=r(82195),E=r(93175),O=r(22776),v=r(28437),P=r(96154),Z=["materials","trainItems","expPotions"];function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}var S={};P.forEach((e=>{e.stages.forEach((t=>{var{materials:r,trainItems:l,expPotions:i}=t,o=(0,a.Z)(t,Z);[r,l,i].forEach((t=>{t.forEach((t=>{var r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({chapter:e.chapter,rarity:t.rarity},o);S[t.id]?S[t.id].drop.push(r):S[t.id]={drop:[r]}}))}))}))}));for(var k=1;k<11;k++)S[(500+k).toString()]={drop:[]};for(var w=1;w<3;w++)S[(900+w).toString()]={drop:[]};var I=S,C=["materials","trainItems","expPotions"];function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var x={en:{1360:4,992:3,768:4,624:3,0:2},"zh-TW":{1360:5,992:4,768:5,624:4,410:3,0:2},ja:{1360:5,992:4,768:5,624:4,410:3,0:2},ko:{1460:5,1200:4,1e3:3,920:5,740:4,570:3,0:2}},B=e=>{var{filterBtnValue:t,filterBy:r,clearBtnValue:a}=e,{userLanguage:n,pageString:i,itemString:o}=(0,d.f)();return l.createElement(l.Fragment,null,l.createElement(h.ZP,{title:i.items.drop.filter.itemPanelTitle,end:l.createElement(y.Io,{onClick:a,tooltipText:i.items.drop.filter.deleteTooltip},v.pJ),border:!0}),l.createElement(b.Z,{value:t,onChange:r,layoutConfig:x[n]},Object.entries(I).map(((e,t)=>{var[r,a]=e;return 0===a.drop.length?null:l.createElement(H,{value:r,key:t},l.createElement(T,{name:"item_"+r,alt:""}),o.name[r])}))))},H=(0,i.ZP)(b.C).withConfig({displayName:"filter__StyledToggleButton",componentId:"sc-1e6kgg1-0"})(["display:flex;justify-content:center;align-items:center;font-size:0.85rem;"]),T=(0,i.ZP)(E.Z).withConfig({displayName:"filter__ItemImg",componentId:"sc-1e6kgg1-1"})(["width:2.26rem;height:2.26rem;"]),V=e=>{var{requestSort:t,getSortDirection:r,data:a}=e,{pageString:n,itemString:i}=(0,d.f)();return 0===a.length?l.createElement(f.Re,null,n.items.drop.filter.tableHead[1]):Object.keys(a[0]).map(((e,a)=>"stage"===e||"energy"===e?null:l.createElement(M,{key:e,onClick:()=>t(e),direction:r(e)},l.createElement(F,{name:"item_"+e,alt:i.name[e]}))))},M=(0,i.ZP)(f.Re).withConfig({displayName:"filter__ImgTh",componentId:"sc-1e6kgg1-2"})(["&:after{position:absolute;top:calc(50% - 0.75rem);margin-left:2rem;}"]),F=(0,i.ZP)(E.Z).withConfig({displayName:"filter__TableImg",componentId:"sc-1e6kgg1-3"})(["width:1.8rem;height:1.8rem;"]),N=e=>{var{requestSort:t,getSortDirection:r,sortedData:a}=e,{pageString:n}=(0,d.f)();return l.createElement(o.Z,null,l.createElement(s.Z,null,l.createElement(f.Re,{onClick:()=>t("stage"),direction:r("stage")},n.items.drop.filter.tableHead[0]),l.createElement(V,{requestSort:t,getSortDirection:r,data:a}),l.createElement(M,{onClick:()=>t("energy"),direction:r("energy")},l.createElement(F,{name:"energy",alt:n.items.drop.filter.tableHead[2]}))))},R=e=>{var{sortedData:t}=e,{itemString:r}=(0,d.f)();return l.createElement(c.Z,null,t.map(((e,t)=>l.createElement(s.Z,{hover:!0,key:e.stage},l.createElement(p.Z,null,e.stage),Object.entries(e).map(((e,t)=>{var[a,n]=e;return"stage"===a||"energy"===a?null:l.createElement(p.Z,{key:t},r.rarity[n])})),l.createElement(p.Z,null,e.energy)))))},q=(e,t)=>{var r=e=>{var t=e.split("-");return 1e3*parseInt(t[0])+10*parseInt(t[1].split(" ")[0])+(t[1].includes("free")?1:0)+(t.length>2?parseInt(t[2]):0)};e.sort(((e,a)=>{var n,l;return"stage"===t.key?(n=r(e.stage),l=r(a.stage)):(n=e[t.key],l=a[t.key]),n<l?"asc"===t.direction?-1:1:n>l?"asc"===t.direction?1:-1:0}))},K=()=>{var{pageString:e}=(0,d.f)(),{0:t,1:r}=(0,l.useState)({filterBtnValue:[],data:[],isHelpModalOpen:!1}),n=(e,t)=>{if(0!==t.length){var n=[].concat(...P.map((e=>e.stages.map((t=>{var{materials:r,trainItems:n,expPotions:l}=t;return _(_({},(0,a.Z)(t,C)),{},{drops:r.concat(n,l),chapter:e.chapter})}))))).filter((e=>t.every((t=>{var r=!1;return e.drops.forEach((e=>{if(e.id===t)return r=!0,!1})),r}))));n=n.map((e=>{var r={stage:e.chapter+"-"+e.stage,energy:e.energy};return e.drops.forEach((e=>{t.includes(e.id)&&(r[e.id]=e.rarity)})),r})),r((e=>_(_({},e),{},{filterBtnValue:t,data:n})))}else r((e=>_(_({},e),{},{filterBtnValue:t,data:[]})))},i=e=>()=>{r((t=>_(_({},t),{},{isHelpModalOpen:e})))};return l.createElement(l.Fragment,null,l.createElement(g.Z,{title:e.items.drop.filter.helmet.title,description:e.items.drop.filter.helmet.description,path:"/items/drop/filter/"}),l.createElement(m.Z,{panelsWidth:["62%","38%"]},l.createElement(B,{filterBtnValue:t.filterBtnValue,filterBy:n,clearBtnValue:e=>n(0,[])}),l.createElement(u.Z,{data:t.data,head:l.createElement(N,null),body:l.createElement(R,null),sortFunc:q,defaultSortKey:t.filterBtnValue[0],handleModalOpen:i(!0),maxHeight:"calc(100vh - 16rem)",striped:!0})),l.createElement(O.p2,{title:e.items.drop.filter.helpModal.title,open:t.isHelpModalOpen,onClose:i(!1),content:e.items.drop.filter.helpModal.content,ariaLabelledby:"help-modal-title",ariaDescribedby:"help-modal-description"}))}}}]);
//# sourceMappingURL=component---src-pages-items-drop-filter-js-253459d7d2ea40c16727.js.map