{"version":3,"file":"component---src-pages-battle-index-tsx-16c0edc6c2ca28db4578.js","mappings":"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","sources":["webpack://tkfmtools/./node_modules/@babel/runtime/helpers/classCallCheck.js","webpack://tkfmtools/./node_modules/@babel/runtime/helpers/createClass.js","webpack://tkfmtools/./node_modules/@babel/runtime/helpers/get.js","webpack://tkfmtools/./node_modules/@babel/runtime/helpers/getPrototypeOf.js","webpack://tkfmtools/./node_modules/@babel/runtime/helpers/inherits.js","webpack://tkfmtools/./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","webpack://tkfmtools/./node_modules/@babel/runtime/helpers/superPropBase.js","webpack://tkfmtools/./node_modules/@material-ui/core/esm/FormControl/FormControl.js","webpack://tkfmtools/./node_modules/@material-ui/core/esm/FormControl/FormControlContext.js","webpack://tkfmtools/./node_modules/@material-ui/core/esm/FormControl/formControlState.js","webpack://tkfmtools/./node_modules/@material-ui/core/esm/FormControl/useFormControl.js","webpack://tkfmtools/./node_modules/@material-ui/core/esm/FormLabel/FormLabel.js","webpack://tkfmtools/./node_modules/@material-ui/core/esm/InputBase/utils.js","webpack://tkfmtools/./node_modules/backo2/index.js","webpack://tkfmtools/./node_modules/base64-arraybuffer/lib/base64-arraybuffer.js","webpack://tkfmtools/./node_modules/component-emitter/index.js","webpack://tkfmtools/./node_modules/debug/src/browser.js","webpack://tkfmtools/./node_modules/debug/src/common.js","webpack://tkfmtools/./node_modules/engine.io-parser/lib/commons.js","webpack://tkfmtools/./node_modules/engine.io-parser/lib/decodePacket.browser.js","webpack://tkfmtools/./node_modules/engine.io-parser/lib/encodePacket.browser.js","webpack://tkfmtools/./node_modules/engine.io-parser/lib/index.js","webpack://tkfmtools/./node_modules/gatsby/node_modules/engine.io-client/lib/globalThis.browser.js","webpack://tkfmtools/./node_modules/gatsby/node_modules/engine.io-client/lib/index.js","webpack://tkfmtools/./node_modules/gatsby/node_modules/engine.io-client/lib/socket.js","webpack://tkfmtools/./node_modules/gatsby/node_modules/engine.io-client/lib/transport.js","webpack://tkfmtools/./node_modules/gatsby/node_modules/engine.io-client/lib/transports/index.js","webpack://tkfmtools/./node_modules/gatsby/node_modules/engine.io-client/lib/transports/polling-jsonp.js","webpack://tkfmtools/./node_modules/gatsby/node_modules/engine.io-client/lib/transports/polling-xhr.js","webpack://tkfmtools/./node_modules/gatsby/node_modules/engine.io-client/lib/transports/polling.js","webpack://tkfmtools/./node_modules/gatsby/node_modules/engine.io-client/lib/transports/websocket-constructor.browser.js","webpack://tkfmtools/./node_modules/gatsby/node_modules/engine.io-client/lib/transports/websocket.js","webpack://tkfmtools/./node_modules/gatsby/node_modules/engine.io-client/lib/util.js","webpack://tkfmtools/./node_modules/gatsby/node_modules/engine.io-client/lib/xmlhttprequest.js","webpack://tkfmtools/./node_modules/gatsby/node_modules/engine.io-client/node_modules/debug/src/browser.js","webpack://tkfmtools/./node_modules/gatsby/node_modules/engine.io-client/node_modules/debug/src/common.js","webpack://tkfmtools/./node_modules/gatsby/node_modules/socket.io-client/build/index.js","webpack://tkfmtools/./node_modules/gatsby/node_modules/socket.io-client/build/manager.js","webpack://tkfmtools/./node_modules/gatsby/node_modules/socket.io-client/build/on.js","webpack://tkfmtools/./node_modules/gatsby/node_modules/socket.io-client/build/socket.js","webpack://tkfmtools/./node_modules/gatsby/node_modules/socket.io-client/build/url.js","webpack://tkfmtools/./node_modules/gatsby/node_modules/socket.io-client/node_modules/debug/src/browser.js","webpack://tkfmtools/./node_modules/gatsby/node_modules/socket.io-client/node_modules/debug/src/common.js","webpack://tkfmtools/./node_modules/has-cors/index.js","webpack://tkfmtools/./node_modules/lodash.isplainobject/index.js","webpack://tkfmtools/./node_modules/ms/index.js","webpack://tkfmtools/./node_modules/parseqs/index.js","webpack://tkfmtools/./node_modules/parseuri/index.js","webpack://tkfmtools/./node_modules/react-cookies/build/cookie.js","webpack://tkfmtools/./node_modules/react-cookies/node_modules/cookie/index.js","webpack://tkfmtools/./node_modules/rfc6902/diff.js","webpack://tkfmtools/./node_modules/rfc6902/index.js","webpack://tkfmtools/./node_modules/rfc6902/patch.js","webpack://tkfmtools/./node_modules/rfc6902/pointer.js","webpack://tkfmtools/./node_modules/rfc6902/util.js","webpack://tkfmtools/./node_modules/setimmediate/setImmediate.js","webpack://tkfmtools/./node_modules/socket.io-parser/dist/binary.js","webpack://tkfmtools/./node_modules/socket.io-parser/dist/index.js","webpack://tkfmtools/./node_modules/socket.io-parser/dist/is-binary.js","webpack://tkfmtools/./node_modules/yeast/index.js","webpack://tkfmtools/./node_modules/nanoid/non-secure/index.js","webpack://tkfmtools/./node_modules/immer/dist/immer.esm.js","webpack://tkfmtools/./node_modules/boardgame.io/dist/esm/turn-order-406c4349.js","webpack://tkfmtools/./node_modules/boardgame.io/dist/esm/reducer-efc3ec3e.js","webpack://tkfmtools/./node_modules/boardgame.io/dist/esm/initialize-8da88d04.js","webpack://tkfmtools/./node_modules/boardgame.io/dist/esm/transport-ce07b771.js","webpack://tkfmtools/./node_modules/boardgame.io/dist/esm/client-48f68c72.js","webpack://tkfmtools/./node_modules/flatted/esm/index.js","webpack://tkfmtools/./node_modules/boardgame.io/dist/esm/ai-7a5eea10.js","webpack://tkfmtools/./node_modules/boardgame.io/dist/esm/client-5f57c3f2.js","webpack://tkfmtools/./node_modules/boardgame.io/dist/esm/util-37c7b83c.js","webpack://tkfmtools/./node_modules/boardgame.io/dist/esm/master-6e556fa8.js","webpack://tkfmtools/./node_modules/boardgame.io/dist/esm/filter-player-view-7cb2b79d.js","webpack://tkfmtools/./node_modules/boardgame.io/dist/esm/socketio-6e1083c8.js","webpack://tkfmtools/./node_modules/boardgame.io/dist/esm/react.js","webpack://tkfmtools/./src/components/battle/CharacterButton.tsx","webpack://tkfmtools/./src/components/battle/BattleHelp.tsx","webpack://tkfmtools/./src/components/battle/CharacterDetailsPopover.tsx","webpack://tkfmtools/./src/components/battle/BattleLog.tsx","webpack://tkfmtools/./node_modules/@material-ui/core/esm/Slider/ValueLabel.js","webpack://tkfmtools/./node_modules/@material-ui/core/esm/Slider/Slider.js","webpack://tkfmtools/./src/components/battle/BattleSettings.tsx","webpack://tkfmtools/./src/utils/battle/calculators.ts","webpack://tkfmtools/./src/utils/battle/helpers.ts","webpack://tkfmtools/./src/utils/battle/processSkill.ts","webpack://tkfmtools/./src/utils/battle/battle.ts","webpack://tkfmtools/./src/utils/battle/bots.ts","webpack://tkfmtools/./src/utils/battle/moves.ts","webpack://tkfmtools/./src/components/battle/BattleBoard.tsx","webpack://tkfmtools/./src/components/battle/BattleApp.tsx","webpack://tkfmtools/./src/pages/battle/index.tsx"],"sourcesContent":["function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var superPropBase = require(\"./superPropBase.js\");\n\nfunction _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    module.exports = _get = Reflect.get;\n    module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  } else {\n    module.exports = _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n\n    module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nmodule.exports = _get;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var setPrototypeOf = require(\"./setPrototypeOf.js\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var _typeof = require(\"@babel/runtime/helpers/typeof\")[\"default\"];\n\nvar assertThisInitialized = require(\"./assertThisInitialized.js\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var getPrototypeOf = require(\"./getPrototypeOf.js\");\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nmodule.exports = _superPropBase;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport { isFilled, isAdornedStart } from '../InputBase/utils';\nimport withStyles from '../styles/withStyles';\nimport capitalize from '../utils/capitalize';\nimport isMuiElement from '../utils/isMuiElement';\nimport FormControlContext from './FormControlContext';\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {\n    display: 'inline-flex',\n    flexDirection: 'column',\n    position: 'relative',\n    // Reset fieldset default style.\n    minWidth: 0,\n    padding: 0,\n    margin: 0,\n    border: 0,\n    verticalAlign: 'top' // Fix alignment issue on Safari.\n\n  },\n\n  /* Styles applied to the root element if `margin=\"normal\"`. */\n  marginNormal: {\n    marginTop: 16,\n    marginBottom: 8\n  },\n\n  /* Styles applied to the root element if `margin=\"dense\"`. */\n  marginDense: {\n    marginTop: 8,\n    marginBottom: 4\n  },\n\n  /* Styles applied to the root element if `fullWidth={true}`. */\n  fullWidth: {\n    width: '100%'\n  }\n};\n/**\n * Provides context such as filled/focused/error/required for form inputs.\n * Relying on the context provides high flexibility and ensures that the state always stays\n * consistent across the children of the `FormControl`.\n * This context is used by the following components:\n *\n *  - FormLabel\n *  - FormHelperText\n *  - Input\n *  - InputLabel\n *\n * You can find one composition example below and more going to [the demos](/components/text-fields/#components).\n *\n * ```jsx\n * <FormControl>\n *   <InputLabel htmlFor=\"my-input\">Email address</InputLabel>\n *   <Input id=\"my-input\" aria-describedby=\"my-helper-text\" />\n *   <FormHelperText id=\"my-helper-text\">We'll never share your email.</FormHelperText>\n * </FormControl>\n * ```\n *\n * Only one input can be used within a FormControl.\n */\n\nvar FormControl = /*#__PURE__*/React.forwardRef(function FormControl(props, ref) {\n  var children = props.children,\n      classes = props.classes,\n      className = props.className,\n      _props$color = props.color,\n      color = _props$color === void 0 ? 'primary' : _props$color,\n      _props$component = props.component,\n      Component = _props$component === void 0 ? 'div' : _props$component,\n      _props$disabled = props.disabled,\n      disabled = _props$disabled === void 0 ? false : _props$disabled,\n      _props$error = props.error,\n      error = _props$error === void 0 ? false : _props$error,\n      _props$fullWidth = props.fullWidth,\n      fullWidth = _props$fullWidth === void 0 ? false : _props$fullWidth,\n      visuallyFocused = props.focused,\n      _props$hiddenLabel = props.hiddenLabel,\n      hiddenLabel = _props$hiddenLabel === void 0 ? false : _props$hiddenLabel,\n      _props$margin = props.margin,\n      margin = _props$margin === void 0 ? 'none' : _props$margin,\n      _props$required = props.required,\n      required = _props$required === void 0 ? false : _props$required,\n      size = props.size,\n      _props$variant = props.variant,\n      variant = _props$variant === void 0 ? 'standard' : _props$variant,\n      other = _objectWithoutProperties(props, [\"children\", \"classes\", \"className\", \"color\", \"component\", \"disabled\", \"error\", \"fullWidth\", \"focused\", \"hiddenLabel\", \"margin\", \"required\", \"size\", \"variant\"]);\n\n  var _React$useState = React.useState(function () {\n    // We need to iterate through the children and find the Input in order\n    // to fully support server-side rendering.\n    var initialAdornedStart = false;\n\n    if (children) {\n      React.Children.forEach(children, function (child) {\n        if (!isMuiElement(child, ['Input', 'Select'])) {\n          return;\n        }\n\n        var input = isMuiElement(child, ['Select']) ? child.props.input : child;\n\n        if (input && isAdornedStart(input.props)) {\n          initialAdornedStart = true;\n        }\n      });\n    }\n\n    return initialAdornedStart;\n  }),\n      adornedStart = _React$useState[0],\n      setAdornedStart = _React$useState[1];\n\n  var _React$useState2 = React.useState(function () {\n    // We need to iterate through the children and find the Input in order\n    // to fully support server-side rendering.\n    var initialFilled = false;\n\n    if (children) {\n      React.Children.forEach(children, function (child) {\n        if (!isMuiElement(child, ['Input', 'Select'])) {\n          return;\n        }\n\n        if (isFilled(child.props, true)) {\n          initialFilled = true;\n        }\n      });\n    }\n\n    return initialFilled;\n  }),\n      filled = _React$useState2[0],\n      setFilled = _React$useState2[1];\n\n  var _React$useState3 = React.useState(false),\n      _focused = _React$useState3[0],\n      setFocused = _React$useState3[1];\n\n  var focused = visuallyFocused !== undefined ? visuallyFocused : _focused;\n\n  if (disabled && focused) {\n    setFocused(false);\n  }\n\n  var registerEffect;\n\n  if (process.env.NODE_ENV !== 'production') {\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    var registeredInput = React.useRef(false);\n\n    registerEffect = function registerEffect() {\n      if (registeredInput.current) {\n        console.error(['Material-UI: There are multiple InputBase components inside a FormControl.', 'This is not supported. It might cause infinite rendering loops.', 'Only use one InputBase.'].join('\\n'));\n      }\n\n      registeredInput.current = true;\n      return function () {\n        registeredInput.current = false;\n      };\n    };\n  }\n\n  var onFilled = React.useCallback(function () {\n    setFilled(true);\n  }, []);\n  var onEmpty = React.useCallback(function () {\n    setFilled(false);\n  }, []);\n  var childContext = {\n    adornedStart: adornedStart,\n    setAdornedStart: setAdornedStart,\n    color: color,\n    disabled: disabled,\n    error: error,\n    filled: filled,\n    focused: focused,\n    fullWidth: fullWidth,\n    hiddenLabel: hiddenLabel,\n    margin: (size === 'small' ? 'dense' : undefined) || margin,\n    onBlur: function onBlur() {\n      setFocused(false);\n    },\n    onEmpty: onEmpty,\n    onFilled: onFilled,\n    onFocus: function onFocus() {\n      setFocused(true);\n    },\n    registerEffect: registerEffect,\n    required: required,\n    variant: variant\n  };\n  return /*#__PURE__*/React.createElement(FormControlContext.Provider, {\n    value: childContext\n  }, /*#__PURE__*/React.createElement(Component, _extends({\n    className: clsx(classes.root, className, margin !== 'none' && classes[\"margin\".concat(capitalize(margin))], fullWidth && classes.fullWidth),\n    ref: ref\n  }, other), children));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiFormControl'\n})(FormControl);","import * as React from 'react';\n/**\n * @ignore - internal component.\n */\n\nvar FormControlContext = React.createContext();\n\nif (process.env.NODE_ENV !== 'production') {\n  FormControlContext.displayName = 'FormControlContext';\n}\n\nexport function useFormControl() {\n  return React.useContext(FormControlContext);\n}\nexport default FormControlContext;","export default function formControlState(_ref) {\n  var props = _ref.props,\n      states = _ref.states,\n      muiFormControl = _ref.muiFormControl;\n  return states.reduce(function (acc, state) {\n    acc[state] = props[state];\n\n    if (muiFormControl) {\n      if (typeof props[state] === 'undefined') {\n        acc[state] = muiFormControl[state];\n      }\n    }\n\n    return acc;\n  }, {});\n}","import * as React from 'react';\nimport FormControlContext from './FormControlContext';\nexport default function useFormControl() {\n  return React.useContext(FormControlContext);\n}","import _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport formControlState from '../FormControl/formControlState';\nimport useFormControl from '../FormControl/useFormControl';\nimport capitalize from '../utils/capitalize';\nimport withStyles from '../styles/withStyles';\nexport var styles = function styles(theme) {\n  return {\n    /* Styles applied to the root element. */\n    root: _extends({\n      color: theme.palette.text.secondary\n    }, theme.typography.body1, {\n      lineHeight: 1,\n      padding: 0,\n      '&$focused': {\n        color: theme.palette.primary.main\n      },\n      '&$disabled': {\n        color: theme.palette.text.disabled\n      },\n      '&$error': {\n        color: theme.palette.error.main\n      }\n    }),\n\n    /* Styles applied to the root element if the color is secondary. */\n    colorSecondary: {\n      '&$focused': {\n        color: theme.palette.secondary.main\n      }\n    },\n\n    /* Pseudo-class applied to the root element if `focused={true}`. */\n    focused: {},\n\n    /* Pseudo-class applied to the root element if `disabled={true}`. */\n    disabled: {},\n\n    /* Pseudo-class applied to the root element if `error={true}`. */\n    error: {},\n\n    /* Pseudo-class applied to the root element if `filled={true}`. */\n    filled: {},\n\n    /* Pseudo-class applied to the root element if `required={true}`. */\n    required: {},\n\n    /* Styles applied to the asterisk element. */\n    asterisk: {\n      '&$error': {\n        color: theme.palette.error.main\n      }\n    }\n  };\n};\nvar FormLabel = /*#__PURE__*/React.forwardRef(function FormLabel(props, ref) {\n  var children = props.children,\n      classes = props.classes,\n      className = props.className,\n      color = props.color,\n      _props$component = props.component,\n      Component = _props$component === void 0 ? 'label' : _props$component,\n      disabled = props.disabled,\n      error = props.error,\n      filled = props.filled,\n      focused = props.focused,\n      required = props.required,\n      other = _objectWithoutProperties(props, [\"children\", \"classes\", \"className\", \"color\", \"component\", \"disabled\", \"error\", \"filled\", \"focused\", \"required\"]);\n\n  var muiFormControl = useFormControl();\n  var fcs = formControlState({\n    props: props,\n    muiFormControl: muiFormControl,\n    states: ['color', 'required', 'focused', 'disabled', 'error', 'filled']\n  });\n  return /*#__PURE__*/React.createElement(Component, _extends({\n    className: clsx(classes.root, classes[\"color\".concat(capitalize(fcs.color || 'primary'))], className, fcs.disabled && classes.disabled, fcs.error && classes.error, fcs.filled && classes.filled, fcs.focused && classes.focused, fcs.required && classes.required),\n    ref: ref\n  }, other), children, fcs.required && /*#__PURE__*/React.createElement(\"span\", {\n    \"aria-hidden\": true,\n    className: clsx(classes.asterisk, fcs.error && classes.error)\n  }, \"\\u2009\", '*'));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiFormLabel'\n})(FormLabel);","// Supports determination of isControlled().\n// Controlled input accepts its current value as a prop.\n//\n// @see https://facebook.github.io/react/docs/forms.html#controlled-components\n// @param value\n// @returns {boolean} true if string (including '') or number (including zero)\nexport function hasValue(value) {\n  return value != null && !(Array.isArray(value) && value.length === 0);\n} // Determine if field is empty or filled.\n// Response determines if label is presented above field or as placeholder.\n//\n// @param obj\n// @param SSR\n// @returns {boolean} False when not present or empty string.\n//                    True when any number or string with length.\n\nexport function isFilled(obj) {\n  var SSR = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  return obj && (hasValue(obj.value) && obj.value !== '' || SSR && hasValue(obj.defaultValue) && obj.defaultValue !== '');\n} // Determine if an Input is adorned on start.\n// It's corresponding to the left with LTR.\n//\n// @param obj\n// @returns {boolean} False when no adornments.\n//                    True when adorned at the start.\n\nexport function isAdornedStart(obj) {\n  return obj.startAdornment;\n}","/**\n * Expose `Backoff`.\n */\nmodule.exports = Backoff;\n/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction Backoff(opts) {\n  opts = opts || {};\n  this.ms = opts.min || 100;\n  this.max = opts.max || 10000;\n  this.factor = opts.factor || 2;\n  this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n  this.attempts = 0;\n}\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\n\n\nBackoff.prototype.duration = function () {\n  var ms = this.ms * Math.pow(this.factor, this.attempts++);\n\n  if (this.jitter) {\n    var rand = Math.random();\n    var deviation = Math.floor(rand * this.jitter * ms);\n    ms = (Math.floor(rand * 10) & 1) == 0 ? ms - deviation : ms + deviation;\n  }\n\n  return Math.min(ms, this.max) | 0;\n};\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\n\n\nBackoff.prototype.reset = function () {\n  this.attempts = 0;\n};\n/**\n * Set the minimum duration\n *\n * @api public\n */\n\n\nBackoff.prototype.setMin = function (min) {\n  this.ms = min;\n};\n/**\n * Set the maximum duration\n *\n * @api public\n */\n\n\nBackoff.prototype.setMax = function (max) {\n  this.max = max;\n};\n/**\n * Set the jitter\n *\n * @api public\n */\n\n\nBackoff.prototype.setJitter = function (jitter) {\n  this.jitter = jitter;\n};","/*\n * base64-arraybuffer\n * https://github.com/niklasvh/base64-arraybuffer\n *\n * Copyright (c) 2012 Niklas von Hertzen\n * Licensed under the MIT license.\n */\n(function (chars) {\n  \"use strict\";\n\n  exports.encode = function (arraybuffer) {\n    var bytes = new Uint8Array(arraybuffer),\n        i,\n        len = bytes.length,\n        base64 = \"\";\n\n    for (i = 0; i < len; i += 3) {\n      base64 += chars[bytes[i] >> 2];\n      base64 += chars[(bytes[i] & 3) << 4 | bytes[i + 1] >> 4];\n      base64 += chars[(bytes[i + 1] & 15) << 2 | bytes[i + 2] >> 6];\n      base64 += chars[bytes[i + 2] & 63];\n    }\n\n    if (len % 3 === 2) {\n      base64 = base64.substring(0, base64.length - 1) + \"=\";\n    } else if (len % 3 === 1) {\n      base64 = base64.substring(0, base64.length - 2) + \"==\";\n    }\n\n    return base64;\n  };\n\n  exports.decode = function (base64) {\n    var bufferLength = base64.length * 0.75,\n        len = base64.length,\n        i,\n        p = 0,\n        encoded1,\n        encoded2,\n        encoded3,\n        encoded4;\n\n    if (base64[base64.length - 1] === \"=\") {\n      bufferLength--;\n\n      if (base64[base64.length - 2] === \"=\") {\n        bufferLength--;\n      }\n    }\n\n    var arraybuffer = new ArrayBuffer(bufferLength),\n        bytes = new Uint8Array(arraybuffer);\n\n    for (i = 0; i < len; i += 4) {\n      encoded1 = chars.indexOf(base64[i]);\n      encoded2 = chars.indexOf(base64[i + 1]);\n      encoded3 = chars.indexOf(base64[i + 2]);\n      encoded4 = chars.indexOf(base64[i + 3]);\n      bytes[p++] = encoded1 << 2 | encoded2 >> 4;\n      bytes[p++] = (encoded2 & 15) << 4 | encoded3 >> 2;\n      bytes[p++] = (encoded3 & 3) << 6 | encoded4 & 63;\n    }\n\n    return arraybuffer;\n  };\n})(\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\");","/**\r\n * Expose `Emitter`.\r\n */\nif (typeof module !== 'undefined') {\n  module.exports = Emitter;\n}\n/**\r\n * Initialize a new `Emitter`.\r\n *\r\n * @api public\r\n */\n\n\nfunction Emitter(obj) {\n  if (obj) return mixin(obj);\n}\n\n;\n/**\r\n * Mixin the emitter properties.\r\n *\r\n * @param {Object} obj\r\n * @return {Object}\r\n * @api private\r\n */\n\nfunction mixin(obj) {\n  for (var key in Emitter.prototype) {\n    obj[key] = Emitter.prototype[key];\n  }\n\n  return obj;\n}\n/**\r\n * Listen on the given `event` with `fn`.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\n\n\nEmitter.prototype.on = Emitter.prototype.addEventListener = function (event, fn) {\n  this._callbacks = this._callbacks || {};\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || []).push(fn);\n  return this;\n};\n/**\r\n * Adds an `event` listener that will be invoked a single\r\n * time then automatically removed.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\n\n\nEmitter.prototype.once = function (event, fn) {\n  function on() {\n    this.off(event, on);\n    fn.apply(this, arguments);\n  }\n\n  on.fn = fn;\n  this.on(event, on);\n  return this;\n};\n/**\r\n * Remove the given callback for `event` or all\r\n * registered callbacks.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\n\n\nEmitter.prototype.off = Emitter.prototype.removeListener = Emitter.prototype.removeAllListeners = Emitter.prototype.removeEventListener = function (event, fn) {\n  this._callbacks = this._callbacks || {}; // all\n\n  if (0 == arguments.length) {\n    this._callbacks = {};\n    return this;\n  } // specific event\n\n\n  var callbacks = this._callbacks['$' + event];\n  if (!callbacks) return this; // remove all handlers\n\n  if (1 == arguments.length) {\n    delete this._callbacks['$' + event];\n    return this;\n  } // remove specific handler\n\n\n  var cb;\n\n  for (var i = 0; i < callbacks.length; i++) {\n    cb = callbacks[i];\n\n    if (cb === fn || cb.fn === fn) {\n      callbacks.splice(i, 1);\n      break;\n    }\n  } // Remove event specific arrays for event types that no\n  // one is subscribed for to avoid memory leak.\n\n\n  if (callbacks.length === 0) {\n    delete this._callbacks['$' + event];\n  }\n\n  return this;\n};\n/**\r\n * Emit `event` with the given args.\r\n *\r\n * @param {String} event\r\n * @param {Mixed} ...\r\n * @return {Emitter}\r\n */\n\n\nEmitter.prototype.emit = function (event) {\n  this._callbacks = this._callbacks || {};\n  var args = new Array(arguments.length - 1),\n      callbacks = this._callbacks['$' + event];\n\n  for (var i = 1; i < arguments.length; i++) {\n    args[i - 1] = arguments[i];\n  }\n\n  if (callbacks) {\n    callbacks = callbacks.slice(0);\n\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\n      callbacks[i].apply(this, args);\n    }\n  }\n\n  return this;\n};\n/**\r\n * Return array of callbacks for `event`.\r\n *\r\n * @param {String} event\r\n * @return {Array}\r\n * @api public\r\n */\n\n\nEmitter.prototype.listeners = function (event) {\n  this._callbacks = this._callbacks || {};\n  return this._callbacks['$' + event] || [];\n};\n/**\r\n * Check if this emitter has `event` handlers.\r\n *\r\n * @param {String} event\r\n * @return {Boolean}\r\n * @api public\r\n */\n\n\nEmitter.prototype.hasListeners = function (event) {\n  return !!this.listeners(event).length;\n};","/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\n\nexports.destroy = function () {\n  var warned = false;\n  return function () {\n    if (!warned) {\n      warned = true;\n      console.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n    }\n  };\n}();\n/**\n * Colors.\n */\n\n\nexports.colors = ['#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC', '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF', '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC', '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF', '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC', '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033', '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366', '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933', '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC', '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF', '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33'];\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n// eslint-disable-next-line complexity\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n    return true;\n  } // Internet Explorer and Edge do not support colors.\n\n\n  if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n    return false;\n  } // Is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\n\n  return typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance || // Is firebug? http://stackoverflow.com/a/398120/376773\n  typeof window !== 'undefined' && window.console && (window.console.firebug || window.console.exception && window.console.table) || // Is firefox >= v31?\n  // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n  typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31 || // Double check webkit in userAgent just in case we are in a worker\n  typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/);\n}\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\n\nfunction formatArgs(args) {\n  args[0] = (this.useColors ? '%c' : '') + this.namespace + (this.useColors ? ' %c' : ' ') + args[0] + (this.useColors ? '%c ' : ' ') + '+' + module.exports.humanize(this.diff);\n\n  if (!this.useColors) {\n    return;\n  }\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit'); // The final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function (match) {\n    if (match === '%%') {\n      return;\n    }\n\n    index++;\n\n    if (match === '%c') {\n      // We only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n  args.splice(lastC, 0, c);\n}\n/**\n * Invokes `console.debug()` when available.\n * No-op when `console.debug` is not a \"function\".\n * If `console.debug` is not available, falls back\n * to `console.log`.\n *\n * @api public\n */\n\n\nexports.log = console.debug || console.log || function () {};\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\n\nfunction save(namespaces) {\n  try {\n    if (namespaces) {\n      exports.storage.setItem('debug', namespaces);\n    } else {\n      exports.storage.removeItem('debug');\n    }\n  } catch (error) {// Swallow\n    // XXX (@Qix-) should we be logging these?\n  }\n}\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\n\nfunction load() {\n  var r;\n\n  try {\n    r = exports.storage.getItem('debug');\n  } catch (error) {// Swallow\n    // XXX (@Qix-) should we be logging these?\n  } // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\n\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\n\nfunction localstorage() {\n  try {\n    // TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n    // The Browser also has localStorage in the global context.\n    return localStorage;\n  } catch (error) {// Swallow\n    // XXX (@Qix-) should we be logging these?\n  }\n}\n\nmodule.exports = require('./common')(exports);\nvar formatters = module.exports.formatters;\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n  try {\n    return JSON.stringify(v);\n  } catch (error) {\n    return '[UnexpectedJSONParseError]: ' + error.message;\n  }\n};","var _toConsumableArray = require(\"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/toConsumableArray\");\n\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\nfunction setup(env) {\n  createDebug.debug = createDebug;\n  createDebug.default = createDebug;\n  createDebug.coerce = coerce;\n  createDebug.disable = disable;\n  createDebug.enable = enable;\n  createDebug.enabled = enabled;\n  createDebug.humanize = require('ms');\n  createDebug.destroy = destroy;\n  Object.keys(env).forEach(function (key) {\n    createDebug[key] = env[key];\n  });\n  /**\n  * The currently active debug mode names, and names to skip.\n  */\n\n  createDebug.names = [];\n  createDebug.skips = [];\n  /**\n  * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n  *\n  * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n  */\n\n  createDebug.formatters = {};\n  /**\n  * Selects a color for a debug namespace\n  * @param {String} namespace The namespace string for the for the debug instance to be colored\n  * @return {Number|String} An ANSI color code for the given namespace\n  * @api private\n  */\n\n  function selectColor(namespace) {\n    var hash = 0;\n\n    for (var i = 0; i < namespace.length; i++) {\n      hash = (hash << 5) - hash + namespace.charCodeAt(i);\n      hash |= 0; // Convert to 32bit integer\n    }\n\n    return createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n  }\n\n  createDebug.selectColor = selectColor;\n  /**\n  * Create a debugger with the given `namespace`.\n  *\n  * @param {String} namespace\n  * @return {Function}\n  * @api public\n  */\n\n  function createDebug(namespace) {\n    var prevTime;\n    var enableOverride = null;\n    var namespacesCache;\n    var enabledCache;\n\n    function debug() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      // Disabled?\n      if (!debug.enabled) {\n        return;\n      }\n\n      var self = debug; // Set `diff` timestamp\n\n      var curr = Number(new Date());\n      var ms = curr - (prevTime || curr);\n      self.diff = ms;\n      self.prev = prevTime;\n      self.curr = curr;\n      prevTime = curr;\n      args[0] = createDebug.coerce(args[0]);\n\n      if (typeof args[0] !== 'string') {\n        // Anything else let's inspect with %O\n        args.unshift('%O');\n      } // Apply any `formatters` transformations\n\n\n      var index = 0;\n      args[0] = args[0].replace(/%([a-zA-Z%])/g, function (match, format) {\n        // If we encounter an escaped % then don't increase the array index\n        if (match === '%%') {\n          return '%';\n        }\n\n        index++;\n        var formatter = createDebug.formatters[format];\n\n        if (typeof formatter === 'function') {\n          var val = args[index];\n          match = formatter.call(self, val); // Now we need to remove `args[index]` since it's inlined in the `format`\n\n          args.splice(index, 1);\n          index--;\n        }\n\n        return match;\n      }); // Apply env-specific formatting (colors, etc.)\n\n      createDebug.formatArgs.call(self, args);\n      var logFn = self.log || createDebug.log;\n      logFn.apply(self, args);\n    }\n\n    debug.namespace = namespace;\n    debug.useColors = createDebug.useColors();\n    debug.color = createDebug.selectColor(namespace);\n    debug.extend = extend;\n    debug.destroy = createDebug.destroy; // XXX Temporary. Will be removed in the next major release.\n\n    Object.defineProperty(debug, 'enabled', {\n      enumerable: true,\n      configurable: false,\n      get: function get() {\n        if (enableOverride !== null) {\n          return enableOverride;\n        }\n\n        if (namespacesCache !== createDebug.namespaces) {\n          namespacesCache = createDebug.namespaces;\n          enabledCache = createDebug.enabled(namespace);\n        }\n\n        return enabledCache;\n      },\n      set: function set(v) {\n        enableOverride = v;\n      }\n    }); // Env-specific initialization logic for debug instances\n\n    if (typeof createDebug.init === 'function') {\n      createDebug.init(debug);\n    }\n\n    return debug;\n  }\n\n  function extend(namespace, delimiter) {\n    var newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n    newDebug.log = this.log;\n    return newDebug;\n  }\n  /**\n  * Enables a debug mode by namespaces. This can include modes\n  * separated by a colon and wildcards.\n  *\n  * @param {String} namespaces\n  * @api public\n  */\n\n\n  function enable(namespaces) {\n    createDebug.save(namespaces);\n    createDebug.namespaces = namespaces;\n    createDebug.names = [];\n    createDebug.skips = [];\n    var i;\n    var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n    var len = split.length;\n\n    for (i = 0; i < len; i++) {\n      if (!split[i]) {\n        // ignore empty strings\n        continue;\n      }\n\n      namespaces = split[i].replace(/\\*/g, '.*?');\n\n      if (namespaces[0] === '-') {\n        createDebug.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n      } else {\n        createDebug.names.push(new RegExp('^' + namespaces + '$'));\n      }\n    }\n  }\n  /**\n  * Disable debug output.\n  *\n  * @return {String} namespaces\n  * @api public\n  */\n\n\n  function disable() {\n    var namespaces = [].concat(_toConsumableArray(createDebug.names.map(toNamespace)), _toConsumableArray(createDebug.skips.map(toNamespace).map(function (namespace) {\n      return '-' + namespace;\n    }))).join(',');\n    createDebug.enable('');\n    return namespaces;\n  }\n  /**\n  * Returns true if the given mode name is enabled, false otherwise.\n  *\n  * @param {String} name\n  * @return {Boolean}\n  * @api public\n  */\n\n\n  function enabled(name) {\n    if (name[name.length - 1] === '*') {\n      return true;\n    }\n\n    var i;\n    var len;\n\n    for (i = 0, len = createDebug.skips.length; i < len; i++) {\n      if (createDebug.skips[i].test(name)) {\n        return false;\n      }\n    }\n\n    for (i = 0, len = createDebug.names.length; i < len; i++) {\n      if (createDebug.names[i].test(name)) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n  /**\n  * Convert regexp to namespace\n  *\n  * @param {RegExp} regxep\n  * @return {String} namespace\n  * @api private\n  */\n\n\n  function toNamespace(regexp) {\n    return regexp.toString().substring(2, regexp.toString().length - 2).replace(/\\.\\*\\?$/, '*');\n  }\n  /**\n  * Coerce `val`.\n  *\n  * @param {Mixed} val\n  * @return {Mixed}\n  * @api private\n  */\n\n\n  function coerce(val) {\n    if (val instanceof Error) {\n      return val.stack || val.message;\n    }\n\n    return val;\n  }\n  /**\n  * XXX DO NOT USE. This is a temporary stub function.\n  * XXX It WILL be removed in the next major release.\n  */\n\n\n  function destroy() {\n    console.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n  }\n\n  createDebug.enable(createDebug.load());\n  return createDebug;\n}\n\nmodule.exports = setup;","var PACKET_TYPES = Object.create(null); // no Map = no polyfill\n\nPACKET_TYPES[\"open\"] = \"0\";\nPACKET_TYPES[\"close\"] = \"1\";\nPACKET_TYPES[\"ping\"] = \"2\";\nPACKET_TYPES[\"pong\"] = \"3\";\nPACKET_TYPES[\"message\"] = \"4\";\nPACKET_TYPES[\"upgrade\"] = \"5\";\nPACKET_TYPES[\"noop\"] = \"6\";\nvar PACKET_TYPES_REVERSE = Object.create(null);\nObject.keys(PACKET_TYPES).forEach(function (key) {\n  PACKET_TYPES_REVERSE[PACKET_TYPES[key]] = key;\n});\nvar ERROR_PACKET = {\n  type: \"error\",\n  data: \"parser error\"\n};\nmodule.exports = {\n  PACKET_TYPES: PACKET_TYPES,\n  PACKET_TYPES_REVERSE: PACKET_TYPES_REVERSE,\n  ERROR_PACKET: ERROR_PACKET\n};","var _require = require(\"./commons\"),\n    PACKET_TYPES_REVERSE = _require.PACKET_TYPES_REVERSE,\n    ERROR_PACKET = _require.ERROR_PACKET;\n\nvar withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\nvar base64decoder;\n\nif (withNativeArrayBuffer) {\n  base64decoder = require(\"base64-arraybuffer\");\n}\n\nvar decodePacket = function decodePacket(encodedPacket, binaryType) {\n  if (typeof encodedPacket !== \"string\") {\n    return {\n      type: \"message\",\n      data: mapBinary(encodedPacket, binaryType)\n    };\n  }\n\n  var type = encodedPacket.charAt(0);\n\n  if (type === \"b\") {\n    return {\n      type: \"message\",\n      data: decodeBase64Packet(encodedPacket.substring(1), binaryType)\n    };\n  }\n\n  var packetType = PACKET_TYPES_REVERSE[type];\n\n  if (!packetType) {\n    return ERROR_PACKET;\n  }\n\n  return encodedPacket.length > 1 ? {\n    type: PACKET_TYPES_REVERSE[type],\n    data: encodedPacket.substring(1)\n  } : {\n    type: PACKET_TYPES_REVERSE[type]\n  };\n};\n\nvar decodeBase64Packet = function decodeBase64Packet(data, binaryType) {\n  if (base64decoder) {\n    var decoded = base64decoder.decode(data);\n    return mapBinary(decoded, binaryType);\n  } else {\n    return {\n      base64: true,\n      data: data\n    }; // fallback for old browsers\n  }\n};\n\nvar mapBinary = function mapBinary(data, binaryType) {\n  switch (binaryType) {\n    case \"blob\":\n      return data instanceof ArrayBuffer ? new Blob([data]) : data;\n\n    case \"arraybuffer\":\n    default:\n      return data;\n    // assuming the data is already an ArrayBuffer\n  }\n};\n\nmodule.exports = decodePacket;","var _require = require(\"./commons\"),\n    PACKET_TYPES = _require.PACKET_TYPES;\n\nvar withNativeBlob = typeof Blob === \"function\" || typeof Blob !== \"undefined\" && Object.prototype.toString.call(Blob) === \"[object BlobConstructor]\";\nvar withNativeArrayBuffer = typeof ArrayBuffer === \"function\"; // ArrayBuffer.isView method is not defined in IE10\n\nvar isView = function isView(obj) {\n  return typeof ArrayBuffer.isView === \"function\" ? ArrayBuffer.isView(obj) : obj && obj.buffer instanceof ArrayBuffer;\n};\n\nvar encodePacket = function encodePacket(_ref, supportsBinary, callback) {\n  var type = _ref.type,\n      data = _ref.data;\n\n  if (withNativeBlob && data instanceof Blob) {\n    if (supportsBinary) {\n      return callback(data);\n    } else {\n      return encodeBlobAsBase64(data, callback);\n    }\n  } else if (withNativeArrayBuffer && (data instanceof ArrayBuffer || isView(data))) {\n    if (supportsBinary) {\n      return callback(data);\n    } else {\n      return encodeBlobAsBase64(new Blob([data]), callback);\n    }\n  } // plain string\n\n\n  return callback(PACKET_TYPES[type] + (data || \"\"));\n};\n\nvar encodeBlobAsBase64 = function encodeBlobAsBase64(data, callback) {\n  var fileReader = new FileReader();\n\n  fileReader.onload = function () {\n    var content = fileReader.result.split(\",\")[1];\n    callback(\"b\" + content);\n  };\n\n  return fileReader.readAsDataURL(data);\n};\n\nmodule.exports = encodePacket;","var encodePacket = require(\"./encodePacket\");\n\nvar decodePacket = require(\"./decodePacket\");\n\nvar SEPARATOR = String.fromCharCode(30); // see https://en.wikipedia.org/wiki/Delimiter#ASCII_delimited_text\n\nvar encodePayload = function encodePayload(packets, callback) {\n  // some packets may be added to the array while encoding, so the initial length must be saved\n  var length = packets.length;\n  var encodedPackets = new Array(length);\n  var count = 0;\n  packets.forEach(function (packet, i) {\n    // force base64 encoding for binary packets\n    encodePacket(packet, false, function (encodedPacket) {\n      encodedPackets[i] = encodedPacket;\n\n      if (++count === length) {\n        callback(encodedPackets.join(SEPARATOR));\n      }\n    });\n  });\n};\n\nvar decodePayload = function decodePayload(encodedPayload, binaryType) {\n  var encodedPackets = encodedPayload.split(SEPARATOR);\n  var packets = [];\n\n  for (var i = 0; i < encodedPackets.length; i++) {\n    var decodedPacket = decodePacket(encodedPackets[i], binaryType);\n    packets.push(decodedPacket);\n\n    if (decodedPacket.type === \"error\") {\n      break;\n    }\n  }\n\n  return packets;\n};\n\nmodule.exports = {\n  protocol: 4,\n  encodePacket: encodePacket,\n  encodePayload: encodePayload,\n  decodePacket: decodePacket,\n  decodePayload: decodePayload\n};","module.exports = function () {\n  if (typeof self !== \"undefined\") {\n    return self;\n  } else if (typeof window !== \"undefined\") {\n    return window;\n  } else {\n    return Function(\"return this\")();\n  }\n}();","var Socket = require(\"./socket\");\n\nmodule.exports = function (uri, opts) {\n  return new Socket(uri, opts);\n};\n/**\n * Expose deps for legacy compatibility\n * and standalone browser access.\n */\n\n\nmodule.exports.Socket = Socket;\nmodule.exports.protocol = Socket.protocol; // this is an int\n\nmodule.exports.Transport = require(\"./transport\");\nmodule.exports.transports = require(\"./transports/index\");\nmodule.exports.parser = require(\"engine.io-parser\");","var _classCallCheck = require(\"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _inherits = require(\"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/inherits\");\n\nvar _possibleConstructorReturn = require(\"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nvar transports = require(\"./transports/index\");\n\nvar Emitter = require(\"component-emitter\");\n\nvar debug = require(\"debug\")(\"engine.io-client:socket\");\n\nvar parser = require(\"engine.io-parser\");\n\nvar parseuri = require(\"parseuri\");\n\nvar parseqs = require(\"parseqs\");\n\nvar Socket = /*#__PURE__*/function (_Emitter) {\n  \"use strict\";\n\n  _inherits(Socket, _Emitter);\n\n  var _super = _createSuper(Socket);\n\n  /**\n   * Socket constructor.\n   *\n   * @param {String|Object} uri or options\n   * @param {Object} options\n   * @api public\n   */\n  function Socket(uri) {\n    var _this;\n\n    var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Socket);\n\n    _this = _super.call(this);\n\n    if (uri && \"object\" === typeof uri) {\n      opts = uri;\n      uri = null;\n    }\n\n    if (uri) {\n      uri = parseuri(uri);\n      opts.hostname = uri.host;\n      opts.secure = uri.protocol === \"https\" || uri.protocol === \"wss\";\n      opts.port = uri.port;\n      if (uri.query) opts.query = uri.query;\n    } else if (opts.host) {\n      opts.hostname = parseuri(opts.host).host;\n    }\n\n    _this.secure = null != opts.secure ? opts.secure : typeof location !== \"undefined\" && \"https:\" === location.protocol;\n\n    if (opts.hostname && !opts.port) {\n      // if no port is specified manually, use the protocol default\n      opts.port = _this.secure ? \"443\" : \"80\";\n    }\n\n    _this.hostname = opts.hostname || (typeof location !== \"undefined\" ? location.hostname : \"localhost\");\n    _this.port = opts.port || (typeof location !== \"undefined\" && location.port ? location.port : _this.secure ? 443 : 80);\n    _this.transports = opts.transports || [\"polling\", \"websocket\"];\n    _this.readyState = \"\";\n    _this.writeBuffer = [];\n    _this.prevBufferLen = 0;\n    _this.opts = Object.assign({\n      path: \"/engine.io\",\n      agent: false,\n      withCredentials: false,\n      upgrade: true,\n      jsonp: true,\n      timestampParam: \"t\",\n      rememberUpgrade: false,\n      rejectUnauthorized: true,\n      perMessageDeflate: {\n        threshold: 1024\n      },\n      transportOptions: {}\n    }, opts);\n    _this.opts.path = _this.opts.path.replace(/\\/$/, \"\") + \"/\";\n\n    if (typeof _this.opts.query === \"string\") {\n      _this.opts.query = parseqs.decode(_this.opts.query);\n    } // set on handshake\n\n\n    _this.id = null;\n    _this.upgrades = null;\n    _this.pingInterval = null;\n    _this.pingTimeout = null; // set on heartbeat\n\n    _this.pingTimeoutTimer = null;\n\n    if (typeof addEventListener === \"function\") {\n      addEventListener(\"beforeunload\", function () {\n        if (_this.transport) {\n          // silently close the transport\n          _this.transport.removeAllListeners();\n\n          _this.transport.close();\n        }\n      }, false);\n    }\n\n    _this.open();\n\n    return _this;\n  }\n  /**\n   * Creates transport of the given type.\n   *\n   * @param {String} transport name\n   * @return {Transport}\n   * @api private\n   */\n\n\n  _createClass(Socket, [{\n    key: \"createTransport\",\n    value: function createTransport(name) {\n      debug('creating transport \"%s\"', name);\n      var query = clone(this.opts.query); // append engine.io protocol identifier\n\n      query.EIO = parser.protocol; // transport name\n\n      query.transport = name; // session id if we already have one\n\n      if (this.id) query.sid = this.id;\n      var opts = Object.assign({}, this.opts.transportOptions[name], this.opts, {\n        query: query,\n        socket: this,\n        hostname: this.hostname,\n        secure: this.secure,\n        port: this.port\n      });\n      debug(\"options: %j\", opts);\n      return new transports[name](opts);\n    }\n    /**\n     * Initializes transport to use and starts probe.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"open\",\n    value: function open() {\n      var transport;\n\n      if (this.opts.rememberUpgrade && Socket.priorWebsocketSuccess && this.transports.indexOf(\"websocket\") !== -1) {\n        transport = \"websocket\";\n      } else if (0 === this.transports.length) {\n        // Emit error on next tick so it can be listened to\n        var self = this;\n        setTimeout(function () {\n          self.emit(\"error\", \"No transports available\");\n        }, 0);\n        return;\n      } else {\n        transport = this.transports[0];\n      }\n\n      this.readyState = \"opening\"; // Retry with the next transport if the transport is disabled (jsonp: false)\n\n      try {\n        transport = this.createTransport(transport);\n      } catch (e) {\n        debug(\"error while creating transport: %s\", e);\n        this.transports.shift();\n        this.open();\n        return;\n      }\n\n      transport.open();\n      this.setTransport(transport);\n    }\n    /**\n     * Sets the current transport. Disables the existing one (if any).\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"setTransport\",\n    value: function setTransport(transport) {\n      debug(\"setting transport %s\", transport.name);\n      var self = this;\n\n      if (this.transport) {\n        debug(\"clearing existing transport %s\", this.transport.name);\n        this.transport.removeAllListeners();\n      } // set up transport\n\n\n      this.transport = transport; // set up transport listeners\n\n      transport.on(\"drain\", function () {\n        self.onDrain();\n      }).on(\"packet\", function (packet) {\n        self.onPacket(packet);\n      }).on(\"error\", function (e) {\n        self.onError(e);\n      }).on(\"close\", function () {\n        self.onClose(\"transport close\");\n      });\n    }\n    /**\n     * Probes a transport.\n     *\n     * @param {String} transport name\n     * @api private\n     */\n\n  }, {\n    key: \"probe\",\n    value: function probe(name) {\n      debug('probing transport \"%s\"', name);\n      var transport = this.createTransport(name, {\n        probe: 1\n      });\n      var failed = false;\n      var self = this;\n      Socket.priorWebsocketSuccess = false;\n\n      function onTransportOpen() {\n        if (self.onlyBinaryUpgrades) {\n          var upgradeLosesBinary = !this.supportsBinary && self.transport.supportsBinary;\n          failed = failed || upgradeLosesBinary;\n        }\n\n        if (failed) return;\n        debug('probe transport \"%s\" opened', name);\n        transport.send([{\n          type: \"ping\",\n          data: \"probe\"\n        }]);\n        transport.once(\"packet\", function (msg) {\n          if (failed) return;\n\n          if (\"pong\" === msg.type && \"probe\" === msg.data) {\n            debug('probe transport \"%s\" pong', name);\n            self.upgrading = true;\n            self.emit(\"upgrading\", transport);\n            if (!transport) return;\n            Socket.priorWebsocketSuccess = \"websocket\" === transport.name;\n            debug('pausing current transport \"%s\"', self.transport.name);\n            self.transport.pause(function () {\n              if (failed) return;\n              if (\"closed\" === self.readyState) return;\n              debug(\"changing transport and sending upgrade packet\");\n              cleanup();\n              self.setTransport(transport);\n              transport.send([{\n                type: \"upgrade\"\n              }]);\n              self.emit(\"upgrade\", transport);\n              transport = null;\n              self.upgrading = false;\n              self.flush();\n            });\n          } else {\n            debug('probe transport \"%s\" failed', name);\n            var err = new Error(\"probe error\");\n            err.transport = transport.name;\n            self.emit(\"upgradeError\", err);\n          }\n        });\n      }\n\n      function freezeTransport() {\n        if (failed) return; // Any callback called by transport should be ignored since now\n\n        failed = true;\n        cleanup();\n        transport.close();\n        transport = null;\n      } // Handle any error that happens while probing\n\n\n      function onerror(err) {\n        var error = new Error(\"probe error: \" + err);\n        error.transport = transport.name;\n        freezeTransport();\n        debug('probe transport \"%s\" failed because of error: %s', name, err);\n        self.emit(\"upgradeError\", error);\n      }\n\n      function onTransportClose() {\n        onerror(\"transport closed\");\n      } // When the socket is closed while we're probing\n\n\n      function onclose() {\n        onerror(\"socket closed\");\n      } // When the socket is upgraded while we're probing\n\n\n      function onupgrade(to) {\n        if (transport && to.name !== transport.name) {\n          debug('\"%s\" works - aborting \"%s\"', to.name, transport.name);\n          freezeTransport();\n        }\n      } // Remove all listeners on the transport and on self\n\n\n      function cleanup() {\n        transport.removeListener(\"open\", onTransportOpen);\n        transport.removeListener(\"error\", onerror);\n        transport.removeListener(\"close\", onTransportClose);\n        self.removeListener(\"close\", onclose);\n        self.removeListener(\"upgrading\", onupgrade);\n      }\n\n      transport.once(\"open\", onTransportOpen);\n      transport.once(\"error\", onerror);\n      transport.once(\"close\", onTransportClose);\n      this.once(\"close\", onclose);\n      this.once(\"upgrading\", onupgrade);\n      transport.open();\n    }\n    /**\n     * Called when connection is deemed open.\n     *\n     * @api public\n     */\n\n  }, {\n    key: \"onOpen\",\n    value: function onOpen() {\n      debug(\"socket open\");\n      this.readyState = \"open\";\n      Socket.priorWebsocketSuccess = \"websocket\" === this.transport.name;\n      this.emit(\"open\");\n      this.flush(); // we check for `readyState` in case an `open`\n      // listener already closed the socket\n\n      if (\"open\" === this.readyState && this.opts.upgrade && this.transport.pause) {\n        debug(\"starting upgrade probes\");\n        var i = 0;\n        var l = this.upgrades.length;\n\n        for (; i < l; i++) {\n          this.probe(this.upgrades[i]);\n        }\n      }\n    }\n    /**\n     * Handles a packet.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"onPacket\",\n    value: function onPacket(packet) {\n      if (\"opening\" === this.readyState || \"open\" === this.readyState || \"closing\" === this.readyState) {\n        debug('socket receive: type \"%s\", data \"%s\"', packet.type, packet.data);\n        this.emit(\"packet\", packet); // Socket is live - any packet counts\n\n        this.emit(\"heartbeat\");\n\n        switch (packet.type) {\n          case \"open\":\n            this.onHandshake(JSON.parse(packet.data));\n            break;\n\n          case \"ping\":\n            this.resetPingTimeout();\n            this.sendPacket(\"pong\");\n            this.emit(\"pong\");\n            break;\n\n          case \"error\":\n            var err = new Error(\"server error\");\n            err.code = packet.data;\n            this.onError(err);\n            break;\n\n          case \"message\":\n            this.emit(\"data\", packet.data);\n            this.emit(\"message\", packet.data);\n            break;\n        }\n      } else {\n        debug('packet received with socket readyState \"%s\"', this.readyState);\n      }\n    }\n    /**\n     * Called upon handshake completion.\n     *\n     * @param {Object} handshake obj\n     * @api private\n     */\n\n  }, {\n    key: \"onHandshake\",\n    value: function onHandshake(data) {\n      this.emit(\"handshake\", data);\n      this.id = data.sid;\n      this.transport.query.sid = data.sid;\n      this.upgrades = this.filterUpgrades(data.upgrades);\n      this.pingInterval = data.pingInterval;\n      this.pingTimeout = data.pingTimeout;\n      this.onOpen(); // In case open handler closes socket\n\n      if (\"closed\" === this.readyState) return;\n      this.resetPingTimeout();\n    }\n    /**\n     * Sets and resets ping timeout timer based on server pings.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"resetPingTimeout\",\n    value: function resetPingTimeout() {\n      var _this2 = this;\n\n      clearTimeout(this.pingTimeoutTimer);\n      this.pingTimeoutTimer = setTimeout(function () {\n        _this2.onClose(\"ping timeout\");\n      }, this.pingInterval + this.pingTimeout);\n    }\n    /**\n     * Called on `drain` event\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"onDrain\",\n    value: function onDrain() {\n      this.writeBuffer.splice(0, this.prevBufferLen); // setting prevBufferLen = 0 is very important\n      // for example, when upgrading, upgrade packet is sent over,\n      // and a nonzero prevBufferLen could cause problems on `drain`\n\n      this.prevBufferLen = 0;\n\n      if (0 === this.writeBuffer.length) {\n        this.emit(\"drain\");\n      } else {\n        this.flush();\n      }\n    }\n    /**\n     * Flush write buffers.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"flush\",\n    value: function flush() {\n      if (\"closed\" !== this.readyState && this.transport.writable && !this.upgrading && this.writeBuffer.length) {\n        debug(\"flushing %d packets in socket\", this.writeBuffer.length);\n        this.transport.send(this.writeBuffer); // keep track of current length of writeBuffer\n        // splice writeBuffer and callbackBuffer on `drain`\n\n        this.prevBufferLen = this.writeBuffer.length;\n        this.emit(\"flush\");\n      }\n    }\n    /**\n     * Sends a message.\n     *\n     * @param {String} message.\n     * @param {Function} callback function.\n     * @param {Object} options.\n     * @return {Socket} for chaining.\n     * @api public\n     */\n\n  }, {\n    key: \"write\",\n    value: function write(msg, options, fn) {\n      this.sendPacket(\"message\", msg, options, fn);\n      return this;\n    }\n  }, {\n    key: \"send\",\n    value: function send(msg, options, fn) {\n      this.sendPacket(\"message\", msg, options, fn);\n      return this;\n    }\n    /**\n     * Sends a packet.\n     *\n     * @param {String} packet type.\n     * @param {String} data.\n     * @param {Object} options.\n     * @param {Function} callback function.\n     * @api private\n     */\n\n  }, {\n    key: \"sendPacket\",\n    value: function sendPacket(type, data, options, fn) {\n      if (\"function\" === typeof data) {\n        fn = data;\n        data = undefined;\n      }\n\n      if (\"function\" === typeof options) {\n        fn = options;\n        options = null;\n      }\n\n      if (\"closing\" === this.readyState || \"closed\" === this.readyState) {\n        return;\n      }\n\n      options = options || {};\n      options.compress = false !== options.compress;\n      var packet = {\n        type: type,\n        data: data,\n        options: options\n      };\n      this.emit(\"packetCreate\", packet);\n      this.writeBuffer.push(packet);\n      if (fn) this.once(\"flush\", fn);\n      this.flush();\n    }\n    /**\n     * Closes the connection.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"close\",\n    value: function close() {\n      var self = this;\n\n      if (\"opening\" === this.readyState || \"open\" === this.readyState) {\n        this.readyState = \"closing\";\n\n        if (this.writeBuffer.length) {\n          this.once(\"drain\", function () {\n            if (this.upgrading) {\n              waitForUpgrade();\n            } else {\n              close();\n            }\n          });\n        } else if (this.upgrading) {\n          waitForUpgrade();\n        } else {\n          close();\n        }\n      }\n\n      function close() {\n        self.onClose(\"forced close\");\n        debug(\"socket closing - telling transport to close\");\n        self.transport.close();\n      }\n\n      function cleanupAndClose() {\n        self.removeListener(\"upgrade\", cleanupAndClose);\n        self.removeListener(\"upgradeError\", cleanupAndClose);\n        close();\n      }\n\n      function waitForUpgrade() {\n        // wait for upgrade to finish since we can't send packets while pausing a transport\n        self.once(\"upgrade\", cleanupAndClose);\n        self.once(\"upgradeError\", cleanupAndClose);\n      }\n\n      return this;\n    }\n    /**\n     * Called upon transport error\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"onError\",\n    value: function onError(err) {\n      debug(\"socket error %j\", err);\n      Socket.priorWebsocketSuccess = false;\n      this.emit(\"error\", err);\n      this.onClose(\"transport error\", err);\n    }\n    /**\n     * Called upon transport close.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"onClose\",\n    value: function onClose(reason, desc) {\n      if (\"opening\" === this.readyState || \"open\" === this.readyState || \"closing\" === this.readyState) {\n        debug('socket close with reason: \"%s\"', reason);\n        var self = this; // clear timers\n\n        clearTimeout(this.pingIntervalTimer);\n        clearTimeout(this.pingTimeoutTimer); // stop event from firing again for transport\n\n        this.transport.removeAllListeners(\"close\"); // ensure transport won't stay open\n\n        this.transport.close(); // ignore further transport communication\n\n        this.transport.removeAllListeners(); // set ready state\n\n        this.readyState = \"closed\"; // clear session id\n\n        this.id = null; // emit close event\n\n        this.emit(\"close\", reason, desc); // clean buffers after, so users can still\n        // grab the buffers on `close` event\n\n        self.writeBuffer = [];\n        self.prevBufferLen = 0;\n      }\n    }\n    /**\n     * Filters upgrades, returning only those matching client transports.\n     *\n     * @param {Array} server upgrades\n     * @api private\n     *\n     */\n\n  }, {\n    key: \"filterUpgrades\",\n    value: function filterUpgrades(upgrades) {\n      var filteredUpgrades = [];\n      var i = 0;\n      var j = upgrades.length;\n\n      for (; i < j; i++) {\n        if (~this.transports.indexOf(upgrades[i])) filteredUpgrades.push(upgrades[i]);\n      }\n\n      return filteredUpgrades;\n    }\n  }]);\n\n  return Socket;\n}(Emitter);\n\nSocket.priorWebsocketSuccess = false;\n/**\n * Protocol version.\n *\n * @api public\n */\n\nSocket.protocol = parser.protocol; // this is an int\n\nfunction clone(obj) {\n  var o = {};\n\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      o[i] = obj[i];\n    }\n  }\n\n  return o;\n}\n\nmodule.exports = Socket;","var _classCallCheck = require(\"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _inherits = require(\"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/inherits\");\n\nvar _possibleConstructorReturn = require(\"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nvar parser = require(\"engine.io-parser\");\n\nvar Emitter = require(\"component-emitter\");\n\nvar debug = require(\"debug\")(\"engine.io-client:transport\");\n\nvar Transport = /*#__PURE__*/function (_Emitter) {\n  \"use strict\";\n\n  _inherits(Transport, _Emitter);\n\n  var _super = _createSuper(Transport);\n\n  /**\n   * Transport abstract constructor.\n   *\n   * @param {Object} options.\n   * @api private\n   */\n  function Transport(opts) {\n    var _this;\n\n    _classCallCheck(this, Transport);\n\n    _this = _super.call(this);\n    _this.opts = opts;\n    _this.query = opts.query;\n    _this.readyState = \"\";\n    _this.socket = opts.socket;\n    return _this;\n  }\n  /**\n   * Emits an error.\n   *\n   * @param {String} str\n   * @return {Transport} for chaining\n   * @api public\n   */\n\n\n  _createClass(Transport, [{\n    key: \"onError\",\n    value: function onError(msg, desc) {\n      var err = new Error(msg);\n      err.type = \"TransportError\";\n      err.description = desc;\n      this.emit(\"error\", err);\n      return this;\n    }\n    /**\n     * Opens the transport.\n     *\n     * @api public\n     */\n\n  }, {\n    key: \"open\",\n    value: function open() {\n      if (\"closed\" === this.readyState || \"\" === this.readyState) {\n        this.readyState = \"opening\";\n        this.doOpen();\n      }\n\n      return this;\n    }\n    /**\n     * Closes the transport.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"close\",\n    value: function close() {\n      if (\"opening\" === this.readyState || \"open\" === this.readyState) {\n        this.doClose();\n        this.onClose();\n      }\n\n      return this;\n    }\n    /**\n     * Sends multiple packets.\n     *\n     * @param {Array} packets\n     * @api private\n     */\n\n  }, {\n    key: \"send\",\n    value: function send(packets) {\n      if (\"open\" === this.readyState) {\n        this.write(packets);\n      } else {\n        // this might happen if the transport was silently closed in the beforeunload event handler\n        debug(\"transport is not open, discarding packets\");\n      }\n    }\n    /**\n     * Called upon open\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"onOpen\",\n    value: function onOpen() {\n      this.readyState = \"open\";\n      this.writable = true;\n      this.emit(\"open\");\n    }\n    /**\n     * Called with data.\n     *\n     * @param {String} data\n     * @api private\n     */\n\n  }, {\n    key: \"onData\",\n    value: function onData(data) {\n      var packet = parser.decodePacket(data, this.socket.binaryType);\n      this.onPacket(packet);\n    }\n    /**\n     * Called with a decoded packet.\n     */\n\n  }, {\n    key: \"onPacket\",\n    value: function onPacket(packet) {\n      this.emit(\"packet\", packet);\n    }\n    /**\n     * Called upon close.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"onClose\",\n    value: function onClose() {\n      this.readyState = \"closed\";\n      this.emit(\"close\");\n    }\n  }]);\n\n  return Transport;\n}(Emitter);\n\nmodule.exports = Transport;","var XMLHttpRequest = require(\"xmlhttprequest-ssl\");\n\nvar XHR = require(\"./polling-xhr\");\n\nvar JSONP = require(\"./polling-jsonp\");\n\nvar websocket = require(\"./websocket\");\n\nexports.polling = polling;\nexports.websocket = websocket;\n/**\n * Polling transport polymorphic constructor.\n * Decides on xhr vs jsonp based on feature detection.\n *\n * @api private\n */\n\nfunction polling(opts) {\n  var xhr;\n  var xd = false;\n  var xs = false;\n  var jsonp = false !== opts.jsonp;\n\n  if (typeof location !== \"undefined\") {\n    var isSSL = \"https:\" === location.protocol;\n    var port = location.port; // some user agents have empty `location.port`\n\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n\n    xd = opts.hostname !== location.hostname || port !== opts.port;\n    xs = opts.secure !== isSSL;\n  }\n\n  opts.xdomain = xd;\n  opts.xscheme = xs;\n  xhr = new XMLHttpRequest(opts);\n\n  if (\"open\" in xhr && !opts.forceJSONP) {\n    return new XHR(opts);\n  } else {\n    if (!jsonp) throw new Error(\"JSONP disabled\");\n    return new JSONP(opts);\n  }\n}","var _classCallCheck = require(\"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _assertThisInitialized = require(\"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/assertThisInitialized\");\n\nvar _get = require(\"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/get\");\n\nvar _inherits = require(\"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/inherits\");\n\nvar _possibleConstructorReturn = require(\"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nvar Polling = require(\"./polling\");\n\nvar globalThis = require(\"../globalThis\");\n\nvar rNewline = /\\n/g;\nvar rEscapedNewline = /\\\\n/g;\n/**\n * Global JSONP callbacks.\n */\n\nvar callbacks;\n\nvar JSONPPolling = /*#__PURE__*/function (_Polling) {\n  \"use strict\";\n\n  _inherits(JSONPPolling, _Polling);\n\n  var _super = _createSuper(JSONPPolling);\n\n  /**\n   * JSONP Polling constructor.\n   *\n   * @param {Object} opts.\n   * @api public\n   */\n  function JSONPPolling(opts) {\n    var _this;\n\n    _classCallCheck(this, JSONPPolling);\n\n    _this = _super.call(this, opts);\n    _this.query = _this.query || {}; // define global callbacks array if not present\n    // we do this here (lazily) to avoid unneeded global pollution\n\n    if (!callbacks) {\n      // we need to consider multiple engines in the same page\n      callbacks = globalThis.___eio = globalThis.___eio || [];\n    } // callback identifier\n\n\n    _this.index = callbacks.length; // add callback to jsonp global\n\n    var self = _assertThisInitialized(_this);\n\n    callbacks.push(function (msg) {\n      self.onData(msg);\n    }); // append to query string\n\n    _this.query.j = _this.index;\n    return _this;\n  }\n  /**\n   * JSONP only supports binary as base64 encoded strings\n   */\n\n\n  _createClass(JSONPPolling, [{\n    key: \"supportsBinary\",\n    get: function get() {\n      return false;\n    }\n    /**\n     * Closes the socket.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"doClose\",\n    value: function doClose() {\n      if (this.script) {\n        // prevent spurious errors from being emitted when the window is unloaded\n        this.script.onerror = function () {};\n\n        this.script.parentNode.removeChild(this.script);\n        this.script = null;\n      }\n\n      if (this.form) {\n        this.form.parentNode.removeChild(this.form);\n        this.form = null;\n        this.iframe = null;\n      }\n\n      _get(_getPrototypeOf(JSONPPolling.prototype), \"doClose\", this).call(this);\n    }\n    /**\n     * Starts a poll cycle.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"doPoll\",\n    value: function doPoll() {\n      var self = this;\n      var script = document.createElement(\"script\");\n\n      if (this.script) {\n        this.script.parentNode.removeChild(this.script);\n        this.script = null;\n      }\n\n      script.async = true;\n      script.src = this.uri();\n\n      script.onerror = function (e) {\n        self.onError(\"jsonp poll error\", e);\n      };\n\n      var insertAt = document.getElementsByTagName(\"script\")[0];\n\n      if (insertAt) {\n        insertAt.parentNode.insertBefore(script, insertAt);\n      } else {\n        (document.head || document.body).appendChild(script);\n      }\n\n      this.script = script;\n      var isUAgecko = \"undefined\" !== typeof navigator && /gecko/i.test(navigator.userAgent);\n\n      if (isUAgecko) {\n        setTimeout(function () {\n          var iframe = document.createElement(\"iframe\");\n          document.body.appendChild(iframe);\n          document.body.removeChild(iframe);\n        }, 100);\n      }\n    }\n    /**\n     * Writes with a hidden iframe.\n     *\n     * @param {String} data to send\n     * @param {Function} called upon flush.\n     * @api private\n     */\n\n  }, {\n    key: \"doWrite\",\n    value: function doWrite(data, fn) {\n      var self = this;\n      var iframe;\n\n      if (!this.form) {\n        var form = document.createElement(\"form\");\n        var area = document.createElement(\"textarea\");\n        var id = this.iframeId = \"eio_iframe_\" + this.index;\n        form.className = \"socketio\";\n        form.style.position = \"absolute\";\n        form.style.top = \"-1000px\";\n        form.style.left = \"-1000px\";\n        form.target = id;\n        form.method = \"POST\";\n        form.setAttribute(\"accept-charset\", \"utf-8\");\n        area.name = \"d\";\n        form.appendChild(area);\n        document.body.appendChild(form);\n        this.form = form;\n        this.area = area;\n      }\n\n      this.form.action = this.uri();\n\n      function complete() {\n        initIframe();\n        fn();\n      }\n\n      function initIframe() {\n        if (self.iframe) {\n          try {\n            self.form.removeChild(self.iframe);\n          } catch (e) {\n            self.onError(\"jsonp polling iframe removal error\", e);\n          }\n        }\n\n        try {\n          // ie6 dynamic iframes with target=\"\" support (thanks Chris Lambacher)\n          var html = '<iframe src=\"javascript:0\" name=\"' + self.iframeId + '\">';\n          iframe = document.createElement(html);\n        } catch (e) {\n          iframe = document.createElement(\"iframe\");\n          iframe.name = self.iframeId;\n          iframe.src = \"javascript:0\";\n        }\n\n        iframe.id = self.iframeId;\n        self.form.appendChild(iframe);\n        self.iframe = iframe;\n      }\n\n      initIframe(); // escape \\n to prevent it from being converted into \\r\\n by some UAs\n      // double escaping is required for escaped new lines because unescaping of new lines can be done safely on server-side\n\n      data = data.replace(rEscapedNewline, \"\\\\\\n\");\n      this.area.value = data.replace(rNewline, \"\\\\n\");\n\n      try {\n        this.form.submit();\n      } catch (e) {}\n\n      if (this.iframe.attachEvent) {\n        this.iframe.onreadystatechange = function () {\n          if (self.iframe.readyState === \"complete\") {\n            complete();\n          }\n        };\n      } else {\n        this.iframe.onload = complete;\n      }\n    }\n  }]);\n\n  return JSONPPolling;\n}(Polling);\n\nmodule.exports = JSONPPolling;","var _classCallCheck = require(\"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _inherits = require(\"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/inherits\");\n\nvar _possibleConstructorReturn = require(\"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\n/* global attachEvent */\nvar XMLHttpRequest = require(\"xmlhttprequest-ssl\");\n\nvar Polling = require(\"./polling\");\n\nvar Emitter = require(\"component-emitter\");\n\nvar _require = require(\"../util\"),\n    pick = _require.pick;\n\nvar globalThis = require(\"../globalThis\");\n\nvar debug = require(\"debug\")(\"engine.io-client:polling-xhr\");\n/**\n * Empty function\n */\n\n\nfunction empty() {}\n\nvar hasXHR2 = function () {\n  var xhr = new XMLHttpRequest({\n    xdomain: false\n  });\n  return null != xhr.responseType;\n}();\n\nvar XHR = /*#__PURE__*/function (_Polling) {\n  \"use strict\";\n\n  _inherits(XHR, _Polling);\n\n  var _super = _createSuper(XHR);\n\n  /**\n   * XHR Polling constructor.\n   *\n   * @param {Object} opts\n   * @api public\n   */\n  function XHR(opts) {\n    var _this;\n\n    _classCallCheck(this, XHR);\n\n    _this = _super.call(this, opts);\n\n    if (typeof location !== \"undefined\") {\n      var isSSL = \"https:\" === location.protocol;\n      var port = location.port; // some user agents have empty `location.port`\n\n      if (!port) {\n        port = isSSL ? 443 : 80;\n      }\n\n      _this.xd = typeof location !== \"undefined\" && opts.hostname !== location.hostname || port !== opts.port;\n      _this.xs = opts.secure !== isSSL;\n    }\n    /**\n     * XHR supports binary\n     */\n\n\n    var forceBase64 = opts && opts.forceBase64;\n    _this.supportsBinary = hasXHR2 && !forceBase64;\n    return _this;\n  }\n  /**\n   * Creates a request.\n   *\n   * @param {String} method\n   * @api private\n   */\n\n\n  _createClass(XHR, [{\n    key: \"request\",\n    value: function request() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      Object.assign(opts, {\n        xd: this.xd,\n        xs: this.xs\n      }, this.opts);\n      return new Request(this.uri(), opts);\n    }\n    /**\n     * Sends data.\n     *\n     * @param {String} data to send.\n     * @param {Function} called upon flush.\n     * @api private\n     */\n\n  }, {\n    key: \"doWrite\",\n    value: function doWrite(data, fn) {\n      var req = this.request({\n        method: \"POST\",\n        data: data\n      });\n      var self = this;\n      req.on(\"success\", fn);\n      req.on(\"error\", function (err) {\n        self.onError(\"xhr post error\", err);\n      });\n    }\n    /**\n     * Starts a poll cycle.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"doPoll\",\n    value: function doPoll() {\n      debug(\"xhr poll\");\n      var req = this.request();\n      var self = this;\n      req.on(\"data\", function (data) {\n        self.onData(data);\n      });\n      req.on(\"error\", function (err) {\n        self.onError(\"xhr poll error\", err);\n      });\n      this.pollXhr = req;\n    }\n  }]);\n\n  return XHR;\n}(Polling);\n\nvar Request = /*#__PURE__*/function (_Emitter) {\n  \"use strict\";\n\n  _inherits(Request, _Emitter);\n\n  var _super2 = _createSuper(Request);\n\n  /**\n   * Request constructor\n   *\n   * @param {Object} options\n   * @api public\n   */\n  function Request(uri, opts) {\n    var _this2;\n\n    _classCallCheck(this, Request);\n\n    _this2 = _super2.call(this);\n    _this2.opts = opts;\n    _this2.method = opts.method || \"GET\";\n    _this2.uri = uri;\n    _this2.async = false !== opts.async;\n    _this2.data = undefined !== opts.data ? opts.data : null;\n\n    _this2.create();\n\n    return _this2;\n  }\n  /**\n   * Creates the XHR object and sends the request.\n   *\n   * @api private\n   */\n\n\n  _createClass(Request, [{\n    key: \"create\",\n    value: function create() {\n      var opts = pick(this.opts, \"agent\", \"enablesXDR\", \"pfx\", \"key\", \"passphrase\", \"cert\", \"ca\", \"ciphers\", \"rejectUnauthorized\");\n      opts.xdomain = !!this.opts.xd;\n      opts.xscheme = !!this.opts.xs;\n      var xhr = this.xhr = new XMLHttpRequest(opts);\n      var self = this;\n\n      try {\n        debug(\"xhr open %s: %s\", this.method, this.uri);\n        xhr.open(this.method, this.uri, this.async);\n\n        try {\n          if (this.opts.extraHeaders) {\n            xhr.setDisableHeaderCheck && xhr.setDisableHeaderCheck(true);\n\n            for (var i in this.opts.extraHeaders) {\n              if (this.opts.extraHeaders.hasOwnProperty(i)) {\n                xhr.setRequestHeader(i, this.opts.extraHeaders[i]);\n              }\n            }\n          }\n        } catch (e) {}\n\n        if (\"POST\" === this.method) {\n          try {\n            xhr.setRequestHeader(\"Content-type\", \"text/plain;charset=UTF-8\");\n          } catch (e) {}\n        }\n\n        try {\n          xhr.setRequestHeader(\"Accept\", \"*/*\");\n        } catch (e) {} // ie6 check\n\n\n        if (\"withCredentials\" in xhr) {\n          xhr.withCredentials = this.opts.withCredentials;\n        }\n\n        if (this.opts.requestTimeout) {\n          xhr.timeout = this.opts.requestTimeout;\n        }\n\n        if (this.hasXDR()) {\n          xhr.onload = function () {\n            self.onLoad();\n          };\n\n          xhr.onerror = function () {\n            self.onError(xhr.responseText);\n          };\n        } else {\n          xhr.onreadystatechange = function () {\n            if (4 !== xhr.readyState) return;\n\n            if (200 === xhr.status || 1223 === xhr.status) {\n              self.onLoad();\n            } else {\n              // make sure the `error` event handler that's user-set\n              // does not throw in the same tick and gets caught here\n              setTimeout(function () {\n                self.onError(typeof xhr.status === \"number\" ? xhr.status : 0);\n              }, 0);\n            }\n          };\n        }\n\n        debug(\"xhr data %s\", this.data);\n        xhr.send(this.data);\n      } catch (e) {\n        // Need to defer since .create() is called directly from the constructor\n        // and thus the 'error' event can only be only bound *after* this exception\n        // occurs.  Therefore, also, we cannot throw here at all.\n        setTimeout(function () {\n          self.onError(e);\n        }, 0);\n        return;\n      }\n\n      if (typeof document !== \"undefined\") {\n        this.index = Request.requestsCount++;\n        Request.requests[this.index] = this;\n      }\n    }\n    /**\n     * Called upon successful response.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"onSuccess\",\n    value: function onSuccess() {\n      this.emit(\"success\");\n      this.cleanup();\n    }\n    /**\n     * Called if we have data.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"onData\",\n    value: function onData(data) {\n      this.emit(\"data\", data);\n      this.onSuccess();\n    }\n    /**\n     * Called upon error.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"onError\",\n    value: function onError(err) {\n      this.emit(\"error\", err);\n      this.cleanup(true);\n    }\n    /**\n     * Cleans up house.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"cleanup\",\n    value: function cleanup(fromError) {\n      if (\"undefined\" === typeof this.xhr || null === this.xhr) {\n        return;\n      } // xmlhttprequest\n\n\n      if (this.hasXDR()) {\n        this.xhr.onload = this.xhr.onerror = empty;\n      } else {\n        this.xhr.onreadystatechange = empty;\n      }\n\n      if (fromError) {\n        try {\n          this.xhr.abort();\n        } catch (e) {}\n      }\n\n      if (typeof document !== \"undefined\") {\n        delete Request.requests[this.index];\n      }\n\n      this.xhr = null;\n    }\n    /**\n     * Called upon load.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"onLoad\",\n    value: function onLoad() {\n      var data = this.xhr.responseText;\n\n      if (data !== null) {\n        this.onData(data);\n      }\n    }\n    /**\n     * Check if it has XDomainRequest.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"hasXDR\",\n    value: function hasXDR() {\n      return typeof XDomainRequest !== \"undefined\" && !this.xs && this.enablesXDR;\n    }\n    /**\n     * Aborts the request.\n     *\n     * @api public\n     */\n\n  }, {\n    key: \"abort\",\n    value: function abort() {\n      this.cleanup();\n    }\n  }]);\n\n  return Request;\n}(Emitter);\n/**\n * Aborts pending requests when unloading the window. This is needed to prevent\n * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n * emitted.\n */\n\n\nRequest.requestsCount = 0;\nRequest.requests = {};\n\nif (typeof document !== \"undefined\") {\n  if (typeof attachEvent === \"function\") {\n    attachEvent(\"onunload\", unloadHandler);\n  } else if (typeof addEventListener === \"function\") {\n    var terminationEvent = \"onpagehide\" in globalThis ? \"pagehide\" : \"unload\";\n    addEventListener(terminationEvent, unloadHandler, false);\n  }\n}\n\nfunction unloadHandler() {\n  for (var i in Request.requests) {\n    if (Request.requests.hasOwnProperty(i)) {\n      Request.requests[i].abort();\n    }\n  }\n}\n\nmodule.exports = XHR;\nmodule.exports.Request = Request;","var _classCallCheck = require(\"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _inherits = require(\"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/inherits\");\n\nvar _possibleConstructorReturn = require(\"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nvar Transport = require(\"../transport\");\n\nvar parseqs = require(\"parseqs\");\n\nvar parser = require(\"engine.io-parser\");\n\nvar yeast = require(\"yeast\");\n\nvar debug = require(\"debug\")(\"engine.io-client:polling\");\n\nvar Polling = /*#__PURE__*/function (_Transport) {\n  \"use strict\";\n\n  _inherits(Polling, _Transport);\n\n  var _super = _createSuper(Polling);\n\n  function Polling() {\n    _classCallCheck(this, Polling);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(Polling, [{\n    key: \"name\",\n    get:\n    /**\n     * Transport name.\n     */\n    function get() {\n      return \"polling\";\n    }\n    /**\n     * Opens the socket (triggers polling). We write a PING message to determine\n     * when the transport is open.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"doOpen\",\n    value: function doOpen() {\n      this.poll();\n    }\n    /**\n     * Pauses polling.\n     *\n     * @param {Function} callback upon buffers are flushed and transport is paused\n     * @api private\n     */\n\n  }, {\n    key: \"pause\",\n    value: function pause(onPause) {\n      var self = this;\n      this.readyState = \"pausing\";\n\n      function pause() {\n        debug(\"paused\");\n        self.readyState = \"paused\";\n        onPause();\n      }\n\n      if (this.polling || !this.writable) {\n        var total = 0;\n\n        if (this.polling) {\n          debug(\"we are currently polling - waiting to pause\");\n          total++;\n          this.once(\"pollComplete\", function () {\n            debug(\"pre-pause polling complete\");\n            --total || pause();\n          });\n        }\n\n        if (!this.writable) {\n          debug(\"we are currently writing - waiting to pause\");\n          total++;\n          this.once(\"drain\", function () {\n            debug(\"pre-pause writing complete\");\n            --total || pause();\n          });\n        }\n      } else {\n        pause();\n      }\n    }\n    /**\n     * Starts polling cycle.\n     *\n     * @api public\n     */\n\n  }, {\n    key: \"poll\",\n    value: function poll() {\n      debug(\"polling\");\n      this.polling = true;\n      this.doPoll();\n      this.emit(\"poll\");\n    }\n    /**\n     * Overloads onData to detect payloads.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"onData\",\n    value: function onData(data) {\n      var self = this;\n      debug(\"polling got data %s\", data);\n\n      var callback = function callback(packet, index, total) {\n        // if its the first message we consider the transport open\n        if (\"opening\" === self.readyState && packet.type === \"open\") {\n          self.onOpen();\n        } // if its a close packet, we close the ongoing requests\n\n\n        if (\"close\" === packet.type) {\n          self.onClose();\n          return false;\n        } // otherwise bypass onData and handle the message\n\n\n        self.onPacket(packet);\n      }; // decode payload\n\n\n      parser.decodePayload(data, this.socket.binaryType).forEach(callback); // if an event did not trigger closing\n\n      if (\"closed\" !== this.readyState) {\n        // if we got data we're not polling\n        this.polling = false;\n        this.emit(\"pollComplete\");\n\n        if (\"open\" === this.readyState) {\n          this.poll();\n        } else {\n          debug('ignoring poll - transport state \"%s\"', this.readyState);\n        }\n      }\n    }\n    /**\n     * For polling, send a close packet.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"doClose\",\n    value: function doClose() {\n      var self = this;\n\n      function close() {\n        debug(\"writing close packet\");\n        self.write([{\n          type: \"close\"\n        }]);\n      }\n\n      if (\"open\" === this.readyState) {\n        debug(\"transport open - closing\");\n        close();\n      } else {\n        // in case we're trying to close while\n        // handshaking is in progress (GH-164)\n        debug(\"transport not open - deferring close\");\n        this.once(\"open\", close);\n      }\n    }\n    /**\n     * Writes a packets payload.\n     *\n     * @param {Array} data packets\n     * @param {Function} drain callback\n     * @api private\n     */\n\n  }, {\n    key: \"write\",\n    value: function write(packets) {\n      var _this = this;\n\n      this.writable = false;\n      parser.encodePayload(packets, function (data) {\n        _this.doWrite(data, function () {\n          _this.writable = true;\n\n          _this.emit(\"drain\");\n        });\n      });\n    }\n    /**\n     * Generates uri for connection.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"uri\",\n    value: function uri() {\n      var query = this.query || {};\n      var schema = this.opts.secure ? \"https\" : \"http\";\n      var port = \"\"; // cache busting is forced\n\n      if (false !== this.opts.timestampRequests) {\n        query[this.opts.timestampParam] = yeast();\n      }\n\n      if (!this.supportsBinary && !query.sid) {\n        query.b64 = 1;\n      }\n\n      query = parseqs.encode(query); // avoid port if default for schema\n\n      if (this.opts.port && (\"https\" === schema && Number(this.opts.port) !== 443 || \"http\" === schema && Number(this.opts.port) !== 80)) {\n        port = \":\" + this.opts.port;\n      } // prepend ? to query\n\n\n      if (query.length) {\n        query = \"?\" + query;\n      }\n\n      var ipv6 = this.opts.hostname.indexOf(\":\") !== -1;\n      return schema + \"://\" + (ipv6 ? \"[\" + this.opts.hostname + \"]\" : this.opts.hostname) + port + this.opts.path + query;\n    }\n  }]);\n\n  return Polling;\n}(Transport);\n\nmodule.exports = Polling;","var globalThis = require(\"../globalThis\");\n\nmodule.exports = {\n  WebSocket: globalThis.WebSocket || globalThis.MozWebSocket,\n  usingBrowserWebSocket: true,\n  defaultBinaryType: \"arraybuffer\"\n};","var _classCallCheck = require(\"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _inherits = require(\"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/inherits\");\n\nvar _possibleConstructorReturn = require(\"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nvar Transport = require(\"../transport\");\n\nvar parser = require(\"engine.io-parser\");\n\nvar parseqs = require(\"parseqs\");\n\nvar yeast = require(\"yeast\");\n\nvar _require = require(\"../util\"),\n    pick = _require.pick;\n\nvar _require2 = require(\"./websocket-constructor\"),\n    WebSocket = _require2.WebSocket,\n    usingBrowserWebSocket = _require2.usingBrowserWebSocket,\n    defaultBinaryType = _require2.defaultBinaryType;\n\nvar debug = require(\"debug\")(\"engine.io-client:websocket\"); // detect ReactNative environment\n\n\nvar isReactNative = typeof navigator !== \"undefined\" && typeof navigator.product === \"string\" && navigator.product.toLowerCase() === \"reactnative\";\n\nvar WS = /*#__PURE__*/function (_Transport) {\n  \"use strict\";\n\n  _inherits(WS, _Transport);\n\n  var _super = _createSuper(WS);\n\n  /**\n   * WebSocket transport constructor.\n   *\n   * @api {Object} connection options\n   * @api public\n   */\n  function WS(opts) {\n    var _this;\n\n    _classCallCheck(this, WS);\n\n    _this = _super.call(this, opts);\n    _this.supportsBinary = !opts.forceBase64;\n    return _this;\n  }\n  /**\n   * Transport name.\n   *\n   * @api public\n   */\n\n\n  _createClass(WS, [{\n    key: \"name\",\n    get: function get() {\n      return \"websocket\";\n    }\n    /**\n     * Opens socket.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"doOpen\",\n    value: function doOpen() {\n      if (!this.check()) {\n        // let probe timeout\n        return;\n      }\n\n      var uri = this.uri();\n      var protocols = this.opts.protocols; // React Native only supports the 'headers' option, and will print a warning if anything else is passed\n\n      var opts = isReactNative ? {} : pick(this.opts, \"agent\", \"perMessageDeflate\", \"pfx\", \"key\", \"passphrase\", \"cert\", \"ca\", \"ciphers\", \"rejectUnauthorized\", \"localAddress\", \"protocolVersion\", \"origin\", \"maxPayload\", \"family\", \"checkServerIdentity\");\n\n      if (this.opts.extraHeaders) {\n        opts.headers = this.opts.extraHeaders;\n      }\n\n      try {\n        this.ws = usingBrowserWebSocket && !isReactNative ? protocols ? new WebSocket(uri, protocols) : new WebSocket(uri) : new WebSocket(uri, protocols, opts);\n      } catch (err) {\n        return this.emit(\"error\", err);\n      }\n\n      this.ws.binaryType = this.socket.binaryType || defaultBinaryType;\n      this.addEventListeners();\n    }\n    /**\n     * Adds event listeners to the socket\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"addEventListeners\",\n    value: function addEventListeners() {\n      var self = this;\n\n      this.ws.onopen = function () {\n        self.onOpen();\n      };\n\n      this.ws.onclose = function () {\n        self.onClose();\n      };\n\n      this.ws.onmessage = function (ev) {\n        self.onData(ev.data);\n      };\n\n      this.ws.onerror = function (e) {\n        self.onError(\"websocket error\", e);\n      };\n    }\n    /**\n     * Writes data to socket.\n     *\n     * @param {Array} array of packets.\n     * @api private\n     */\n\n  }, {\n    key: \"write\",\n    value: function write(packets) {\n      var self = this;\n      this.writable = false; // encodePacket efficient as it uses WS framing\n      // no need for encodePayload\n\n      var total = packets.length;\n      var i = 0;\n      var l = total;\n\n      for (; i < l; i++) {\n        (function (packet) {\n          parser.encodePacket(packet, self.supportsBinary, function (data) {\n            // always create a new object (GH-437)\n            var opts = {};\n\n            if (!usingBrowserWebSocket) {\n              if (packet.options) {\n                opts.compress = packet.options.compress;\n              }\n\n              if (self.opts.perMessageDeflate) {\n                var len = \"string\" === typeof data ? Buffer.byteLength(data) : data.length;\n\n                if (len < self.opts.perMessageDeflate.threshold) {\n                  opts.compress = false;\n                }\n              }\n            } // Sometimes the websocket has already been closed but the browser didn't\n            // have a chance of informing us about it yet, in that case send will\n            // throw an error\n\n\n            try {\n              if (usingBrowserWebSocket) {\n                // TypeError is thrown when passing the second argument on Safari\n                self.ws.send(data);\n              } else {\n                self.ws.send(data, opts);\n              }\n            } catch (e) {\n              debug(\"websocket closed before onclose event\");\n            }\n\n            --total || done();\n          });\n        })(packets[i]);\n      }\n\n      function done() {\n        self.emit(\"flush\"); // fake drain\n        // defer to next tick to allow Socket to clear writeBuffer\n\n        setTimeout(function () {\n          self.writable = true;\n          self.emit(\"drain\");\n        }, 0);\n      }\n    }\n    /**\n     * Called upon close\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"onClose\",\n    value: function onClose() {\n      Transport.prototype.onClose.call(this);\n    }\n    /**\n     * Closes socket.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"doClose\",\n    value: function doClose() {\n      if (typeof this.ws !== \"undefined\") {\n        this.ws.close();\n        this.ws = null;\n      }\n    }\n    /**\n     * Generates uri for connection.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"uri\",\n    value: function uri() {\n      var query = this.query || {};\n      var schema = this.opts.secure ? \"wss\" : \"ws\";\n      var port = \"\"; // avoid port if default for schema\n\n      if (this.opts.port && (\"wss\" === schema && Number(this.opts.port) !== 443 || \"ws\" === schema && Number(this.opts.port) !== 80)) {\n        port = \":\" + this.opts.port;\n      } // append timestamp to URI\n\n\n      if (this.opts.timestampRequests) {\n        query[this.opts.timestampParam] = yeast();\n      } // communicate binary support capabilities\n\n\n      if (!this.supportsBinary) {\n        query.b64 = 1;\n      }\n\n      query = parseqs.encode(query); // prepend ? to query\n\n      if (query.length) {\n        query = \"?\" + query;\n      }\n\n      var ipv6 = this.opts.hostname.indexOf(\":\") !== -1;\n      return schema + \"://\" + (ipv6 ? \"[\" + this.opts.hostname + \"]\" : this.opts.hostname) + port + this.opts.path + query;\n    }\n    /**\n     * Feature detection for WebSocket.\n     *\n     * @return {Boolean} whether this transport is available.\n     * @api public\n     */\n\n  }, {\n    key: \"check\",\n    value: function check() {\n      return !!WebSocket && !(\"__initialize\" in WebSocket && this.name === WS.prototype.name);\n    }\n  }]);\n\n  return WS;\n}(Transport);\n\nmodule.exports = WS;","module.exports.pick = function (obj) {\n  for (var _len = arguments.length, attr = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    attr[_key - 1] = arguments[_key];\n  }\n\n  return attr.reduce(function (acc, k) {\n    if (obj.hasOwnProperty(k)) {\n      acc[k] = obj[k];\n    }\n\n    return acc;\n  }, {});\n};","// browser shim for xmlhttprequest module\nvar hasCORS = require(\"has-cors\");\n\nvar globalThis = require(\"./globalThis\");\n\nmodule.exports = function (opts) {\n  var xdomain = opts.xdomain; // scheme must be same when usign XDomainRequest\n  // http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx\n\n  var xscheme = opts.xscheme; // XDomainRequest has a flow of not sending cookie, therefore it should be disabled as a default.\n  // https://github.com/Automattic/engine.io-client/pull/217\n\n  var enablesXDR = opts.enablesXDR; // XMLHttpRequest can be disabled on IE\n\n  try {\n    if (\"undefined\" !== typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n      return new XMLHttpRequest();\n    }\n  } catch (e) {} // Use XDomainRequest for IE8 if enablesXDR is true\n  // because loading bar keeps flashing when using jsonp-polling\n  // https://github.com/yujiosaka/socke.io-ie8-loading-example\n\n\n  try {\n    if (\"undefined\" !== typeof XDomainRequest && !xscheme && enablesXDR) {\n      return new XDomainRequest();\n    }\n  } catch (e) {}\n\n  if (!xdomain) {\n    try {\n      return new globalThis[[\"Active\"].concat(\"Object\").join(\"X\")](\"Microsoft.XMLHTTP\");\n    } catch (e) {}\n  }\n};","/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\n\nexports.destroy = function () {\n  var warned = false;\n  return function () {\n    if (!warned) {\n      warned = true;\n      console.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n    }\n  };\n}();\n/**\n * Colors.\n */\n\n\nexports.colors = ['#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC', '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF', '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC', '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF', '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC', '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033', '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366', '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933', '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC', '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF', '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33'];\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n// eslint-disable-next-line complexity\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n    return true;\n  } // Internet Explorer and Edge do not support colors.\n\n\n  if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n    return false;\n  } // Is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\n\n  return typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance || // Is firebug? http://stackoverflow.com/a/398120/376773\n  typeof window !== 'undefined' && window.console && (window.console.firebug || window.console.exception && window.console.table) || // Is firefox >= v31?\n  // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n  typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31 || // Double check webkit in userAgent just in case we are in a worker\n  typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/);\n}\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\n\nfunction formatArgs(args) {\n  args[0] = (this.useColors ? '%c' : '') + this.namespace + (this.useColors ? ' %c' : ' ') + args[0] + (this.useColors ? '%c ' : ' ') + '+' + module.exports.humanize(this.diff);\n\n  if (!this.useColors) {\n    return;\n  }\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit'); // The final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function (match) {\n    if (match === '%%') {\n      return;\n    }\n\n    index++;\n\n    if (match === '%c') {\n      // We only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n  args.splice(lastC, 0, c);\n}\n/**\n * Invokes `console.debug()` when available.\n * No-op when `console.debug` is not a \"function\".\n * If `console.debug` is not available, falls back\n * to `console.log`.\n *\n * @api public\n */\n\n\nexports.log = console.debug || console.log || function () {};\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\n\nfunction save(namespaces) {\n  try {\n    if (namespaces) {\n      exports.storage.setItem('debug', namespaces);\n    } else {\n      exports.storage.removeItem('debug');\n    }\n  } catch (error) {// Swallow\n    // XXX (@Qix-) should we be logging these?\n  }\n}\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\n\nfunction load() {\n  var r;\n\n  try {\n    r = exports.storage.getItem('debug');\n  } catch (error) {// Swallow\n    // XXX (@Qix-) should we be logging these?\n  } // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\n\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\n\nfunction localstorage() {\n  try {\n    // TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n    // The Browser also has localStorage in the global context.\n    return localStorage;\n  } catch (error) {// Swallow\n    // XXX (@Qix-) should we be logging these?\n  }\n}\n\nmodule.exports = require('./common')(exports);\nvar formatters = module.exports.formatters;\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n  try {\n    return JSON.stringify(v);\n  } catch (error) {\n    return '[UnexpectedJSONParseError]: ' + error.message;\n  }\n};","var _toConsumableArray = require(\"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/toConsumableArray\");\n\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\nfunction setup(env) {\n  createDebug.debug = createDebug;\n  createDebug.default = createDebug;\n  createDebug.coerce = coerce;\n  createDebug.disable = disable;\n  createDebug.enable = enable;\n  createDebug.enabled = enabled;\n  createDebug.humanize = require('ms');\n  createDebug.destroy = destroy;\n  Object.keys(env).forEach(function (key) {\n    createDebug[key] = env[key];\n  });\n  /**\n  * The currently active debug mode names, and names to skip.\n  */\n\n  createDebug.names = [];\n  createDebug.skips = [];\n  /**\n  * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n  *\n  * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n  */\n\n  createDebug.formatters = {};\n  /**\n  * Selects a color for a debug namespace\n  * @param {String} namespace The namespace string for the for the debug instance to be colored\n  * @return {Number|String} An ANSI color code for the given namespace\n  * @api private\n  */\n\n  function selectColor(namespace) {\n    var hash = 0;\n\n    for (var i = 0; i < namespace.length; i++) {\n      hash = (hash << 5) - hash + namespace.charCodeAt(i);\n      hash |= 0; // Convert to 32bit integer\n    }\n\n    return createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n  }\n\n  createDebug.selectColor = selectColor;\n  /**\n  * Create a debugger with the given `namespace`.\n  *\n  * @param {String} namespace\n  * @return {Function}\n  * @api public\n  */\n\n  function createDebug(namespace) {\n    var prevTime;\n    var enableOverride = null;\n    var namespacesCache;\n    var enabledCache;\n\n    function debug() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      // Disabled?\n      if (!debug.enabled) {\n        return;\n      }\n\n      var self = debug; // Set `diff` timestamp\n\n      var curr = Number(new Date());\n      var ms = curr - (prevTime || curr);\n      self.diff = ms;\n      self.prev = prevTime;\n      self.curr = curr;\n      prevTime = curr;\n      args[0] = createDebug.coerce(args[0]);\n\n      if (typeof args[0] !== 'string') {\n        // Anything else let's inspect with %O\n        args.unshift('%O');\n      } // Apply any `formatters` transformations\n\n\n      var index = 0;\n      args[0] = args[0].replace(/%([a-zA-Z%])/g, function (match, format) {\n        // If we encounter an escaped % then don't increase the array index\n        if (match === '%%') {\n          return '%';\n        }\n\n        index++;\n        var formatter = createDebug.formatters[format];\n\n        if (typeof formatter === 'function') {\n          var val = args[index];\n          match = formatter.call(self, val); // Now we need to remove `args[index]` since it's inlined in the `format`\n\n          args.splice(index, 1);\n          index--;\n        }\n\n        return match;\n      }); // Apply env-specific formatting (colors, etc.)\n\n      createDebug.formatArgs.call(self, args);\n      var logFn = self.log || createDebug.log;\n      logFn.apply(self, args);\n    }\n\n    debug.namespace = namespace;\n    debug.useColors = createDebug.useColors();\n    debug.color = createDebug.selectColor(namespace);\n    debug.extend = extend;\n    debug.destroy = createDebug.destroy; // XXX Temporary. Will be removed in the next major release.\n\n    Object.defineProperty(debug, 'enabled', {\n      enumerable: true,\n      configurable: false,\n      get: function get() {\n        if (enableOverride !== null) {\n          return enableOverride;\n        }\n\n        if (namespacesCache !== createDebug.namespaces) {\n          namespacesCache = createDebug.namespaces;\n          enabledCache = createDebug.enabled(namespace);\n        }\n\n        return enabledCache;\n      },\n      set: function set(v) {\n        enableOverride = v;\n      }\n    }); // Env-specific initialization logic for debug instances\n\n    if (typeof createDebug.init === 'function') {\n      createDebug.init(debug);\n    }\n\n    return debug;\n  }\n\n  function extend(namespace, delimiter) {\n    var newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n    newDebug.log = this.log;\n    return newDebug;\n  }\n  /**\n  * Enables a debug mode by namespaces. This can include modes\n  * separated by a colon and wildcards.\n  *\n  * @param {String} namespaces\n  * @api public\n  */\n\n\n  function enable(namespaces) {\n    createDebug.save(namespaces);\n    createDebug.namespaces = namespaces;\n    createDebug.names = [];\n    createDebug.skips = [];\n    var i;\n    var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n    var len = split.length;\n\n    for (i = 0; i < len; i++) {\n      if (!split[i]) {\n        // ignore empty strings\n        continue;\n      }\n\n      namespaces = split[i].replace(/\\*/g, '.*?');\n\n      if (namespaces[0] === '-') {\n        createDebug.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n      } else {\n        createDebug.names.push(new RegExp('^' + namespaces + '$'));\n      }\n    }\n  }\n  /**\n  * Disable debug output.\n  *\n  * @return {String} namespaces\n  * @api public\n  */\n\n\n  function disable() {\n    var namespaces = [].concat(_toConsumableArray(createDebug.names.map(toNamespace)), _toConsumableArray(createDebug.skips.map(toNamespace).map(function (namespace) {\n      return '-' + namespace;\n    }))).join(',');\n    createDebug.enable('');\n    return namespaces;\n  }\n  /**\n  * Returns true if the given mode name is enabled, false otherwise.\n  *\n  * @param {String} name\n  * @return {Boolean}\n  * @api public\n  */\n\n\n  function enabled(name) {\n    if (name[name.length - 1] === '*') {\n      return true;\n    }\n\n    var i;\n    var len;\n\n    for (i = 0, len = createDebug.skips.length; i < len; i++) {\n      if (createDebug.skips[i].test(name)) {\n        return false;\n      }\n    }\n\n    for (i = 0, len = createDebug.names.length; i < len; i++) {\n      if (createDebug.names[i].test(name)) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n  /**\n  * Convert regexp to namespace\n  *\n  * @param {RegExp} regxep\n  * @return {String} namespace\n  * @api private\n  */\n\n\n  function toNamespace(regexp) {\n    return regexp.toString().substring(2, regexp.toString().length - 2).replace(/\\.\\*\\?$/, '*');\n  }\n  /**\n  * Coerce `val`.\n  *\n  * @param {Mixed} val\n  * @return {Mixed}\n  * @api private\n  */\n\n\n  function coerce(val) {\n    if (val instanceof Error) {\n      return val.stack || val.message;\n    }\n\n    return val;\n  }\n  /**\n  * XXX DO NOT USE. This is a temporary stub function.\n  * XXX It WILL be removed in the next major release.\n  */\n\n\n  function destroy() {\n    console.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n  }\n\n  createDebug.enable(createDebug.load());\n  return createDebug;\n}\n\nmodule.exports = setup;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Socket = exports.io = exports.Manager = exports.protocol = void 0;\n\nvar url_1 = require(\"./url\");\n\nvar manager_1 = require(\"./manager\");\n\nvar socket_1 = require(\"./socket\");\n\nObject.defineProperty(exports, \"Socket\", {\n  enumerable: true,\n  get: function get() {\n    return socket_1.Socket;\n  }\n});\n\nvar debug = require(\"debug\")(\"socket.io-client\");\n/**\n * Module exports.\n */\n\n\nmodule.exports = exports = lookup;\n/**\n * Managers cache.\n */\n\nvar cache = exports.managers = {};\n\nfunction lookup(uri, opts) {\n  if (typeof uri === \"object\") {\n    opts = uri;\n    uri = undefined;\n  }\n\n  opts = opts || {};\n  var parsed = url_1.url(uri, opts.path);\n  var source = parsed.source;\n  var id = parsed.id;\n  var path = parsed.path;\n  var sameNamespace = cache[id] && path in cache[id][\"nsps\"];\n  var newConnection = opts.forceNew || opts[\"force new connection\"] || false === opts.multiplex || sameNamespace;\n  var io;\n\n  if (newConnection) {\n    debug(\"ignoring socket cache for %s\", source);\n    io = new manager_1.Manager(source, opts);\n  } else {\n    if (!cache[id]) {\n      debug(\"new io instance for %s\", source);\n      cache[id] = new manager_1.Manager(source, opts);\n    }\n\n    io = cache[id];\n  }\n\n  if (parsed.query && !opts.query) {\n    opts.query = parsed.queryKey;\n  }\n\n  return io.socket(parsed.path, opts);\n}\n\nexports.io = lookup;\n/**\n * Protocol version.\n *\n * @public\n */\n\nvar socket_io_parser_1 = require(\"socket.io-parser\");\n\nObject.defineProperty(exports, \"protocol\", {\n  enumerable: true,\n  get: function get() {\n    return socket_io_parser_1.protocol;\n  }\n});\n/**\n * `connect`.\n *\n * @param {String} uri\n * @public\n */\n\nexports.connect = lookup;\n/**\n * Expose constructors for standalone build.\n *\n * @public\n */\n\nvar manager_2 = require(\"./manager\");\n\nObject.defineProperty(exports, \"Manager\", {\n  enumerable: true,\n  get: function get() {\n    return manager_2.Manager;\n  }\n});","\"use strict\";\n\nvar _classCallCheck = require(\"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _get = require(\"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/get\");\n\nvar _inherits = require(\"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/inherits\");\n\nvar _possibleConstructorReturn = require(\"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Manager = void 0;\n\nvar eio = require(\"engine.io-client\");\n\nvar socket_1 = require(\"./socket\");\n\nvar Emitter = require(\"component-emitter\");\n\nvar parser = require(\"socket.io-parser\");\n\nvar on_1 = require(\"./on\");\n\nvar Backoff = require(\"backo2\");\n\nvar debug = require(\"debug\")(\"socket.io-client:manager\");\n\nvar Manager = /*#__PURE__*/function (_Emitter) {\n  _inherits(Manager, _Emitter);\n\n  var _super = _createSuper(Manager);\n\n  function Manager(uri, opts) {\n    var _this;\n\n    _classCallCheck(this, Manager);\n\n    _this = _super.call(this);\n    _this.nsps = {};\n    _this.subs = [];\n\n    if (uri && \"object\" === typeof uri) {\n      opts = uri;\n      uri = undefined;\n    }\n\n    opts = opts || {};\n    opts.path = opts.path || \"/socket.io\";\n    _this.opts = opts;\n\n    _this.reconnection(opts.reconnection !== false);\n\n    _this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n\n    _this.reconnectionDelay(opts.reconnectionDelay || 1000);\n\n    _this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n\n    _this.randomizationFactor(opts.randomizationFactor || 0.5);\n\n    _this.backoff = new Backoff({\n      min: _this.reconnectionDelay(),\n      max: _this.reconnectionDelayMax(),\n      jitter: _this.randomizationFactor()\n    });\n\n    _this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n\n    _this._readyState = \"closed\";\n    _this.uri = uri;\n\n    var _parser = opts.parser || parser;\n\n    _this.encoder = new _parser.Encoder();\n    _this.decoder = new _parser.Decoder();\n    _this._autoConnect = opts.autoConnect !== false;\n    if (_this._autoConnect) _this.open();\n    return _this;\n  }\n\n  _createClass(Manager, [{\n    key: \"reconnection\",\n    value: function reconnection(v) {\n      if (!arguments.length) return this._reconnection;\n      this._reconnection = !!v;\n      return this;\n    }\n  }, {\n    key: \"reconnectionAttempts\",\n    value: function reconnectionAttempts(v) {\n      if (v === undefined) return this._reconnectionAttempts;\n      this._reconnectionAttempts = v;\n      return this;\n    }\n  }, {\n    key: \"reconnectionDelay\",\n    value: function reconnectionDelay(v) {\n      var _a;\n\n      if (v === undefined) return this._reconnectionDelay;\n      this._reconnectionDelay = v;\n      (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMin(v);\n      return this;\n    }\n  }, {\n    key: \"randomizationFactor\",\n    value: function randomizationFactor(v) {\n      var _a;\n\n      if (v === undefined) return this._randomizationFactor;\n      this._randomizationFactor = v;\n      (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setJitter(v);\n      return this;\n    }\n  }, {\n    key: \"reconnectionDelayMax\",\n    value: function reconnectionDelayMax(v) {\n      var _a;\n\n      if (v === undefined) return this._reconnectionDelayMax;\n      this._reconnectionDelayMax = v;\n      (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMax(v);\n      return this;\n    }\n  }, {\n    key: \"timeout\",\n    value: function timeout(v) {\n      if (!arguments.length) return this._timeout;\n      this._timeout = v;\n      return this;\n    }\n    /**\n     * Starts trying to reconnect if reconnection is enabled and we have not\n     * started reconnecting yet\n     *\n     * @private\n     */\n\n  }, {\n    key: \"maybeReconnectOnOpen\",\n    value: function maybeReconnectOnOpen() {\n      // Only try to reconnect if it's the first time we're connecting\n      if (!this._reconnecting && this._reconnection && this.backoff.attempts === 0) {\n        // keeps reconnection from firing twice for the same reconnection loop\n        this.reconnect();\n      }\n    }\n    /**\n     * Sets the current transport `socket`.\n     *\n     * @param {Function} fn - optional, callback\n     * @return self\n     * @public\n     */\n\n  }, {\n    key: \"open\",\n    value: function open(fn) {\n      var _this2 = this;\n\n      debug(\"readyState %s\", this._readyState);\n      if (~this._readyState.indexOf(\"open\")) return this;\n      debug(\"opening %s\", this.uri);\n      this.engine = eio(this.uri, this.opts);\n      var socket = this.engine;\n      var self = this;\n      this._readyState = \"opening\";\n      this.skipReconnect = false; // emit `open`\n\n      var openSubDestroy = on_1.on(socket, \"open\", function () {\n        self.onopen();\n        fn && fn();\n      }); // emit `error`\n\n      var errorSub = on_1.on(socket, \"error\", function (err) {\n        debug(\"error\");\n        self.cleanup();\n        self._readyState = \"closed\";\n\n        _get(_getPrototypeOf(Manager.prototype), \"emit\", _this2).call(_this2, \"error\", err);\n\n        if (fn) {\n          fn(err);\n        } else {\n          // Only do this if there is no fn to handle the error\n          self.maybeReconnectOnOpen();\n        }\n      });\n\n      if (false !== this._timeout) {\n        var timeout = this._timeout;\n        debug(\"connect attempt will timeout after %d\", timeout);\n\n        if (timeout === 0) {\n          openSubDestroy(); // prevents a race condition with the 'open' event\n        } // set timer\n\n\n        var timer = setTimeout(function () {\n          debug(\"connect attempt timed out after %d\", timeout);\n          openSubDestroy();\n          socket.close();\n          socket.emit(\"error\", new Error(\"timeout\"));\n        }, timeout);\n        this.subs.push(function subDestroy() {\n          clearTimeout(timer);\n        });\n      }\n\n      this.subs.push(openSubDestroy);\n      this.subs.push(errorSub);\n      return this;\n    }\n    /**\n     * Alias for open()\n     *\n     * @return self\n     * @public\n     */\n\n  }, {\n    key: \"connect\",\n    value: function connect(fn) {\n      return this.open(fn);\n    }\n    /**\n     * Called upon transport open.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"onopen\",\n    value: function onopen() {\n      debug(\"open\"); // clear old subs\n\n      this.cleanup(); // mark as open\n\n      this._readyState = \"open\";\n\n      _get(_getPrototypeOf(Manager.prototype), \"emit\", this).call(this, \"open\"); // add new subs\n\n\n      var socket = this.engine;\n      this.subs.push(on_1.on(socket, \"ping\", this.onping.bind(this)), on_1.on(socket, \"data\", this.ondata.bind(this)), on_1.on(socket, \"error\", this.onerror.bind(this)), on_1.on(socket, \"close\", this.onclose.bind(this)), on_1.on(this.decoder, \"decoded\", this.ondecoded.bind(this)));\n    }\n    /**\n     * Called upon a ping.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"onping\",\n    value: function onping() {\n      _get(_getPrototypeOf(Manager.prototype), \"emit\", this).call(this, \"ping\");\n    }\n    /**\n     * Called with data.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"ondata\",\n    value: function ondata(data) {\n      this.decoder.add(data);\n    }\n    /**\n     * Called when parser fully decodes a packet.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"ondecoded\",\n    value: function ondecoded(packet) {\n      _get(_getPrototypeOf(Manager.prototype), \"emit\", this).call(this, \"packet\", packet);\n    }\n    /**\n     * Called upon socket error.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"onerror\",\n    value: function onerror(err) {\n      debug(\"error\", err);\n\n      _get(_getPrototypeOf(Manager.prototype), \"emit\", this).call(this, \"error\", err);\n    }\n    /**\n     * Creates a new socket for the given `nsp`.\n     *\n     * @return {Socket}\n     * @public\n     */\n\n  }, {\n    key: \"socket\",\n    value: function socket(nsp, opts) {\n      var socket = this.nsps[nsp];\n\n      if (!socket) {\n        socket = new socket_1.Socket(this, nsp, opts);\n        this.nsps[nsp] = socket;\n      }\n\n      return socket;\n    }\n    /**\n     * Called upon a socket close.\n     *\n     * @param socket\n     * @private\n     */\n\n  }, {\n    key: \"_destroy\",\n    value: function _destroy(socket) {\n      var nsps = Object.keys(this.nsps);\n\n      for (var _i = 0, _nsps = nsps; _i < _nsps.length; _i++) {\n        var nsp = _nsps[_i];\n        var _socket = this.nsps[nsp];\n\n        if (_socket.active) {\n          debug(\"socket %s is still active, skipping close\", nsp);\n          return;\n        }\n      }\n\n      this._close();\n    }\n    /**\n     * Writes a packet.\n     *\n     * @param packet\n     * @private\n     */\n\n  }, {\n    key: \"_packet\",\n    value: function _packet(packet) {\n      debug(\"writing packet %j\", packet);\n      var encodedPackets = this.encoder.encode(packet);\n\n      for (var i = 0; i < encodedPackets.length; i++) {\n        this.engine.write(encodedPackets[i], packet.options);\n      }\n    }\n    /**\n     * Clean up transport subscriptions and packet buffer.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"cleanup\",\n    value: function cleanup() {\n      debug(\"cleanup\");\n      this.subs.forEach(function (subDestroy) {\n        return subDestroy();\n      });\n      this.subs.length = 0;\n      this.decoder.destroy();\n    }\n    /**\n     * Close the current socket.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"_close\",\n    value: function _close() {\n      debug(\"disconnect\");\n      this.skipReconnect = true;\n      this._reconnecting = false;\n\n      if (\"opening\" === this._readyState) {\n        // `onclose` will not fire because\n        // an open event never happened\n        this.cleanup();\n      }\n\n      this.backoff.reset();\n      this._readyState = \"closed\";\n      if (this.engine) this.engine.close();\n    }\n    /**\n     * Alias for close()\n     *\n     * @private\n     */\n\n  }, {\n    key: \"disconnect\",\n    value: function disconnect() {\n      return this._close();\n    }\n    /**\n     * Called upon engine close.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"onclose\",\n    value: function onclose(reason) {\n      debug(\"onclose\");\n      this.cleanup();\n      this.backoff.reset();\n      this._readyState = \"closed\";\n\n      _get(_getPrototypeOf(Manager.prototype), \"emit\", this).call(this, \"close\", reason);\n\n      if (this._reconnection && !this.skipReconnect) {\n        this.reconnect();\n      }\n    }\n    /**\n     * Attempt a reconnection.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"reconnect\",\n    value: function reconnect() {\n      var _this3 = this;\n\n      if (this._reconnecting || this.skipReconnect) return this;\n      var self = this;\n\n      if (this.backoff.attempts >= this._reconnectionAttempts) {\n        debug(\"reconnect failed\");\n        this.backoff.reset();\n\n        _get(_getPrototypeOf(Manager.prototype), \"emit\", this).call(this, \"reconnect_failed\");\n\n        this._reconnecting = false;\n      } else {\n        var delay = this.backoff.duration();\n        debug(\"will wait %dms before reconnect attempt\", delay);\n        this._reconnecting = true;\n        var timer = setTimeout(function () {\n          if (self.skipReconnect) return;\n          debug(\"attempting reconnect\");\n\n          _get(_getPrototypeOf(Manager.prototype), \"emit\", _this3).call(_this3, \"reconnect_attempt\", self.backoff.attempts); // check again for the case socket closed in above events\n\n\n          if (self.skipReconnect) return;\n          self.open(function (err) {\n            if (err) {\n              debug(\"reconnect attempt error\");\n              self._reconnecting = false;\n              self.reconnect();\n\n              _get(_getPrototypeOf(Manager.prototype), \"emit\", _this3).call(_this3, \"reconnect_error\", err);\n            } else {\n              debug(\"reconnect success\");\n              self.onreconnect();\n            }\n          });\n        }, delay);\n        this.subs.push(function subDestroy() {\n          clearTimeout(timer);\n        });\n      }\n    }\n    /**\n     * Called upon successful reconnect.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"onreconnect\",\n    value: function onreconnect() {\n      var attempt = this.backoff.attempts;\n      this._reconnecting = false;\n      this.backoff.reset();\n\n      _get(_getPrototypeOf(Manager.prototype), \"emit\", this).call(this, \"reconnect\", attempt);\n    }\n  }]);\n\n  return Manager;\n}(Emitter);\n\nexports.Manager = Manager;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.on = void 0;\n\nfunction on(obj, ev, fn) {\n  obj.on(ev, fn);\n  return function subDestroy() {\n    obj.off(ev, fn);\n  };\n}\n\nexports.on = on;","\"use strict\";\n\nvar _classCallCheck = require(\"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _get = require(\"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/get\");\n\nvar _inherits = require(\"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/inherits\");\n\nvar _possibleConstructorReturn = require(\"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Socket = void 0;\n\nvar socket_io_parser_1 = require(\"socket.io-parser\");\n\nvar Emitter = require(\"component-emitter\");\n\nvar on_1 = require(\"./on\");\n\nvar debug = require(\"debug\")(\"socket.io-client:socket\");\n/**\n * Internal events.\n * These events can't be emitted by the user.\n */\n\n\nvar RESERVED_EVENTS = Object.freeze({\n  connect: 1,\n  connect_error: 1,\n  disconnect: 1,\n  disconnecting: 1,\n  // EventEmitter reserved events: https://nodejs.org/api/events.html#events_event_newlistener\n  newListener: 1,\n  removeListener: 1\n});\n\nvar Socket = /*#__PURE__*/function (_Emitter) {\n  _inherits(Socket, _Emitter);\n\n  var _super = _createSuper(Socket);\n\n  /**\n   * `Socket` constructor.\n   *\n   * @public\n   */\n  function Socket(io, nsp, opts) {\n    var _this;\n\n    _classCallCheck(this, Socket);\n\n    _this = _super.call(this);\n    _this.receiveBuffer = [];\n    _this.sendBuffer = [];\n    _this.ids = 0;\n    _this.acks = {};\n    _this.flags = {};\n    _this.io = io;\n    _this.nsp = nsp;\n    _this.ids = 0;\n    _this.acks = {};\n    _this.receiveBuffer = [];\n    _this.sendBuffer = [];\n    _this.connected = false;\n    _this.disconnected = true;\n    _this.flags = {};\n\n    if (opts && opts.auth) {\n      _this.auth = opts.auth;\n    }\n\n    if (_this.io._autoConnect) _this.open();\n    return _this;\n  }\n  /**\n   * Subscribe to open, close and packet events\n   *\n   * @private\n   */\n\n\n  _createClass(Socket, [{\n    key: \"subEvents\",\n    value: function subEvents() {\n      if (this.subs) return;\n      var io = this.io;\n      this.subs = [on_1.on(io, \"open\", this.onopen.bind(this)), on_1.on(io, \"packet\", this.onpacket.bind(this)), on_1.on(io, \"error\", this.onerror.bind(this)), on_1.on(io, \"close\", this.onclose.bind(this))];\n    }\n    /**\n     * Whether the Socket will try to reconnect when its Manager connects or reconnects\n     */\n\n  }, {\n    key: \"active\",\n    get: function get() {\n      return !!this.subs;\n    }\n    /**\n     * \"Opens\" the socket.\n     *\n     * @public\n     */\n\n  }, {\n    key: \"connect\",\n    value: function connect() {\n      if (this.connected) return this;\n      this.subEvents();\n      if (!this.io[\"_reconnecting\"]) this.io.open(); // ensure open\n\n      if (\"open\" === this.io._readyState) this.onopen();\n      return this;\n    }\n    /**\n     * Alias for connect()\n     */\n\n  }, {\n    key: \"open\",\n    value: function open() {\n      return this.connect();\n    }\n    /**\n     * Sends a `message` event.\n     *\n     * @return self\n     * @public\n     */\n\n  }, {\n    key: \"send\",\n    value: function send() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      args.unshift(\"message\");\n      this.emit.apply(this, args);\n      return this;\n    }\n    /**\n     * Override `emit`.\n     * If the event is in `events`, it's emitted normally.\n     *\n     * @param ev - event name\n     * @return self\n     * @public\n     */\n\n  }, {\n    key: \"emit\",\n    value: function emit(ev) {\n      if (RESERVED_EVENTS.hasOwnProperty(ev)) {\n        throw new Error('\"' + ev + '\" is a reserved event name');\n      }\n\n      for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        args[_key2 - 1] = arguments[_key2];\n      }\n\n      args.unshift(ev);\n      var packet = {\n        type: socket_io_parser_1.PacketType.EVENT,\n        data: args\n      };\n      packet.options = {};\n      packet.options.compress = this.flags.compress !== false; // event ack callback\n\n      if (\"function\" === typeof args[args.length - 1]) {\n        debug(\"emitting packet with ack id %d\", this.ids);\n        this.acks[this.ids] = args.pop();\n        packet.id = this.ids++;\n      }\n\n      var isTransportWritable = this.io.engine && this.io.engine.transport && this.io.engine.transport.writable;\n      var discardPacket = this.flags.volatile && (!isTransportWritable || !this.connected);\n\n      if (discardPacket) {\n        debug(\"discard packet as the transport is not currently writable\");\n      } else if (this.connected) {\n        this.packet(packet);\n      } else {\n        this.sendBuffer.push(packet);\n      }\n\n      this.flags = {};\n      return this;\n    }\n    /**\n     * Sends a packet.\n     *\n     * @param packet\n     * @private\n     */\n\n  }, {\n    key: \"packet\",\n    value: function packet(_packet) {\n      _packet.nsp = this.nsp;\n\n      this.io._packet(_packet);\n    }\n    /**\n     * Called upon engine `open`.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"onopen\",\n    value: function onopen() {\n      var _this2 = this;\n\n      debug(\"transport is open - connecting\");\n\n      if (typeof this.auth == \"function\") {\n        this.auth(function (data) {\n          _this2.packet({\n            type: socket_io_parser_1.PacketType.CONNECT,\n            data: data\n          });\n        });\n      } else {\n        this.packet({\n          type: socket_io_parser_1.PacketType.CONNECT,\n          data: this.auth\n        });\n      }\n    }\n    /**\n     * Called upon engine or manager `error`.\n     *\n     * @param err\n     * @private\n     */\n\n  }, {\n    key: \"onerror\",\n    value: function onerror(err) {\n      if (!this.connected) {\n        _get(_getPrototypeOf(Socket.prototype), \"emit\", this).call(this, \"connect_error\", err);\n      }\n    }\n    /**\n     * Called upon engine `close`.\n     *\n     * @param reason\n     * @private\n     */\n\n  }, {\n    key: \"onclose\",\n    value: function onclose(reason) {\n      debug(\"close (%s)\", reason);\n      this.connected = false;\n      this.disconnected = true;\n      delete this.id;\n\n      _get(_getPrototypeOf(Socket.prototype), \"emit\", this).call(this, \"disconnect\", reason);\n    }\n    /**\n     * Called with socket packet.\n     *\n     * @param packet\n     * @private\n     */\n\n  }, {\n    key: \"onpacket\",\n    value: function onpacket(packet) {\n      var sameNamespace = packet.nsp === this.nsp;\n      if (!sameNamespace) return;\n\n      switch (packet.type) {\n        case socket_io_parser_1.PacketType.CONNECT:\n          if (packet.data && packet.data.sid) {\n            var id = packet.data.sid;\n            this.onconnect(id);\n          } else {\n            _get(_getPrototypeOf(Socket.prototype), \"emit\", this).call(this, \"connect_error\", new Error(\"It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)\"));\n          }\n\n          break;\n\n        case socket_io_parser_1.PacketType.EVENT:\n          this.onevent(packet);\n          break;\n\n        case socket_io_parser_1.PacketType.BINARY_EVENT:\n          this.onevent(packet);\n          break;\n\n        case socket_io_parser_1.PacketType.ACK:\n          this.onack(packet);\n          break;\n\n        case socket_io_parser_1.PacketType.BINARY_ACK:\n          this.onack(packet);\n          break;\n\n        case socket_io_parser_1.PacketType.DISCONNECT:\n          this.ondisconnect();\n          break;\n\n        case socket_io_parser_1.PacketType.CONNECT_ERROR:\n          var err = new Error(packet.data.message); // @ts-ignore\n\n          err.data = packet.data.data;\n\n          _get(_getPrototypeOf(Socket.prototype), \"emit\", this).call(this, \"connect_error\", err);\n\n          break;\n      }\n    }\n    /**\n     * Called upon a server event.\n     *\n     * @param packet\n     * @private\n     */\n\n  }, {\n    key: \"onevent\",\n    value: function onevent(packet) {\n      var args = packet.data || [];\n      debug(\"emitting event %j\", args);\n\n      if (null != packet.id) {\n        debug(\"attaching ack callback to event\");\n        args.push(this.ack(packet.id));\n      }\n\n      if (this.connected) {\n        this.emitEvent(args);\n      } else {\n        this.receiveBuffer.push(Object.freeze(args));\n      }\n    }\n  }, {\n    key: \"emitEvent\",\n    value: function emitEvent(args) {\n      if (this._anyListeners && this._anyListeners.length) {\n        var listeners = this._anyListeners.slice();\n\n        var _iterator = _createForOfIteratorHelper(listeners),\n            _step;\n\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var listener = _step.value;\n            listener.apply(this, args);\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n      }\n\n      _get(_getPrototypeOf(Socket.prototype), \"emit\", this).apply(this, args);\n    }\n    /**\n     * Produces an ack callback to emit with an event.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"ack\",\n    value: function ack(id) {\n      var self = this;\n      var sent = false;\n      return function () {\n        // prevent double callbacks\n        if (sent) return;\n        sent = true;\n\n        for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n          args[_key3] = arguments[_key3];\n        }\n\n        debug(\"sending ack %j\", args);\n        self.packet({\n          type: socket_io_parser_1.PacketType.ACK,\n          id: id,\n          data: args\n        });\n      };\n    }\n    /**\n     * Called upon a server acknowlegement.\n     *\n     * @param packet\n     * @private\n     */\n\n  }, {\n    key: \"onack\",\n    value: function onack(packet) {\n      var ack = this.acks[packet.id];\n\n      if (\"function\" === typeof ack) {\n        debug(\"calling ack %s with %j\", packet.id, packet.data);\n        ack.apply(this, packet.data);\n        delete this.acks[packet.id];\n      } else {\n        debug(\"bad ack %s\", packet.id);\n      }\n    }\n    /**\n     * Called upon server connect.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"onconnect\",\n    value: function onconnect(id) {\n      debug(\"socket connected with id %s\", id);\n      this.id = id;\n      this.connected = true;\n      this.disconnected = false;\n\n      _get(_getPrototypeOf(Socket.prototype), \"emit\", this).call(this, \"connect\");\n\n      this.emitBuffered();\n    }\n    /**\n     * Emit buffered events (received and emitted).\n     *\n     * @private\n     */\n\n  }, {\n    key: \"emitBuffered\",\n    value: function emitBuffered() {\n      var _this3 = this;\n\n      this.receiveBuffer.forEach(function (args) {\n        return _this3.emitEvent(args);\n      });\n      this.receiveBuffer = [];\n      this.sendBuffer.forEach(function (packet) {\n        return _this3.packet(packet);\n      });\n      this.sendBuffer = [];\n    }\n    /**\n     * Called upon server disconnect.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"ondisconnect\",\n    value: function ondisconnect() {\n      debug(\"server disconnect (%s)\", this.nsp);\n      this.destroy();\n      this.onclose(\"io server disconnect\");\n    }\n    /**\n     * Called upon forced client/server side disconnections,\n     * this method ensures the manager stops tracking us and\n     * that reconnections don't get triggered for this.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      if (this.subs) {\n        // clean subscriptions to avoid reconnections\n        this.subs.forEach(function (subDestroy) {\n          return subDestroy();\n        });\n        this.subs = undefined;\n      }\n\n      this.io[\"_destroy\"](this);\n    }\n    /**\n     * Disconnects the socket manually.\n     *\n     * @return self\n     * @public\n     */\n\n  }, {\n    key: \"disconnect\",\n    value: function disconnect() {\n      if (this.connected) {\n        debug(\"performing disconnect (%s)\", this.nsp);\n        this.packet({\n          type: socket_io_parser_1.PacketType.DISCONNECT\n        });\n      } // remove socket from pool\n\n\n      this.destroy();\n\n      if (this.connected) {\n        // fire events\n        this.onclose(\"io client disconnect\");\n      }\n\n      return this;\n    }\n    /**\n     * Alias for disconnect()\n     *\n     * @return self\n     * @public\n     */\n\n  }, {\n    key: \"close\",\n    value: function close() {\n      return this.disconnect();\n    }\n    /**\n     * Sets the compress flag.\n     *\n     * @param compress - if `true`, compresses the sending data\n     * @return self\n     * @public\n     */\n\n  }, {\n    key: \"compress\",\n    value: function compress(_compress) {\n      this.flags.compress = _compress;\n      return this;\n    }\n    /**\n     * Sets a modifier for a subsequent event emission that the event message will be dropped when this socket is not\n     * ready to send messages.\n     *\n     * @returns self\n     * @public\n     */\n\n  }, {\n    key: \"volatile\",\n    get: function get() {\n      this.flags.volatile = true;\n      return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback.\n     *\n     * @param listener\n     * @public\n     */\n\n  }, {\n    key: \"onAny\",\n    value: function onAny(listener) {\n      this._anyListeners = this._anyListeners || [];\n\n      this._anyListeners.push(listener);\n\n      return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback. The listener is added to the beginning of the listeners array.\n     *\n     * @param listener\n     * @public\n     */\n\n  }, {\n    key: \"prependAny\",\n    value: function prependAny(listener) {\n      this._anyListeners = this._anyListeners || [];\n\n      this._anyListeners.unshift(listener);\n\n      return this;\n    }\n    /**\n     * Removes the listener that will be fired when any event is emitted.\n     *\n     * @param listener\n     * @public\n     */\n\n  }, {\n    key: \"offAny\",\n    value: function offAny(listener) {\n      if (!this._anyListeners) {\n        return this;\n      }\n\n      if (listener) {\n        var listeners = this._anyListeners;\n\n        for (var i = 0; i < listeners.length; i++) {\n          if (listener === listeners[i]) {\n            listeners.splice(i, 1);\n            return this;\n          }\n        }\n      } else {\n        this._anyListeners = [];\n      }\n\n      return this;\n    }\n    /**\n     * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,\n     * e.g. to remove listeners.\n     *\n     * @public\n     */\n\n  }, {\n    key: \"listenersAny\",\n    value: function listenersAny() {\n      return this._anyListeners || [];\n    }\n  }]);\n\n  return Socket;\n}(Emitter);\n\nexports.Socket = Socket;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.url = void 0;\n\nvar parseuri = require(\"parseuri\");\n\nvar debug = require(\"debug\")(\"socket.io-client:url\");\n/**\n * URL parser.\n *\n * @param uri - url\n * @param path - the request path of the connection\n * @param loc - An object meant to mimic window.location.\n *        Defaults to window.location.\n * @public\n */\n\n\nfunction url(uri) {\n  var path = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"\";\n  var loc = arguments.length > 2 ? arguments[2] : undefined;\n  var obj = uri; // default to window.location\n\n  loc = loc || typeof location !== \"undefined\" && location;\n  if (null == uri) uri = loc.protocol + \"//\" + loc.host; // relative path support\n\n  if (typeof uri === \"string\") {\n    if (\"/\" === uri.charAt(0)) {\n      if (\"/\" === uri.charAt(1)) {\n        uri = loc.protocol + uri;\n      } else {\n        uri = loc.host + uri;\n      }\n    }\n\n    if (!/^(https?|wss?):\\/\\//.test(uri)) {\n      debug(\"protocol-less url %s\", uri);\n\n      if (\"undefined\" !== typeof loc) {\n        uri = loc.protocol + \"//\" + uri;\n      } else {\n        uri = \"https://\" + uri;\n      }\n    } // parse\n\n\n    debug(\"parse %s\", uri);\n    obj = parseuri(uri);\n  } // make sure we treat `localhost:80` and `localhost` equally\n\n\n  if (!obj.port) {\n    if (/^(http|ws)$/.test(obj.protocol)) {\n      obj.port = \"80\";\n    } else if (/^(http|ws)s$/.test(obj.protocol)) {\n      obj.port = \"443\";\n    }\n  }\n\n  obj.path = obj.path || \"/\";\n  var ipv6 = obj.host.indexOf(\":\") !== -1;\n  var host = ipv6 ? \"[\" + obj.host + \"]\" : obj.host; // define unique id\n\n  obj.id = obj.protocol + \"://\" + host + \":\" + obj.port + path; // define href\n\n  obj.href = obj.protocol + \"://\" + host + (loc && loc.port === obj.port ? \"\" : \":\" + obj.port);\n  return obj;\n}\n\nexports.url = url;","/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\n\nexports.destroy = function () {\n  var warned = false;\n  return function () {\n    if (!warned) {\n      warned = true;\n      console.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n    }\n  };\n}();\n/**\n * Colors.\n */\n\n\nexports.colors = ['#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC', '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF', '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC', '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF', '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC', '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033', '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366', '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933', '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC', '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF', '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33'];\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n// eslint-disable-next-line complexity\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n    return true;\n  } // Internet Explorer and Edge do not support colors.\n\n\n  if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n    return false;\n  } // Is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\n\n  return typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance || // Is firebug? http://stackoverflow.com/a/398120/376773\n  typeof window !== 'undefined' && window.console && (window.console.firebug || window.console.exception && window.console.table) || // Is firefox >= v31?\n  // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n  typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31 || // Double check webkit in userAgent just in case we are in a worker\n  typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/);\n}\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\n\nfunction formatArgs(args) {\n  args[0] = (this.useColors ? '%c' : '') + this.namespace + (this.useColors ? ' %c' : ' ') + args[0] + (this.useColors ? '%c ' : ' ') + '+' + module.exports.humanize(this.diff);\n\n  if (!this.useColors) {\n    return;\n  }\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit'); // The final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function (match) {\n    if (match === '%%') {\n      return;\n    }\n\n    index++;\n\n    if (match === '%c') {\n      // We only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n  args.splice(lastC, 0, c);\n}\n/**\n * Invokes `console.debug()` when available.\n * No-op when `console.debug` is not a \"function\".\n * If `console.debug` is not available, falls back\n * to `console.log`.\n *\n * @api public\n */\n\n\nexports.log = console.debug || console.log || function () {};\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\n\nfunction save(namespaces) {\n  try {\n    if (namespaces) {\n      exports.storage.setItem('debug', namespaces);\n    } else {\n      exports.storage.removeItem('debug');\n    }\n  } catch (error) {// Swallow\n    // XXX (@Qix-) should we be logging these?\n  }\n}\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\n\nfunction load() {\n  var r;\n\n  try {\n    r = exports.storage.getItem('debug');\n  } catch (error) {// Swallow\n    // XXX (@Qix-) should we be logging these?\n  } // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\n\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\n\nfunction localstorage() {\n  try {\n    // TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n    // The Browser also has localStorage in the global context.\n    return localStorage;\n  } catch (error) {// Swallow\n    // XXX (@Qix-) should we be logging these?\n  }\n}\n\nmodule.exports = require('./common')(exports);\nvar formatters = module.exports.formatters;\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n  try {\n    return JSON.stringify(v);\n  } catch (error) {\n    return '[UnexpectedJSONParseError]: ' + error.message;\n  }\n};","var _toConsumableArray = require(\"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/toConsumableArray\");\n\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\nfunction setup(env) {\n  createDebug.debug = createDebug;\n  createDebug.default = createDebug;\n  createDebug.coerce = coerce;\n  createDebug.disable = disable;\n  createDebug.enable = enable;\n  createDebug.enabled = enabled;\n  createDebug.humanize = require('ms');\n  createDebug.destroy = destroy;\n  Object.keys(env).forEach(function (key) {\n    createDebug[key] = env[key];\n  });\n  /**\n  * The currently active debug mode names, and names to skip.\n  */\n\n  createDebug.names = [];\n  createDebug.skips = [];\n  /**\n  * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n  *\n  * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n  */\n\n  createDebug.formatters = {};\n  /**\n  * Selects a color for a debug namespace\n  * @param {String} namespace The namespace string for the for the debug instance to be colored\n  * @return {Number|String} An ANSI color code for the given namespace\n  * @api private\n  */\n\n  function selectColor(namespace) {\n    var hash = 0;\n\n    for (var i = 0; i < namespace.length; i++) {\n      hash = (hash << 5) - hash + namespace.charCodeAt(i);\n      hash |= 0; // Convert to 32bit integer\n    }\n\n    return createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n  }\n\n  createDebug.selectColor = selectColor;\n  /**\n  * Create a debugger with the given `namespace`.\n  *\n  * @param {String} namespace\n  * @return {Function}\n  * @api public\n  */\n\n  function createDebug(namespace) {\n    var prevTime;\n    var enableOverride = null;\n    var namespacesCache;\n    var enabledCache;\n\n    function debug() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      // Disabled?\n      if (!debug.enabled) {\n        return;\n      }\n\n      var self = debug; // Set `diff` timestamp\n\n      var curr = Number(new Date());\n      var ms = curr - (prevTime || curr);\n      self.diff = ms;\n      self.prev = prevTime;\n      self.curr = curr;\n      prevTime = curr;\n      args[0] = createDebug.coerce(args[0]);\n\n      if (typeof args[0] !== 'string') {\n        // Anything else let's inspect with %O\n        args.unshift('%O');\n      } // Apply any `formatters` transformations\n\n\n      var index = 0;\n      args[0] = args[0].replace(/%([a-zA-Z%])/g, function (match, format) {\n        // If we encounter an escaped % then don't increase the array index\n        if (match === '%%') {\n          return '%';\n        }\n\n        index++;\n        var formatter = createDebug.formatters[format];\n\n        if (typeof formatter === 'function') {\n          var val = args[index];\n          match = formatter.call(self, val); // Now we need to remove `args[index]` since it's inlined in the `format`\n\n          args.splice(index, 1);\n          index--;\n        }\n\n        return match;\n      }); // Apply env-specific formatting (colors, etc.)\n\n      createDebug.formatArgs.call(self, args);\n      var logFn = self.log || createDebug.log;\n      logFn.apply(self, args);\n    }\n\n    debug.namespace = namespace;\n    debug.useColors = createDebug.useColors();\n    debug.color = createDebug.selectColor(namespace);\n    debug.extend = extend;\n    debug.destroy = createDebug.destroy; // XXX Temporary. Will be removed in the next major release.\n\n    Object.defineProperty(debug, 'enabled', {\n      enumerable: true,\n      configurable: false,\n      get: function get() {\n        if (enableOverride !== null) {\n          return enableOverride;\n        }\n\n        if (namespacesCache !== createDebug.namespaces) {\n          namespacesCache = createDebug.namespaces;\n          enabledCache = createDebug.enabled(namespace);\n        }\n\n        return enabledCache;\n      },\n      set: function set(v) {\n        enableOverride = v;\n      }\n    }); // Env-specific initialization logic for debug instances\n\n    if (typeof createDebug.init === 'function') {\n      createDebug.init(debug);\n    }\n\n    return debug;\n  }\n\n  function extend(namespace, delimiter) {\n    var newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n    newDebug.log = this.log;\n    return newDebug;\n  }\n  /**\n  * Enables a debug mode by namespaces. This can include modes\n  * separated by a colon and wildcards.\n  *\n  * @param {String} namespaces\n  * @api public\n  */\n\n\n  function enable(namespaces) {\n    createDebug.save(namespaces);\n    createDebug.namespaces = namespaces;\n    createDebug.names = [];\n    createDebug.skips = [];\n    var i;\n    var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n    var len = split.length;\n\n    for (i = 0; i < len; i++) {\n      if (!split[i]) {\n        // ignore empty strings\n        continue;\n      }\n\n      namespaces = split[i].replace(/\\*/g, '.*?');\n\n      if (namespaces[0] === '-') {\n        createDebug.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n      } else {\n        createDebug.names.push(new RegExp('^' + namespaces + '$'));\n      }\n    }\n  }\n  /**\n  * Disable debug output.\n  *\n  * @return {String} namespaces\n  * @api public\n  */\n\n\n  function disable() {\n    var namespaces = [].concat(_toConsumableArray(createDebug.names.map(toNamespace)), _toConsumableArray(createDebug.skips.map(toNamespace).map(function (namespace) {\n      return '-' + namespace;\n    }))).join(',');\n    createDebug.enable('');\n    return namespaces;\n  }\n  /**\n  * Returns true if the given mode name is enabled, false otherwise.\n  *\n  * @param {String} name\n  * @return {Boolean}\n  * @api public\n  */\n\n\n  function enabled(name) {\n    if (name[name.length - 1] === '*') {\n      return true;\n    }\n\n    var i;\n    var len;\n\n    for (i = 0, len = createDebug.skips.length; i < len; i++) {\n      if (createDebug.skips[i].test(name)) {\n        return false;\n      }\n    }\n\n    for (i = 0, len = createDebug.names.length; i < len; i++) {\n      if (createDebug.names[i].test(name)) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n  /**\n  * Convert regexp to namespace\n  *\n  * @param {RegExp} regxep\n  * @return {String} namespace\n  * @api private\n  */\n\n\n  function toNamespace(regexp) {\n    return regexp.toString().substring(2, regexp.toString().length - 2).replace(/\\.\\*\\?$/, '*');\n  }\n  /**\n  * Coerce `val`.\n  *\n  * @param {Mixed} val\n  * @return {Mixed}\n  * @api private\n  */\n\n\n  function coerce(val) {\n    if (val instanceof Error) {\n      return val.stack || val.message;\n    }\n\n    return val;\n  }\n  /**\n  * XXX DO NOT USE. This is a temporary stub function.\n  * XXX It WILL be removed in the next major release.\n  */\n\n\n  function destroy() {\n    console.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n  }\n\n  createDebug.enable(createDebug.load());\n  return createDebug;\n}\n\nmodule.exports = setup;","/**\n * Module exports.\n *\n * Logic borrowed from Modernizr:\n *\n *   - https://github.com/Modernizr/Modernizr/blob/master/feature-detects/cors.js\n */\ntry {\n  module.exports = typeof XMLHttpRequest !== 'undefined' && 'withCredentials' in new XMLHttpRequest();\n} catch (err) {\n  // if XMLHttp support is disabled in IE then it will throw\n  // when trying to create\n  module.exports = false;\n}","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\n\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n\n  return result;\n}\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\n\n\nfunction overArg(func, transform) {\n  return function (arg) {\n    return func(transform(arg));\n  };\n}\n/** Used for built-in method references. */\n\n\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n/** Used to resolve the decompiled source of functions. */\n\nvar funcToString = funcProto.toString;\n/** Used to check objects for own properties. */\n\nvar hasOwnProperty = objectProto.hasOwnProperty;\n/** Used to infer the `Object` constructor. */\n\nvar objectCtorString = funcToString.call(Object);\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\n\nvar objectToString = objectProto.toString;\n/** Built-in value references. */\n\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\n\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\n\n\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || objectToString.call(value) != objectTag || isHostObject(value)) {\n    return false;\n  }\n\n  var proto = getPrototype(value);\n\n  if (proto === null) {\n    return true;\n  }\n\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return typeof Ctor == 'function' && Ctor instanceof Ctor && funcToString.call(Ctor) == objectCtorString;\n}\n\nmodule.exports = isPlainObject;","/**\n * Helpers.\n */\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function (val, options) {\n  options = options || {};\n  var type = typeof val;\n\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n\n  throw new Error('val is not a non-empty string or a valid number. val=' + JSON.stringify(val));\n};\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\n\nfunction parse(str) {\n  str = String(str);\n\n  if (str.length > 100) {\n    return;\n  }\n\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(str);\n\n  if (!match) {\n    return;\n  }\n\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n\n    default:\n      return undefined;\n  }\n}\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n\n  return ms + 'ms';\n}\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n\n  return ms + ' ms';\n}\n/**\n * Pluralization helper.\n */\n\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}","/**\n * Compiles a querystring\n * Returns string representation of the object\n *\n * @param {Object}\n * @api private\n */\nexports.encode = function (obj) {\n  var str = '';\n\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      if (str.length) str += '&';\n      str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\n    }\n  }\n\n  return str;\n};\n/**\n * Parses a simple querystring into an object\n *\n * @param {String} qs\n * @api private\n */\n\n\nexports.decode = function (qs) {\n  var qry = {};\n  var pairs = qs.split('&');\n\n  for (var i = 0, l = pairs.length; i < l; i++) {\n    var pair = pairs[i].split('=');\n    qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n  }\n\n  return qry;\n};","/**\n * Parses an URI\n *\n * @author Steven Levithan <stevenlevithan.com> (MIT license)\n * @api private\n */\nvar re = /^(?:(?![^:@]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\nvar parts = ['source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'];\n\nmodule.exports = function parseuri(str) {\n  var src = str,\n      b = str.indexOf('['),\n      e = str.indexOf(']');\n\n  if (b != -1 && e != -1) {\n    str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\n  }\n\n  var m = re.exec(str || ''),\n      uri = {},\n      i = 14;\n\n  while (i--) {\n    uri[parts[i]] = m[i] || '';\n  }\n\n  if (b != -1 && e != -1) {\n    uri.source = src;\n    uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\n    uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\n    uri.ipv6uri = true;\n  }\n\n  uri.pathNames = pathNames(uri, uri['path']);\n  uri.queryKey = queryKey(uri, uri['query']);\n  return uri;\n};\n\nfunction pathNames(obj, path) {\n  var regx = /\\/{2,9}/g,\n      names = path.replace(regx, \"/\").split(\"/\");\n\n  if (path.substr(0, 1) == '/' || path.length === 0) {\n    names.splice(0, 1);\n  }\n\n  if (path.substr(path.length - 1, 1) == '/') {\n    names.splice(names.length - 1, 1);\n  }\n\n  return names;\n}\n\nfunction queryKey(uri, query) {\n  var data = {};\n  query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g, function ($0, $1, $2) {\n    if ($1) {\n      data[$1] = $2;\n    }\n  });\n  return data;\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nexports.load = load;\nexports.loadAll = loadAll;\nexports.select = select;\nexports.save = save;\nexports.remove = remove;\nexports.setRawCookie = setRawCookie;\nexports.plugToRequest = plugToRequest;\n\nvar _cookie = require('cookie');\n\nvar _cookie2 = _interopRequireDefault(_cookie);\n\nvar _objectAssign = require('object-assign');\n\nvar _objectAssign2 = _interopRequireDefault(_objectAssign);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar IS_NODE = typeof document === 'undefined' || typeof process !== 'undefined' && process.env && process.env.NODE_ENV === 'test';\nvar _rawCookie = {};\n\nvar _res = void 0;\n\nfunction _isResWritable() {\n  return _res && !_res.headersSent;\n}\n\nfunction load(name, doNotParse) {\n  var cookies = IS_NODE ? _rawCookie : _cookie2.default.parse(document.cookie);\n  var cookieVal = cookies && cookies[name];\n\n  if (typeof doNotParse === 'undefined') {\n    doNotParse = !cookieVal || cookieVal[0] !== '{' && cookieVal[0] !== '[';\n  }\n\n  if (!doNotParse) {\n    try {\n      cookieVal = JSON.parse(cookieVal);\n    } catch (err) {// Not serialized object\n    }\n  }\n\n  return cookieVal;\n}\n\nfunction loadAll(doNotParse) {\n  var cookies = IS_NODE ? _rawCookie : _cookie2.default.parse(document.cookie);\n  var cookieVal = cookies;\n\n  if (typeof doNotParse === 'undefined') {\n    doNotParse = !cookieVal || cookieVal[0] !== '{' && cookieVal[0] !== '[';\n  }\n\n  if (!doNotParse) {\n    try {\n      cookieVal = JSON.parse(cookieVal);\n    } catch (err) {// Not serialized object\n    }\n  }\n\n  return cookieVal;\n}\n\nfunction select(regex) {\n  var cookies = IS_NODE ? _rawCookie : _cookie2.default.parse(document.cookie);\n\n  if (!cookies) {\n    return {};\n  }\n\n  if (!regex) {\n    return cookies;\n  }\n\n  return Object.keys(cookies).reduce(function (accumulator, name) {\n    if (!regex.test(name)) {\n      return accumulator;\n    }\n\n    var newCookie = {};\n    newCookie[name] = cookies[name];\n    return (0, _objectAssign2.default)({}, accumulator, newCookie);\n  }, {});\n}\n\nfunction save(name, val, opt) {\n  _rawCookie[name] = val; // Allow you to work with cookies as objects.\n\n  if ((typeof val === 'undefined' ? 'undefined' : _typeof(val)) === 'object') {\n    _rawCookie[name] = JSON.stringify(val);\n  } // Cookies only work in the browser\n\n\n  if (!IS_NODE) {\n    document.cookie = _cookie2.default.serialize(name, _rawCookie[name], opt);\n  }\n\n  if (_isResWritable() && _res.cookie) {\n    _res.cookie(name, val, opt);\n  }\n}\n\nfunction remove(name, opt) {\n  delete _rawCookie[name];\n\n  if (typeof opt === 'undefined') {\n    opt = {};\n  } else if (typeof opt === 'string') {\n    // Will be deprecated in future versions\n    opt = {\n      path: opt\n    };\n  } else {\n    // Prevent mutation of opt below\n    opt = (0, _objectAssign2.default)({}, opt);\n  }\n\n  if (typeof document !== 'undefined') {\n    opt.expires = new Date(1970, 1, 1, 0, 0, 1);\n    opt.maxAge = 0;\n    document.cookie = _cookie2.default.serialize(name, '', opt);\n  }\n\n  if (_isResWritable() && _res.clearCookie) {\n    _res.clearCookie(name, opt);\n  }\n}\n\nfunction setRawCookie(rawCookie) {\n  if (rawCookie) {\n    _rawCookie = _cookie2.default.parse(rawCookie);\n  } else {\n    _rawCookie = {};\n  }\n}\n\nfunction plugToRequest(req, res) {\n  if (req.cookie) {\n    _rawCookie = req.cookie;\n  } else if (req.cookies) {\n    _rawCookie = req.cookies;\n  } else if (req.headers && req.headers.cookie) {\n    setRawCookie(req.headers.cookie);\n  } else {\n    _rawCookie = {};\n  }\n\n  _res = res;\n  return function unplug() {\n    _res = null;\n    _rawCookie = {};\n  };\n}\n\nexports.default = {\n  setRawCookie: setRawCookie,\n  load: load,\n  loadAll: loadAll,\n  select: select,\n  save: save,\n  remove: remove,\n  plugToRequest: plugToRequest\n};","/*!\n * cookie\n * Copyright(c) 2012-2014 Roman Shtylman\n * Copyright(c) 2015 Douglas Christopher Wilson\n * MIT Licensed\n */\n'use strict';\n/**\n * Module exports.\n * @public\n */\n\nexports.parse = parse;\nexports.serialize = serialize;\n/**\n * Module variables.\n * @private\n */\n\nvar decode = decodeURIComponent;\nvar encode = encodeURIComponent;\nvar pairSplitRegExp = /; */;\n/**\n * RegExp to match field-content in RFC 7230 sec 3.2\n *\n * field-content = field-vchar [ 1*( SP / HTAB ) field-vchar ]\n * field-vchar   = VCHAR / obs-text\n * obs-text      = %x80-FF\n */\n\nvar fieldContentRegExp = /^[\\u0009\\u0020-\\u007e\\u0080-\\u00ff]+$/;\n/**\n * Parse a cookie header.\n *\n * Parse the given cookie header string into an object\n * The object has the various cookies as keys(names) => values\n *\n * @param {string} str\n * @param {object} [options]\n * @return {object}\n * @public\n */\n\nfunction parse(str, options) {\n  if (typeof str !== 'string') {\n    throw new TypeError('argument str must be a string');\n  }\n\n  var obj = {};\n  var opt = options || {};\n  var pairs = str.split(pairSplitRegExp);\n  var dec = opt.decode || decode;\n\n  for (var i = 0; i < pairs.length; i++) {\n    var pair = pairs[i];\n    var eq_idx = pair.indexOf('='); // skip things that don't look like key=value\n\n    if (eq_idx < 0) {\n      continue;\n    }\n\n    var key = pair.substr(0, eq_idx).trim();\n    var val = pair.substr(++eq_idx, pair.length).trim(); // quoted values\n\n    if ('\"' == val[0]) {\n      val = val.slice(1, -1);\n    } // only assign once\n\n\n    if (undefined == obj[key]) {\n      obj[key] = tryDecode(val, dec);\n    }\n  }\n\n  return obj;\n}\n/**\n * Serialize data into a cookie header.\n *\n * Serialize the a name value pair into a cookie string suitable for\n * http headers. An optional options object specified cookie parameters.\n *\n * serialize('foo', 'bar', { httpOnly: true })\n *   => \"foo=bar; httpOnly\"\n *\n * @param {string} name\n * @param {string} val\n * @param {object} [options]\n * @return {string}\n * @public\n */\n\n\nfunction serialize(name, val, options) {\n  var opt = options || {};\n  var enc = opt.encode || encode;\n\n  if (typeof enc !== 'function') {\n    throw new TypeError('option encode is invalid');\n  }\n\n  if (!fieldContentRegExp.test(name)) {\n    throw new TypeError('argument name is invalid');\n  }\n\n  var value = enc(val);\n\n  if (value && !fieldContentRegExp.test(value)) {\n    throw new TypeError('argument val is invalid');\n  }\n\n  var str = name + '=' + value;\n\n  if (null != opt.maxAge) {\n    var maxAge = opt.maxAge - 0;\n    if (isNaN(maxAge)) throw new Error('maxAge should be a Number');\n    str += '; Max-Age=' + Math.floor(maxAge);\n  }\n\n  if (opt.domain) {\n    if (!fieldContentRegExp.test(opt.domain)) {\n      throw new TypeError('option domain is invalid');\n    }\n\n    str += '; Domain=' + opt.domain;\n  }\n\n  if (opt.path) {\n    if (!fieldContentRegExp.test(opt.path)) {\n      throw new TypeError('option path is invalid');\n    }\n\n    str += '; Path=' + opt.path;\n  }\n\n  if (opt.expires) {\n    if (typeof opt.expires.toUTCString !== 'function') {\n      throw new TypeError('option expires is invalid');\n    }\n\n    str += '; Expires=' + opt.expires.toUTCString();\n  }\n\n  if (opt.httpOnly) {\n    str += '; HttpOnly';\n  }\n\n  if (opt.secure) {\n    str += '; Secure';\n  }\n\n  if (opt.sameSite) {\n    var sameSite = typeof opt.sameSite === 'string' ? opt.sameSite.toLowerCase() : opt.sameSite;\n\n    switch (sameSite) {\n      case true:\n        str += '; SameSite=Strict';\n        break;\n\n      case 'lax':\n        str += '; SameSite=Lax';\n        break;\n\n      case 'strict':\n        str += '; SameSite=Strict';\n        break;\n\n      default:\n        throw new TypeError('option sameSite is invalid');\n    }\n  }\n\n  return str;\n}\n/**\n * Try decoding a string using a decoding function.\n *\n * @param {string} str\n * @param {function} decode\n * @private\n */\n\n\nfunction tryDecode(str, decode) {\n  try {\n    return decode(str);\n  } catch (e) {\n    return str;\n  }\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.diffAny = exports.diffObjects = exports.diffArrays = exports.intersection = exports.subtract = exports.isDestructive = void 0;\n\nvar pointer_1 = require(\"./pointer\"); // we only need this for type inference\n\n\nvar util_1 = require(\"./util\");\n\nfunction isDestructive(_a) {\n  var op = _a.op;\n  return op === 'remove' || op === 'replace' || op === 'copy' || op === 'move';\n}\n\nexports.isDestructive = isDestructive;\n/**\nList the keys in `minuend` that are not in `subtrahend`.\n\nA key is only considered if it is both 1) an own-property (o.hasOwnProperty(k))\nof the object, and 2) has a value that is not undefined. This is to match JSON\nsemantics, where JSON object serialization drops keys with undefined values.\n\n@param minuend Object of interest\n@param subtrahend Object of comparison\n@returns Array of keys that are in `minuend` but not in `subtrahend`.\n*/\n\nfunction subtract(minuend, subtrahend) {\n  // initialize empty object; we only care about the keys, the values can be anything\n  var obj = {}; // build up obj with all the properties of minuend\n\n  for (var add_key in minuend) {\n    if (util_1.hasOwnProperty.call(minuend, add_key) && minuend[add_key] !== undefined) {\n      obj[add_key] = 1;\n    }\n  } // now delete all the properties of subtrahend from obj\n  // (deleting a missing key has no effect)\n\n\n  for (var del_key in subtrahend) {\n    if (util_1.hasOwnProperty.call(subtrahend, del_key) && subtrahend[del_key] !== undefined) {\n      delete obj[del_key];\n    }\n  } // finally, extract whatever keys remain in obj\n\n\n  return Object.keys(obj);\n}\n\nexports.subtract = subtract;\n/**\nList the keys that shared by all `objects`.\n\nThe semantics of what constitutes a \"key\" is described in {@link subtract}.\n\n@param objects Array of objects to compare\n@returns Array of keys that are in (\"own-properties\" of) every object in `objects`.\n*/\n\nfunction intersection(objects) {\n  var length = objects.length; // prepare empty counter to keep track of how many objects each key occurred in\n\n  var counter = {}; // go through each object and increment the counter for each key in that object\n\n  for (var i = 0; i < length; i++) {\n    var object = objects[i];\n\n    for (var key in object) {\n      if (util_1.hasOwnProperty.call(object, key) && object[key] !== undefined) {\n        counter[key] = (counter[key] || 0) + 1;\n      }\n    }\n  } // now delete all keys from the counter that were not seen in every object\n\n\n  for (var key in counter) {\n    if (counter[key] < length) {\n      delete counter[key];\n    }\n  } // finally, extract whatever keys remain in the counter\n\n\n  return Object.keys(counter);\n}\n\nexports.intersection = intersection;\n\nfunction isArrayAdd(array_operation) {\n  return array_operation.op === 'add';\n}\n\nfunction isArrayRemove(array_operation) {\n  return array_operation.op === 'remove';\n}\n\nfunction appendArrayOperation(base, operation) {\n  return {\n    // the new operation must be pushed on the end\n    operations: base.operations.concat(operation),\n    cost: base.cost + 1\n  };\n}\n/**\nCalculate the shortest sequence of operations to get from `input` to `output`,\nusing a dynamic programming implementation of the Levenshtein distance algorithm.\n\nTo get from the input ABC to the output AZ we could just delete all the input\nand say \"insert A, insert Z\" and be done with it. That's what we do if the\ninput is empty. But we can be smarter.\n\n          output\n               A   Z\n               -   -\n          [0]  1   2\ninput A |  1  [0]  1\n      B |  2  [1]  1\n      C |  3   2  [2]\n\n1) start at 0,0 (+0)\n2) keep A (+0)\n3) remove B (+1)\n4) replace C with Z (+1)\n\nIf the `input` (source) is empty, they'll all be in the top row, resulting in an\narray of 'add' operations.\nIf the `output` (target) is empty, everything will be in the left column,\nresulting in an array of 'remove' operations.\n\n@returns A list of add/remove/replace operations.\n*/\n\n\nfunction diffArrays(input, output, ptr, diff) {\n  if (diff === void 0) {\n    diff = diffAny;\n  } // set up cost matrix (very simple initialization: just a map)\n\n\n  var memo = {\n    '0,0': {\n      operations: [],\n      cost: 0\n    }\n  };\n  /**\n  Calculate the cheapest sequence of operations required to get from\n  input.slice(0, i) to output.slice(0, j).\n  There may be other valid sequences with the same cost, but none cheaper.\n     @param i The row in the layout above\n  @param j The column in the layout above\n  @returns An object containing a list of operations, along with the total cost\n           of applying them (+1 for each add/remove/replace operation)\n  */\n\n  function dist(i, j) {\n    // memoized\n    var memo_key = i + \",\" + j;\n    var memoized = memo[memo_key];\n\n    if (memoized === undefined) {\n      // TODO: this !diff(...).length usage could/should be lazy\n      if (i > 0 && j > 0 && !diff(input[i - 1], output[j - 1], new pointer_1.Pointer()).length) {\n        // equal (no operations => no cost)\n        memoized = dist(i - 1, j - 1);\n      } else {\n        var alternatives = [];\n\n        if (i > 0) {\n          // NOT topmost row\n          var remove_base = dist(i - 1, j);\n          var remove_operation = {\n            op: 'remove',\n            index: i - 1\n          };\n          alternatives.push(appendArrayOperation(remove_base, remove_operation));\n        }\n\n        if (j > 0) {\n          // NOT leftmost column\n          var add_base = dist(i, j - 1);\n          var add_operation = {\n            op: 'add',\n            index: i - 1,\n            value: output[j - 1]\n          };\n          alternatives.push(appendArrayOperation(add_base, add_operation));\n        }\n\n        if (i > 0 && j > 0) {\n          // TABLE MIDDLE\n          // supposing we replaced it, compute the rest of the costs:\n          var replace_base = dist(i - 1, j - 1); // okay, the general plan is to replace it, but we can be smarter,\n          // recursing into the structure and replacing only part of it if\n          // possible, but to do so we'll need the original value\n\n          var replace_operation = {\n            op: 'replace',\n            index: i - 1,\n            original: input[i - 1],\n            value: output[j - 1]\n          };\n          alternatives.push(appendArrayOperation(replace_base, replace_operation));\n        } // the only other case, i === 0 && j === 0, has already been memoized\n        // the meat of the algorithm:\n        // sort by cost to find the lowest one (might be several ties for lowest)\n        // [4, 6, 7, 1, 2].sort((a, b) => a - b) -> [ 1, 2, 4, 6, 7 ]\n\n\n        var best = alternatives.sort(function (a, b) {\n          return a.cost - b.cost;\n        })[0];\n        memoized = best;\n      }\n\n      memo[memo_key] = memoized;\n    }\n\n    return memoized;\n  } // handle weird objects masquerading as Arrays that don't have proper length\n  // properties by using 0 for everything but positive numbers\n\n\n  var input_length = isNaN(input.length) || input.length <= 0 ? 0 : input.length;\n  var output_length = isNaN(output.length) || output.length <= 0 ? 0 : output.length;\n  var array_operations = dist(input_length, output_length).operations;\n  var padded_operations = array_operations.reduce(function (_a, array_operation) {\n    var operations = _a[0],\n        padding = _a[1];\n\n    if (isArrayAdd(array_operation)) {\n      var padded_index = array_operation.index + 1 + padding;\n      var index_token = padded_index < input_length + padding ? String(padded_index) : '-';\n      var operation = {\n        op: array_operation.op,\n        path: ptr.add(index_token).toString(),\n        value: array_operation.value\n      }; // padding++ // maybe only if array_operation.index > -1 ?\n\n      return [operations.concat(operation), padding + 1];\n    } else if (isArrayRemove(array_operation)) {\n      var operation = {\n        op: array_operation.op,\n        path: ptr.add(String(array_operation.index + padding)).toString()\n      }; // padding--\n\n      return [operations.concat(operation), padding - 1];\n    } else {\n      // replace\n      var replace_ptr = ptr.add(String(array_operation.index + padding));\n      var replace_operations = diff(array_operation.original, array_operation.value, replace_ptr);\n      return [operations.concat.apply(operations, replace_operations), padding];\n    }\n  }, [[], 0])[0];\n  return padded_operations;\n}\n\nexports.diffArrays = diffArrays;\n\nfunction diffObjects(input, output, ptr, diff) {\n  if (diff === void 0) {\n    diff = diffAny;\n  } // if a key is in input but not output -> remove it\n\n\n  var operations = [];\n  subtract(input, output).forEach(function (key) {\n    operations.push({\n      op: 'remove',\n      path: ptr.add(key).toString()\n    });\n  }); // if a key is in output but not input -> add it\n\n  subtract(output, input).forEach(function (key) {\n    operations.push({\n      op: 'add',\n      path: ptr.add(key).toString(),\n      value: output[key]\n    });\n  }); // if a key is in both, diff it recursively\n\n  intersection([input, output]).forEach(function (key) {\n    operations.push.apply(operations, diff(input[key], output[key], ptr.add(key)));\n  });\n  return operations;\n}\n\nexports.diffObjects = diffObjects;\n/**\n`diffAny()` returns an empty array if `input` and `output` are materially equal\n(i.e., would produce equivalent JSON); otherwise it produces an array of patches\nthat would transform `input` into `output`.\n\n> Here, \"equal\" means that the value at the target location and the\n> value conveyed by \"value\" are of the same JSON type, and that they\n> are considered equal by the following rules for that type:\n> o  strings: are considered equal if they contain the same number of\n>    Unicode characters and their code points are byte-by-byte equal.\n> o  numbers: are considered equal if their values are numerically\n>    equal.\n> o  arrays: are considered equal if they contain the same number of\n>    values, and if each value can be considered equal to the value at\n>    the corresponding position in the other array, using this list of\n>    type-specific rules.\n> o  objects: are considered equal if they contain the same number of\n>    members, and if each member can be considered equal to a member in\n>    the other object, by comparing their keys (as strings) and their\n>    values (using this list of type-specific rules).\n> o  literals (false, true, and null): are considered equal if they are\n>    the same.\n*/\n\nfunction diffAny(input, output, ptr, diff) {\n  if (diff === void 0) {\n    diff = diffAny;\n  } // strict equality handles literals, numbers, and strings (a sufficient but not necessary cause)\n\n\n  if (input === output) {\n    return [];\n  }\n\n  var input_type = util_1.objectType(input);\n  var output_type = util_1.objectType(output);\n\n  if (input_type == 'array' && output_type == 'array') {\n    return diffArrays(input, output, ptr, diff);\n  }\n\n  if (input_type == 'object' && output_type == 'object') {\n    return diffObjects(input, output, ptr, diff);\n  } // at this point we know that input and output are materially different;\n  // could be array -> object, object -> array, boolean -> undefined,\n  // number -> string, or some other combination, but nothing that can be split\n  // up into multiple patches: so `output` must replace `input` wholesale.\n\n\n  return [{\n    op: 'replace',\n    path: ptr.toString(),\n    value: output\n  }];\n}\n\nexports.diffAny = diffAny;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createTests = exports.createPatch = exports.applyPatch = void 0;\n\nvar pointer_1 = require(\"./pointer\");\n\nvar patch_1 = require(\"./patch\");\n\nvar diff_1 = require(\"./diff\");\n/**\nApply a 'application/json-patch+json'-type patch to an object.\n\n`patch` *must* be an array of operations.\n\n> Operation objects MUST have exactly one \"op\" member, whose value\n> indicates the operation to perform.  Its value MUST be one of \"add\",\n> \"remove\", \"replace\", \"move\", \"copy\", or \"test\"; other values are\n> errors.\n\nThis method mutates the target object in-place.\n\n@returns list of results, one for each operation: `null` indicated success,\n         otherwise, the result will be an instance of one of the Error classes:\n         MissingError, InvalidOperationError, or TestError.\n*/\n\n\nfunction applyPatch(object, patch) {\n  return patch.map(function (operation) {\n    return patch_1.apply(object, operation);\n  });\n}\n\nexports.applyPatch = applyPatch;\n\nfunction wrapVoidableDiff(diff) {\n  function wrappedDiff(input, output, ptr) {\n    var custom_patch = diff(input, output, ptr); // ensure an array is always returned\n\n    return Array.isArray(custom_patch) ? custom_patch : diff_1.diffAny(input, output, ptr, wrappedDiff);\n  }\n\n  return wrappedDiff;\n}\n/**\nProduce a 'application/json-patch+json'-type patch to get from one object to\nanother.\n\nThis does not alter `input` or `output` unless they have a property getter with\nside-effects (which is not a good idea anyway).\n\n`diff` is called on each pair of comparable non-primitive nodes in the\n`input`/`output` object trees, producing nested patches. Return `undefined`\nto fall back to default behaviour.\n\nReturns list of operations to perform on `input` to produce `output`.\n*/\n\n\nfunction createPatch(input, output, diff) {\n  var ptr = new pointer_1.Pointer(); // a new Pointer gets a default path of [''] if not specified\n\n  return (diff ? wrapVoidableDiff(diff) : diff_1.diffAny)(input, output, ptr);\n}\n\nexports.createPatch = createPatch;\n/**\nCreate a test operation based on `input`'s current evaluation of the JSON\nPointer `path`; if such a pointer cannot be resolved, returns undefined.\n*/\n\nfunction createTest(input, path) {\n  var endpoint = pointer_1.Pointer.fromJSON(path).evaluate(input);\n\n  if (endpoint !== undefined) {\n    return {\n      op: 'test',\n      path: path,\n      value: endpoint.value\n    };\n  }\n}\n/**\nProduce an 'application/json-patch+json'-type list of tests, to verify that\nexisting values in an object are identical to the those captured at some\ncheckpoint (whenever this function is called).\n\nThis does not alter `input` or `output` unless they have a property getter with\nside-effects (which is not a good idea anyway).\n\nReturns list of test operations.\n*/\n\n\nfunction createTests(input, patch) {\n  var tests = new Array();\n  patch.filter(diff_1.isDestructive).forEach(function (operation) {\n    var pathTest = createTest(input, operation.path);\n    if (pathTest) tests.push(pathTest);\n\n    if ('from' in operation) {\n      var fromTest = createTest(input, operation.from);\n      if (fromTest) tests.push(fromTest);\n    }\n  });\n  return tests;\n}\n\nexports.createTests = createTests;","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.apply = exports.InvalidOperationError = exports.test = exports.copy = exports.move = exports.replace = exports.remove = exports.add = exports.TestError = exports.MissingError = void 0;\n\nvar pointer_1 = require(\"./pointer\");\n\nvar util_1 = require(\"./util\");\n\nvar diff_1 = require(\"./diff\");\n\nvar MissingError =\n/** @class */\nfunction (_super) {\n  __extends(MissingError, _super);\n\n  function MissingError(path) {\n    var _this = _super.call(this, \"Value required at path: \" + path) || this;\n\n    _this.path = path;\n    _this.name = 'MissingError';\n    return _this;\n  }\n\n  return MissingError;\n}(Error);\n\nexports.MissingError = MissingError;\n\nvar TestError =\n/** @class */\nfunction (_super) {\n  __extends(TestError, _super);\n\n  function TestError(actual, expected) {\n    var _this = _super.call(this, \"Test failed: \" + actual + \" != \" + expected) || this;\n\n    _this.actual = actual;\n    _this.expected = expected;\n    _this.name = 'TestError';\n    return _this;\n  }\n\n  return TestError;\n}(Error);\n\nexports.TestError = TestError;\n\nfunction _add(object, key, value) {\n  if (Array.isArray(object)) {\n    // `key` must be an index\n    if (key == '-') {\n      object.push(value);\n    } else {\n      var index = parseInt(key, 10);\n      object.splice(index, 0, value);\n    }\n  } else {\n    object[key] = value;\n  }\n}\n\nfunction _remove(object, key) {\n  if (Array.isArray(object)) {\n    // '-' syntax doesn't make sense when removing\n    var index = parseInt(key, 10);\n    object.splice(index, 1);\n  } else {\n    // not sure what the proper behavior is when path = ''\n    delete object[key];\n  }\n}\n/**\n>  o  If the target location specifies an array index, a new value is\n>     inserted into the array at the specified index.\n>  o  If the target location specifies an object member that does not\n>     already exist, a new member is added to the object.\n>  o  If the target location specifies an object member that does exist,\n>     that member's value is replaced.\n*/\n\n\nfunction add(object, operation) {\n  var endpoint = pointer_1.Pointer.fromJSON(operation.path).evaluate(object); // it's not exactly a \"MissingError\" in the same way that `remove` is -- more like a MissingParent, or something\n\n  if (endpoint.parent === undefined) {\n    return new MissingError(operation.path);\n  }\n\n  _add(endpoint.parent, endpoint.key, util_1.clone(operation.value));\n\n  return null;\n}\n\nexports.add = add;\n/**\n> The \"remove\" operation removes the value at the target location.\n> The target location MUST exist for the operation to be successful.\n*/\n\nfunction remove(object, operation) {\n  // endpoint has parent, key, and value properties\n  var endpoint = pointer_1.Pointer.fromJSON(operation.path).evaluate(object);\n\n  if (endpoint.value === undefined) {\n    return new MissingError(operation.path);\n  } // not sure what the proper behavior is when path = ''\n\n\n  _remove(endpoint.parent, endpoint.key);\n\n  return null;\n}\n\nexports.remove = remove;\n/**\n> The \"replace\" operation replaces the value at the target location\n> with a new value.  The operation object MUST contain a \"value\" member\n> whose content specifies the replacement value.\n> The target location MUST exist for the operation to be successful.\n\n> This operation is functionally identical to a \"remove\" operation for\n> a value, followed immediately by an \"add\" operation at the same\n> location with the replacement value.\n\nEven more simply, it's like the add operation with an existence check.\n*/\n\nfunction replace(object, operation) {\n  var endpoint = pointer_1.Pointer.fromJSON(operation.path).evaluate(object);\n\n  if (endpoint.parent === null) {\n    return new MissingError(operation.path);\n  } // this existence check treats arrays as a special case\n\n\n  if (Array.isArray(endpoint.parent)) {\n    if (parseInt(endpoint.key, 10) >= endpoint.parent.length) {\n      return new MissingError(operation.path);\n    }\n  } else if (endpoint.value === undefined) {\n    return new MissingError(operation.path);\n  }\n\n  endpoint.parent[endpoint.key] = operation.value;\n  return null;\n}\n\nexports.replace = replace;\n/**\n> The \"move\" operation removes the value at a specified location and\n> adds it to the target location.\n> The operation object MUST contain a \"from\" member, which is a string\n> containing a JSON Pointer value that references the location in the\n> target document to move the value from.\n> This operation is functionally identical to a \"remove\" operation on\n> the \"from\" location, followed immediately by an \"add\" operation at\n> the target location with the value that was just removed.\n\n> The \"from\" location MUST NOT be a proper prefix of the \"path\"\n> location; i.e., a location cannot be moved into one of its children.\n\nTODO: throw if the check described in the previous paragraph fails.\n*/\n\nfunction move(object, operation) {\n  var from_endpoint = pointer_1.Pointer.fromJSON(operation.from).evaluate(object);\n\n  if (from_endpoint.value === undefined) {\n    return new MissingError(operation.from);\n  }\n\n  var endpoint = pointer_1.Pointer.fromJSON(operation.path).evaluate(object);\n\n  if (endpoint.parent === undefined) {\n    return new MissingError(operation.path);\n  }\n\n  _remove(from_endpoint.parent, from_endpoint.key);\n\n  _add(endpoint.parent, endpoint.key, from_endpoint.value);\n\n  return null;\n}\n\nexports.move = move;\n/**\n> The \"copy\" operation copies the value at a specified location to the\n> target location.\n> The operation object MUST contain a \"from\" member, which is a string\n> containing a JSON Pointer value that references the location in the\n> target document to copy the value from.\n> The \"from\" location MUST exist for the operation to be successful.\n\n> This operation is functionally identical to an \"add\" operation at the\n> target location using the value specified in the \"from\" member.\n\nAlternatively, it's like 'move' without the 'remove'.\n*/\n\nfunction copy(object, operation) {\n  var from_endpoint = pointer_1.Pointer.fromJSON(operation.from).evaluate(object);\n\n  if (from_endpoint.value === undefined) {\n    return new MissingError(operation.from);\n  }\n\n  var endpoint = pointer_1.Pointer.fromJSON(operation.path).evaluate(object);\n\n  if (endpoint.parent === undefined) {\n    return new MissingError(operation.path);\n  }\n\n  _add(endpoint.parent, endpoint.key, util_1.clone(from_endpoint.value));\n\n  return null;\n}\n\nexports.copy = copy;\n/**\n> The \"test\" operation tests that a value at the target location is\n> equal to a specified value.\n> The operation object MUST contain a \"value\" member that conveys the\n> value to be compared to the target location's value.\n> The target location MUST be equal to the \"value\" value for the\n> operation to be considered successful.\n*/\n\nfunction test(object, operation) {\n  var endpoint = pointer_1.Pointer.fromJSON(operation.path).evaluate(object); // TODO: this diffAny(...).length usage could/should be lazy\n\n  if (diff_1.diffAny(endpoint.value, operation.value, new pointer_1.Pointer()).length) {\n    return new TestError(endpoint.value, operation.value);\n  }\n\n  return null;\n}\n\nexports.test = test;\n\nvar InvalidOperationError =\n/** @class */\nfunction (_super) {\n  __extends(InvalidOperationError, _super);\n\n  function InvalidOperationError(operation) {\n    var _this = _super.call(this, \"Invalid operation: \" + operation.op) || this;\n\n    _this.operation = operation;\n    _this.name = 'InvalidOperationError';\n    return _this;\n  }\n\n  return InvalidOperationError;\n}(Error);\n\nexports.InvalidOperationError = InvalidOperationError;\n/**\nSwitch on `operation.op`, applying the corresponding patch function for each\ncase to `object`.\n*/\n\nfunction apply(object, operation) {\n  // not sure why TypeScript can't infer typesafety of:\n  //   {add, remove, replace, move, copy, test}[operation.op](object, operation)\n  // (seems like a bug)\n  switch (operation.op) {\n    case 'add':\n      return add(object, operation);\n\n    case 'remove':\n      return remove(object, operation);\n\n    case 'replace':\n      return replace(object, operation);\n\n    case 'move':\n      return move(object, operation);\n\n    case 'copy':\n      return copy(object, operation);\n\n    case 'test':\n      return test(object, operation);\n  }\n\n  return new InvalidOperationError(operation);\n}\n\nexports.apply = apply;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Pointer = void 0;\n/**\nUnescape token part of a JSON Pointer string\n\n`token` should *not* contain any '/' characters.\n\n> Evaluation of each reference token begins by decoding any escaped\n> character sequence.  This is performed by first transforming any\n> occurrence of the sequence '~1' to '/', and then transforming any\n> occurrence of the sequence '~0' to '~'.  By performing the\n> substitutions in this order, an implementation avoids the error of\n> turning '~01' first into '~1' and then into '/', which would be\n> incorrect (the string '~01' correctly becomes '~1' after\n> transformation).\n\nHere's my take:\n\n~1 is unescaped with higher priority than ~0 because it is a lower-order escape character.\nI say \"lower order\" because '/' needs escaping due to the JSON Pointer serialization technique.\nWhereas, '~' is escaped because escaping '/' uses the '~' character.\n*/\n\nfunction unescape(token) {\n  return token.replace(/~1/g, '/').replace(/~0/g, '~');\n}\n/** Escape token part of a JSON Pointer string\n\n> '~' needs to be encoded as '~0' and '/'\n> needs to be encoded as '~1' when these characters appear in a\n> reference token.\n\nThis is the exact inverse of `unescape()`, so the reverse replacements must take place in reverse order.\n*/\n\n\nfunction escape(token) {\n  return token.replace(/~/g, '~0').replace(/\\//g, '~1');\n}\n/**\nJSON Pointer representation\n*/\n\n\nvar Pointer =\n/** @class */\nfunction () {\n  function Pointer(tokens) {\n    if (tokens === void 0) {\n      tokens = [''];\n    }\n\n    this.tokens = tokens;\n  }\n  /**\n  `path` *must* be a properly escaped string.\n  */\n\n\n  Pointer.fromJSON = function (path) {\n    var tokens = path.split('/').map(unescape);\n    if (tokens[0] !== '') throw new Error(\"Invalid JSON Pointer: \" + path);\n    return new Pointer(tokens);\n  };\n\n  Pointer.prototype.toString = function () {\n    return this.tokens.map(escape).join('/');\n  };\n  /**\n  Returns an object with 'parent', 'key', and 'value' properties.\n  In the special case that this Pointer's path == \"\",\n  this object will be {parent: null, key: '', value: object}.\n  Otherwise, parent and key will have the property such that parent[key] == value.\n  */\n\n\n  Pointer.prototype.evaluate = function (object) {\n    var parent = null;\n    var key = '';\n    var value = object;\n\n    for (var i = 1, l = this.tokens.length; i < l; i++) {\n      parent = value;\n      key = this.tokens[i]; // not sure if this the best way to handle non-existant paths...\n\n      value = (parent || {})[key];\n    }\n\n    return {\n      parent: parent,\n      key: key,\n      value: value\n    };\n  };\n\n  Pointer.prototype.get = function (object) {\n    return this.evaluate(object).value;\n  };\n\n  Pointer.prototype.set = function (object, value) {\n    var cursor = object;\n\n    for (var i = 1, l = this.tokens.length - 1, token = this.tokens[i]; i < l; i++) {\n      // not sure if this the best way to handle non-existant paths...\n      cursor = (cursor || {})[token];\n    }\n\n    if (cursor) {\n      cursor[this.tokens[this.tokens.length - 1]] = value;\n    }\n  };\n\n  Pointer.prototype.push = function (token) {\n    // mutable\n    this.tokens.push(token);\n  };\n  /**\n  `token` should be a String. It'll be coerced to one anyway.\n     immutable (shallowly)\n  */\n\n\n  Pointer.prototype.add = function (token) {\n    var tokens = this.tokens.concat(String(token));\n    return new Pointer(tokens);\n  };\n\n  return Pointer;\n}();\n\nexports.Pointer = Pointer;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.clone = exports.objectType = exports.hasOwnProperty = void 0;\nexports.hasOwnProperty = Object.prototype.hasOwnProperty;\n\nfunction objectType(object) {\n  if (object === undefined) {\n    return 'undefined';\n  }\n\n  if (object === null) {\n    return 'null';\n  }\n\n  if (Array.isArray(object)) {\n    return 'array';\n  }\n\n  return typeof object;\n}\n\nexports.objectType = objectType;\n\nfunction isNonPrimitive(value) {\n  // loose-equality checking for null is faster than strict checking for each of null/undefined/true/false\n  // checking null first, then calling typeof, is faster than vice-versa\n  return value != null && typeof value == 'object';\n}\n/**\nRecursively copy a value.\n\n@param source - should be a JavaScript primitive, Array, Date, or (plain old) Object.\n@returns copy of source where every Array and Object have been recursively\n         reconstructed from their constituent elements\n*/\n\n\nfunction clone(source) {\n  if (!isNonPrimitive(source)) {\n    // short-circuiting is faster than a single return\n    return source;\n  } // x.constructor == Array is the fastest way to check if x is an Array\n\n\n  if (source.constructor == Array) {\n    // construction via imperative for-loop is faster than source.map(arrayVsObject)\n    var length_1 = source.length; // setting the Array length during construction is faster than just `[]` or `new Array()`\n\n    var arrayTarget = new Array(length_1);\n\n    for (var i = 0; i < length_1; i++) {\n      arrayTarget[i] = clone(source[i]);\n    }\n\n    return arrayTarget;\n  } // Date\n\n\n  if (source.constructor == Date) {\n    var dateTarget = new Date(+source);\n    return dateTarget;\n  } // Object\n\n\n  var objectTarget = {}; // declaring the variable (with const) inside the loop is faster\n\n  for (var key in source) {\n    // hasOwnProperty costs a bit of performance, but it's semantically necessary\n    // using a global helper is MUCH faster than calling source.hasOwnProperty(key)\n    if (exports.hasOwnProperty.call(source, key)) {\n      objectTarget[key] = clone(source[key]);\n    }\n  }\n\n  return objectTarget;\n}\n\nexports.clone = clone;","(function (global, undefined) {\n  \"use strict\";\n\n  if (global.setImmediate) {\n    return;\n  }\n\n  var nextHandle = 1; // Spec says greater than zero\n\n  var tasksByHandle = {};\n  var currentlyRunningATask = false;\n  var doc = global.document;\n  var registerImmediate;\n\n  function setImmediate(callback) {\n    // Callback can either be a function or a string\n    if (typeof callback !== \"function\") {\n      callback = new Function(\"\" + callback);\n    } // Copy function arguments\n\n\n    var args = new Array(arguments.length - 1);\n\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i + 1];\n    } // Store and register the task\n\n\n    var task = {\n      callback: callback,\n      args: args\n    };\n    tasksByHandle[nextHandle] = task;\n    registerImmediate(nextHandle);\n    return nextHandle++;\n  }\n\n  function clearImmediate(handle) {\n    delete tasksByHandle[handle];\n  }\n\n  function run(task) {\n    var callback = task.callback;\n    var args = task.args;\n\n    switch (args.length) {\n      case 0:\n        callback();\n        break;\n\n      case 1:\n        callback(args[0]);\n        break;\n\n      case 2:\n        callback(args[0], args[1]);\n        break;\n\n      case 3:\n        callback(args[0], args[1], args[2]);\n        break;\n\n      default:\n        callback.apply(undefined, args);\n        break;\n    }\n  }\n\n  function runIfPresent(handle) {\n    // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n    // So if we're currently running a task, we'll need to delay this invocation.\n    if (currentlyRunningATask) {\n      // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n      // \"too much recursion\" error.\n      setTimeout(runIfPresent, 0, handle);\n    } else {\n      var task = tasksByHandle[handle];\n\n      if (task) {\n        currentlyRunningATask = true;\n\n        try {\n          run(task);\n        } finally {\n          clearImmediate(handle);\n          currentlyRunningATask = false;\n        }\n      }\n    }\n  }\n\n  function installNextTickImplementation() {\n    registerImmediate = function registerImmediate(handle) {\n      process.nextTick(function () {\n        runIfPresent(handle);\n      });\n    };\n  }\n\n  function canUsePostMessage() {\n    // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n    // where `global.postMessage` means something completely different and can't be used for this purpose.\n    if (global.postMessage && !global.importScripts) {\n      var postMessageIsAsynchronous = true;\n      var oldOnMessage = global.onmessage;\n\n      global.onmessage = function () {\n        postMessageIsAsynchronous = false;\n      };\n\n      global.postMessage(\"\", \"*\");\n      global.onmessage = oldOnMessage;\n      return postMessageIsAsynchronous;\n    }\n  }\n\n  function installPostMessageImplementation() {\n    // Installs an event handler on `global` for the `message` event: see\n    // * https://developer.mozilla.org/en/DOM/window.postMessage\n    // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n    var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n\n    var onGlobalMessage = function onGlobalMessage(event) {\n      if (event.source === global && typeof event.data === \"string\" && event.data.indexOf(messagePrefix) === 0) {\n        runIfPresent(+event.data.slice(messagePrefix.length));\n      }\n    };\n\n    if (global.addEventListener) {\n      global.addEventListener(\"message\", onGlobalMessage, false);\n    } else {\n      global.attachEvent(\"onmessage\", onGlobalMessage);\n    }\n\n    registerImmediate = function registerImmediate(handle) {\n      global.postMessage(messagePrefix + handle, \"*\");\n    };\n  }\n\n  function installMessageChannelImplementation() {\n    var channel = new MessageChannel();\n\n    channel.port1.onmessage = function (event) {\n      var handle = event.data;\n      runIfPresent(handle);\n    };\n\n    registerImmediate = function registerImmediate(handle) {\n      channel.port2.postMessage(handle);\n    };\n  }\n\n  function installReadyStateChangeImplementation() {\n    var html = doc.documentElement;\n\n    registerImmediate = function registerImmediate(handle) {\n      // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n      // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n      var script = doc.createElement(\"script\");\n\n      script.onreadystatechange = function () {\n        runIfPresent(handle);\n        script.onreadystatechange = null;\n        html.removeChild(script);\n        script = null;\n      };\n\n      html.appendChild(script);\n    };\n  }\n\n  function installSetTimeoutImplementation() {\n    registerImmediate = function registerImmediate(handle) {\n      setTimeout(runIfPresent, 0, handle);\n    };\n  } // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n\n\n  var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n  attachTo = attachTo && attachTo.setTimeout ? attachTo : global; // Don't get fooled by e.g. browserify environments.\n\n  if ({}.toString.call(global.process) === \"[object process]\") {\n    // For Node.js before 0.9\n    installNextTickImplementation();\n  } else if (canUsePostMessage()) {\n    // For non-IE10 modern browsers\n    installPostMessageImplementation();\n  } else if (global.MessageChannel) {\n    // For web workers, where supported\n    installMessageChannelImplementation();\n  } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n    // For IE 68\n    installReadyStateChangeImplementation();\n  } else {\n    // For older browsers\n    installSetTimeoutImplementation();\n  }\n\n  attachTo.setImmediate = setImmediate;\n  attachTo.clearImmediate = clearImmediate;\n})(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.reconstructPacket = exports.deconstructPacket = void 0;\n\nvar is_binary_1 = require(\"./is-binary\");\n/**\n * Replaces every Buffer | ArrayBuffer | Blob | File in packet with a numbered placeholder.\n *\n * @param {Object} packet - socket.io event packet\n * @return {Object} with deconstructed packet and list of buffers\n * @public\n */\n\n\nfunction deconstructPacket(packet) {\n  var buffers = [];\n  var packetData = packet.data;\n  var pack = packet;\n  pack.data = _deconstructPacket(packetData, buffers);\n  pack.attachments = buffers.length; // number of binary 'attachments'\n\n  return {\n    packet: pack,\n    buffers: buffers\n  };\n}\n\nexports.deconstructPacket = deconstructPacket;\n\nfunction _deconstructPacket(data, buffers) {\n  if (!data) return data;\n\n  if (is_binary_1.isBinary(data)) {\n    var placeholder = {\n      _placeholder: true,\n      num: buffers.length\n    };\n    buffers.push(data);\n    return placeholder;\n  } else if (Array.isArray(data)) {\n    var newData = new Array(data.length);\n\n    for (var i = 0; i < data.length; i++) {\n      newData[i] = _deconstructPacket(data[i], buffers);\n    }\n\n    return newData;\n  } else if (typeof data === \"object\" && !(data instanceof Date)) {\n    var _newData = {};\n\n    for (var key in data) {\n      if (data.hasOwnProperty(key)) {\n        _newData[key] = _deconstructPacket(data[key], buffers);\n      }\n    }\n\n    return _newData;\n  }\n\n  return data;\n}\n/**\n * Reconstructs a binary packet from its placeholder packet and buffers\n *\n * @param {Object} packet - event packet with placeholders\n * @param {Array} buffers - binary buffers to put in placeholder positions\n * @return {Object} reconstructed packet\n * @public\n */\n\n\nfunction reconstructPacket(packet, buffers) {\n  packet.data = _reconstructPacket(packet.data, buffers);\n  packet.attachments = undefined; // no longer useful\n\n  return packet;\n}\n\nexports.reconstructPacket = reconstructPacket;\n\nfunction _reconstructPacket(data, buffers) {\n  if (!data) return data;\n\n  if (data && data._placeholder) {\n    return buffers[data.num]; // appropriate buffer (should be natural order anyway)\n  } else if (Array.isArray(data)) {\n    for (var i = 0; i < data.length; i++) {\n      data[i] = _reconstructPacket(data[i], buffers);\n    }\n  } else if (typeof data === \"object\") {\n    for (var key in data) {\n      if (data.hasOwnProperty(key)) {\n        data[key] = _reconstructPacket(data[key], buffers);\n      }\n    }\n  }\n\n  return data;\n}","\"use strict\";\n\nvar _get = require(\"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/get\");\n\nvar _inherits = require(\"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/inherits\");\n\nvar _possibleConstructorReturn = require(\"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nvar _classCallCheck = require(\"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/createClass\");\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Decoder = exports.Encoder = exports.PacketType = exports.protocol = void 0;\n\nvar Emitter = require(\"component-emitter\");\n\nvar binary_1 = require(\"./binary\");\n\nvar is_binary_1 = require(\"./is-binary\");\n\nvar debug = require(\"debug\")(\"socket.io-parser\");\n/**\n * Protocol version.\n *\n * @public\n */\n\n\nexports.protocol = 5;\nvar PacketType;\n\n(function (PacketType) {\n  PacketType[PacketType[\"CONNECT\"] = 0] = \"CONNECT\";\n  PacketType[PacketType[\"DISCONNECT\"] = 1] = \"DISCONNECT\";\n  PacketType[PacketType[\"EVENT\"] = 2] = \"EVENT\";\n  PacketType[PacketType[\"ACK\"] = 3] = \"ACK\";\n  PacketType[PacketType[\"CONNECT_ERROR\"] = 4] = \"CONNECT_ERROR\";\n  PacketType[PacketType[\"BINARY_EVENT\"] = 5] = \"BINARY_EVENT\";\n  PacketType[PacketType[\"BINARY_ACK\"] = 6] = \"BINARY_ACK\";\n})(PacketType = exports.PacketType || (exports.PacketType = {}));\n/**\n * A socket.io Encoder instance\n */\n\n\nvar Encoder = /*#__PURE__*/function () {\n  function Encoder() {\n    _classCallCheck(this, Encoder);\n  }\n\n  _createClass(Encoder, [{\n    key: \"encode\",\n    value:\n    /**\n     * Encode a packet as a single string if non-binary, or as a\n     * buffer sequence, depending on packet type.\n     *\n     * @param {Object} obj - packet object\n     */\n    function encode(obj) {\n      debug(\"encoding packet %j\", obj);\n\n      if (obj.type === PacketType.EVENT || obj.type === PacketType.ACK) {\n        if (is_binary_1.hasBinary(obj)) {\n          obj.type = obj.type === PacketType.EVENT ? PacketType.BINARY_EVENT : PacketType.BINARY_ACK;\n          return this.encodeAsBinary(obj);\n        }\n      }\n\n      return [this.encodeAsString(obj)];\n    }\n    /**\n     * Encode packet as string.\n     */\n\n  }, {\n    key: \"encodeAsString\",\n    value: function encodeAsString(obj) {\n      // first is type\n      var str = \"\" + obj.type; // attachments if we have them\n\n      if (obj.type === PacketType.BINARY_EVENT || obj.type === PacketType.BINARY_ACK) {\n        str += obj.attachments + \"-\";\n      } // if we have a namespace other than `/`\n      // we append it followed by a comma `,`\n\n\n      if (obj.nsp && \"/\" !== obj.nsp) {\n        str += obj.nsp + \",\";\n      } // immediately followed by the id\n\n\n      if (null != obj.id) {\n        str += obj.id;\n      } // json data\n\n\n      if (null != obj.data) {\n        str += JSON.stringify(obj.data);\n      }\n\n      debug(\"encoded %j as %s\", obj, str);\n      return str;\n    }\n    /**\n     * Encode packet as 'buffer sequence' by removing blobs, and\n     * deconstructing packet into object with placeholders and\n     * a list of buffers.\n     */\n\n  }, {\n    key: \"encodeAsBinary\",\n    value: function encodeAsBinary(obj) {\n      var deconstruction = binary_1.deconstructPacket(obj);\n      var pack = this.encodeAsString(deconstruction.packet);\n      var buffers = deconstruction.buffers;\n      buffers.unshift(pack); // add packet info to beginning of data list\n\n      return buffers; // write all the buffers\n    }\n  }]);\n\n  return Encoder;\n}();\n\nexports.Encoder = Encoder;\n/**\n * A socket.io Decoder instance\n *\n * @return {Object} decoder\n */\n\nvar Decoder = /*#__PURE__*/function (_Emitter) {\n  _inherits(Decoder, _Emitter);\n\n  var _super = _createSuper(Decoder);\n\n  function Decoder() {\n    _classCallCheck(this, Decoder);\n\n    return _super.call(this);\n  }\n  /**\n   * Decodes an encoded packet string into packet JSON.\n   *\n   * @param {String} obj - encoded packet\n   */\n\n\n  _createClass(Decoder, [{\n    key: \"add\",\n    value: function add(obj) {\n      var packet;\n\n      if (typeof obj === \"string\") {\n        packet = this.decodeString(obj);\n\n        if (packet.type === PacketType.BINARY_EVENT || packet.type === PacketType.BINARY_ACK) {\n          // binary packet's json\n          this.reconstructor = new BinaryReconstructor(packet); // no attachments, labeled binary but no binary data to follow\n\n          if (packet.attachments === 0) {\n            _get(_getPrototypeOf(Decoder.prototype), \"emit\", this).call(this, \"decoded\", packet);\n          }\n        } else {\n          // non-binary full packet\n          _get(_getPrototypeOf(Decoder.prototype), \"emit\", this).call(this, \"decoded\", packet);\n        }\n      } else if (is_binary_1.isBinary(obj) || obj.base64) {\n        // raw binary data\n        if (!this.reconstructor) {\n          throw new Error(\"got binary data when not reconstructing a packet\");\n        } else {\n          packet = this.reconstructor.takeBinaryData(obj);\n\n          if (packet) {\n            // received final buffer\n            this.reconstructor = null;\n\n            _get(_getPrototypeOf(Decoder.prototype), \"emit\", this).call(this, \"decoded\", packet);\n          }\n        }\n      } else {\n        throw new Error(\"Unknown type: \" + obj);\n      }\n    }\n    /**\n     * Decode a packet String (JSON data)\n     *\n     * @param {String} str\n     * @return {Object} packet\n     */\n\n  }, {\n    key: \"decodeString\",\n    value: function decodeString(str) {\n      var i = 0; // look up type\n\n      var p = {\n        type: Number(str.charAt(0))\n      };\n\n      if (PacketType[p.type] === undefined) {\n        throw new Error(\"unknown packet type \" + p.type);\n      } // look up attachments if type binary\n\n\n      if (p.type === PacketType.BINARY_EVENT || p.type === PacketType.BINARY_ACK) {\n        var start = i + 1;\n\n        while (str.charAt(++i) !== \"-\" && i != str.length) {}\n\n        var buf = str.substring(start, i);\n\n        if (buf != Number(buf) || str.charAt(i) !== \"-\") {\n          throw new Error(\"Illegal attachments\");\n        }\n\n        p.attachments = Number(buf);\n      } // look up namespace (if any)\n\n\n      if (\"/\" === str.charAt(i + 1)) {\n        var _start = i + 1;\n\n        while (++i) {\n          var c = str.charAt(i);\n          if (\",\" === c) break;\n          if (i === str.length) break;\n        }\n\n        p.nsp = str.substring(_start, i);\n      } else {\n        p.nsp = \"/\";\n      } // look up id\n\n\n      var next = str.charAt(i + 1);\n\n      if (\"\" !== next && Number(next) == next) {\n        var _start2 = i + 1;\n\n        while (++i) {\n          var _c = str.charAt(i);\n\n          if (null == _c || Number(_c) != _c) {\n            --i;\n            break;\n          }\n\n          if (i === str.length) break;\n        }\n\n        p.id = Number(str.substring(_start2, i + 1));\n      } // look up json data\n\n\n      if (str.charAt(++i)) {\n        var payload = tryParse(str.substr(i));\n\n        if (Decoder.isPayloadValid(p.type, payload)) {\n          p.data = payload;\n        } else {\n          throw new Error(\"invalid payload\");\n        }\n      }\n\n      debug(\"decoded %s as %j\", str, p);\n      return p;\n    }\n  }, {\n    key: \"destroy\",\n    value:\n    /**\n     * Deallocates a parser's resources\n     */\n    function destroy() {\n      if (this.reconstructor) {\n        this.reconstructor.finishedReconstruction();\n      }\n    }\n  }], [{\n    key: \"isPayloadValid\",\n    value: function isPayloadValid(type, payload) {\n      switch (type) {\n        case PacketType.CONNECT:\n          return typeof payload === \"object\";\n\n        case PacketType.DISCONNECT:\n          return payload === undefined;\n\n        case PacketType.CONNECT_ERROR:\n          return typeof payload === \"string\" || typeof payload === \"object\";\n\n        case PacketType.EVENT:\n        case PacketType.BINARY_EVENT:\n          return Array.isArray(payload) && payload.length > 0;\n\n        case PacketType.ACK:\n        case PacketType.BINARY_ACK:\n          return Array.isArray(payload);\n      }\n    }\n  }]);\n\n  return Decoder;\n}(Emitter);\n\nexports.Decoder = Decoder;\n\nfunction tryParse(str) {\n  try {\n    return JSON.parse(str);\n  } catch (e) {\n    return false;\n  }\n}\n/**\n * A manager of a binary event's 'buffer sequence'. Should\n * be constructed whenever a packet of type BINARY_EVENT is\n * decoded.\n *\n * @param {Object} packet\n * @return {BinaryReconstructor} initialized reconstructor\n */\n\n\nvar BinaryReconstructor = /*#__PURE__*/function () {\n  function BinaryReconstructor(packet) {\n    _classCallCheck(this, BinaryReconstructor);\n\n    this.packet = packet;\n    this.buffers = [];\n    this.reconPack = packet;\n  }\n  /**\n   * Method to be called when binary data received from connection\n   * after a BINARY_EVENT packet.\n   *\n   * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n   * @return {null | Object} returns null if more binary data is expected or\n   *   a reconstructed packet object if all buffers have been received.\n   */\n\n\n  _createClass(BinaryReconstructor, [{\n    key: \"takeBinaryData\",\n    value: function takeBinaryData(binData) {\n      this.buffers.push(binData);\n\n      if (this.buffers.length === this.reconPack.attachments) {\n        // done with buffer list\n        var packet = binary_1.reconstructPacket(this.reconPack, this.buffers);\n        this.finishedReconstruction();\n        return packet;\n      }\n\n      return null;\n    }\n    /**\n     * Cleans up binary packet reconstruction variables.\n     */\n\n  }, {\n    key: \"finishedReconstruction\",\n    value: function finishedReconstruction() {\n      this.reconPack = null;\n      this.buffers = [];\n    }\n  }]);\n\n  return BinaryReconstructor;\n}();","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.hasBinary = exports.isBinary = void 0;\nvar withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\n\nvar isView = function isView(obj) {\n  return typeof ArrayBuffer.isView === \"function\" ? ArrayBuffer.isView(obj) : obj.buffer instanceof ArrayBuffer;\n};\n\nvar toString = Object.prototype.toString;\nvar withNativeBlob = typeof Blob === \"function\" || typeof Blob !== \"undefined\" && toString.call(Blob) === \"[object BlobConstructor]\";\nvar withNativeFile = typeof File === \"function\" || typeof File !== \"undefined\" && toString.call(File) === \"[object FileConstructor]\";\n/**\n * Returns true if obj is a Buffer, an ArrayBuffer, a Blob or a File.\n *\n * @private\n */\n\nfunction isBinary(obj) {\n  return withNativeArrayBuffer && (obj instanceof ArrayBuffer || isView(obj)) || withNativeBlob && obj instanceof Blob || withNativeFile && obj instanceof File;\n}\n\nexports.isBinary = isBinary;\n\nfunction hasBinary(obj, toJSON) {\n  if (!obj || typeof obj !== \"object\") {\n    return false;\n  }\n\n  if (Array.isArray(obj)) {\n    for (var i = 0, l = obj.length; i < l; i++) {\n      if (hasBinary(obj[i])) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  if (isBinary(obj)) {\n    return true;\n  }\n\n  if (obj.toJSON && typeof obj.toJSON === \"function\" && arguments.length === 1) {\n    return hasBinary(obj.toJSON(), true);\n  }\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key) && hasBinary(obj[key])) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nexports.hasBinary = hasBinary;","'use strict';\n\nvar alphabet = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'.split(''),\n    length = 64,\n    map = {},\n    seed = 0,\n    i = 0,\n    prev;\n/**\n * Return a string representing the specified number.\n *\n * @param {Number} num The number to convert.\n * @returns {String} The string representation of the number.\n * @api public\n */\n\nfunction encode(num) {\n  var encoded = '';\n\n  do {\n    encoded = alphabet[num % length] + encoded;\n    num = Math.floor(num / length);\n  } while (num > 0);\n\n  return encoded;\n}\n/**\n * Return the integer value specified by the given string.\n *\n * @param {String} str The string to convert.\n * @returns {Number} The integer value represented by the string.\n * @api public\n */\n\n\nfunction decode(str) {\n  var decoded = 0;\n\n  for (i = 0; i < str.length; i++) {\n    decoded = decoded * length + map[str.charAt(i)];\n  }\n\n  return decoded;\n}\n/**\n * Yeast: A tiny growing id generator.\n *\n * @returns {String} A unique id.\n * @api public\n */\n\n\nfunction yeast() {\n  var now = encode(+new Date());\n  if (now !== prev) return seed = 0, prev = now;\n  return now + '.' + encode(seed++);\n} //\n// Map each character to its index.\n//\n\n\nfor (; i < length; i++) {\n  map[alphabet[i]] = i;\n} //\n// Expose the `yeast`, `encode` and `decode` functions.\n//\n\n\nyeast.encode = encode;\nyeast.decode = decode;\nmodule.exports = yeast;","var urlAlphabet = 'ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW';\n\nvar customAlphabet = function customAlphabet(alphabet, size) {\n  return function () {\n    var id = '';\n    var i = size;\n\n    while (i--) {\n      id += alphabet[Math.random() * alphabet.length | 0];\n    }\n\n    return id;\n  };\n};\n\nvar nanoid = function nanoid() {\n  var size = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 21;\n  var id = '';\n  var i = size;\n\n  while (i--) {\n    id += urlAlphabet[Math.random() * 64 | 0];\n  }\n\n  return id;\n};\n\nexport { nanoid, customAlphabet };","function n(n) {\n  for (var t = arguments.length, r = Array(t > 1 ? t - 1 : 0), e = 1; e < t; e++) {\n    r[e - 1] = arguments[e];\n  }\n\n  if (\"production\" !== process.env.NODE_ENV) {\n    var i = Y[n],\n        o = i ? \"function\" == typeof i ? i.apply(null, r) : i : \"unknown error nr: \" + n;\n    throw Error(\"[Immer] \" + o);\n  }\n\n  throw Error(\"[Immer] minified error nr: \" + n + (r.length ? \" \" + r.map(function (n) {\n    return \"'\" + n + \"'\";\n  }).join(\",\") : \"\") + \". Find the full error at: https://bit.ly/3cXEKWf\");\n}\n\nfunction t(n) {\n  return !!n && !!n[Q];\n}\n\nfunction r(n) {\n  return !!n && (function (n) {\n    if (!n || \"object\" != typeof n) return !1;\n    var t = Object.getPrototypeOf(n);\n    if (null === t) return !0;\n    var r = Object.hasOwnProperty.call(t, \"constructor\") && t.constructor;\n    return r === Object || \"function\" == typeof r && Function.toString.call(r) === Z;\n  }(n) || Array.isArray(n) || !!n[L] || !!n.constructor[L] || s(n) || v(n));\n}\n\nfunction e(r) {\n  return t(r) || n(23, r), r[Q].t;\n}\n\nfunction i(n, t, r) {\n  void 0 === r && (r = !1), 0 === o(n) ? (r ? Object.keys : nn)(n).forEach(function (e) {\n    r && \"symbol\" == typeof e || t(e, n[e], n);\n  }) : n.forEach(function (r, e) {\n    return t(e, r, n);\n  });\n}\n\nfunction o(n) {\n  var t = n[Q];\n  return t ? t.i > 3 ? t.i - 4 : t.i : Array.isArray(n) ? 1 : s(n) ? 2 : v(n) ? 3 : 0;\n}\n\nfunction u(n, t) {\n  return 2 === o(n) ? n.has(t) : Object.prototype.hasOwnProperty.call(n, t);\n}\n\nfunction a(n, t) {\n  return 2 === o(n) ? n.get(t) : n[t];\n}\n\nfunction f(n, t, r) {\n  var e = o(n);\n  2 === e ? n.set(t, r) : 3 === e ? (n.delete(t), n.add(r)) : n[t] = r;\n}\n\nfunction c(n, t) {\n  return n === t ? 0 !== n || 1 / n == 1 / t : n != n && t != t;\n}\n\nfunction s(n) {\n  return X && n instanceof Map;\n}\n\nfunction v(n) {\n  return q && n instanceof Set;\n}\n\nfunction p(n) {\n  return n.o || n.t;\n}\n\nfunction l(n) {\n  if (Array.isArray(n)) return Array.prototype.slice.call(n);\n  var t = tn(n);\n  delete t[Q];\n\n  for (var r = nn(t), e = 0; e < r.length; e++) {\n    var i = r[e],\n        o = t[i];\n    !1 === o.writable && (o.writable = !0, o.configurable = !0), (o.get || o.set) && (t[i] = {\n      configurable: !0,\n      writable: !0,\n      enumerable: o.enumerable,\n      value: n[i]\n    });\n  }\n\n  return Object.create(Object.getPrototypeOf(n), t);\n}\n\nfunction d(n, e) {\n  return void 0 === e && (e = !1), y(n) || t(n) || !r(n) ? n : (o(n) > 1 && (n.set = n.add = n.clear = n.delete = h), Object.freeze(n), e && i(n, function (n, t) {\n    return d(t, !0);\n  }, !0), n);\n}\n\nfunction h() {\n  n(2);\n}\n\nfunction y(n) {\n  return null == n || \"object\" != typeof n || Object.isFrozen(n);\n}\n\nfunction b(t) {\n  var r = rn[t];\n  return r || n(18, t), r;\n}\n\nfunction m(n, t) {\n  rn[n] || (rn[n] = t);\n}\n\nfunction _() {\n  return \"production\" === process.env.NODE_ENV || U || n(0), U;\n}\n\nfunction j(n, t) {\n  t && (b(\"Patches\"), n.u = [], n.s = [], n.v = t);\n}\n\nfunction O(n) {\n  g(n), n.p.forEach(S), n.p = null;\n}\n\nfunction g(n) {\n  n === U && (U = n.l);\n}\n\nfunction w(n) {\n  return U = {\n    p: [],\n    l: U,\n    h: n,\n    m: !0,\n    _: 0\n  };\n}\n\nfunction S(n) {\n  var t = n[Q];\n  0 === t.i || 1 === t.i ? t.j() : t.O = !0;\n}\n\nfunction P(t, e) {\n  e._ = e.p.length;\n  var i = e.p[0],\n      o = void 0 !== t && t !== i;\n  return e.h.g || b(\"ES5\").S(e, t, o), o ? (i[Q].P && (O(e), n(4)), r(t) && (t = M(e, t), e.l || x(e, t)), e.u && b(\"Patches\").M(i[Q], t, e.u, e.s)) : t = M(e, i, []), O(e), e.u && e.v(e.u, e.s), t !== H ? t : void 0;\n}\n\nfunction M(n, t, r) {\n  if (y(t)) return t;\n  var e = t[Q];\n  if (!e) return i(t, function (i, o) {\n    return A(n, e, t, i, o, r);\n  }, !0), t;\n  if (e.A !== n) return t;\n  if (!e.P) return x(n, e.t, !0), e.t;\n\n  if (!e.I) {\n    e.I = !0, e.A._--;\n    var o = 4 === e.i || 5 === e.i ? e.o = l(e.k) : e.o;\n    i(3 === e.i ? new Set(o) : o, function (t, i) {\n      return A(n, e, o, t, i, r);\n    }), x(n, o, !1), r && n.u && b(\"Patches\").R(e, r, n.u, n.s);\n  }\n\n  return e.o;\n}\n\nfunction A(e, i, o, a, c, s) {\n  if (\"production\" !== process.env.NODE_ENV && c === o && n(5), t(c)) {\n    var v = M(e, c, s && i && 3 !== i.i && !u(i.D, a) ? s.concat(a) : void 0);\n    if (f(o, a, v), !t(v)) return;\n    e.m = !1;\n  }\n\n  if (r(c) && !y(c)) {\n    if (!e.h.F && e._ < 1) return;\n    M(e, c), i && i.A.l || x(e, c);\n  }\n}\n\nfunction x(n, t, r) {\n  void 0 === r && (r = !1), n.h.F && n.m && d(t, r);\n}\n\nfunction z(n, t) {\n  var r = n[Q];\n  return (r ? p(r) : n)[t];\n}\n\nfunction I(n, t) {\n  if (t in n) for (var r = Object.getPrototypeOf(n); r;) {\n    var e = Object.getOwnPropertyDescriptor(r, t);\n    if (e) return e;\n    r = Object.getPrototypeOf(r);\n  }\n}\n\nfunction k(n) {\n  n.P || (n.P = !0, n.l && k(n.l));\n}\n\nfunction E(n) {\n  n.o || (n.o = l(n.t));\n}\n\nfunction R(n, t, r) {\n  var e = s(t) ? b(\"MapSet\").N(t, r) : v(t) ? b(\"MapSet\").T(t, r) : n.g ? function (n, t) {\n    var r = Array.isArray(n),\n        e = {\n      i: r ? 1 : 0,\n      A: t ? t.A : _(),\n      P: !1,\n      I: !1,\n      D: {},\n      l: t,\n      t: n,\n      k: null,\n      o: null,\n      j: null,\n      C: !1\n    },\n        i = e,\n        o = en;\n    r && (i = [e], o = on);\n    var u = Proxy.revocable(i, o),\n        a = u.revoke,\n        f = u.proxy;\n    return e.k = f, e.j = a, f;\n  }(t, r) : b(\"ES5\").J(t, r);\n  return (r ? r.A : _()).p.push(e), e;\n}\n\nfunction D(e) {\n  return t(e) || n(22, e), function n(t) {\n    if (!r(t)) return t;\n    var e,\n        u = t[Q],\n        c = o(t);\n\n    if (u) {\n      if (!u.P && (u.i < 4 || !b(\"ES5\").K(u))) return u.t;\n      u.I = !0, e = F(t, c), u.I = !1;\n    } else e = F(t, c);\n\n    return i(e, function (t, r) {\n      u && a(u.t, t) === r || f(e, t, n(r));\n    }), 3 === c ? new Set(e) : e;\n  }(e);\n}\n\nfunction F(n, t) {\n  switch (t) {\n    case 2:\n      return new Map(n);\n\n    case 3:\n      return Array.from(n);\n  }\n\n  return l(n);\n}\n\nfunction N() {\n  function r(n, t) {\n    var r = s[n];\n    return r ? r.enumerable = t : s[n] = r = {\n      configurable: !0,\n      enumerable: t,\n      get: function get() {\n        var t = this[Q];\n        return \"production\" !== process.env.NODE_ENV && f(t), en.get(t, n);\n      },\n      set: function set(t) {\n        var r = this[Q];\n        \"production\" !== process.env.NODE_ENV && f(r), en.set(r, n, t);\n      }\n    }, r;\n  }\n\n  function e(n) {\n    for (var t = n.length - 1; t >= 0; t--) {\n      var r = n[t][Q];\n      if (!r.P) switch (r.i) {\n        case 5:\n          a(r) && k(r);\n          break;\n\n        case 4:\n          o(r) && k(r);\n      }\n    }\n  }\n\n  function o(n) {\n    for (var t = n.t, r = n.k, e = nn(r), i = e.length - 1; i >= 0; i--) {\n      var o = e[i];\n\n      if (o !== Q) {\n        var a = t[o];\n        if (void 0 === a && !u(t, o)) return !0;\n        var f = r[o],\n            s = f && f[Q];\n        if (s ? s.t !== a : !c(f, a)) return !0;\n      }\n    }\n\n    var v = !!t[Q];\n    return e.length !== nn(t).length + (v ? 0 : 1);\n  }\n\n  function a(n) {\n    var t = n.k;\n    if (t.length !== n.t.length) return !0;\n    var r = Object.getOwnPropertyDescriptor(t, t.length - 1);\n    return !(!r || r.get);\n  }\n\n  function f(t) {\n    t.O && n(3, JSON.stringify(p(t)));\n  }\n\n  var s = {};\n  m(\"ES5\", {\n    J: function J(n, t) {\n      var e = Array.isArray(n),\n          i = function (n, t) {\n        if (n) {\n          for (var e = Array(t.length), i = 0; i < t.length; i++) {\n            Object.defineProperty(e, \"\" + i, r(i, !0));\n          }\n\n          return e;\n        }\n\n        var o = tn(t);\n        delete o[Q];\n\n        for (var u = nn(o), a = 0; a < u.length; a++) {\n          var f = u[a];\n          o[f] = r(f, n || !!o[f].enumerable);\n        }\n\n        return Object.create(Object.getPrototypeOf(t), o);\n      }(e, n),\n          o = {\n        i: e ? 5 : 4,\n        A: t ? t.A : _(),\n        P: !1,\n        I: !1,\n        D: {},\n        l: t,\n        t: n,\n        k: i,\n        o: null,\n        O: !1,\n        C: !1\n      };\n\n      return Object.defineProperty(i, Q, {\n        value: o,\n        writable: !0\n      }), i;\n    },\n    S: function S(n, r, o) {\n      o ? t(r) && r[Q].A === n && e(n.p) : (n.u && function n(t) {\n        if (t && \"object\" == typeof t) {\n          var r = t[Q];\n\n          if (r) {\n            var e = r.t,\n                o = r.k,\n                f = r.D,\n                c = r.i;\n            if (4 === c) i(o, function (t) {\n              t !== Q && (void 0 !== e[t] || u(e, t) ? f[t] || n(o[t]) : (f[t] = !0, k(r)));\n            }), i(e, function (n) {\n              void 0 !== o[n] || u(o, n) || (f[n] = !1, k(r));\n            });else if (5 === c) {\n              if (a(r) && (k(r), f.length = !0), o.length < e.length) for (var s = o.length; s < e.length; s++) {\n                f[s] = !1;\n              } else for (var v = e.length; v < o.length; v++) {\n                f[v] = !0;\n              }\n\n              for (var p = Math.min(o.length, e.length), l = 0; l < p; l++) {\n                void 0 === f[l] && n(o[l]);\n              }\n            }\n          }\n        }\n      }(n.p[0]), e(n.p));\n    },\n    K: function K(n) {\n      return 4 === n.i ? o(n) : a(n);\n    }\n  });\n}\n\nfunction T() {\n  function e(n) {\n    if (!r(n)) return n;\n    if (Array.isArray(n)) return n.map(e);\n    if (s(n)) return new Map(Array.from(n.entries()).map(function (n) {\n      return [n[0], e(n[1])];\n    }));\n    if (v(n)) return new Set(Array.from(n).map(e));\n    var t = Object.create(Object.getPrototypeOf(n));\n\n    for (var i in n) {\n      t[i] = e(n[i]);\n    }\n\n    return u(n, L) && (t[L] = n[L]), t;\n  }\n\n  function f(n) {\n    return t(n) ? e(n) : n;\n  }\n\n  var c = \"add\";\n  m(\"Patches\", {\n    $: function $(t, r) {\n      return r.forEach(function (r) {\n        for (var i = r.path, u = r.op, f = t, s = 0; s < i.length - 1; s++) {\n          var v = o(f),\n              p = \"\" + i[s];\n          0 !== v && 1 !== v || \"__proto__\" !== p && \"constructor\" !== p || n(24), \"function\" == typeof f && \"prototype\" === p && n(24), \"object\" != typeof (f = a(f, p)) && n(15, i.join(\"/\"));\n        }\n\n        var l = o(f),\n            d = e(r.value),\n            h = i[i.length - 1];\n\n        switch (u) {\n          case \"replace\":\n            switch (l) {\n              case 2:\n                return f.set(h, d);\n\n              case 3:\n                n(16);\n\n              default:\n                return f[h] = d;\n            }\n\n          case c:\n            switch (l) {\n              case 1:\n                return f.splice(h, 0, d);\n\n              case 2:\n                return f.set(h, d);\n\n              case 3:\n                return f.add(d);\n\n              default:\n                return f[h] = d;\n            }\n\n          case \"remove\":\n            switch (l) {\n              case 1:\n                return f.splice(h, 1);\n\n              case 2:\n                return f.delete(h);\n\n              case 3:\n                return f.delete(r.value);\n\n              default:\n                return delete f[h];\n            }\n\n          default:\n            n(17, u);\n        }\n      }), t;\n    },\n    R: function R(n, t, r, e) {\n      switch (n.i) {\n        case 0:\n        case 4:\n        case 2:\n          return function (n, t, r, e) {\n            var o = n.t,\n                s = n.o;\n            i(n.D, function (n, i) {\n              var v = a(o, n),\n                  p = a(s, n),\n                  l = i ? u(o, n) ? \"replace\" : c : \"remove\";\n\n              if (v !== p || \"replace\" !== l) {\n                var d = t.concat(n);\n                r.push(\"remove\" === l ? {\n                  op: l,\n                  path: d\n                } : {\n                  op: l,\n                  path: d,\n                  value: p\n                }), e.push(l === c ? {\n                  op: \"remove\",\n                  path: d\n                } : \"remove\" === l ? {\n                  op: c,\n                  path: d,\n                  value: f(v)\n                } : {\n                  op: \"replace\",\n                  path: d,\n                  value: f(v)\n                });\n              }\n            });\n          }(n, t, r, e);\n\n        case 5:\n        case 1:\n          return function (n, t, r, e) {\n            var i = n.t,\n                o = n.D,\n                u = n.o;\n\n            if (u.length < i.length) {\n              var a = [u, i];\n              i = a[0], u = a[1];\n              var s = [e, r];\n              r = s[0], e = s[1];\n            }\n\n            for (var v = 0; v < i.length; v++) {\n              if (o[v] && u[v] !== i[v]) {\n                var p = t.concat([v]);\n                r.push({\n                  op: \"replace\",\n                  path: p,\n                  value: f(u[v])\n                }), e.push({\n                  op: \"replace\",\n                  path: p,\n                  value: f(i[v])\n                });\n              }\n            }\n\n            for (var l = i.length; l < u.length; l++) {\n              var d = t.concat([l]);\n              r.push({\n                op: c,\n                path: d,\n                value: f(u[l])\n              });\n            }\n\n            i.length < u.length && e.push({\n              op: \"replace\",\n              path: t.concat([\"length\"]),\n              value: i.length\n            });\n          }(n, t, r, e);\n\n        case 3:\n          return function (n, t, r, e) {\n            var i = n.t,\n                o = n.o,\n                u = 0;\n            i.forEach(function (n) {\n              if (!o.has(n)) {\n                var i = t.concat([u]);\n                r.push({\n                  op: \"remove\",\n                  path: i,\n                  value: n\n                }), e.unshift({\n                  op: c,\n                  path: i,\n                  value: n\n                });\n              }\n\n              u++;\n            }), u = 0, o.forEach(function (n) {\n              if (!i.has(n)) {\n                var o = t.concat([u]);\n                r.push({\n                  op: c,\n                  path: o,\n                  value: n\n                }), e.unshift({\n                  op: \"remove\",\n                  path: o,\n                  value: n\n                });\n              }\n\n              u++;\n            });\n          }(n, t, r, e);\n      }\n    },\n    M: function M(n, t, r, e) {\n      r.push({\n        op: \"replace\",\n        path: [],\n        value: t === H ? void 0 : t\n      }), e.push({\n        op: \"replace\",\n        path: [],\n        value: n.t\n      });\n    }\n  });\n}\n\nfunction C() {\n  function t(n, t) {\n    function r() {\n      this.constructor = n;\n    }\n\n    _a(n, t), n.prototype = (r.prototype = t.prototype, new r());\n  }\n\n  function e(n) {\n    n.o || (n.D = new Map(), n.o = new Map(n.t));\n  }\n\n  function o(n) {\n    n.o || (n.o = new Set(), n.t.forEach(function (t) {\n      if (r(t)) {\n        var e = R(n.A.h, t, n);\n        n.p.set(t, e), n.o.add(e);\n      } else n.o.add(t);\n    }));\n  }\n\n  function u(t) {\n    t.O && n(3, JSON.stringify(p(t)));\n  }\n\n  var _a = function a(n, t) {\n    return (_a = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (n, t) {\n      n.__proto__ = t;\n    } || function (n, t) {\n      for (var r in t) {\n        t.hasOwnProperty(r) && (n[r] = t[r]);\n      }\n    })(n, t);\n  },\n      f = function () {\n    function n(n, t) {\n      return this[Q] = {\n        i: 2,\n        l: t,\n        A: t ? t.A : _(),\n        P: !1,\n        I: !1,\n        o: void 0,\n        D: void 0,\n        t: n,\n        k: this,\n        C: !1,\n        O: !1\n      }, this;\n    }\n\n    t(n, Map);\n    var o = n.prototype;\n    return Object.defineProperty(o, \"size\", {\n      get: function get() {\n        return p(this[Q]).size;\n      }\n    }), o.has = function (n) {\n      return p(this[Q]).has(n);\n    }, o.set = function (n, t) {\n      var r = this[Q];\n      return u(r), p(r).has(n) && p(r).get(n) === t || (e(r), k(r), r.D.set(n, !0), r.o.set(n, t), r.D.set(n, !0)), this;\n    }, o.delete = function (n) {\n      if (!this.has(n)) return !1;\n      var t = this[Q];\n      return u(t), e(t), k(t), t.D.set(n, !1), t.o.delete(n), !0;\n    }, o.clear = function () {\n      var n = this[Q];\n      u(n), p(n).size && (e(n), k(n), n.D = new Map(), i(n.t, function (t) {\n        n.D.set(t, !1);\n      }), n.o.clear());\n    }, o.forEach = function (n, t) {\n      var r = this;\n      p(this[Q]).forEach(function (e, i) {\n        n.call(t, r.get(i), i, r);\n      });\n    }, o.get = function (n) {\n      var t = this[Q];\n      u(t);\n      var i = p(t).get(n);\n      if (t.I || !r(i)) return i;\n      if (i !== t.t.get(n)) return i;\n      var o = R(t.A.h, i, t);\n      return e(t), t.o.set(n, o), o;\n    }, o.keys = function () {\n      return p(this[Q]).keys();\n    }, o.values = function () {\n      var n,\n          t = this,\n          r = this.keys();\n      return (n = {})[V] = function () {\n        return t.values();\n      }, n.next = function () {\n        var n = r.next();\n        return n.done ? n : {\n          done: !1,\n          value: t.get(n.value)\n        };\n      }, n;\n    }, o.entries = function () {\n      var n,\n          t = this,\n          r = this.keys();\n      return (n = {})[V] = function () {\n        return t.entries();\n      }, n.next = function () {\n        var n = r.next();\n        if (n.done) return n;\n        var e = t.get(n.value);\n        return {\n          done: !1,\n          value: [n.value, e]\n        };\n      }, n;\n    }, o[V] = function () {\n      return this.entries();\n    }, n;\n  }(),\n      c = function () {\n    function n(n, t) {\n      return this[Q] = {\n        i: 3,\n        l: t,\n        A: t ? t.A : _(),\n        P: !1,\n        I: !1,\n        o: void 0,\n        t: n,\n        k: this,\n        p: new Map(),\n        O: !1,\n        C: !1\n      }, this;\n    }\n\n    t(n, Set);\n    var r = n.prototype;\n    return Object.defineProperty(r, \"size\", {\n      get: function get() {\n        return p(this[Q]).size;\n      }\n    }), r.has = function (n) {\n      var t = this[Q];\n      return u(t), t.o ? !!t.o.has(n) || !(!t.p.has(n) || !t.o.has(t.p.get(n))) : t.t.has(n);\n    }, r.add = function (n) {\n      var t = this[Q];\n      return u(t), this.has(n) || (o(t), k(t), t.o.add(n)), this;\n    }, r.delete = function (n) {\n      if (!this.has(n)) return !1;\n      var t = this[Q];\n      return u(t), o(t), k(t), t.o.delete(n) || !!t.p.has(n) && t.o.delete(t.p.get(n));\n    }, r.clear = function () {\n      var n = this[Q];\n      u(n), p(n).size && (o(n), k(n), n.o.clear());\n    }, r.values = function () {\n      var n = this[Q];\n      return u(n), o(n), n.o.values();\n    }, r.entries = function () {\n      var n = this[Q];\n      return u(n), o(n), n.o.entries();\n    }, r.keys = function () {\n      return this.values();\n    }, r[V] = function () {\n      return this.values();\n    }, r.forEach = function (n, t) {\n      for (var r = this.values(), e = r.next(); !e.done;) {\n        n.call(t, e.value, e.value, this), e = r.next();\n      }\n    }, n;\n  }();\n\n  m(\"MapSet\", {\n    N: function N(n, t) {\n      return new f(n, t);\n    },\n    T: function T(n, t) {\n      return new c(n, t);\n    }\n  });\n}\n\nfunction J() {\n  N(), C(), T();\n}\n\nfunction K(n) {\n  return n;\n}\n\nfunction $(n) {\n  return n;\n}\n\nvar G,\n    U,\n    W = \"undefined\" != typeof Symbol && \"symbol\" == typeof Symbol(\"x\"),\n    X = \"undefined\" != typeof Map,\n    q = \"undefined\" != typeof Set,\n    B = \"undefined\" != typeof Proxy && void 0 !== Proxy.revocable && \"undefined\" != typeof Reflect,\n    H = W ? Symbol.for(\"immer-nothing\") : ((G = {})[\"immer-nothing\"] = !0, G),\n    L = W ? Symbol.for(\"immer-draftable\") : \"__$immer_draftable\",\n    Q = W ? Symbol.for(\"immer-state\") : \"__$immer_state\",\n    V = \"undefined\" != typeof Symbol && Symbol.iterator || \"@@iterator\",\n    Y = {\n  0: \"Illegal state\",\n  1: \"Immer drafts cannot have computed properties\",\n  2: \"This object has been frozen and should not be mutated\",\n  3: function _(n) {\n    return \"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? \" + n;\n  },\n  4: \"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.\",\n  5: \"Immer forbids circular references\",\n  6: \"The first or second argument to `produce` must be a function\",\n  7: \"The third argument to `produce` must be a function or undefined\",\n  8: \"First argument to `createDraft` must be a plain object, an array, or an immerable object\",\n  9: \"First argument to `finishDraft` must be a draft returned by `createDraft`\",\n  10: \"The given draft is already finalized\",\n  11: \"Object.defineProperty() cannot be used on an Immer draft\",\n  12: \"Object.setPrototypeOf() cannot be used on an Immer draft\",\n  13: \"Immer only supports deleting array indices\",\n  14: \"Immer only supports setting array indices and the 'length' property\",\n  15: function _(n) {\n    return \"Cannot apply patch, path doesn't resolve: \" + n;\n  },\n  16: 'Sets cannot have \"replace\" patches.',\n  17: function _(n) {\n    return \"Unsupported patch operation: \" + n;\n  },\n  18: function _(n) {\n    return \"The plugin for '\" + n + \"' has not been loaded into Immer. To enable the plugin, import and call `enable\" + n + \"()` when initializing your application.\";\n  },\n  20: \"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available\",\n  21: function _(n) {\n    return \"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '\" + n + \"'\";\n  },\n  22: function _(n) {\n    return \"'current' expects a draft, got: \" + n;\n  },\n  23: function _(n) {\n    return \"'original' expects a draft, got: \" + n;\n  },\n  24: \"Patching reserved attributes like __proto__, prototype and constructor is not allowed\"\n},\n    Z = \"\" + Object.prototype.constructor,\n    nn = \"undefined\" != typeof Reflect && Reflect.ownKeys ? Reflect.ownKeys : void 0 !== Object.getOwnPropertySymbols ? function (n) {\n  return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n));\n} : Object.getOwnPropertyNames,\n    tn = Object.getOwnPropertyDescriptors || function (n) {\n  var t = {};\n  return nn(n).forEach(function (r) {\n    t[r] = Object.getOwnPropertyDescriptor(n, r);\n  }), t;\n},\n    rn = {},\n    en = {\n  get: function get(n, t) {\n    if (t === Q) return n;\n    var e = p(n);\n    if (!u(e, t)) return function (n, t, r) {\n      var e,\n          i = I(t, r);\n      return i ? \"value\" in i ? i.value : null === (e = i.get) || void 0 === e ? void 0 : e.call(n.k) : void 0;\n    }(n, e, t);\n    var i = e[t];\n    return n.I || !r(i) ? i : i === z(n.t, t) ? (E(n), n.o[t] = R(n.A.h, i, n)) : i;\n  },\n  has: function has(n, t) {\n    return t in p(n);\n  },\n  ownKeys: function ownKeys(n) {\n    return Reflect.ownKeys(p(n));\n  },\n  set: function set(n, t, r) {\n    var e = I(p(n), t);\n    if (null == e ? void 0 : e.set) return e.set.call(n.k, r), !0;\n\n    if (!n.P) {\n      var i = z(p(n), t),\n          o = null == i ? void 0 : i[Q];\n      if (o && o.t === r) return n.o[t] = r, n.D[t] = !1, !0;\n      if (c(r, i) && (void 0 !== r || u(n.t, t))) return !0;\n      E(n), k(n);\n    }\n\n    return n.o[t] === r && \"number\" != typeof r && (void 0 !== r || t in n.o) || (n.o[t] = r, n.D[t] = !0, !0);\n  },\n  deleteProperty: function deleteProperty(n, t) {\n    return void 0 !== z(n.t, t) || t in n.t ? (n.D[t] = !1, E(n), k(n)) : delete n.D[t], n.o && delete n.o[t], !0;\n  },\n  getOwnPropertyDescriptor: function getOwnPropertyDescriptor(n, t) {\n    var r = p(n),\n        e = Reflect.getOwnPropertyDescriptor(r, t);\n    return e ? {\n      writable: !0,\n      configurable: 1 !== n.i || \"length\" !== t,\n      enumerable: e.enumerable,\n      value: r[t]\n    } : e;\n  },\n  defineProperty: function defineProperty() {\n    n(11);\n  },\n  getPrototypeOf: function getPrototypeOf(n) {\n    return Object.getPrototypeOf(n.t);\n  },\n  setPrototypeOf: function setPrototypeOf() {\n    n(12);\n  }\n},\n    on = {};\n\ni(en, function (n, t) {\n  on[n] = function () {\n    return arguments[0] = arguments[0][0], t.apply(this, arguments);\n  };\n}), on.deleteProperty = function (t, r) {\n  return \"production\" !== process.env.NODE_ENV && isNaN(parseInt(r)) && n(13), en.deleteProperty.call(this, t[0], r);\n}, on.set = function (t, r, e) {\n  return \"production\" !== process.env.NODE_ENV && \"length\" !== r && isNaN(parseInt(r)) && n(14), en.set.call(this, t[0], r, e, t[0]);\n};\n\nvar un = function () {\n  function e(t) {\n    var e = this;\n    this.g = B, this.F = !0, this.produce = function (t, i, o) {\n      if (\"function\" == typeof t && \"function\" != typeof i) {\n        var u = i;\n        i = t;\n        var a = e;\n        return function (n) {\n          var t = this;\n          void 0 === n && (n = u);\n\n          for (var r = arguments.length, e = Array(r > 1 ? r - 1 : 0), o = 1; o < r; o++) {\n            e[o - 1] = arguments[o];\n          }\n\n          return a.produce(n, function (n) {\n            var r;\n            return (r = i).call.apply(r, [t, n].concat(e));\n          });\n        };\n      }\n\n      var f;\n\n      if (\"function\" != typeof i && n(6), void 0 !== o && \"function\" != typeof o && n(7), r(t)) {\n        var c = w(e),\n            s = R(e, t, void 0),\n            v = !0;\n\n        try {\n          f = i(s), v = !1;\n        } finally {\n          v ? O(c) : g(c);\n        }\n\n        return \"undefined\" != typeof Promise && f instanceof Promise ? f.then(function (n) {\n          return j(c, o), P(n, c);\n        }, function (n) {\n          throw O(c), n;\n        }) : (j(c, o), P(f, c));\n      }\n\n      if (!t || \"object\" != typeof t) {\n        if ((f = i(t)) === H) return;\n        return void 0 === f && (f = t), e.F && d(f, !0), f;\n      }\n\n      n(21, t);\n    }, this.produceWithPatches = function (n, t) {\n      return \"function\" == typeof n ? function (t) {\n        for (var r = arguments.length, i = Array(r > 1 ? r - 1 : 0), o = 1; o < r; o++) {\n          i[o - 1] = arguments[o];\n        }\n\n        return e.produceWithPatches(t, function (t) {\n          return n.apply(void 0, [t].concat(i));\n        });\n      } : [e.produce(n, t, function (n, t) {\n        r = n, i = t;\n      }), r, i];\n      var r, i;\n    }, \"boolean\" == typeof (null == t ? void 0 : t.useProxies) && this.setUseProxies(t.useProxies), \"boolean\" == typeof (null == t ? void 0 : t.autoFreeze) && this.setAutoFreeze(t.autoFreeze);\n  }\n\n  var i = e.prototype;\n  return i.createDraft = function (e) {\n    r(e) || n(8), t(e) && (e = D(e));\n    var i = w(this),\n        o = R(this, e, void 0);\n    return o[Q].C = !0, g(i), o;\n  }, i.finishDraft = function (t, r) {\n    var e = t && t[Q];\n    \"production\" !== process.env.NODE_ENV && (e && e.C || n(9), e.I && n(10));\n    var i = e.A;\n    return j(i, r), P(void 0, i);\n  }, i.setAutoFreeze = function (n) {\n    this.F = n;\n  }, i.setUseProxies = function (t) {\n    t && !B && n(20), this.g = t;\n  }, i.applyPatches = function (n, r) {\n    var e;\n\n    for (e = r.length - 1; e >= 0; e--) {\n      var i = r[e];\n\n      if (0 === i.path.length && \"replace\" === i.op) {\n        n = i.value;\n        break;\n      }\n    }\n\n    var o = b(\"Patches\").$;\n    return t(n) ? o(n, r) : this.produce(n, function (n) {\n      return o(n, r.slice(e + 1));\n    });\n  }, e;\n}(),\n    an = new un(),\n    fn = an.produce,\n    cn = an.produceWithPatches.bind(an),\n    sn = an.setAutoFreeze.bind(an),\n    vn = an.setUseProxies.bind(an),\n    pn = an.applyPatches.bind(an),\n    ln = an.createDraft.bind(an),\n    dn = an.finishDraft.bind(an);\n\nexport default fn;\nexport { un as Immer, pn as applyPatches, K as castDraft, $ as castImmutable, ln as createDraft, D as current, J as enableAllPlugins, N as enableES5, C as enableMapSet, T as enablePatches, dn as finishDraft, d as freeze, L as immerable, t as isDraft, r as isDraftable, H as nothing, e as original, fn as produce, cn as produceWithPatches, sn as setAutoFreeze, vn as setUseProxies };","import _slicedToArray from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _toConsumableArray from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/createClass\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport produce from 'immer';\nimport isPlainObject from 'lodash.isplainobject';\n/*\r\n * Copyright 2017 The boardgame.io Authors\r\n *\r\n * Use of this source code is governed by a MIT-style\r\n * license that can be found in the LICENSE file or at\r\n * https://opensource.org/licenses/MIT.\r\n */\n\nvar MAKE_MOVE = 'MAKE_MOVE';\nvar GAME_EVENT = 'GAME_EVENT';\nvar REDO = 'REDO';\nvar RESET = 'RESET';\nvar SYNC = 'SYNC';\nvar UNDO = 'UNDO';\nvar UPDATE = 'UPDATE';\nvar PATCH = 'PATCH';\nvar PLUGIN = 'PLUGIN';\nvar STRIP_TRANSIENTS = 'STRIP_TRANSIENTS';\n/*\r\n * Copyright 2017 The boardgame.io Authors\r\n *\r\n * Use of this source code is governed by a MIT-style\r\n * license that can be found in the LICENSE file or at\r\n * https://opensource.org/licenses/MIT.\r\n */\n\n/**\r\n * Generate a move to be dispatched to the game move reducer.\r\n *\r\n * @param {string} type - The move type.\r\n * @param {Array}  args - Additional arguments.\r\n * @param {string}  playerID - The ID of the player making this action.\r\n * @param {string}  credentials - (optional) The credentials for the player making this action.\r\n */\n\nvar makeMove = function makeMove(type, args, playerID, credentials) {\n  return {\n    type: MAKE_MOVE,\n    payload: {\n      type: type,\n      args: args,\n      playerID: playerID,\n      credentials: credentials\n    }\n  };\n};\n/**\r\n * Generate a game event to be dispatched to the flow reducer.\r\n *\r\n * @param {string} type - The event type.\r\n * @param {Array}  args - Additional arguments.\r\n * @param {string}  playerID - The ID of the player making this action.\r\n * @param {string}  credentials - (optional) The credentials for the player making this action.\r\n */\n\n\nvar gameEvent = function gameEvent(type, args, playerID, credentials) {\n  return {\n    type: GAME_EVENT,\n    payload: {\n      type: type,\n      args: args,\n      playerID: playerID,\n      credentials: credentials\n    }\n  };\n};\n/**\r\n * Generate an automatic game event that is a side-effect of a move.\r\n * @param {string} type - The event type.\r\n * @param {Array}  args - Additional arguments.\r\n * @param {string}  playerID - The ID of the player making this action.\r\n * @param {string}  credentials - (optional) The credentials for the player making this action.\r\n */\n\n\nvar automaticGameEvent = function automaticGameEvent(type, args, playerID, credentials) {\n  return {\n    type: GAME_EVENT,\n    payload: {\n      type: type,\n      args: args,\n      playerID: playerID,\n      credentials: credentials\n    },\n    automatic: true\n  };\n};\n\nvar sync = function sync(info) {\n  return {\n    type: SYNC,\n    state: info.state,\n    log: info.log,\n    initialState: info.initialState,\n    clientOnly: true\n  };\n};\n/**\r\n * Used to update the Redux store's state with patch in response to\r\n * an action coming from another player.\r\n * @param prevStateID previous stateID\r\n * @param stateID stateID after this patch\r\n * @param {Operation[]} patch - The patch to apply.\r\n * @param {LogEntry[]} deltalog - A log delta.\r\n */\n\n\nvar patch = function patch(prevStateID, stateID, _patch, deltalog) {\n  return {\n    type: PATCH,\n    prevStateID: prevStateID,\n    stateID: stateID,\n    patch: _patch,\n    deltalog: deltalog,\n    clientOnly: true\n  };\n};\n/**\r\n * Used to update the Redux store's state in response to\r\n * an action coming from another player.\r\n * @param {object} state - The state to restore.\r\n * @param {Array} deltalog - A log delta.\r\n */\n\n\nvar update = function update(state, deltalog) {\n  return {\n    type: UPDATE,\n    state: state,\n    deltalog: deltalog,\n    clientOnly: true\n  };\n};\n/**\r\n * Used to reset the game state.\r\n * @param {object} state - The initial state.\r\n */\n\n\nvar reset = function reset(state) {\n  return {\n    type: RESET,\n    state: state,\n    clientOnly: true\n  };\n};\n/**\r\n * Used to undo the last move.\r\n * @param {string}  playerID - The ID of the player making this action.\r\n * @param {string}  credentials - (optional) The credentials for the player making this action.\r\n */\n\n\nvar undo = function undo(playerID, credentials) {\n  return {\n    type: UNDO,\n    payload: {\n      type: null,\n      args: null,\n      playerID: playerID,\n      credentials: credentials\n    }\n  };\n};\n/**\r\n * Used to redo the last undone move.\r\n * @param {string}  playerID - The ID of the player making this action.\r\n * @param {string}  credentials - (optional) The credentials for the player making this action.\r\n */\n\n\nvar redo = function redo(playerID, credentials) {\n  return {\n    type: REDO,\n    payload: {\n      type: null,\n      args: null,\n      playerID: playerID,\n      credentials: credentials\n    }\n  };\n};\n/**\r\n * Allows plugins to define their own actions and intercept them.\r\n */\n\n\nvar plugin = function plugin(type, args, playerID, credentials) {\n  return {\n    type: PLUGIN,\n    payload: {\n      type: type,\n      args: args,\n      playerID: playerID,\n      credentials: credentials\n    }\n  };\n};\n/**\r\n * Private action used to strip transient metadata (e.g. errors) from the game\r\n * state.\r\n */\n\n\nvar stripTransients = function stripTransients() {\n  return {\n    type: STRIP_TRANSIENTS\n  };\n};\n\nvar ActionCreators = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  makeMove: makeMove,\n  gameEvent: gameEvent,\n  automaticGameEvent: automaticGameEvent,\n  sync: sync,\n  patch: patch,\n  update: update,\n  reset: reset,\n  undo: undo,\n  redo: redo,\n  plugin: plugin,\n  stripTransients: stripTransients\n});\n/**\r\n * Moves can return this when they want to indicate\r\n * that the combination of arguments is illegal and\r\n * the move ought to be discarded.\r\n */\n\nvar INVALID_MOVE = 'INVALID_MOVE';\n/*\r\n * Copyright 2018 The boardgame.io Authors\r\n *\r\n * Use of this source code is governed by a MIT-style\r\n * license that can be found in the LICENSE file or at\r\n * https://opensource.org/licenses/MIT.\r\n */\n\n/**\r\n * Plugin that allows using Immer to make immutable changes\r\n * to G by just mutating it.\r\n */\n\nvar ImmerPlugin = {\n  name: 'plugin-immer',\n  fnWrap: function fnWrap(move) {\n    return function (G, ctx) {\n      for (var _len = arguments.length, args = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n        args[_key - 2] = arguments[_key];\n      }\n\n      var isInvalid = false;\n      var newG = produce(G, function (G) {\n        var result = move.apply(void 0, [G, ctx].concat(args));\n\n        if (result === INVALID_MOVE) {\n          isInvalid = true;\n          return;\n        }\n\n        return result;\n      });\n      if (isInvalid) return INVALID_MOVE;\n      return newG;\n    };\n  }\n}; // Inlined version of Alea from https://github.com/davidbau/seedrandom.\n// Converted to Typescript October 2020.\n\nvar Alea = /*#__PURE__*/function () {\n  function Alea(seed) {\n    _classCallCheck(this, Alea);\n\n    var mash = Mash(); // Apply the seeding algorithm from Baagoe.\n\n    this.c = 1;\n    this.s0 = mash(' ');\n    this.s1 = mash(' ');\n    this.s2 = mash(' ');\n    this.s0 -= mash(seed);\n\n    if (this.s0 < 0) {\n      this.s0 += 1;\n    }\n\n    this.s1 -= mash(seed);\n\n    if (this.s1 < 0) {\n      this.s1 += 1;\n    }\n\n    this.s2 -= mash(seed);\n\n    if (this.s2 < 0) {\n      this.s2 += 1;\n    }\n  }\n\n  _createClass(Alea, [{\n    key: \"next\",\n    value: function next() {\n      var t = 2091639 * this.s0 + this.c * 2.3283064365386963e-10; // 2^-32\n\n      this.s0 = this.s1;\n      this.s1 = this.s2;\n      return this.s2 = t - (this.c = Math.trunc(t));\n    }\n  }]);\n\n  return Alea;\n}();\n\nfunction Mash() {\n  var n = 0xefc8249d;\n\n  var mash = function mash(data) {\n    var str = data.toString();\n\n    for (var i = 0; i < str.length; i++) {\n      n += str.charCodeAt(i);\n      var h = 0.02519603282416938 * n;\n      n = h >>> 0;\n      h -= n;\n      h *= n;\n      n = h >>> 0;\n      h -= n;\n      n += h * 0x100000000; // 2^32\n    }\n\n    return (n >>> 0) * 2.3283064365386963e-10; // 2^-32\n  };\n\n  return mash;\n}\n\nfunction copy(f, t) {\n  t.c = f.c;\n  t.s0 = f.s0;\n  t.s1 = f.s1;\n  t.s2 = f.s2;\n  return t;\n}\n\nfunction alea(seed, state) {\n  var xg = new Alea(seed);\n  var prng = xg.next.bind(xg);\n  if (state) copy(state, xg);\n\n  prng.state = function () {\n    return copy(xg, {});\n  };\n\n  return prng;\n}\n/*\r\n * Copyright 2017 The boardgame.io Authors\r\n *\r\n * Use of this source code is governed by a MIT-style\r\n * license that can be found in the LICENSE file or at\r\n * https://opensource.org/licenses/MIT.\r\n */\n\n/**\r\n * Random\r\n *\r\n * Calls that require a pseudorandom number generator.\r\n * Uses a seed from ctx, and also persists the PRNG\r\n * state in ctx so that moves can stay pure.\r\n */\n\n\nvar Random = /*#__PURE__*/function () {\n  /**\r\n   * constructor\r\n   * @param {object} ctx - The ctx object to initialize from.\r\n   */\n  function Random(state) {\n    _classCallCheck(this, Random);\n\n    // If we are on the client, the seed is not present.\n    // Just use a temporary seed to execute the move without\n    // crashing it. The move state itself is discarded,\n    // so the actual value doesn't matter.\n    this.state = state || {\n      seed: '0'\n    };\n    this.used = false;\n  }\n  /**\r\n   * Generates a new seed from the current date / time.\r\n   */\n\n\n  _createClass(Random, [{\n    key: \"isUsed\",\n    value: function isUsed() {\n      return this.used;\n    }\n  }, {\n    key: \"getState\",\n    value: function getState() {\n      return this.state;\n    }\n    /**\r\n     * Generate a random number.\r\n     */\n\n  }, {\n    key: \"_random\",\n    value: function _random() {\n      this.used = true;\n      var R = this.state;\n      var seed = R.prngstate ? '' : R.seed;\n      var rand = alea(seed, R.prngstate);\n      var number = rand();\n      this.state = _objectSpread(_objectSpread({}, R), {}, {\n        prngstate: rand.state()\n      });\n      return number;\n    }\n  }, {\n    key: \"api\",\n    value: function api() {\n      var random = this._random.bind(this);\n\n      var SpotValue = {\n        D4: 4,\n        D6: 6,\n        D8: 8,\n        D10: 10,\n        D12: 12,\n        D20: 20\n      }; // Generate functions for predefined dice values D4 - D20.\n\n      var predefined = {};\n\n      var _loop = function _loop(key) {\n        var spotvalue = SpotValue[key];\n\n        predefined[key] = function (diceCount) {\n          return diceCount === undefined ? Math.floor(random() * spotvalue) + 1 : Array.from({\n            length: diceCount\n          }).map(function () {\n            return Math.floor(random() * spotvalue) + 1;\n          });\n        };\n      };\n\n      for (var key in SpotValue) {\n        _loop(key);\n      }\n\n      function Die() {\n        var spotvalue = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 6;\n        var diceCount = arguments.length > 1 ? arguments[1] : undefined;\n        return diceCount === undefined ? Math.floor(random() * spotvalue) + 1 : Array.from({\n          length: diceCount\n        }).map(function () {\n          return Math.floor(random() * spotvalue) + 1;\n        });\n      }\n\n      return _objectSpread(_objectSpread({}, predefined), {}, {\n        /**\r\n         * Roll a die of specified spot value.\r\n         *\r\n         * @param {number} spotvalue - The die dimension (default: 6).\r\n         * @param {number} diceCount - number of dice to throw.\r\n         *                             if not defined, defaults to 1 and returns the value directly.\r\n         *                             if defined, returns an array containing the random dice values.\r\n         */\n        Die: Die,\n\n        /**\r\n         * Generate a random number between 0 and 1.\r\n         */\n        Number: function Number() {\n          return random();\n        },\n\n        /**\r\n         * Shuffle an array.\r\n         *\r\n         * @param {Array} deck - The array to shuffle. Does not mutate\r\n         *                       the input, but returns the shuffled array.\r\n         */\n        Shuffle: function Shuffle(deck) {\n          var clone = _toConsumableArray(deck);\n\n          var sourceIndex = deck.length;\n          var destinationIndex = 0;\n          var shuffled = Array.from({\n            length: sourceIndex\n          });\n\n          while (sourceIndex) {\n            var randomIndex = Math.trunc(sourceIndex * random());\n            shuffled[destinationIndex++] = clone[randomIndex];\n            clone[randomIndex] = clone[--sourceIndex];\n          }\n\n          return shuffled;\n        },\n        _private: this\n      });\n    }\n  }], [{\n    key: \"seed\",\n    value: function seed() {\n      return Date.now().toString(36).slice(-10);\n    }\n  }]);\n\n  return Random;\n}();\n/*\r\n * Copyright 2018 The boardgame.io Authors\r\n *\r\n * Use of this source code is governed by a MIT-style\r\n * license that can be found in the LICENSE file or at\r\n * https://opensource.org/licenses/MIT.\r\n */\n\n\nvar RandomPlugin = {\n  name: 'random',\n  noClient: function noClient(_ref) {\n    var api = _ref.api;\n    return api._private.isUsed();\n  },\n  flush: function flush(_ref2) {\n    var api = _ref2.api;\n    return api._private.getState();\n  },\n  api: function api(_ref3) {\n    var data = _ref3.data;\n    var random = new Random(data);\n    return random.api();\n  },\n  setup: function setup(_ref4) {\n    var game = _ref4.game;\n    var seed = game.seed;\n\n    if (seed === undefined) {\n      seed = Random.seed();\n    }\n\n    return {\n      seed: seed\n    };\n  },\n  playerView: function playerView() {\n    return undefined;\n  }\n};\nvar GameMethod;\n\n(function (GameMethod) {\n  GameMethod[\"MOVE\"] = \"MOVE\";\n  GameMethod[\"GAME_ON_END\"] = \"GAME_ON_END\";\n  GameMethod[\"PHASE_ON_BEGIN\"] = \"PHASE_ON_BEGIN\";\n  GameMethod[\"PHASE_ON_END\"] = \"PHASE_ON_END\";\n  GameMethod[\"TURN_ON_BEGIN\"] = \"TURN_ON_BEGIN\";\n  GameMethod[\"TURN_ON_MOVE\"] = \"TURN_ON_MOVE\";\n  GameMethod[\"TURN_ON_END\"] = \"TURN_ON_END\";\n})(GameMethod || (GameMethod = {}));\n/*\r\n * Copyright 2018 The boardgame.io Authors\r\n *\r\n * Use of this source code is governed by a MIT-style\r\n * license that can be found in the LICENSE file or at\r\n * https://opensource.org/licenses/MIT.\r\n */\n\n\nvar Errors;\n\n(function (Errors) {\n  Errors[\"CalledOutsideHook\"] = \"Events must be called from moves or the `onBegin`, `onEnd`, and `onMove` hooks.\\nThis error probably means you called an event from other game code, like an `endIf` trigger or one of the `turn.order` methods.\";\n  Errors[\"EndTurnInOnEnd\"] = \"`endTurn` is disallowed in `onEnd` hooks \\u2014 the turn is already ending.\";\n  Errors[\"MaxTurnEndings\"] = \"Maximum number of turn endings exceeded for this update.\\nThis likely means game code is triggering an infinite loop.\";\n  Errors[\"PhaseEventInOnEnd\"] = \"`setPhase` & `endPhase` are disallowed in a phase\\u2019s `onEnd` hook \\u2014 the phase is already ending.\\nIf you\\u2019re trying to dynamically choose the next phase when a phase ends, use the phase\\u2019s `next` trigger.\";\n  Errors[\"StageEventInOnEnd\"] = \"`setStage`, `endStage` & `setActivePlayers` are disallowed in `onEnd` hooks.\";\n  Errors[\"StageEventInPhaseBegin\"] = \"`setStage`, `endStage` & `setActivePlayers` are disallowed in a phase\\u2019s `onBegin` hook.\\nUse `setActivePlayers` in a `turn.onBegin` hook or declare stages with `turn.activePlayers` instead.\";\n  Errors[\"StageEventInTurnBegin\"] = \"`setStage` & `endStage` are disallowed in `turn.onBegin`.\\nUse `setActivePlayers` or declare stages with `turn.activePlayers` instead.\";\n})(Errors || (Errors = {}));\n/**\r\n * Events\r\n */\n\n\nvar Events = /*#__PURE__*/function () {\n  function Events(flow, ctx, playerID) {\n    _classCallCheck(this, Events);\n\n    this.flow = flow;\n    this.playerID = playerID;\n    this.dispatch = [];\n    this.initialTurn = ctx.turn;\n    this.updateTurnContext(ctx, undefined); // This is an arbitrarily large upper threshold, which could be made\n    // configurable via a game option if the need arises.\n\n    this.maxEndedTurnsPerAction = ctx.numPlayers * 100;\n  }\n\n  _createClass(Events, [{\n    key: \"api\",\n    value: function api() {\n      var _this = this;\n\n      var events = {\n        _private: this\n      };\n\n      var _iterator = _createForOfIteratorHelper(this.flow.eventNames),\n          _step;\n\n      try {\n        var _loop2 = function _loop2() {\n          var type = _step.value;\n\n          events[type] = function () {\n            for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n              args[_key2] = arguments[_key2];\n            }\n\n            _this.dispatch.push({\n              type: type,\n              args: args,\n              phase: _this.currentPhase,\n              turn: _this.currentTurn,\n              calledFrom: _this.currentMethod,\n              // Used to capture a stack trace in case it is needed later.\n              error: new Error('Events Plugin Error')\n            });\n          };\n        };\n\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          _loop2();\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      return events;\n    }\n  }, {\n    key: \"isUsed\",\n    value: function isUsed() {\n      return this.dispatch.length > 0;\n    }\n  }, {\n    key: \"updateTurnContext\",\n    value: function updateTurnContext(ctx, methodType) {\n      this.currentPhase = ctx.phase;\n      this.currentTurn = ctx.turn;\n      this.currentMethod = methodType;\n    }\n  }, {\n    key: \"unsetCurrentMethod\",\n    value: function unsetCurrentMethod() {\n      this.currentMethod = undefined;\n    }\n    /**\r\n     * Updates ctx with the triggered events.\r\n     * @param {object} state - The state object { G, ctx }.\r\n     */\n\n  }, {\n    key: \"update\",\n    value: function update(state) {\n      var initialState = state;\n\n      var stateWithError = function stateWithError(_ref5, message) {\n        var stack = _ref5.stack;\n        return _objectSpread(_objectSpread({}, initialState), {}, {\n          plugins: _objectSpread(_objectSpread({}, initialState.plugins), {}, {\n            events: _objectSpread(_objectSpread({}, initialState.plugins.events), {}, {\n              data: {\n                error: message + '\\n' + stack\n              }\n            })\n          })\n        });\n      };\n\n      EventQueue: for (var i = 0; i < this.dispatch.length; i++) {\n        var event = this.dispatch[i];\n        var turnHasEnded = event.turn !== state.ctx.turn; // This protects against potential infinite loops if specific events are called on hooks.\n        // The moment we exceed the defined threshold, we just bail out of all phases.\n\n        var endedTurns = this.currentTurn - this.initialTurn;\n\n        if (endedTurns >= this.maxEndedTurnsPerAction) {\n          return stateWithError(event.error, Errors.MaxTurnEndings);\n        }\n\n        if (event.calledFrom === undefined) {\n          return stateWithError(event.error, Errors.CalledOutsideHook);\n        } // Stop processing events once the game has finished.\n\n\n        if (state.ctx.gameover) break EventQueue;\n\n        switch (event.type) {\n          case 'endStage':\n          case 'setStage':\n          case 'setActivePlayers':\n            {\n              switch (event.calledFrom) {\n                // Disallow all stage events in onEnd and phase.onBegin hooks.\n                case GameMethod.TURN_ON_END:\n                case GameMethod.PHASE_ON_END:\n                  return stateWithError(event.error, Errors.StageEventInOnEnd);\n\n                case GameMethod.PHASE_ON_BEGIN:\n                  return stateWithError(event.error, Errors.StageEventInPhaseBegin);\n                // Disallow setStage & endStage in turn.onBegin hooks.\n\n                case GameMethod.TURN_ON_BEGIN:\n                  if (event.type === 'setActivePlayers') break;\n                  return stateWithError(event.error, Errors.StageEventInTurnBegin);\n              } // If the turn already ended, don't try to process stage events.\n\n\n              if (turnHasEnded) continue EventQueue;\n              break;\n            }\n\n          case 'endTurn':\n            {\n              if (event.calledFrom === GameMethod.TURN_ON_END || event.calledFrom === GameMethod.PHASE_ON_END) {\n                return stateWithError(event.error, Errors.EndTurnInOnEnd);\n              } // If the turn already ended some other way,\n              // don't try to end the turn again.\n\n\n              if (turnHasEnded) continue EventQueue;\n              break;\n            }\n\n          case 'endPhase':\n          case 'setPhase':\n            {\n              if (event.calledFrom === GameMethod.PHASE_ON_END) {\n                return stateWithError(event.error, Errors.PhaseEventInOnEnd);\n              } // If the phase already ended some other way,\n              // don't try to end the phase again.\n\n\n              if (event.phase !== state.ctx.phase) continue EventQueue;\n              break;\n            }\n        }\n\n        var action = automaticGameEvent(event.type, event.args, this.playerID);\n        state = this.flow.processEvent(state, action);\n      }\n\n      return state;\n    }\n  }]);\n\n  return Events;\n}();\n/*\r\n * Copyright 2020 The boardgame.io Authors\r\n *\r\n * Use of this source code is governed by a MIT-style\r\n * license that can be found in the LICENSE file or at\r\n * https://opensource.org/licenses/MIT.\r\n */\n\n\nvar EventsPlugin = {\n  name: 'events',\n  noClient: function noClient(_ref6) {\n    var api = _ref6.api;\n    return api._private.isUsed();\n  },\n  isInvalid: function isInvalid(_ref7) {\n    var data = _ref7.data;\n    return data.error || false;\n  },\n  // Update the events plugins internal turn context each time a move\n  // or hook is called. This allows events called after turn or phase\n  // endings to dispatch the current turn and phase correctly.\n  fnWrap: function fnWrap(method, methodType) {\n    return function (G, ctx) {\n      var api = ctx.events;\n      if (api) api._private.updateTurnContext(ctx, methodType);\n\n      for (var _len3 = arguments.length, args = new Array(_len3 > 2 ? _len3 - 2 : 0), _key3 = 2; _key3 < _len3; _key3++) {\n        args[_key3 - 2] = arguments[_key3];\n      }\n\n      G = method.apply(void 0, [G, ctx].concat(args));\n      if (api) api._private.unsetCurrentMethod();\n      return G;\n    };\n  },\n  dangerouslyFlushRawState: function dangerouslyFlushRawState(_ref8) {\n    var state = _ref8.state,\n        api = _ref8.api;\n    return api._private.update(state);\n  },\n  api: function api(_ref9) {\n    var game = _ref9.game,\n        ctx = _ref9.ctx,\n        playerID = _ref9.playerID;\n    return new Events(game.flow, ctx, playerID).api();\n  }\n};\n/*\r\n * Copyright 2018 The boardgame.io Authors\r\n *\r\n * Use of this source code is governed by a MIT-style\r\n * license that can be found in the LICENSE file or at\r\n * https://opensource.org/licenses/MIT.\r\n */\n\n/**\r\n * Plugin that makes it possible to add metadata to log entries.\r\n * During a move, you can set metadata using ctx.log.setMetadata and it will be\r\n * available on the log entry for that move.\r\n */\n\nvar LogPlugin = {\n  name: 'log',\n  flush: function flush() {\n    return {};\n  },\n  api: function api(_ref10) {\n    var data = _ref10.data;\n    return {\n      setMetadata: function setMetadata(metadata) {\n        data.metadata = metadata;\n      }\n    };\n  },\n  setup: function setup() {\n    return {};\n  }\n};\n/**\r\n * Check if a value can be serialized (e.g. using `JSON.stringify`).\r\n * Adapted from: https://stackoverflow.com/a/30712764/3829557\r\n */\n\nfunction isSerializable(value) {\n  // Primitives are OK.\n  if (value === undefined || value === null || typeof value === 'boolean' || typeof value === 'number' || typeof value === 'string') {\n    return true;\n  } // A non-primitive value that is neither a POJO or an array cannot be serialized.\n\n\n  if (!isPlainObject(value) && !Array.isArray(value)) {\n    return false;\n  } // Recurse entries if the value is an object or array.\n\n\n  for (var key in value) {\n    if (!isSerializable(value[key])) return false;\n  }\n\n  return true;\n}\n/**\r\n * Plugin that checks whether state is serializable, in order to avoid\r\n * network serialization bugs.\r\n */\n\n\nvar SerializablePlugin = {\n  name: 'plugin-serializable',\n  fnWrap: function fnWrap(move) {\n    return function (G, ctx) {\n      for (var _len4 = arguments.length, args = new Array(_len4 > 2 ? _len4 - 2 : 0), _key4 = 2; _key4 < _len4; _key4++) {\n        args[_key4 - 2] = arguments[_key4];\n      }\n\n      var result = move.apply(void 0, [G, ctx].concat(args)); // Check state in non-production environments.\n\n      if (process.env.NODE_ENV !== 'production' && !isSerializable(result)) {\n        throw new Error('Move state is not JSON-serialiazable.\\n' + 'See https://boardgame.io/documentation/#/?id=state for more information.');\n      }\n\n      return result;\n    };\n  }\n};\n/*\r\n * Copyright 2018 The boardgame.io Authors\r\n *\r\n * Use of this source code is governed by a MIT-style\r\n * license that can be found in the LICENSE file or at\r\n * https://opensource.org/licenses/MIT.\r\n */\n\nvar production = process.env.NODE_ENV === 'production';\nvar logfn = production ? function () {} : function () {\n  var _console;\n\n  return (_console = console).log.apply(_console, arguments);\n};\n\nvar errorfn = function errorfn() {\n  var _console2;\n\n  return (_console2 = console).error.apply(_console2, arguments);\n};\n\nfunction info(msg) {\n  logfn(\"INFO: \".concat(msg));\n}\n\nfunction error(error) {\n  errorfn('ERROR:', error);\n}\n/*\r\n * Copyright 2018 The boardgame.io Authors\r\n *\r\n * Use of this source code is governed by a MIT-style\r\n * license that can be found in the LICENSE file or at\r\n * https://opensource.org/licenses/MIT.\r\n */\n\n/**\r\n * List of plugins that are always added.\r\n */\n\n\nvar CORE_PLUGINS = [ImmerPlugin, RandomPlugin, LogPlugin, SerializablePlugin];\nvar DEFAULT_PLUGINS = [].concat(CORE_PLUGINS, [EventsPlugin]);\n/**\r\n * Allow plugins to intercept actions and process them.\r\n */\n\nvar ProcessAction = function ProcessAction(state, action, opts) {\n  // TODO(#723): Extend error handling to plugins.\n  opts.game.plugins.filter(function (plugin) {\n    return plugin.action !== undefined;\n  }).filter(function (plugin) {\n    return plugin.name === action.payload.type;\n  }).forEach(function (plugin) {\n    var name = plugin.name;\n    var pluginState = state.plugins[name] || {\n      data: {}\n    };\n    var data = plugin.action(pluginState.data, action.payload);\n    state = _objectSpread(_objectSpread({}, state), {}, {\n      plugins: _objectSpread(_objectSpread({}, state.plugins), {}, _defineProperty({}, name, _objectSpread(_objectSpread({}, pluginState), {}, {\n        data: data\n      })))\n    });\n  });\n  return state;\n};\n/**\r\n * The API's created by various plugins are stored in the plugins\r\n * section of the state object:\r\n *\r\n * {\r\n *   G: {},\r\n *   ctx: {},\r\n *   plugins: {\r\n *     plugin-a: {\r\n *       data: {},  // this is generated by the plugin at Setup / Flush.\r\n *       api: {},   // this is ephemeral and generated by Enhance.\r\n *     }\r\n *   }\r\n * }\r\n *\r\n * This function takes these API's and stuffs them back into\r\n * ctx for consumption inside a move function or hook.\r\n */\n\n\nvar EnhanceCtx = function EnhanceCtx(state) {\n  var ctx = _objectSpread({}, state.ctx);\n\n  var plugins = state.plugins || {};\n  Object.entries(plugins).forEach(function (_ref11) {\n    var _ref12 = _slicedToArray(_ref11, 2),\n        name = _ref12[0],\n        api = _ref12[1].api;\n\n    ctx[name] = api;\n  });\n  return ctx;\n};\n/**\r\n * Applies the provided plugins to the given move / flow function.\r\n *\r\n * @param methodToWrap - The move function or hook to apply the plugins to.\r\n * @param methodType - The type of the move or hook being wrapped.\r\n * @param plugins - The list of plugins.\r\n */\n\n\nvar FnWrap = function FnWrap(methodToWrap, methodType, plugins) {\n  return [].concat(CORE_PLUGINS, _toConsumableArray(plugins), [EventsPlugin]).filter(function (plugin) {\n    return plugin.fnWrap !== undefined;\n  }).reduce(function (method, _ref13) {\n    var fnWrap = _ref13.fnWrap;\n    return fnWrap(method, methodType);\n  }, methodToWrap);\n};\n/**\r\n * Allows the plugin to generate its initial state.\r\n */\n\n\nvar Setup = function Setup(state, opts) {\n  [].concat(_toConsumableArray(DEFAULT_PLUGINS), _toConsumableArray(opts.game.plugins)).filter(function (plugin) {\n    return plugin.setup !== undefined;\n  }).forEach(function (plugin) {\n    var name = plugin.name;\n    var data = plugin.setup({\n      G: state.G,\n      ctx: state.ctx,\n      game: opts.game\n    });\n    state = _objectSpread(_objectSpread({}, state), {}, {\n      plugins: _objectSpread(_objectSpread({}, state.plugins), {}, _defineProperty({}, name, {\n        data: data\n      }))\n    });\n  });\n  return state;\n};\n/**\r\n * Invokes the plugin before a move or event.\r\n * The API that the plugin generates is stored inside\r\n * the `plugins` section of the state (which is subsequently\r\n * merged into ctx).\r\n */\n\n\nvar Enhance = function Enhance(state, opts) {\n  [].concat(_toConsumableArray(DEFAULT_PLUGINS), _toConsumableArray(opts.game.plugins)).filter(function (plugin) {\n    return plugin.api !== undefined;\n  }).forEach(function (plugin) {\n    var name = plugin.name;\n    var pluginState = state.plugins[name] || {\n      data: {}\n    };\n    var api = plugin.api({\n      G: state.G,\n      ctx: state.ctx,\n      data: pluginState.data,\n      game: opts.game,\n      playerID: opts.playerID\n    });\n    state = _objectSpread(_objectSpread({}, state), {}, {\n      plugins: _objectSpread(_objectSpread({}, state.plugins), {}, _defineProperty({}, name, _objectSpread(_objectSpread({}, pluginState), {}, {\n        api: api\n      })))\n    });\n  });\n  return state;\n};\n/**\r\n * Allows plugins to update their state after a move / event.\r\n */\n\n\nvar Flush = function Flush(state, opts) {\n  // We flush the events plugin first, then custom plugins and the core plugins.\n  // This means custom plugins cannot use the events API but will be available in event hooks.\n  // Note that plugins are flushed in reverse, to allow custom plugins calling each other.\n  [].concat(CORE_PLUGINS, _toConsumableArray(opts.game.plugins), [EventsPlugin]).reverse().forEach(function (plugin) {\n    var name = plugin.name;\n    var pluginState = state.plugins[name] || {\n      data: {}\n    };\n\n    if (plugin.flush) {\n      var newData = plugin.flush({\n        G: state.G,\n        ctx: state.ctx,\n        game: opts.game,\n        api: pluginState.api,\n        data: pluginState.data\n      });\n      state = _objectSpread(_objectSpread({}, state), {}, {\n        plugins: _objectSpread(_objectSpread({}, state.plugins), {}, _defineProperty({}, plugin.name, {\n          data: newData\n        }))\n      });\n    } else if (plugin.dangerouslyFlushRawState) {\n      state = plugin.dangerouslyFlushRawState({\n        state: state,\n        game: opts.game,\n        api: pluginState.api,\n        data: pluginState.data\n      }); // Remove everything other than data.\n\n      var data = state.plugins[name].data;\n      state = _objectSpread(_objectSpread({}, state), {}, {\n        plugins: _objectSpread(_objectSpread({}, state.plugins), {}, _defineProperty({}, plugin.name, {\n          data: data\n        }))\n      });\n    }\n  });\n  return state;\n};\n/**\r\n * Allows plugins to indicate if they should not be materialized on the client.\r\n * This will cause the client to discard the state update and wait for the\r\n * master instead.\r\n */\n\n\nvar NoClient = function NoClient(state, opts) {\n  return [].concat(_toConsumableArray(DEFAULT_PLUGINS), _toConsumableArray(opts.game.plugins)).filter(function (plugin) {\n    return plugin.noClient !== undefined;\n  }).map(function (plugin) {\n    var name = plugin.name;\n    var pluginState = state.plugins[name];\n\n    if (pluginState) {\n      return plugin.noClient({\n        G: state.G,\n        ctx: state.ctx,\n        game: opts.game,\n        api: pluginState.api,\n        data: pluginState.data\n      });\n    }\n\n    return false;\n  }).includes(true);\n};\n/**\r\n * Allows plugins to indicate if the entire action should be thrown out\r\n * as invalid. This will cancel the entire state update.\r\n */\n\n\nvar IsInvalid = function IsInvalid(state, opts) {\n  var firstInvalidReturn = [].concat(_toConsumableArray(DEFAULT_PLUGINS), _toConsumableArray(opts.game.plugins)).filter(function (plugin) {\n    return plugin.isInvalid !== undefined;\n  }).map(function (plugin) {\n    var name = plugin.name;\n    var pluginState = state.plugins[name];\n    var message = plugin.isInvalid({\n      G: state.G,\n      ctx: state.ctx,\n      game: opts.game,\n      data: pluginState && pluginState.data\n    });\n    return message ? {\n      plugin: name,\n      message: message\n    } : false;\n  }).find(function (value) {\n    return value;\n  });\n  return firstInvalidReturn || false;\n};\n/**\r\n * Update plugin state after move/event & check if plugins consider the update to be valid.\r\n * @returns Tuple of `[updatedState]` or `[originalState, invalidError]`.\r\n */\n\n\nvar FlushAndValidate = function FlushAndValidate(state, opts) {\n  var updatedState = Flush(state, opts);\n  var isInvalid = IsInvalid(updatedState, opts);\n  if (!isInvalid) return [updatedState];\n  var plugin = isInvalid.plugin,\n      message = isInvalid.message;\n  error(\"\".concat(plugin, \" plugin declared action invalid:\\n\").concat(message));\n  return [state, isInvalid];\n};\n/**\r\n * Allows plugins to customize their data for specific players.\r\n * For example, a plugin may want to share no data with the client, or\r\n * want to keep some player data secret from opponents.\r\n */\n\n\nvar PlayerView = function PlayerView(_ref14, _ref15) {\n  var G = _ref14.G,\n      ctx = _ref14.ctx,\n      _ref14$plugins = _ref14.plugins,\n      plugins = _ref14$plugins === void 0 ? {} : _ref14$plugins;\n  var game = _ref15.game,\n      playerID = _ref15.playerID;\n  [].concat(_toConsumableArray(DEFAULT_PLUGINS), _toConsumableArray(game.plugins)).forEach(function (_ref16) {\n    var name = _ref16.name,\n        playerView = _ref16.playerView;\n    if (!playerView) return;\n\n    var _ref17 = plugins[name] || {\n      data: {}\n    },\n        data = _ref17.data;\n\n    var newData = playerView({\n      G: G,\n      ctx: ctx,\n      game: game,\n      data: data,\n      playerID: playerID\n    });\n    plugins = _objectSpread(_objectSpread({}, plugins), {}, _defineProperty({}, name, {\n      data: newData\n    }));\n  });\n  return plugins;\n};\n/**\r\n * Adjust the given options to use the new minMoves/maxMoves if a legacy moveLimit was given\r\n * @param options The options object to apply backwards compatibility to\r\n * @param enforceMinMoves Use moveLimit to set both minMoves and maxMoves\r\n */\n\n\nfunction supportDeprecatedMoveLimit(options) {\n  var enforceMinMoves = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n  if (options.moveLimit) {\n    if (enforceMinMoves) {\n      options.minMoves = options.moveLimit;\n    }\n\n    options.maxMoves = options.moveLimit;\n    delete options.moveLimit;\n  }\n}\n/*\r\n * Copyright 2017 The boardgame.io Authors\r\n *\r\n * Use of this source code is governed by a MIT-style\r\n * license that can be found in the LICENSE file or at\r\n * https://opensource.org/licenses/MIT.\r\n */\n\n\nfunction SetActivePlayers(ctx, arg) {\n  var activePlayers = {};\n  var _prevActivePlayers = [];\n  var _nextActivePlayers = null;\n  var _activePlayersMinMoves = {};\n  var _activePlayersMaxMoves = {};\n\n  if (Array.isArray(arg)) {\n    // support a simple array of player IDs as active players\n    var value = {};\n    arg.forEach(function (v) {\n      return value[v] = Stage.NULL;\n    });\n    activePlayers = value;\n  } else {\n    // process active players argument object\n    // stages previously did not enforce minMoves, this behaviour is kept intentionally\n    supportDeprecatedMoveLimit(arg);\n\n    if (arg.next) {\n      _nextActivePlayers = arg.next;\n    }\n\n    if (arg.revert) {\n      _prevActivePlayers = [].concat(_toConsumableArray(ctx._prevActivePlayers), [{\n        activePlayers: ctx.activePlayers,\n        _activePlayersMinMoves: ctx._activePlayersMinMoves,\n        _activePlayersMaxMoves: ctx._activePlayersMaxMoves,\n        _activePlayersNumMoves: ctx._activePlayersNumMoves\n      }]);\n    }\n\n    if (arg.currentPlayer !== undefined) {\n      ApplyActivePlayerArgument(activePlayers, _activePlayersMinMoves, _activePlayersMaxMoves, ctx.currentPlayer, arg.currentPlayer);\n    }\n\n    if (arg.others !== undefined) {\n      for (var i = 0; i < ctx.playOrder.length; i++) {\n        var id = ctx.playOrder[i];\n\n        if (id !== ctx.currentPlayer) {\n          ApplyActivePlayerArgument(activePlayers, _activePlayersMinMoves, _activePlayersMaxMoves, id, arg.others);\n        }\n      }\n    }\n\n    if (arg.all !== undefined) {\n      for (var _i = 0; _i < ctx.playOrder.length; _i++) {\n        var _id = ctx.playOrder[_i];\n        ApplyActivePlayerArgument(activePlayers, _activePlayersMinMoves, _activePlayersMaxMoves, _id, arg.all);\n      }\n    }\n\n    if (arg.value) {\n      for (var _id2 in arg.value) {\n        ApplyActivePlayerArgument(activePlayers, _activePlayersMinMoves, _activePlayersMaxMoves, _id2, arg.value[_id2]);\n      }\n    }\n\n    if (arg.minMoves) {\n      for (var _id3 in activePlayers) {\n        if (_activePlayersMinMoves[_id3] === undefined) {\n          _activePlayersMinMoves[_id3] = arg.minMoves;\n        }\n      }\n    }\n\n    if (arg.maxMoves) {\n      for (var _id4 in activePlayers) {\n        if (_activePlayersMaxMoves[_id4] === undefined) {\n          _activePlayersMaxMoves[_id4] = arg.maxMoves;\n        }\n      }\n    }\n  }\n\n  if (Object.keys(activePlayers).length === 0) {\n    activePlayers = null;\n  }\n\n  if (Object.keys(_activePlayersMinMoves).length === 0) {\n    _activePlayersMinMoves = null;\n  }\n\n  if (Object.keys(_activePlayersMaxMoves).length === 0) {\n    _activePlayersMaxMoves = null;\n  }\n\n  var _activePlayersNumMoves = {};\n\n  for (var _id5 in activePlayers) {\n    _activePlayersNumMoves[_id5] = 0;\n  }\n\n  return _objectSpread(_objectSpread({}, ctx), {}, {\n    activePlayers: activePlayers,\n    _activePlayersMinMoves: _activePlayersMinMoves,\n    _activePlayersMaxMoves: _activePlayersMaxMoves,\n    _activePlayersNumMoves: _activePlayersNumMoves,\n    _prevActivePlayers: _prevActivePlayers,\n    _nextActivePlayers: _nextActivePlayers\n  });\n}\n/**\r\n * Update activePlayers, setting it to previous, next or null values\r\n * when it becomes empty.\r\n * @param ctx\r\n */\n\n\nfunction UpdateActivePlayersOnceEmpty(ctx) {\n  var _ctx = ctx,\n      activePlayers = _ctx.activePlayers,\n      _activePlayersMinMoves = _ctx._activePlayersMinMoves,\n      _activePlayersMaxMoves = _ctx._activePlayersMaxMoves,\n      _activePlayersNumMoves = _ctx._activePlayersNumMoves,\n      _prevActivePlayers = _ctx._prevActivePlayers,\n      _nextActivePlayers = _ctx._nextActivePlayers;\n\n  if (activePlayers && Object.keys(activePlayers).length === 0) {\n    if (_nextActivePlayers) {\n      ctx = SetActivePlayers(ctx, _nextActivePlayers);\n      var _ctx2 = ctx;\n      activePlayers = _ctx2.activePlayers;\n      _activePlayersMinMoves = _ctx2._activePlayersMinMoves;\n      _activePlayersMaxMoves = _ctx2._activePlayersMaxMoves;\n      _activePlayersNumMoves = _ctx2._activePlayersNumMoves;\n      _prevActivePlayers = _ctx2._prevActivePlayers;\n    } else if (_prevActivePlayers.length > 0) {\n      var lastIndex = _prevActivePlayers.length - 1;\n      var _prevActivePlayers$la = _prevActivePlayers[lastIndex];\n      activePlayers = _prevActivePlayers$la.activePlayers;\n      _activePlayersMinMoves = _prevActivePlayers$la._activePlayersMinMoves;\n      _activePlayersMaxMoves = _prevActivePlayers$la._activePlayersMaxMoves;\n      _activePlayersNumMoves = _prevActivePlayers$la._activePlayersNumMoves;\n      _prevActivePlayers = _prevActivePlayers.slice(0, lastIndex);\n    } else {\n      activePlayers = null;\n      _activePlayersMinMoves = null;\n      _activePlayersMaxMoves = null;\n    }\n  }\n\n  return _objectSpread(_objectSpread({}, ctx), {}, {\n    activePlayers: activePlayers,\n    _activePlayersMinMoves: _activePlayersMinMoves,\n    _activePlayersMaxMoves: _activePlayersMaxMoves,\n    _activePlayersNumMoves: _activePlayersNumMoves,\n    _prevActivePlayers: _prevActivePlayers\n  });\n}\n/**\r\n * Apply an active player argument to the given player ID\r\n * @param {Object} activePlayers\r\n * @param {Object} _activePlayersMinMoves\r\n * @param {Object} _activePlayersMaxMoves\r\n * @param {String} playerID The player to apply the parameter to\r\n * @param {(String|Object)} arg An active player argument\r\n */\n\n\nfunction ApplyActivePlayerArgument(activePlayers, _activePlayersMinMoves, _activePlayersMaxMoves, playerID, arg) {\n  if (typeof arg !== 'object' || arg === Stage.NULL) {\n    arg = {\n      stage: arg\n    };\n  }\n\n  if (arg.stage !== undefined) {\n    // stages previously did not enforce minMoves, this behaviour is kept intentionally\n    supportDeprecatedMoveLimit(arg);\n    activePlayers[playerID] = arg.stage;\n    if (arg.minMoves) _activePlayersMinMoves[playerID] = arg.minMoves;\n    if (arg.maxMoves) _activePlayersMaxMoves[playerID] = arg.maxMoves;\n  }\n}\n/**\r\n * Converts a playOrderPos index into its value in playOrder.\r\n * @param {Array} playOrder - An array of player ID's.\r\n * @param {number} playOrderPos - An index into the above.\r\n */\n\n\nfunction getCurrentPlayer(playOrder, playOrderPos) {\n  // convert to string in case playOrder is set to number[]\n  return playOrder[playOrderPos] + '';\n}\n/**\r\n * Called at the start of a turn to initialize turn order state.\r\n *\r\n * TODO: This is called inside StartTurn, which is called from\r\n * both UpdateTurn and StartPhase (so it's called at the beginning\r\n * of a new phase as well as between turns). We should probably\r\n * split it into two.\r\n */\n\n\nfunction InitTurnOrderState(state, turn) {\n  var G = state.G,\n      ctx = state.ctx;\n  var _ctx3 = ctx,\n      numPlayers = _ctx3.numPlayers;\n  var ctxWithAPI = EnhanceCtx(state);\n  var order = turn.order;\n\n  var playOrder = _toConsumableArray(Array.from({\n    length: numPlayers\n  })).map(function (_, i) {\n    return i + '';\n  });\n\n  if (order.playOrder !== undefined) {\n    playOrder = order.playOrder(G, ctxWithAPI);\n  }\n\n  var playOrderPos = order.first(G, ctxWithAPI);\n  var posType = typeof playOrderPos;\n\n  if (posType !== 'number') {\n    error(\"invalid value returned by turn.order.first \\u2014 expected number got \".concat(posType, \" \\u201C\").concat(playOrderPos, \"\\u201D.\"));\n  }\n\n  var currentPlayer = getCurrentPlayer(playOrder, playOrderPos);\n  ctx = _objectSpread(_objectSpread({}, ctx), {}, {\n    currentPlayer: currentPlayer,\n    playOrderPos: playOrderPos,\n    playOrder: playOrder\n  });\n  ctx = SetActivePlayers(ctx, turn.activePlayers || {});\n  return ctx;\n}\n/**\r\n * Called at the end of each turn to update the turn order state.\r\n * @param {object} G - The game object G.\r\n * @param {object} ctx - The game object ctx.\r\n * @param {object} turn - A turn object for this phase.\r\n * @param {string} endTurnArg - An optional argument to endTurn that\r\n                                may specify the next player.\r\n */\n\n\nfunction UpdateTurnOrderState(state, currentPlayer, turn, endTurnArg) {\n  var order = turn.order;\n  var G = state.G,\n      ctx = state.ctx;\n  var playOrderPos = ctx.playOrderPos;\n  var endPhase = false;\n\n  if (endTurnArg && endTurnArg !== true) {\n    if (typeof endTurnArg !== 'object') {\n      error(\"invalid argument to endTurn: \".concat(endTurnArg));\n    }\n\n    Object.keys(endTurnArg).forEach(function (arg) {\n      switch (arg) {\n        case 'remove':\n          currentPlayer = getCurrentPlayer(ctx.playOrder, playOrderPos);\n          break;\n\n        case 'next':\n          playOrderPos = ctx.playOrder.indexOf(endTurnArg.next);\n          currentPlayer = endTurnArg.next;\n          break;\n\n        default:\n          error(\"invalid argument to endTurn: \".concat(arg));\n      }\n    });\n  } else {\n    var ctxWithAPI = EnhanceCtx(state);\n    var t = order.next(G, ctxWithAPI);\n    var type = typeof t;\n\n    if (t !== undefined && type !== 'number') {\n      error(\"invalid value returned by turn.order.next \\u2014 expected number or undefined got \".concat(type, \" \\u201C\").concat(t, \"\\u201D.\"));\n    }\n\n    if (t === undefined) {\n      endPhase = true;\n    } else {\n      playOrderPos = t;\n      currentPlayer = getCurrentPlayer(ctx.playOrder, playOrderPos);\n    }\n  }\n\n  ctx = _objectSpread(_objectSpread({}, ctx), {}, {\n    playOrderPos: playOrderPos,\n    currentPlayer: currentPlayer\n  });\n  return {\n    endPhase: endPhase,\n    ctx: ctx\n  };\n}\n/**\r\n * Set of different turn orders possible in a phase.\r\n * These are meant to be passed to the `turn` setting\r\n * in the flow objects.\r\n *\r\n * Each object defines the first player when the phase / game\r\n * begins, and also a function `next` to determine who the\r\n * next player is when the turn ends.\r\n *\r\n * The phase ends if next() returns undefined.\r\n */\n\n\nvar TurnOrder = {\n  /**\r\n   * DEFAULT\r\n   *\r\n   * The default round-robin turn order.\r\n   */\n  DEFAULT: {\n    first: function first(G, ctx) {\n      return ctx.turn === 0 ? ctx.playOrderPos : (ctx.playOrderPos + 1) % ctx.playOrder.length;\n    },\n    next: function next(G, ctx) {\n      return (ctx.playOrderPos + 1) % ctx.playOrder.length;\n    }\n  },\n\n  /**\r\n   * RESET\r\n   *\r\n   * Similar to DEFAULT, but starts from 0 each time.\r\n   */\n  RESET: {\n    first: function first() {\n      return 0;\n    },\n    next: function next(G, ctx) {\n      return (ctx.playOrderPos + 1) % ctx.playOrder.length;\n    }\n  },\n\n  /**\r\n   * CONTINUE\r\n   *\r\n   * Similar to DEFAULT, but starts with the player who ended the last phase.\r\n   */\n  CONTINUE: {\n    first: function first(G, ctx) {\n      return ctx.playOrderPos;\n    },\n    next: function next(G, ctx) {\n      return (ctx.playOrderPos + 1) % ctx.playOrder.length;\n    }\n  },\n\n  /**\r\n   * ONCE\r\n   *\r\n   * Another round-robin turn order, but goes around just once.\r\n   * The phase ends after all players have played.\r\n   */\n  ONCE: {\n    first: function first() {\n      return 0;\n    },\n    next: function next(G, ctx) {\n      if (ctx.playOrderPos < ctx.playOrder.length - 1) {\n        return ctx.playOrderPos + 1;\n      }\n    }\n  },\n\n  /**\r\n   * CUSTOM\r\n   *\r\n   * Identical to DEFAULT, but also sets playOrder at the\r\n   * beginning of the phase.\r\n   *\r\n   * @param {Array} playOrder - The play order.\r\n   */\n  CUSTOM: function CUSTOM(_playOrder) {\n    return {\n      playOrder: function playOrder() {\n        return _playOrder;\n      },\n      first: function first() {\n        return 0;\n      },\n      next: function next(G, ctx) {\n        return (ctx.playOrderPos + 1) % ctx.playOrder.length;\n      }\n    };\n  },\n\n  /**\r\n   * CUSTOM_FROM\r\n   *\r\n   * Identical to DEFAULT, but also sets playOrder at the\r\n   * beginning of the phase to a value specified by a field\r\n   * in G.\r\n   *\r\n   * @param {string} playOrderField - Field in G.\r\n   */\n  CUSTOM_FROM: function CUSTOM_FROM(playOrderField) {\n    return {\n      playOrder: function playOrder(G) {\n        return G[playOrderField];\n      },\n      first: function first() {\n        return 0;\n      },\n      next: function next(G, ctx) {\n        return (ctx.playOrderPos + 1) % ctx.playOrder.length;\n      }\n    };\n  }\n};\nvar Stage = {\n  NULL: null\n};\nvar ActivePlayers = {\n  /**\r\n   * ALL\r\n   *\r\n   * The turn stays with one player, but any player can play (in any order)\r\n   * until the phase ends.\r\n   */\n  ALL: {\n    all: Stage.NULL\n  },\n\n  /**\r\n   * ALL_ONCE\r\n   *\r\n   * The turn stays with one player, but any player can play (once, and in any order).\r\n   * This is typically used in a phase where you want to elicit a response\r\n   * from every player in the game.\r\n   */\n  ALL_ONCE: {\n    all: Stage.NULL,\n    minMoves: 1,\n    maxMoves: 1\n  },\n\n  /**\r\n   * OTHERS\r\n   *\r\n   * The turn stays with one player, and every *other* player can play (in any order)\r\n   * until the phase ends.\r\n   */\n  OTHERS: {\n    others: Stage.NULL\n  },\n\n  /**\r\n   * OTHERS_ONCE\r\n   *\r\n   * The turn stays with one player, and every *other* player can play (once, and in any order).\r\n   * This is typically used in a phase where you want to elicit a response\r\n   * from every *other* player in the game.\r\n   */\n  OTHERS_ONCE: {\n    others: Stage.NULL,\n    minMoves: 1,\n    maxMoves: 1\n  }\n};\nexport { ActionCreators as A, makeMove as B, alea as C, ActivePlayers as D, EnhanceCtx as E, FnWrap as F, GameMethod as G, InitTurnOrderState as I, MAKE_MOVE as M, NoClient as N, PATCH as P, REDO as R, Stage as S, TurnOrder as T, UpdateTurnOrderState as U, supportDeprecatedMoveLimit as a, SetActivePlayers as b, UpdateActivePlayersOnceEmpty as c, PLUGIN as d, error as e, ProcessAction as f, gameEvent as g, UNDO as h, info as i, SYNC as j, UPDATE as k, RESET as l, Enhance as m, INVALID_MOVE as n, GAME_EVENT as o, STRIP_TRANSIENTS as p, FlushAndValidate as q, stripTransients as r, sync as s, Setup as t, reset as u, undo as v, redo as w, PlayerView as x, patch as y, update as z };","import _slicedToArray from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _toConsumableArray from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectWithoutProperties from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _defineProperty from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _excluded = [\"fn\", \"arg\"],\n    _excluded2 = [\"transients\"];\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { e as error, G as GameMethod, E as EnhanceCtx, T as TurnOrder, a as supportDeprecatedMoveLimit, S as Stage, b as SetActivePlayers, i as info, F as FnWrap, I as InitTurnOrderState, U as UpdateTurnOrderState, c as UpdateActivePlayersOnceEmpty, g as gameEvent, P as PATCH, d as PLUGIN, f as ProcessAction, R as REDO, h as UNDO, j as SYNC, k as UPDATE, l as RESET, M as MAKE_MOVE, m as Enhance, n as INVALID_MOVE, N as NoClient, o as GAME_EVENT, p as STRIP_TRANSIENTS, q as FlushAndValidate, r as stripTransients } from './turn-order-406c4349.js';\nimport { applyPatch } from 'rfc6902';\n/*\r\n * Copyright 2017 The boardgame.io Authors\r\n *\r\n * Use of this source code is governed by a MIT-style\r\n * license that can be found in the LICENSE file or at\r\n * https://opensource.org/licenses/MIT.\r\n */\n\n/**\r\n * Flow\r\n *\r\n * Creates a reducer that updates ctx (analogous to how moves update G).\r\n */\n\nfunction Flow(_ref) {\n  var moves = _ref.moves,\n      phases = _ref.phases,\n      endIf = _ref.endIf,\n      onEnd = _ref.onEnd,\n      turn = _ref.turn,\n      events = _ref.events,\n      plugins = _ref.plugins;\n\n  // Attach defaults.\n  if (moves === undefined) {\n    moves = {};\n  }\n\n  if (events === undefined) {\n    events = {};\n  }\n\n  if (plugins === undefined) {\n    plugins = [];\n  }\n\n  if (phases === undefined) {\n    phases = {};\n  }\n\n  if (!endIf) endIf = function endIf() {\n    return undefined;\n  };\n  if (!onEnd) onEnd = function onEnd(G) {\n    return G;\n  };\n  if (!turn) turn = {};\n\n  var phaseMap = _objectSpread({}, phases);\n\n  if ('' in phaseMap) {\n    error('cannot specify phase with empty name');\n  }\n\n  phaseMap[''] = {};\n  var moveMap = {};\n  var moveNames = new Set();\n  var startingPhase = null;\n  Object.keys(moves).forEach(function (name) {\n    return moveNames.add(name);\n  });\n\n  var HookWrapper = function HookWrapper(hook, hookType) {\n    var withPlugins = FnWrap(hook, hookType, plugins);\n    return function (state) {\n      var ctxWithAPI = EnhanceCtx(state);\n      return withPlugins(state.G, ctxWithAPI);\n    };\n  };\n\n  var TriggerWrapper = function TriggerWrapper(trigger) {\n    return function (state) {\n      var ctxWithAPI = EnhanceCtx(state);\n      return trigger(state.G, ctxWithAPI);\n    };\n  };\n\n  var wrapped = {\n    onEnd: HookWrapper(onEnd, GameMethod.GAME_ON_END),\n    endIf: TriggerWrapper(endIf)\n  };\n\n  for (var phase in phaseMap) {\n    var phaseConfig = phaseMap[phase];\n\n    if (phaseConfig.start === true) {\n      startingPhase = phase;\n    }\n\n    if (phaseConfig.moves !== undefined) {\n      for (var _i = 0, _Object$keys = Object.keys(phaseConfig.moves); _i < _Object$keys.length; _i++) {\n        var move = _Object$keys[_i];\n        moveMap[phase + '.' + move] = phaseConfig.moves[move];\n        moveNames.add(move);\n      }\n    }\n\n    if (phaseConfig.endIf === undefined) {\n      phaseConfig.endIf = function () {\n        return undefined;\n      };\n    }\n\n    if (phaseConfig.onBegin === undefined) {\n      phaseConfig.onBegin = function (G) {\n        return G;\n      };\n    }\n\n    if (phaseConfig.onEnd === undefined) {\n      phaseConfig.onEnd = function (G) {\n        return G;\n      };\n    }\n\n    if (phaseConfig.turn === undefined) {\n      phaseConfig.turn = turn;\n    }\n\n    if (phaseConfig.turn.order === undefined) {\n      phaseConfig.turn.order = TurnOrder.DEFAULT;\n    }\n\n    if (phaseConfig.turn.onBegin === undefined) {\n      phaseConfig.turn.onBegin = function (G) {\n        return G;\n      };\n    }\n\n    if (phaseConfig.turn.onEnd === undefined) {\n      phaseConfig.turn.onEnd = function (G) {\n        return G;\n      };\n    }\n\n    if (phaseConfig.turn.endIf === undefined) {\n      phaseConfig.turn.endIf = function () {\n        return false;\n      };\n    }\n\n    if (phaseConfig.turn.onMove === undefined) {\n      phaseConfig.turn.onMove = function (G) {\n        return G;\n      };\n    }\n\n    if (phaseConfig.turn.stages === undefined) {\n      phaseConfig.turn.stages = {};\n    } // turns previously treated moveLimit as both minMoves and maxMoves, this behaviour is kept intentionally\n\n\n    supportDeprecatedMoveLimit(phaseConfig.turn, true);\n\n    for (var stage in phaseConfig.turn.stages) {\n      var stageConfig = phaseConfig.turn.stages[stage];\n\n      var _moves = stageConfig.moves || {};\n\n      for (var _i2 = 0, _Object$keys2 = Object.keys(_moves); _i2 < _Object$keys2.length; _i2++) {\n        var _move = _Object$keys2[_i2];\n        var key = phase + '.' + stage + '.' + _move;\n        moveMap[key] = _moves[_move];\n        moveNames.add(_move);\n      }\n    }\n\n    phaseConfig.wrapped = {\n      onBegin: HookWrapper(phaseConfig.onBegin, GameMethod.PHASE_ON_BEGIN),\n      onEnd: HookWrapper(phaseConfig.onEnd, GameMethod.PHASE_ON_END),\n      endIf: TriggerWrapper(phaseConfig.endIf)\n    };\n    phaseConfig.turn.wrapped = {\n      onMove: HookWrapper(phaseConfig.turn.onMove, GameMethod.TURN_ON_MOVE),\n      onBegin: HookWrapper(phaseConfig.turn.onBegin, GameMethod.TURN_ON_BEGIN),\n      onEnd: HookWrapper(phaseConfig.turn.onEnd, GameMethod.TURN_ON_END),\n      endIf: TriggerWrapper(phaseConfig.turn.endIf)\n    };\n\n    if (typeof phaseConfig.next !== 'function') {\n      (function () {\n        var next = phaseConfig.next;\n\n        phaseConfig.next = function () {\n          return next || null;\n        };\n      })();\n    }\n\n    phaseConfig.wrapped.next = TriggerWrapper(phaseConfig.next);\n  }\n\n  function GetPhase(ctx) {\n    return ctx.phase ? phaseMap[ctx.phase] : phaseMap[''];\n  }\n\n  function OnMove(s) {\n    return s;\n  }\n\n  function Process(state, events) {\n    var phasesEnded = new Set();\n    var turnsEnded = new Set();\n\n    for (var i = 0; i < events.length; i++) {\n      var _events$i = events[i],\n          fn = _events$i.fn,\n          arg = _events$i.arg,\n          rest = _objectWithoutProperties(_events$i, _excluded); // Detect a loop of EndPhase calls.\n      // This could potentially even be an infinite loop\n      // if the endIf condition of each phase blindly\n      // returns true. The moment we detect a single\n      // loop, we just bail out of all phases.\n\n\n      if (fn === EndPhase) {\n        turnsEnded.clear();\n        var _phase = state.ctx.phase;\n\n        if (phasesEnded.has(_phase)) {\n          var ctx = _objectSpread(_objectSpread({}, state.ctx), {}, {\n            phase: null\n          });\n\n          return _objectSpread(_objectSpread({}, state), {}, {\n            ctx: ctx\n          });\n        }\n\n        phasesEnded.add(_phase);\n      } // Process event.\n\n\n      var next = [];\n      state = fn(state, _objectSpread(_objectSpread({}, rest), {}, {\n        arg: arg,\n        next: next\n      }));\n\n      if (fn === EndGame) {\n        break;\n      } // Check if we should end the game.\n\n\n      var shouldEndGame = ShouldEndGame(state);\n\n      if (shouldEndGame) {\n        events.push({\n          fn: EndGame,\n          arg: shouldEndGame,\n          turn: state.ctx.turn,\n          phase: state.ctx.phase,\n          automatic: true\n        });\n        continue;\n      } // Check if we should end the phase.\n\n\n      var shouldEndPhase = ShouldEndPhase(state);\n\n      if (shouldEndPhase) {\n        events.push({\n          fn: EndPhase,\n          arg: shouldEndPhase,\n          turn: state.ctx.turn,\n          phase: state.ctx.phase,\n          automatic: true\n        });\n        continue;\n      } // Check if we should end the turn.\n\n\n      if ([OnMove, UpdateStage, UpdateActivePlayers].includes(fn)) {\n        var shouldEndTurn = ShouldEndTurn(state);\n\n        if (shouldEndTurn) {\n          events.push({\n            fn: EndTurn,\n            arg: shouldEndTurn,\n            turn: state.ctx.turn,\n            phase: state.ctx.phase,\n            automatic: true\n          });\n          continue;\n        }\n      }\n\n      events.push.apply(events, next);\n    }\n\n    return state;\n  } ///////////\n  // Start //\n  ///////////\n\n\n  function StartGame(state, _ref2) {\n    var next = _ref2.next;\n    next.push({\n      fn: StartPhase\n    });\n    return state;\n  }\n\n  function StartPhase(state, _ref3) {\n    var next = _ref3.next;\n    var G = state.G,\n        ctx = state.ctx;\n    var phaseConfig = GetPhase(ctx); // Run any phase setup code provided by the user.\n\n    G = phaseConfig.wrapped.onBegin(state);\n    next.push({\n      fn: StartTurn\n    });\n    return _objectSpread(_objectSpread({}, state), {}, {\n      G: G,\n      ctx: ctx\n    });\n  }\n\n  function StartTurn(state, _ref4) {\n    var currentPlayer = _ref4.currentPlayer;\n    var ctx = state.ctx;\n    var phaseConfig = GetPhase(ctx); // Initialize the turn order state.\n\n    if (currentPlayer) {\n      ctx = _objectSpread(_objectSpread({}, ctx), {}, {\n        currentPlayer: currentPlayer\n      });\n\n      if (phaseConfig.turn.activePlayers) {\n        ctx = SetActivePlayers(ctx, phaseConfig.turn.activePlayers);\n      }\n    } else {\n      // This is only called at the beginning of the phase\n      // when there is no currentPlayer yet.\n      ctx = InitTurnOrderState(state, phaseConfig.turn);\n    }\n\n    var turn = ctx.turn + 1;\n    ctx = _objectSpread(_objectSpread({}, ctx), {}, {\n      turn: turn,\n      numMoves: 0,\n      _prevActivePlayers: []\n    });\n    var G = phaseConfig.turn.wrapped.onBegin(_objectSpread(_objectSpread({}, state), {}, {\n      ctx: ctx\n    }));\n    return _objectSpread(_objectSpread({}, state), {}, {\n      G: G,\n      ctx: ctx,\n      _undo: [],\n      _redo: []\n    });\n  } ////////////\n  // Update //\n  ////////////\n\n\n  function UpdatePhase(state, _ref5) {\n    var arg = _ref5.arg,\n        next = _ref5.next,\n        phase = _ref5.phase;\n    var phaseConfig = GetPhase({\n      phase: phase\n    });\n    var _state = state,\n        ctx = _state.ctx;\n\n    if (arg && arg.next) {\n      if (arg.next in phaseMap) {\n        ctx = _objectSpread(_objectSpread({}, ctx), {}, {\n          phase: arg.next\n        });\n      } else {\n        error('invalid phase: ' + arg.next);\n        return state;\n      }\n    } else {\n      ctx = _objectSpread(_objectSpread({}, ctx), {}, {\n        phase: phaseConfig.wrapped.next(state) || null\n      });\n    }\n\n    state = _objectSpread(_objectSpread({}, state), {}, {\n      ctx: ctx\n    }); // Start the new phase.\n\n    next.push({\n      fn: StartPhase\n    });\n    return state;\n  }\n\n  function UpdateTurn(state, _ref6) {\n    var arg = _ref6.arg,\n        currentPlayer = _ref6.currentPlayer,\n        next = _ref6.next;\n    var _state2 = state,\n        G = _state2.G,\n        ctx = _state2.ctx;\n    var phaseConfig = GetPhase(ctx); // Update turn order state.\n\n    var _UpdateTurnOrderState = UpdateTurnOrderState(state, currentPlayer, phaseConfig.turn, arg),\n        endPhase = _UpdateTurnOrderState.endPhase,\n        newCtx = _UpdateTurnOrderState.ctx;\n\n    ctx = newCtx;\n    state = _objectSpread(_objectSpread({}, state), {}, {\n      G: G,\n      ctx: ctx\n    });\n\n    if (endPhase) {\n      next.push({\n        fn: EndPhase,\n        turn: ctx.turn,\n        phase: ctx.phase\n      });\n    } else {\n      next.push({\n        fn: StartTurn,\n        currentPlayer: ctx.currentPlayer\n      });\n    }\n\n    return state;\n  }\n\n  function UpdateStage(state, _ref7) {\n    var arg = _ref7.arg,\n        playerID = _ref7.playerID;\n\n    if (typeof arg === 'string' || arg === Stage.NULL) {\n      arg = {\n        stage: arg\n      };\n    }\n\n    if (typeof arg !== 'object') return state; // `arg` should be of type `StageArg`, loose typing as `any` here for historic reasons\n    // stages previously did not enforce minMoves, this behaviour is kept intentionally\n\n    supportDeprecatedMoveLimit(arg);\n    var ctx = state.ctx;\n    var _ctx = ctx,\n        activePlayers = _ctx.activePlayers,\n        _activePlayersMinMoves = _ctx._activePlayersMinMoves,\n        _activePlayersMaxMoves = _ctx._activePlayersMaxMoves,\n        _activePlayersNumMoves = _ctx._activePlayersNumMoves; // Checking if stage is valid, even Stage.NULL\n\n    if (arg.stage !== undefined) {\n      if (activePlayers === null) {\n        activePlayers = {};\n      }\n\n      activePlayers[playerID] = arg.stage;\n      _activePlayersNumMoves[playerID] = 0;\n\n      if (arg.minMoves) {\n        if (_activePlayersMinMoves === null) {\n          _activePlayersMinMoves = {};\n        }\n\n        _activePlayersMinMoves[playerID] = arg.minMoves;\n      }\n\n      if (arg.maxMoves) {\n        if (_activePlayersMaxMoves === null) {\n          _activePlayersMaxMoves = {};\n        }\n\n        _activePlayersMaxMoves[playerID] = arg.maxMoves;\n      }\n    }\n\n    ctx = _objectSpread(_objectSpread({}, ctx), {}, {\n      activePlayers: activePlayers,\n      _activePlayersMinMoves: _activePlayersMinMoves,\n      _activePlayersMaxMoves: _activePlayersMaxMoves,\n      _activePlayersNumMoves: _activePlayersNumMoves\n    });\n    return _objectSpread(_objectSpread({}, state), {}, {\n      ctx: ctx\n    });\n  }\n\n  function UpdateActivePlayers(state, _ref8) {\n    var arg = _ref8.arg;\n    return _objectSpread(_objectSpread({}, state), {}, {\n      ctx: SetActivePlayers(state.ctx, arg)\n    });\n  } ///////////////\n  // ShouldEnd //\n  ///////////////\n\n\n  function ShouldEndGame(state) {\n    return wrapped.endIf(state);\n  }\n\n  function ShouldEndPhase(state) {\n    var phaseConfig = GetPhase(state.ctx);\n    return phaseConfig.wrapped.endIf(state);\n  }\n\n  function ShouldEndTurn(state) {\n    var phaseConfig = GetPhase(state.ctx); // End the turn if the required number of moves has been made.\n\n    var currentPlayerMoves = state.ctx.numMoves || 0;\n\n    if (phaseConfig.turn.maxMoves && currentPlayerMoves >= phaseConfig.turn.maxMoves) {\n      return true;\n    }\n\n    return phaseConfig.turn.wrapped.endIf(state);\n  } /////////\n  // End //\n  /////////\n\n\n  function EndGame(state, _ref9) {\n    var arg = _ref9.arg,\n        phase = _ref9.phase;\n    state = EndPhase(state, {\n      phase: phase\n    });\n\n    if (arg === undefined) {\n      arg = true;\n    }\n\n    state = _objectSpread(_objectSpread({}, state), {}, {\n      ctx: _objectSpread(_objectSpread({}, state.ctx), {}, {\n        gameover: arg\n      })\n    }); // Run game end hook.\n\n    var G = wrapped.onEnd(state);\n    return _objectSpread(_objectSpread({}, state), {}, {\n      G: G\n    });\n  }\n\n  function EndPhase(state, _ref10) {\n    var arg = _ref10.arg,\n        next = _ref10.next,\n        initialTurn = _ref10.turn,\n        automatic = _ref10.automatic;\n    // End the turn first.\n    state = EndTurn(state, {\n      turn: initialTurn,\n      force: true,\n      automatic: true\n    });\n    var _state$ctx = state.ctx,\n        phase = _state$ctx.phase,\n        turn = _state$ctx.turn;\n\n    if (next) {\n      next.push({\n        fn: UpdatePhase,\n        arg: arg,\n        phase: phase\n      });\n    } // If we aren't in a phase, there is nothing else to do.\n\n\n    if (phase === null) {\n      return state;\n    } // Run any cleanup code for the phase that is about to end.\n\n\n    var phaseConfig = GetPhase(state.ctx);\n    var G = phaseConfig.wrapped.onEnd(state); // Reset the phase.\n\n    var ctx = _objectSpread(_objectSpread({}, state.ctx), {}, {\n      phase: null\n    }); // Add log entry.\n\n\n    var action = gameEvent('endPhase', arg);\n    var _state3 = state,\n        _stateID = _state3._stateID;\n    var logEntry = {\n      action: action,\n      _stateID: _stateID,\n      turn: turn,\n      phase: phase\n    };\n    if (automatic) logEntry.automatic = true;\n    var deltalog = [].concat(_toConsumableArray(state.deltalog || []), [logEntry]);\n    return _objectSpread(_objectSpread({}, state), {}, {\n      G: G,\n      ctx: ctx,\n      deltalog: deltalog\n    });\n  }\n\n  function EndTurn(state, _ref11) {\n    var arg = _ref11.arg,\n        next = _ref11.next,\n        initialTurn = _ref11.turn,\n        force = _ref11.force,\n        automatic = _ref11.automatic,\n        playerID = _ref11.playerID;\n\n    // This is not the turn that EndTurn was originally\n    // called for. The turn was probably ended some other way.\n    if (initialTurn !== state.ctx.turn) {\n      return state;\n    }\n\n    var _state$ctx2 = state.ctx,\n        currentPlayer = _state$ctx2.currentPlayer,\n        numMoves = _state$ctx2.numMoves,\n        phase = _state$ctx2.phase,\n        turn = _state$ctx2.turn;\n    var phaseConfig = GetPhase(state.ctx); // Prevent ending the turn if minMoves haven't been reached.\n\n    var currentPlayerMoves = numMoves || 0;\n\n    if (!force && phaseConfig.turn.minMoves && currentPlayerMoves < phaseConfig.turn.minMoves) {\n      info(\"cannot end turn before making \".concat(phaseConfig.turn.minMoves, \" moves\"));\n      return state;\n    } // Run turn-end triggers.\n\n\n    var G = phaseConfig.turn.wrapped.onEnd(state);\n\n    if (next) {\n      next.push({\n        fn: UpdateTurn,\n        arg: arg,\n        currentPlayer: currentPlayer\n      });\n    } // Reset activePlayers.\n\n\n    var ctx = _objectSpread(_objectSpread({}, state.ctx), {}, {\n      activePlayers: null\n    }); // Remove player from playerOrder\n\n\n    if (arg && arg.remove) {\n      playerID = playerID || currentPlayer;\n      var playOrder = ctx.playOrder.filter(function (i) {\n        return i != playerID;\n      });\n      var playOrderPos = ctx.playOrderPos > playOrder.length - 1 ? 0 : ctx.playOrderPos;\n      ctx = _objectSpread(_objectSpread({}, ctx), {}, {\n        playOrder: playOrder,\n        playOrderPos: playOrderPos\n      });\n\n      if (playOrder.length === 0) {\n        next.push({\n          fn: EndPhase,\n          turn: turn,\n          phase: phase\n        });\n        return state;\n      }\n    } // Create log entry.\n\n\n    var action = gameEvent('endTurn', arg);\n    var _stateID = state._stateID;\n    var logEntry = {\n      action: action,\n      _stateID: _stateID,\n      turn: turn,\n      phase: phase\n    };\n    if (automatic) logEntry.automatic = true;\n    var deltalog = [].concat(_toConsumableArray(state.deltalog || []), [logEntry]);\n    return _objectSpread(_objectSpread({}, state), {}, {\n      G: G,\n      ctx: ctx,\n      deltalog: deltalog,\n      _undo: [],\n      _redo: []\n    });\n  }\n\n  function EndStage(state, _ref12) {\n    var arg = _ref12.arg,\n        next = _ref12.next,\n        automatic = _ref12.automatic,\n        playerID = _ref12.playerID;\n    playerID = playerID || state.ctx.currentPlayer;\n    var ctx = state.ctx,\n        _stateID = state._stateID;\n    var _ctx2 = ctx,\n        activePlayers = _ctx2.activePlayers,\n        _activePlayersNumMoves = _ctx2._activePlayersNumMoves,\n        _activePlayersMinMoves = _ctx2._activePlayersMinMoves,\n        _activePlayersMaxMoves = _ctx2._activePlayersMaxMoves,\n        phase = _ctx2.phase,\n        turn = _ctx2.turn;\n    var playerInStage = activePlayers !== null && playerID in activePlayers;\n    var phaseConfig = GetPhase(ctx);\n\n    if (!arg && playerInStage) {\n      var _stage = phaseConfig.turn.stages[activePlayers[playerID]];\n\n      if (_stage && _stage.next) {\n        arg = _stage.next;\n      }\n    } // Checking if arg is a valid stage, even Stage.NULL\n\n\n    if (next) {\n      next.push({\n        fn: UpdateStage,\n        arg: arg,\n        playerID: playerID\n      });\n    } // If player isnt in a stage, there is nothing else to do.\n\n\n    if (!playerInStage) return state; // Prevent ending the stage if minMoves haven't been reached.\n\n    var currentPlayerMoves = _activePlayersNumMoves[playerID] || 0;\n\n    if (_activePlayersMinMoves && _activePlayersMinMoves[playerID] && currentPlayerMoves < _activePlayersMinMoves[playerID]) {\n      info(\"cannot end stage before making \".concat(_activePlayersMinMoves[playerID], \" moves\"));\n      return state;\n    } // Remove player from activePlayers.\n\n\n    activePlayers = _objectSpread({}, activePlayers);\n    delete activePlayers[playerID];\n\n    if (_activePlayersMinMoves) {\n      // Remove player from _activePlayersMinMoves.\n      _activePlayersMinMoves = _objectSpread({}, _activePlayersMinMoves);\n      delete _activePlayersMinMoves[playerID];\n    }\n\n    if (_activePlayersMaxMoves) {\n      // Remove player from _activePlayersMaxMoves.\n      _activePlayersMaxMoves = _objectSpread({}, _activePlayersMaxMoves);\n      delete _activePlayersMaxMoves[playerID];\n    }\n\n    ctx = UpdateActivePlayersOnceEmpty(_objectSpread(_objectSpread({}, ctx), {}, {\n      activePlayers: activePlayers,\n      _activePlayersMinMoves: _activePlayersMinMoves,\n      _activePlayersMaxMoves: _activePlayersMaxMoves\n    })); // Create log entry.\n\n    var action = gameEvent('endStage', arg);\n    var logEntry = {\n      action: action,\n      _stateID: _stateID,\n      turn: turn,\n      phase: phase\n    };\n    if (automatic) logEntry.automatic = true;\n    var deltalog = [].concat(_toConsumableArray(state.deltalog || []), [logEntry]);\n    return _objectSpread(_objectSpread({}, state), {}, {\n      ctx: ctx,\n      deltalog: deltalog\n    });\n  }\n  /**\r\n   * Retrieves the relevant move that can be played by playerID.\r\n   *\r\n   * If ctx.activePlayers is set (i.e. one or more players are in some stage),\r\n   * then it attempts to find the move inside the stages config for\r\n   * that turn. If the stage for a player is '', then the player is\r\n   * allowed to make a move (as determined by the phase config), but\r\n   * isn't restricted to a particular set as defined in the stage config.\r\n   *\r\n   * If not, it then looks for the move inside the phase.\r\n   *\r\n   * If it doesn't find the move there, it looks at the global move definition.\r\n   *\r\n   * @param {object} ctx\r\n   * @param {string} name\r\n   * @param {string} playerID\r\n   */\n\n\n  function GetMove(ctx, name, playerID) {\n    var phaseConfig = GetPhase(ctx);\n    var stages = phaseConfig.turn.stages;\n    var activePlayers = ctx.activePlayers;\n\n    if (activePlayers && activePlayers[playerID] !== undefined && activePlayers[playerID] !== Stage.NULL && stages[activePlayers[playerID]] !== undefined && stages[activePlayers[playerID]].moves !== undefined) {\n      // Check if moves are defined for the player's stage.\n      var _stage2 = stages[activePlayers[playerID]];\n      var _moves2 = _stage2.moves;\n\n      if (name in _moves2) {\n        return _moves2[name];\n      }\n    } else if (phaseConfig.moves) {\n      // Check if moves are defined for the current phase.\n      if (name in phaseConfig.moves) {\n        return phaseConfig.moves[name];\n      }\n    } else if (name in moves) {\n      // Check for the move globally.\n      return moves[name];\n    }\n\n    return null;\n  }\n\n  function ProcessMove(state, action) {\n    var playerID = action.playerID,\n        type = action.type;\n    var _state4 = state,\n        ctx = _state4.ctx;\n    var currentPlayer = ctx.currentPlayer,\n        activePlayers = ctx.activePlayers,\n        _activePlayersMaxMoves = ctx._activePlayersMaxMoves;\n    var move = GetMove(ctx, type, playerID);\n    var shouldCount = !move || typeof move === 'function' || move.noLimit !== true;\n    var numMoves = ctx.numMoves,\n        _activePlayersNumMoves = ctx._activePlayersNumMoves;\n\n    if (shouldCount) {\n      if (playerID === currentPlayer) numMoves++;\n      if (activePlayers) _activePlayersNumMoves[playerID]++;\n    }\n\n    state = _objectSpread(_objectSpread({}, state), {}, {\n      ctx: _objectSpread(_objectSpread({}, ctx), {}, {\n        numMoves: numMoves,\n        _activePlayersNumMoves: _activePlayersNumMoves\n      })\n    });\n\n    if (_activePlayersMaxMoves && _activePlayersNumMoves[playerID] >= _activePlayersMaxMoves[playerID]) {\n      state = EndStage(state, {\n        playerID: playerID,\n        automatic: true\n      });\n    }\n\n    var phaseConfig = GetPhase(ctx);\n    var G = phaseConfig.turn.wrapped.onMove(state);\n    state = _objectSpread(_objectSpread({}, state), {}, {\n      G: G\n    });\n    var events = [{\n      fn: OnMove\n    }];\n    return Process(state, events);\n  }\n\n  function SetStageEvent(state, playerID, arg) {\n    return Process(state, [{\n      fn: EndStage,\n      arg: arg,\n      playerID: playerID\n    }]);\n  }\n\n  function EndStageEvent(state, playerID) {\n    return Process(state, [{\n      fn: EndStage,\n      playerID: playerID\n    }]);\n  }\n\n  function SetActivePlayersEvent(state, _playerID, arg) {\n    return Process(state, [{\n      fn: UpdateActivePlayers,\n      arg: arg\n    }]);\n  }\n\n  function SetPhaseEvent(state, _playerID, newPhase) {\n    return Process(state, [{\n      fn: EndPhase,\n      phase: state.ctx.phase,\n      turn: state.ctx.turn,\n      arg: {\n        next: newPhase\n      }\n    }]);\n  }\n\n  function EndPhaseEvent(state) {\n    return Process(state, [{\n      fn: EndPhase,\n      phase: state.ctx.phase,\n      turn: state.ctx.turn\n    }]);\n  }\n\n  function EndTurnEvent(state, _playerID, arg) {\n    return Process(state, [{\n      fn: EndTurn,\n      turn: state.ctx.turn,\n      phase: state.ctx.phase,\n      arg: arg\n    }]);\n  }\n\n  function PassEvent(state, _playerID, arg) {\n    return Process(state, [{\n      fn: EndTurn,\n      turn: state.ctx.turn,\n      phase: state.ctx.phase,\n      force: true,\n      arg: arg\n    }]);\n  }\n\n  function EndGameEvent(state, _playerID, arg) {\n    return Process(state, [{\n      fn: EndGame,\n      turn: state.ctx.turn,\n      phase: state.ctx.phase,\n      arg: arg\n    }]);\n  }\n\n  var eventHandlers = {\n    endStage: EndStageEvent,\n    setStage: SetStageEvent,\n    endTurn: EndTurnEvent,\n    pass: PassEvent,\n    endPhase: EndPhaseEvent,\n    setPhase: SetPhaseEvent,\n    endGame: EndGameEvent,\n    setActivePlayers: SetActivePlayersEvent\n  };\n  var enabledEventNames = [];\n\n  if (events.endTurn !== false) {\n    enabledEventNames.push('endTurn');\n  }\n\n  if (events.pass !== false) {\n    enabledEventNames.push('pass');\n  }\n\n  if (events.endPhase !== false) {\n    enabledEventNames.push('endPhase');\n  }\n\n  if (events.setPhase !== false) {\n    enabledEventNames.push('setPhase');\n  }\n\n  if (events.endGame !== false) {\n    enabledEventNames.push('endGame');\n  }\n\n  if (events.setActivePlayers !== false) {\n    enabledEventNames.push('setActivePlayers');\n  }\n\n  if (events.endStage !== false) {\n    enabledEventNames.push('endStage');\n  }\n\n  if (events.setStage !== false) {\n    enabledEventNames.push('setStage');\n  }\n\n  function ProcessEvent(state, action) {\n    var _action$payload = action.payload,\n        type = _action$payload.type,\n        playerID = _action$payload.playerID,\n        args = _action$payload.args;\n    if (typeof eventHandlers[type] !== 'function') return state;\n    return eventHandlers[type].apply(eventHandlers, [state, playerID].concat(_toConsumableArray(Array.isArray(args) ? args : [args])));\n  }\n\n  function IsPlayerActive(_G, ctx, playerID) {\n    if (ctx.activePlayers) {\n      return playerID in ctx.activePlayers;\n    }\n\n    return ctx.currentPlayer === playerID;\n  }\n\n  return {\n    ctx: function ctx(numPlayers) {\n      return {\n        numPlayers: numPlayers,\n        turn: 0,\n        currentPlayer: '0',\n        playOrder: _toConsumableArray(Array.from({\n          length: numPlayers\n        })).map(function (_, i) {\n          return i + '';\n        }),\n        playOrderPos: 0,\n        phase: startingPhase,\n        activePlayers: null\n      };\n    },\n    init: function init(state) {\n      return Process(state, [{\n        fn: StartGame\n      }]);\n    },\n    isPlayerActive: IsPlayerActive,\n    eventHandlers: eventHandlers,\n    eventNames: Object.keys(eventHandlers),\n    enabledEventNames: enabledEventNames,\n    moveMap: moveMap,\n    moveNames: _toConsumableArray(moveNames.values()),\n    processMove: ProcessMove,\n    processEvent: ProcessEvent,\n    getMove: GetMove\n  };\n}\n/*\r\n * Copyright 2017 The boardgame.io Authors\r\n *\r\n * Use of this source code is governed by a MIT-style\r\n * license that can be found in the LICENSE file or at\r\n * https://opensource.org/licenses/MIT.\r\n */\n\n\nfunction IsProcessed(game) {\n  return game.processMove !== undefined;\n}\n/**\r\n * Helper to generate the game move reducer. The returned\r\n * reducer has the following signature:\r\n *\r\n * (G, action, ctx) => {}\r\n *\r\n * You can roll your own if you like, or use any Redux\r\n * addon to generate such a reducer.\r\n *\r\n * The convention used in this framework is to\r\n * have action.type contain the name of the move, and\r\n * action.args contain any additional arguments as an\r\n * Array.\r\n */\n\n\nfunction ProcessGameConfig(game) {\n  // The Game() function has already been called on this\n  // config object, so just pass it through.\n  if (IsProcessed(game)) {\n    return game;\n  }\n\n  if (game.name === undefined) game.name = 'default';\n  if (game.deltaState === undefined) game.deltaState = false;\n  if (game.disableUndo === undefined) game.disableUndo = false;\n  if (game.setup === undefined) game.setup = function () {\n    return {};\n  };\n  if (game.moves === undefined) game.moves = {};\n  if (game.playerView === undefined) game.playerView = function (G) {\n    return G;\n  };\n  if (game.plugins === undefined) game.plugins = [];\n  game.plugins.forEach(function (plugin) {\n    if (plugin.name === undefined) {\n      throw new Error('Plugin missing name attribute');\n    }\n\n    if (plugin.name.includes(' ')) {\n      throw new Error(plugin.name + ': Plugin name must not include spaces');\n    }\n  });\n\n  if (game.name.includes(' ')) {\n    throw new Error(game.name + ': Game name must not include spaces');\n  }\n\n  var flow = Flow(game);\n  return _objectSpread(_objectSpread({}, game), {}, {\n    flow: flow,\n    moveNames: flow.moveNames,\n    pluginNames: game.plugins.map(function (p) {\n      return p.name;\n    }),\n    processMove: function processMove(state, action) {\n      var moveFn = flow.getMove(state.ctx, action.type, action.playerID);\n\n      if (IsLongFormMove(moveFn)) {\n        moveFn = moveFn.move;\n      }\n\n      if (moveFn instanceof Function) {\n        var fn = FnWrap(moveFn, GameMethod.MOVE, game.plugins);\n\n        var ctxWithAPI = _objectSpread(_objectSpread({}, EnhanceCtx(state)), {}, {\n          playerID: action.playerID\n        });\n\n        var args = [];\n\n        if (action.args !== undefined) {\n          args = Array.isArray(action.args) ? action.args : [action.args];\n        }\n\n        return fn.apply(void 0, [state.G, ctxWithAPI].concat(_toConsumableArray(args)));\n      }\n\n      error(\"invalid move object: \".concat(action.type));\n      return state.G;\n    }\n  });\n}\n\nfunction IsLongFormMove(move) {\n  return move instanceof Object && move.move !== undefined;\n}\n/*\r\n * Copyright 2017 The boardgame.io Authors\r\n *\r\n * Use of this source code is governed by a MIT-style\r\n * license that can be found in the LICENSE file or at\r\n * https://opensource.org/licenses/MIT.\r\n */\n\n\nvar UpdateErrorType;\n\n(function (UpdateErrorType) {\n  // The actions credentials were missing or invalid\n  UpdateErrorType[\"UnauthorizedAction\"] = \"update/unauthorized_action\"; // The actions matchID was not found\n\n  UpdateErrorType[\"MatchNotFound\"] = \"update/match_not_found\"; // Could not apply Patch operation (rfc6902).\n\n  UpdateErrorType[\"PatchFailed\"] = \"update/patch_failed\";\n})(UpdateErrorType || (UpdateErrorType = {}));\n\nvar ActionErrorType;\n\n(function (ActionErrorType) {\n  // The action contained a stale state ID\n  ActionErrorType[\"StaleStateId\"] = \"action/stale_state_id\"; // The requested move is unknown or not currently available\n\n  ActionErrorType[\"UnavailableMove\"] = \"action/unavailable_move\"; // The move declared it was invalid (INVALID_MOVE constant)\n\n  ActionErrorType[\"InvalidMove\"] = \"action/invalid_move\"; // The player making the action is not currently active\n\n  ActionErrorType[\"InactivePlayer\"] = \"action/inactive_player\"; // The game has finished\n\n  ActionErrorType[\"GameOver\"] = \"action/gameover\"; // The requested action is disabled (e.g. undo/redo, events)\n\n  ActionErrorType[\"ActionDisabled\"] = \"action/action_disabled\"; // The requested action is not currently possible\n\n  ActionErrorType[\"ActionInvalid\"] = \"action/action_invalid\"; // The requested action was declared invalid by a plugin\n\n  ActionErrorType[\"PluginActionInvalid\"] = \"action/plugin_invalid\";\n})(ActionErrorType || (ActionErrorType = {}));\n/*\r\n * Copyright 2017 The boardgame.io Authors\r\n *\r\n * Use of this source code is governed by a MIT-style\r\n * license that can be found in the LICENSE file or at\r\n * https://opensource.org/licenses/MIT.\r\n */\n\n/**\r\n * Check if the payload for the passed action contains a playerID.\r\n */\n\n\nvar actionHasPlayerID = function actionHasPlayerID(action) {\n  return action.payload.playerID !== null && action.payload.playerID !== undefined;\n};\n/**\r\n * Returns true if a move can be undone.\r\n */\n\n\nvar CanUndoMove = function CanUndoMove(G, ctx, move) {\n  function HasUndoable(move) {\n    return move.undoable !== undefined;\n  }\n\n  function IsFunction(undoable) {\n    return undoable instanceof Function;\n  }\n\n  if (!HasUndoable(move)) {\n    return true;\n  }\n\n  if (IsFunction(move.undoable)) {\n    return move.undoable(G, ctx);\n  }\n\n  return move.undoable;\n};\n/**\r\n * Update the undo and redo stacks for a move or event.\r\n */\n\n\nfunction updateUndoRedoState(state, opts) {\n  if (opts.game.disableUndo) return state;\n  var undoEntry = {\n    G: state.G,\n    ctx: state.ctx,\n    plugins: state.plugins,\n    playerID: opts.action.payload.playerID || state.ctx.currentPlayer\n  };\n\n  if (opts.action.type === 'MAKE_MOVE') {\n    undoEntry.moveType = opts.action.payload.type;\n  }\n\n  return _objectSpread(_objectSpread({}, state), {}, {\n    _undo: [].concat(_toConsumableArray(state._undo), [undoEntry]),\n    // Always reset redo stack when making a move or event\n    _redo: []\n  });\n}\n/**\r\n * Process state, adding the initial deltalog for this action.\r\n */\n\n\nfunction initializeDeltalog(state, action, move) {\n  // Create a log entry for this action.\n  var logEntry = {\n    action: action,\n    _stateID: state._stateID,\n    turn: state.ctx.turn,\n    phase: state.ctx.phase\n  };\n  var pluginLogMetadata = state.plugins.log.data.metadata;\n\n  if (pluginLogMetadata !== undefined) {\n    logEntry.metadata = pluginLogMetadata;\n  }\n\n  if (typeof move === 'object' && move.redact === true) {\n    logEntry.redact = true;\n  }\n\n  return _objectSpread(_objectSpread({}, state), {}, {\n    deltalog: [logEntry]\n  });\n}\n/**\r\n * Update plugin state after move/event & check if plugins consider the action to be valid.\r\n * @param state Current version of state in the reducer.\r\n * @param oldState State to revert to in case of error.\r\n * @param pluginOpts Plugin configuration options.\r\n * @returns Tuple of the new state updated after flushing plugins and the old\r\n * state augmented with an error if a plugin declared the action invalid.\r\n */\n\n\nfunction flushAndValidatePlugins(state, oldState, pluginOpts) {\n  var _FlushAndValidate = FlushAndValidate(state, pluginOpts),\n      _FlushAndValidate2 = _slicedToArray(_FlushAndValidate, 2),\n      newState = _FlushAndValidate2[0],\n      isInvalid = _FlushAndValidate2[1];\n\n  if (!isInvalid) return [newState];\n  return [newState, WithError(oldState, ActionErrorType.PluginActionInvalid, isInvalid)];\n}\n/**\r\n * ExtractTransientsFromState\r\n *\r\n * Split out transients from the a TransientState\r\n */\n\n\nfunction ExtractTransients(transientState) {\n  if (!transientState) {\n    // We preserve null for the state for legacy callers, but the transient\n    // field should be undefined if not present to be consistent with the\n    // code path below.\n    return [null, undefined];\n  }\n\n  var transients = transientState.transients,\n      state = _objectWithoutProperties(transientState, _excluded2);\n\n  return [state, transients];\n}\n/**\r\n * WithError\r\n *\r\n * Augment a State instance with transient error information.\r\n */\n\n\nfunction WithError(state, errorType, payload) {\n  var error = {\n    type: errorType,\n    payload: payload\n  };\n  return _objectSpread(_objectSpread({}, state), {}, {\n    transients: {\n      error: error\n    }\n  });\n}\n/**\r\n * Middleware for processing TransientState associated with the reducer\r\n * returned by CreateGameReducer.\r\n * This should pretty much be used everywhere you want realistic state\r\n * transitions and error handling.\r\n */\n\n\nvar TransientHandlingMiddleware = function TransientHandlingMiddleware(store) {\n  return function (next) {\n    return function (action) {\n      var result = next(action);\n\n      switch (action.type) {\n        case STRIP_TRANSIENTS:\n          {\n            return result;\n          }\n\n        default:\n          {\n            var _ExtractTransients = ExtractTransients(store.getState()),\n                _ExtractTransients2 = _slicedToArray(_ExtractTransients, 2),\n                transients = _ExtractTransients2[1];\n\n            if (typeof transients !== 'undefined') {\n              store.dispatch(stripTransients()); // Dev Note: If parent middleware needs to correlate the spawned\n              // StripTransients action to the triggering action, instrument here.\n              //\n              // This is a bit tricky; for more details, see:\n              //   https://github.com/boardgameio/boardgame.io/pull/940#discussion_r636200648\n\n              return _objectSpread(_objectSpread({}, result), {}, {\n                transients: transients\n              });\n            }\n\n            return result;\n          }\n      }\n    };\n  };\n};\n/**\r\n * CreateGameReducer\r\n *\r\n * Creates the main game state reducer.\r\n */\n\n\nfunction CreateGameReducer(_ref13) {\n  var game = _ref13.game,\n      isClient = _ref13.isClient;\n  game = ProcessGameConfig(game);\n  /**\r\n   * GameReducer\r\n   *\r\n   * Redux reducer that maintains the overall game state.\r\n   * @param {object} state - The state before the action.\r\n   * @param {object} action - A Redux action.\r\n   */\n\n  return function () {\n    var stateWithTransients = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    var action = arguments.length > 1 ? arguments[1] : undefined;\n\n    var _ExtractTransients3 = ExtractTransients(stateWithTransients),\n        _ExtractTransients4 = _slicedToArray(_ExtractTransients3, 1),\n        state\n    /*, transients */\n    = _ExtractTransients4[0];\n\n    switch (action.type) {\n      case STRIP_TRANSIENTS:\n        {\n          // This action indicates that transient metadata in the state has been\n          // consumed and should now be stripped from the state..\n          return state;\n        }\n\n      case GAME_EVENT:\n        {\n          state = _objectSpread(_objectSpread({}, state), {}, {\n            deltalog: []\n          }); // Process game events only on the server.\n          // These events like `endTurn` typically\n          // contain code that may rely on secret state\n          // and cannot be computed on the client.\n\n          if (isClient) {\n            return state;\n          } // Disallow events once the game is over.\n\n\n          if (state.ctx.gameover !== undefined) {\n            error(\"cannot call event after game end\");\n            return WithError(state, ActionErrorType.GameOver);\n          } // Ignore the event if the player isn't active.\n\n\n          if (actionHasPlayerID(action) && !game.flow.isPlayerActive(state.G, state.ctx, action.payload.playerID)) {\n            error(\"disallowed event: \".concat(action.payload.type));\n            return WithError(state, ActionErrorType.InactivePlayer);\n          } // Execute plugins.\n\n\n          state = Enhance(state, {\n            game: game,\n            isClient: false,\n            playerID: action.payload.playerID\n          }); // Process event.\n\n          var newState = game.flow.processEvent(state, action); // Execute plugins.\n\n          var stateWithError;\n\n          var _flushAndValidatePlug = flushAndValidatePlugins(newState, state, {\n            game: game,\n            isClient: false\n          });\n\n          var _flushAndValidatePlug2 = _slicedToArray(_flushAndValidatePlug, 2);\n\n          newState = _flushAndValidatePlug2[0];\n          stateWithError = _flushAndValidatePlug2[1];\n          if (stateWithError) return stateWithError; // Update undo / redo state.\n\n          newState = updateUndoRedoState(newState, {\n            game: game,\n            action: action\n          });\n          return _objectSpread(_objectSpread({}, newState), {}, {\n            _stateID: state._stateID + 1\n          });\n        }\n\n      case MAKE_MOVE:\n        {\n          var oldState = state = _objectSpread(_objectSpread({}, state), {}, {\n            deltalog: []\n          }); // Check whether the move is allowed at this time.\n\n\n          var move = game.flow.getMove(state.ctx, action.payload.type, action.payload.playerID || state.ctx.currentPlayer);\n\n          if (move === null) {\n            error(\"disallowed move: \".concat(action.payload.type));\n            return WithError(state, ActionErrorType.UnavailableMove);\n          } // Don't run move on client if move says so.\n\n\n          if (isClient && move.client === false) {\n            return state;\n          } // Disallow moves once the game is over.\n\n\n          if (state.ctx.gameover !== undefined) {\n            error(\"cannot make move after game end\");\n            return WithError(state, ActionErrorType.GameOver);\n          } // Ignore the move if the player isn't active.\n\n\n          if (actionHasPlayerID(action) && !game.flow.isPlayerActive(state.G, state.ctx, action.payload.playerID)) {\n            error(\"disallowed move: \".concat(action.payload.type));\n            return WithError(state, ActionErrorType.InactivePlayer);\n          } // Execute plugins.\n\n\n          state = Enhance(state, {\n            game: game,\n            isClient: isClient,\n            playerID: action.payload.playerID\n          }); // Process the move.\n\n          var G = game.processMove(state, action.payload); // The game declared the move as invalid.\n\n          if (G === INVALID_MOVE) {\n            error(\"invalid move: \".concat(action.payload.type, \" args: \").concat(action.payload.args)); // TODO(#723): Marshal a nice error payload with the processed move.\n\n            return WithError(state, ActionErrorType.InvalidMove);\n          }\n\n          var _newState = _objectSpread(_objectSpread({}, state), {}, {\n            G: G\n          }); // Some plugin indicated that it is not suitable to be\n          // materialized on the client (and must wait for the server\n          // response instead).\n\n\n          if (isClient && NoClient(_newState, {\n            game: game\n          })) {\n            return state;\n          }\n\n          state = _newState; // If we're on the client, just process the move\n          // and no triggers in multiplayer mode.\n          // These will be processed on the server, which\n          // will send back a state update.\n\n          if (isClient) {\n            var _stateWithError2;\n\n            var _flushAndValidatePlug3 = flushAndValidatePlugins(state, oldState, {\n              game: game,\n              isClient: true\n            });\n\n            var _flushAndValidatePlug4 = _slicedToArray(_flushAndValidatePlug3, 2);\n\n            state = _flushAndValidatePlug4[0];\n            _stateWithError2 = _flushAndValidatePlug4[1];\n            if (_stateWithError2) return _stateWithError2;\n            return _objectSpread(_objectSpread({}, state), {}, {\n              _stateID: state._stateID + 1\n            });\n          } // On the server, construct the deltalog.\n\n\n          state = initializeDeltalog(state, action, move); // Allow the flow reducer to process any triggers that happen after moves.\n\n          state = game.flow.processMove(state, action.payload);\n\n          var _stateWithError;\n\n          var _flushAndValidatePlug5 = flushAndValidatePlugins(state, oldState, {\n            game: game\n          });\n\n          var _flushAndValidatePlug6 = _slicedToArray(_flushAndValidatePlug5, 2);\n\n          state = _flushAndValidatePlug6[0];\n          _stateWithError = _flushAndValidatePlug6[1];\n          if (_stateWithError) return _stateWithError; // Update undo / redo state.\n\n          state = updateUndoRedoState(state, {\n            game: game,\n            action: action\n          });\n          return _objectSpread(_objectSpread({}, state), {}, {\n            _stateID: state._stateID + 1\n          });\n        }\n\n      case RESET:\n      case UPDATE:\n      case SYNC:\n        {\n          return action.state;\n        }\n\n      case UNDO:\n        {\n          state = _objectSpread(_objectSpread({}, state), {}, {\n            deltalog: []\n          });\n\n          if (game.disableUndo) {\n            error('Undo is not enabled');\n            return WithError(state, ActionErrorType.ActionDisabled);\n          }\n\n          var _state5 = state,\n              _G2 = _state5.G,\n              ctx = _state5.ctx,\n              _undo = _state5._undo,\n              _redo = _state5._redo,\n              _stateID = _state5._stateID;\n\n          if (_undo.length < 2) {\n            error(\"No moves to undo\");\n            return WithError(state, ActionErrorType.ActionInvalid);\n          }\n\n          var last = _undo[_undo.length - 1];\n          var restore = _undo[_undo.length - 2]; // Only allow players to undo their own moves.\n\n          if (actionHasPlayerID(action) && action.payload.playerID !== last.playerID) {\n            error(\"Cannot undo other players' moves\");\n            return WithError(state, ActionErrorType.ActionInvalid);\n          } // If undoing a move, check it is undoable.\n\n\n          if (last.moveType) {\n            var lastMove = game.flow.getMove(restore.ctx, last.moveType, last.playerID);\n\n            if (!CanUndoMove(_G2, ctx, lastMove)) {\n              error(\"Move cannot be undone\");\n              return WithError(state, ActionErrorType.ActionInvalid);\n            }\n          }\n\n          state = initializeDeltalog(state, action);\n          return _objectSpread(_objectSpread({}, state), {}, {\n            G: restore.G,\n            ctx: restore.ctx,\n            plugins: restore.plugins,\n            _stateID: _stateID + 1,\n            _undo: _undo.slice(0, -1),\n            _redo: [last].concat(_toConsumableArray(_redo))\n          });\n        }\n\n      case REDO:\n        {\n          state = _objectSpread(_objectSpread({}, state), {}, {\n            deltalog: []\n          });\n\n          if (game.disableUndo) {\n            error('Redo is not enabled');\n            return WithError(state, ActionErrorType.ActionDisabled);\n          }\n\n          var _state6 = state,\n              _undo2 = _state6._undo,\n              _redo2 = _state6._redo,\n              _stateID2 = _state6._stateID;\n\n          if (_redo2.length === 0) {\n            error(\"No moves to redo\");\n            return WithError(state, ActionErrorType.ActionInvalid);\n          }\n\n          var first = _redo2[0]; // Only allow players to redo their own undos.\n\n          if (actionHasPlayerID(action) && action.payload.playerID !== first.playerID) {\n            error(\"Cannot redo other players' moves\");\n            return WithError(state, ActionErrorType.ActionInvalid);\n          }\n\n          state = initializeDeltalog(state, action);\n          return _objectSpread(_objectSpread({}, state), {}, {\n            G: first.G,\n            ctx: first.ctx,\n            plugins: first.plugins,\n            _stateID: _stateID2 + 1,\n            _undo: [].concat(_toConsumableArray(_undo2), [first]),\n            _redo: _redo2.slice(1)\n          });\n        }\n\n      case PLUGIN:\n        {\n          // TODO(#723): Expose error semantics to plugin processing.\n          return ProcessAction(state, action, {\n            game: game\n          });\n        }\n\n      case PATCH:\n        {\n          var _oldState = state;\n\n          var _newState2 = JSON.parse(JSON.stringify(_oldState));\n\n          var patchError = applyPatch(_newState2, action.patch);\n          var hasError = patchError.some(function (entry) {\n            return entry !== null;\n          });\n\n          if (hasError) {\n            error(\"Patch \".concat(JSON.stringify(action.patch), \" apply failed\"));\n            return WithError(_oldState, UpdateErrorType.PatchFailed, patchError);\n          } else {\n            return _newState2;\n          }\n        }\n\n      default:\n        {\n          return state;\n        }\n    }\n  };\n}\n\nexport { CreateGameReducer as C, IsLongFormMove as I, ProcessGameConfig as P, TransientHandlingMiddleware as T };","import _slicedToArray from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _defineProperty from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { t as Setup, m as Enhance, E as EnhanceCtx, q as FlushAndValidate } from './turn-order-406c4349.js';\nimport { P as ProcessGameConfig } from './reducer-efc3ec3e.js';\n/*\r\n * Copyright 2020 The boardgame.io Authors\r\n *\r\n * Use of this source code is governed by a MIT-style\r\n * license that can be found in the LICENSE file or at\r\n * https://opensource.org/licenses/MIT.\r\n */\n\n/**\r\n * Creates the initial game state.\r\n */\n\nfunction InitializeGame(_ref) {\n  var game = _ref.game,\n      numPlayers = _ref.numPlayers,\n      setupData = _ref.setupData;\n  game = ProcessGameConfig(game);\n\n  if (!numPlayers) {\n    numPlayers = 2;\n  }\n\n  var ctx = game.flow.ctx(numPlayers);\n  var state = {\n    // User managed state.\n    G: {},\n    // Framework managed state.\n    ctx: ctx,\n    // Plugin related state.\n    plugins: {}\n  }; // Run plugins over initial state.\n\n  state = Setup(state, {\n    game: game\n  });\n  state = Enhance(state, {\n    game: game,\n    playerID: undefined\n  });\n  var enhancedCtx = EnhanceCtx(state);\n  state.G = game.setup(enhancedCtx, setupData);\n\n  var initial = _objectSpread(_objectSpread({}, state), {}, {\n    // List of {G, ctx} pairs that can be undone.\n    _undo: [],\n    // List of {G, ctx} pairs that can be redone.\n    _redo: [],\n    // A monotonically non-decreasing ID to ensure that\n    // state updates are only allowed from clients that\n    // are at the same version that the server.\n    _stateID: 0\n  });\n\n  initial = game.flow.init(initial);\n\n  var _FlushAndValidate = FlushAndValidate(initial, {\n    game: game\n  });\n\n  var _FlushAndValidate2 = _slicedToArray(_FlushAndValidate, 1);\n\n  initial = _FlushAndValidate2[0];\n\n  // Initialize undo stack.\n  if (!game.disableUndo) {\n    initial._undo = [{\n      G: initial.G,\n      ctx: initial.ctx,\n      plugins: initial.plugins\n    }];\n  }\n\n  return initial;\n}\n\nexport { InitializeGame as I };","import _classCallCheck from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/createClass\";\n\n/*\r\n * Copyright 2017 The boardgame.io Authors\r\n *\r\n * Use of this source code is governed by a MIT-style\r\n * license that can be found in the LICENSE file or at\r\n * https://opensource.org/licenses/MIT.\r\n */\nvar Transport = /*#__PURE__*/function () {\n  function Transport(_ref) {\n    var transportDataCallback = _ref.transportDataCallback,\n        gameName = _ref.gameName,\n        playerID = _ref.playerID,\n        matchID = _ref.matchID,\n        credentials = _ref.credentials,\n        numPlayers = _ref.numPlayers;\n\n    _classCallCheck(this, Transport);\n\n    /** Callback to let the client know when the connection status has changed. */\n    this.connectionStatusCallback = function () {};\n\n    this.isConnected = false;\n    this.transportDataCallback = transportDataCallback;\n    this.gameName = gameName || 'default';\n    this.playerID = playerID || null;\n    this.matchID = matchID || 'default';\n    this.credentials = credentials;\n    this.numPlayers = numPlayers || 2;\n  }\n  /** Subscribe to connection state changes. */\n\n\n  _createClass(Transport, [{\n    key: \"subscribeToConnectionStatus\",\n    value: function subscribeToConnectionStatus(fn) {\n      this.connectionStatusCallback = fn;\n    }\n    /** Transport implementations should call this when they connect/disconnect. */\n\n  }, {\n    key: \"setConnectionStatus\",\n    value: function setConnectionStatus(isConnected) {\n      this.isConnected = isConnected;\n      this.connectionStatusCallback();\n    }\n    /** Transport implementations should call this when they receive data from a master. */\n\n  }, {\n    key: \"notifyClient\",\n    value: function notifyClient(data) {\n      this.transportDataCallback(data);\n    }\n  }]);\n\n  return Transport;\n}();\n\nexport { Transport as T };","import _defineProperty from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { nanoid } from 'nanoid/non-secure';\nimport { D as Debug } from './Debug-f39f426b.js';\nimport { applyMiddleware, compose, createStore } from 'redux';\nimport { u as reset, v as undo, w as redo, s as sync, x as PlayerView, A as ActionCreators, j as SYNC, k as UPDATE, P as PATCH, l as RESET, R as REDO, h as UNDO, o as GAME_EVENT, M as MAKE_MOVE, p as STRIP_TRANSIENTS, y as patch, z as update } from './turn-order-406c4349.js';\nimport { P as ProcessGameConfig, C as CreateGameReducer, T as TransientHandlingMiddleware } from './reducer-efc3ec3e.js';\nimport { I as InitializeGame } from './initialize-8da88d04.js';\nimport { T as Transport } from './transport-ce07b771.js';\n/**\r\n * This class doesnt do anything, but simplifies the client class by providing\r\n * dummy functions to call, so we dont need to mock them in the client.\r\n */\n\nvar DummyImpl = /*#__PURE__*/function (_Transport) {\n  _inherits(DummyImpl, _Transport);\n\n  var _super = _createSuper(DummyImpl);\n\n  function DummyImpl() {\n    _classCallCheck(this, DummyImpl);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(DummyImpl, [{\n    key: \"connect\",\n    value: function connect() {}\n  }, {\n    key: \"disconnect\",\n    value: function disconnect() {}\n  }, {\n    key: \"sendAction\",\n    value: function sendAction() {}\n  }, {\n    key: \"sendChatMessage\",\n    value: function sendChatMessage() {}\n  }, {\n    key: \"requestSync\",\n    value: function requestSync() {}\n  }, {\n    key: \"updateCredentials\",\n    value: function updateCredentials() {}\n  }, {\n    key: \"updateMatchID\",\n    value: function updateMatchID() {}\n  }, {\n    key: \"updatePlayerID\",\n    value: function updatePlayerID() {}\n  }]);\n\n  return DummyImpl;\n}(Transport);\n\nvar DummyTransport = function DummyTransport(opts) {\n  return new DummyImpl(opts);\n};\n/**\r\n * Class to manage boardgame.io clients and limit debug panel rendering.\r\n */\n\n\nvar ClientManager = /*#__PURE__*/function () {\n  function ClientManager() {\n    _classCallCheck(this, ClientManager);\n\n    this.debugPanel = null;\n    this.currentClient = null;\n    this.clients = new Map();\n    this.subscribers = new Map();\n  }\n  /**\r\n   * Register a client with the client manager.\r\n   */\n\n\n  _createClass(ClientManager, [{\n    key: \"register\",\n    value: function register(client) {\n      // Add client to clients map.\n      this.clients.set(client, client); // Mount debug for this client (no-op if another debug is already mounted).\n\n      this.mountDebug(client);\n      this.notifySubscribers();\n    }\n    /**\r\n     * Unregister a client from the client manager.\r\n     */\n\n  }, {\n    key: \"unregister\",\n    value: function unregister(client) {\n      // Remove client from clients map.\n      this.clients.delete(client);\n\n      if (this.currentClient === client) {\n        // If the removed client owned the debug panel, unmount it.\n        this.unmountDebug(); // Mount debug panel for next available client.\n\n        var _iterator = _createForOfIteratorHelper(this.clients),\n            _step;\n\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var _step$value = _slicedToArray(_step.value, 1),\n                _client = _step$value[0];\n\n            if (this.debugPanel) break;\n            this.mountDebug(_client);\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n      }\n\n      this.notifySubscribers();\n    }\n    /**\r\n     * Subscribe to the client manager state.\r\n     * Calls the passed callback each time the current client changes or a client\r\n     * registers/unregisters.\r\n     * Returns a function to unsubscribe from the state updates.\r\n     */\n\n  }, {\n    key: \"subscribe\",\n    value: function subscribe(callback) {\n      var _this = this;\n\n      var id = Symbol();\n      this.subscribers.set(id, callback);\n      callback(this.getState());\n      return function () {\n        _this.subscribers.delete(id);\n      };\n    }\n    /**\r\n     * Switch to a client with a matching playerID.\r\n     */\n\n  }, {\n    key: \"switchPlayerID\",\n    value: function switchPlayerID(playerID) {\n      // For multiplayer clients, try switching control to a different client\n      // that is using the same transport layer.\n      if (this.currentClient.multiplayer) {\n        var _iterator2 = _createForOfIteratorHelper(this.clients),\n            _step2;\n\n        try {\n          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n            var _step2$value = _slicedToArray(_step2.value, 1),\n                client = _step2$value[0];\n\n            if (client.playerID === playerID && client.debugOpt !== false && client.multiplayer === this.currentClient.multiplayer) {\n              this.switchToClient(client);\n              return;\n            }\n          }\n        } catch (err) {\n          _iterator2.e(err);\n        } finally {\n          _iterator2.f();\n        }\n      } // If no client matches, update the playerID for the current client.\n\n\n      this.currentClient.updatePlayerID(playerID);\n      this.notifySubscribers();\n    }\n    /**\r\n     * Set the passed client as the active client for debugging.\r\n     */\n\n  }, {\n    key: \"switchToClient\",\n    value: function switchToClient(client) {\n      if (client === this.currentClient) return;\n      this.unmountDebug();\n      this.mountDebug(client);\n      this.notifySubscribers();\n    }\n    /**\r\n     * Notify all subscribers of changes to the client manager state.\r\n     */\n\n  }, {\n    key: \"notifySubscribers\",\n    value: function notifySubscribers() {\n      var arg = this.getState();\n      this.subscribers.forEach(function (cb) {\n        cb(arg);\n      });\n    }\n    /**\r\n     * Get the client manager state.\r\n     */\n\n  }, {\n    key: \"getState\",\n    value: function getState() {\n      return {\n        client: this.currentClient,\n        debuggableClients: this.getDebuggableClients()\n      };\n    }\n    /**\r\n     * Get an array of the registered clients that havent disabled the debug panel.\r\n     */\n\n  }, {\n    key: \"getDebuggableClients\",\n    value: function getDebuggableClients() {\n      return _toConsumableArray(this.clients.values()).filter(function (client) {\n        return client.debugOpt !== false;\n      });\n    }\n    /**\r\n     * Mount the debug panel using the passed client.\r\n     */\n\n  }, {\n    key: \"mountDebug\",\n    value: function mountDebug(client) {\n      if (client.debugOpt === false || this.debugPanel !== null || typeof document === 'undefined') {\n        return;\n      }\n\n      var DebugImpl;\n      var target = document.body;\n\n      if (process.env.NODE_ENV !== 'production') {\n        DebugImpl = Debug;\n      }\n\n      if (client.debugOpt && client.debugOpt !== true) {\n        DebugImpl = client.debugOpt.impl || DebugImpl;\n        target = client.debugOpt.target || target;\n      }\n\n      if (DebugImpl) {\n        this.currentClient = client;\n        this.debugPanel = new DebugImpl({\n          target: target,\n          props: {\n            clientManager: this\n          }\n        });\n      }\n    }\n    /**\r\n     * Unmount the debug panel.\r\n     */\n\n  }, {\n    key: \"unmountDebug\",\n    value: function unmountDebug() {\n      this.debugPanel.$destroy();\n      this.debugPanel = null;\n      this.currentClient = null;\n    }\n  }]);\n\n  return ClientManager;\n}();\n/*\r\n * Copyright 2017 The boardgame.io Authors\r\n *\r\n * Use of this source code is governed by a MIT-style\r\n * license that can be found in the LICENSE file or at\r\n * https://opensource.org/licenses/MIT.\r\n */\n\n/**\r\n * Global client manager instance that all clients register with.\r\n */\n\n\nvar GlobalClientManager = new ClientManager();\n/**\r\n * Standardise the passed playerID, using currentPlayer if appropriate.\r\n */\n\nfunction assumedPlayerID(playerID, store, multiplayer) {\n  // In singleplayer mode, if the client does not have a playerID\n  // associated with it, we attach the currentPlayer as playerID.\n  if (!multiplayer && (playerID === null || playerID === undefined)) {\n    var state = store.getState();\n    playerID = state.ctx.currentPlayer;\n  }\n\n  return playerID;\n}\n/**\r\n * createDispatchers\r\n *\r\n * Create action dispatcher wrappers with bound playerID and credentials\r\n */\n\n\nfunction createDispatchers(storeActionType, innerActionNames, store, playerID, credentials, multiplayer) {\n  var dispatchers = {};\n\n  var _iterator3 = _createForOfIteratorHelper(innerActionNames),\n      _step3;\n\n  try {\n    var _loop = function _loop() {\n      var name = _step3.value;\n\n      dispatchers[name] = function () {\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        var action = ActionCreators[storeActionType](name, args, assumedPlayerID(playerID, store, multiplayer), credentials);\n        store.dispatch(action);\n      };\n    };\n\n    for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n      _loop();\n    }\n  } catch (err) {\n    _iterator3.e(err);\n  } finally {\n    _iterator3.f();\n  }\n\n  return dispatchers;\n} // Creates a set of dispatchers to make moves.\n\n\nvar createMoveDispatchers = createDispatchers.bind(null, 'makeMove'); // Creates a set of dispatchers to dispatch game flow events.\n\nvar createEventDispatchers = createDispatchers.bind(null, 'gameEvent'); // Creates a set of dispatchers to dispatch actions to plugins.\n\nvar createPluginDispatchers = createDispatchers.bind(null, 'plugin');\n/**\r\n * Implementation of Client (see below).\r\n */\n\nvar _ClientImpl = /*#__PURE__*/function () {\n  function _ClientImpl(_ref) {\n    var _this2 = this;\n\n    var game = _ref.game,\n        debug = _ref.debug,\n        numPlayers = _ref.numPlayers,\n        multiplayer = _ref.multiplayer,\n        matchID = _ref.matchID,\n        playerID = _ref.playerID,\n        credentials = _ref.credentials,\n        enhancer = _ref.enhancer;\n\n    _classCallCheck(this, _ClientImpl);\n\n    this.game = ProcessGameConfig(game);\n    this.playerID = playerID;\n    this.matchID = matchID || 'default';\n    this.credentials = credentials;\n    this.multiplayer = multiplayer;\n    this.debugOpt = debug;\n    this.manager = GlobalClientManager;\n    this.gameStateOverride = null;\n    this.subscribers = {};\n    this._running = false;\n    this.reducer = CreateGameReducer({\n      game: this.game,\n      isClient: multiplayer !== undefined\n    });\n    this.initialState = null;\n\n    if (!multiplayer) {\n      this.initialState = InitializeGame({\n        game: this.game,\n        numPlayers: numPlayers\n      });\n    }\n\n    this.reset = function () {\n      _this2.store.dispatch(reset(_this2.initialState));\n    };\n\n    this.undo = function () {\n      var undo$1 = undo(assumedPlayerID(_this2.playerID, _this2.store, _this2.multiplayer), _this2.credentials);\n\n      _this2.store.dispatch(undo$1);\n    };\n\n    this.redo = function () {\n      var redo$1 = redo(assumedPlayerID(_this2.playerID, _this2.store, _this2.multiplayer), _this2.credentials);\n\n      _this2.store.dispatch(redo$1);\n    };\n\n    this.log = [];\n    /**\r\n     * Middleware that manages the log object.\r\n     * Reducers generate deltalogs, which are log events\r\n     * that are the result of application of a single action.\r\n     * The master may also send back a deltalog or the entire\r\n     * log depending on the type of request.\r\n     * The middleware below takes care of all these cases while\r\n     * managing the log object.\r\n     */\n\n    var LogMiddleware = function LogMiddleware(store) {\n      return function (next) {\n        return function (action) {\n          var result = next(action);\n          var state = store.getState();\n\n          switch (action.type) {\n            case MAKE_MOVE:\n            case GAME_EVENT:\n            case UNDO:\n            case REDO:\n              {\n                var deltalog = state.deltalog;\n                _this2.log = [].concat(_toConsumableArray(_this2.log), _toConsumableArray(deltalog));\n                break;\n              }\n\n            case RESET:\n              {\n                _this2.log = [];\n                break;\n              }\n\n            case PATCH:\n            case UPDATE:\n              {\n                var id = -1;\n\n                if (_this2.log.length > 0) {\n                  id = _this2.log[_this2.log.length - 1]._stateID;\n                }\n\n                var _deltalog = action.deltalog || []; // Filter out actions that are already present\n                // in the current log. This may occur when the\n                // client adds an entry to the log followed by\n                // the update from the master here.\n\n\n                _deltalog = _deltalog.filter(function (l) {\n                  return l._stateID > id;\n                });\n                _this2.log = [].concat(_toConsumableArray(_this2.log), _toConsumableArray(_deltalog));\n                break;\n              }\n\n            case SYNC:\n              {\n                _this2.initialState = action.initialState;\n                _this2.log = action.log || [];\n                break;\n              }\n          }\n\n          return result;\n        };\n      };\n    };\n    /**\r\n     * Middleware that intercepts actions and sends them to the master,\r\n     * which keeps the authoritative version of the state.\r\n     */\n\n\n    var TransportMiddleware = function TransportMiddleware(store) {\n      return function (next) {\n        return function (action) {\n          var baseState = store.getState();\n          var result = next(action);\n\n          if (!('clientOnly' in action) && action.type !== STRIP_TRANSIENTS) {\n            _this2.transport.sendAction(baseState, action);\n          }\n\n          return result;\n        };\n      };\n    };\n    /**\r\n     * Middleware that intercepts actions and invokes the subscription callback.\r\n     */\n\n\n    var SubscriptionMiddleware = function SubscriptionMiddleware() {\n      return function (next) {\n        return function (action) {\n          var result = next(action);\n\n          _this2.notifySubscribers();\n\n          return result;\n        };\n      };\n    };\n\n    var middleware = applyMiddleware(TransientHandlingMiddleware, SubscriptionMiddleware, TransportMiddleware, LogMiddleware);\n    enhancer = enhancer !== undefined ? compose(middleware, enhancer) : middleware;\n    this.store = createStore(this.reducer, this.initialState, enhancer);\n    if (!multiplayer) multiplayer = DummyTransport;\n    this.transport = multiplayer({\n      transportDataCallback: function transportDataCallback(data) {\n        return _this2.receiveTransportData(data);\n      },\n      gameKey: game,\n      game: this.game,\n      matchID: matchID,\n      playerID: playerID,\n      credentials: credentials,\n      gameName: this.game.name,\n      numPlayers: numPlayers\n    });\n    this.createDispatchers();\n    this.chatMessages = [];\n\n    this.sendChatMessage = function (payload) {\n      _this2.transport.sendChatMessage(_this2.matchID, {\n        id: nanoid(7),\n        sender: _this2.playerID,\n        payload: payload\n      });\n    };\n  }\n  /** Handle incoming match data from a multiplayer transport. */\n\n\n  _createClass(_ClientImpl, [{\n    key: \"receiveMatchData\",\n    value: function receiveMatchData(matchData) {\n      this.matchData = matchData;\n      this.notifySubscribers();\n    }\n    /** Handle an incoming chat message from a multiplayer transport. */\n\n  }, {\n    key: \"receiveChatMessage\",\n    value: function receiveChatMessage(message) {\n      this.chatMessages = [].concat(_toConsumableArray(this.chatMessages), [message]);\n      this.notifySubscribers();\n    }\n    /** Handle all incoming updates from a multiplayer transport. */\n\n  }, {\n    key: \"receiveTransportData\",\n    value: function receiveTransportData(data) {\n      var _data$args = _slicedToArray(data.args, 1),\n          matchID = _data$args[0];\n\n      if (matchID !== this.matchID) return;\n\n      switch (data.type) {\n        case 'sync':\n          {\n            var _data$args2 = _slicedToArray(data.args, 2),\n                syncInfo = _data$args2[1];\n\n            var action = sync(syncInfo);\n            this.receiveMatchData(syncInfo.filteredMetadata);\n            this.store.dispatch(action);\n            break;\n          }\n\n        case 'update':\n          {\n            var _data$args3 = _slicedToArray(data.args, 3),\n                state = _data$args3[1],\n                deltalog = _data$args3[2];\n\n            var currentState = this.store.getState();\n\n            if (state._stateID >= currentState._stateID) {\n              var _action = update(state, deltalog);\n\n              this.store.dispatch(_action);\n            }\n\n            break;\n          }\n\n        case 'patch':\n          {\n            var _data$args4 = _slicedToArray(data.args, 5),\n                prevStateID = _data$args4[1],\n                stateID = _data$args4[2],\n                patch$1 = _data$args4[3],\n                _deltalog2 = _data$args4[4];\n\n            var currentStateID = this.store.getState()._stateID;\n\n            if (prevStateID !== currentStateID) break;\n\n            var _action2 = patch(prevStateID, stateID, patch$1, _deltalog2);\n\n            this.store.dispatch(_action2); // Emit sync if patch apply failed.\n\n            if (this.store.getState()._stateID === currentStateID) {\n              this.transport.requestSync();\n            }\n\n            break;\n          }\n\n        case 'matchData':\n          {\n            var _data$args5 = _slicedToArray(data.args, 2),\n                matchData = _data$args5[1];\n\n            this.receiveMatchData(matchData);\n            break;\n          }\n\n        case 'chat':\n          {\n            var _data$args6 = _slicedToArray(data.args, 2),\n                chatMessage = _data$args6[1];\n\n            this.receiveChatMessage(chatMessage);\n            break;\n          }\n      }\n    }\n  }, {\n    key: \"notifySubscribers\",\n    value: function notifySubscribers() {\n      var _this3 = this;\n\n      Object.values(this.subscribers).forEach(function (fn) {\n        return fn(_this3.getState());\n      });\n    }\n  }, {\n    key: \"overrideGameState\",\n    value: function overrideGameState(state) {\n      this.gameStateOverride = state;\n      this.notifySubscribers();\n    }\n  }, {\n    key: \"start\",\n    value: function start() {\n      this.transport.connect();\n      this._running = true;\n      this.manager.register(this);\n    }\n  }, {\n    key: \"stop\",\n    value: function stop() {\n      this.transport.disconnect();\n      this._running = false;\n      this.manager.unregister(this);\n    }\n  }, {\n    key: \"subscribe\",\n    value: function subscribe(fn) {\n      var _this4 = this;\n\n      var id = Object.keys(this.subscribers).length;\n      this.subscribers[id] = fn;\n      this.transport.subscribeToConnectionStatus(function () {\n        return _this4.notifySubscribers();\n      });\n\n      if (this._running || !this.multiplayer) {\n        fn(this.getState());\n      } // Return a handle that allows the caller to unsubscribe.\n\n\n      return function () {\n        delete _this4.subscribers[id];\n      };\n    }\n  }, {\n    key: \"getInitialState\",\n    value: function getInitialState() {\n      return this.initialState;\n    }\n  }, {\n    key: \"getState\",\n    value: function getState() {\n      var state = this.store.getState();\n\n      if (this.gameStateOverride !== null) {\n        state = this.gameStateOverride;\n      } // This is the state before a sync with the game master.\n\n\n      if (state === null) {\n        return state;\n      } // isActive.\n\n\n      var isActive = true;\n      var isPlayerActive = this.game.flow.isPlayerActive(state.G, state.ctx, this.playerID);\n\n      if (this.multiplayer && !isPlayerActive) {\n        isActive = false;\n      }\n\n      if (!this.multiplayer && this.playerID !== null && this.playerID !== undefined && !isPlayerActive) {\n        isActive = false;\n      }\n\n      if (state.ctx.gameover !== undefined) {\n        isActive = false;\n      } // Secrets are normally stripped on the server,\n      // but we also strip them here so that game developers\n      // can see their effects while prototyping.\n      // Do not strip again if this is a multiplayer game\n      // since the server has already stripped secret info. (issue #818)\n\n\n      if (!this.multiplayer) {\n        state = _objectSpread(_objectSpread({}, state), {}, {\n          G: this.game.playerView(state.G, state.ctx, this.playerID),\n          plugins: PlayerView(state, this)\n        });\n      } // Combine into return value.\n\n\n      return _objectSpread(_objectSpread({}, state), {}, {\n        log: this.log,\n        isActive: isActive,\n        isConnected: this.transport.isConnected\n      });\n    }\n  }, {\n    key: \"createDispatchers\",\n    value: function createDispatchers() {\n      this.moves = createMoveDispatchers(this.game.moveNames, this.store, this.playerID, this.credentials, this.multiplayer);\n      this.events = createEventDispatchers(this.game.flow.enabledEventNames, this.store, this.playerID, this.credentials, this.multiplayer);\n      this.plugins = createPluginDispatchers(this.game.pluginNames, this.store, this.playerID, this.credentials, this.multiplayer);\n    }\n  }, {\n    key: \"updatePlayerID\",\n    value: function updatePlayerID(playerID) {\n      this.playerID = playerID;\n      this.createDispatchers();\n      this.transport.updatePlayerID(playerID);\n      this.notifySubscribers();\n    }\n  }, {\n    key: \"updateMatchID\",\n    value: function updateMatchID(matchID) {\n      this.matchID = matchID;\n      this.createDispatchers();\n      this.transport.updateMatchID(matchID);\n      this.notifySubscribers();\n    }\n  }, {\n    key: \"updateCredentials\",\n    value: function updateCredentials(credentials) {\n      this.credentials = credentials;\n      this.createDispatchers();\n      this.transport.updateCredentials(credentials);\n      this.notifySubscribers();\n    }\n  }]);\n\n  return _ClientImpl;\n}();\n/**\r\n * Client\r\n *\r\n * boardgame.io JS client.\r\n *\r\n * @param {...object} game - The return value of `Game`.\r\n * @param {...object} numPlayers - The number of players.\r\n * @param {...object} multiplayer - Set to a falsy value or a transportFactory, e.g., SocketIO()\r\n * @param {...object} matchID - The matchID that you want to connect to.\r\n * @param {...object} playerID - The playerID associated with this client.\r\n * @param {...string} credentials - The authentication credentials associated with this client.\r\n *\r\n * Returns:\r\n *   A JS object that provides an API to interact with the\r\n *   game by dispatching moves and events.\r\n */\n\n\nfunction Client(opts) {\n  return new _ClientImpl(opts);\n}\n\nexport { Client as C };","/*! (c) 2020 Andrea Giammarchi */\nvar $parse = JSON.parse,\n    $stringify = JSON.stringify;\nvar keys = Object.keys;\nvar Primitive = String; // it could be Number\n\nvar primitive = 'string'; // it could be 'number'\n\nvar ignore = {};\nvar object = 'object';\n\nvar noop = function noop(_, value) {\n  return value;\n};\n\nvar primitives = function primitives(value) {\n  return value instanceof Primitive ? Primitive(value) : value;\n};\n\nvar Primitives = function Primitives(_, value) {\n  return typeof value === primitive ? new Primitive(value) : value;\n};\n\nvar revive = function revive(input, parsed, output, $) {\n  var lazy = [];\n\n  for (var ke = keys(output), length = ke.length, y = 0; y < length; y++) {\n    var k = ke[y];\n    var value = output[k];\n\n    if (value instanceof Primitive) {\n      var tmp = input[value];\n\n      if (typeof tmp === object && !parsed.has(tmp)) {\n        parsed.add(tmp);\n        output[k] = ignore;\n        lazy.push({\n          k: k,\n          a: [input, parsed, tmp, $]\n        });\n      } else output[k] = $.call(output, k, tmp);\n    } else if (output[k] !== ignore) output[k] = $.call(output, k, value);\n  }\n\n  for (var _length = lazy.length, i = 0; i < _length; i++) {\n    var _lazy$i = lazy[i],\n        _k = _lazy$i.k,\n        a = _lazy$i.a;\n    output[_k] = $.call(output, _k, revive.apply(null, a));\n  }\n\n  return output;\n};\n\nvar set = function set(known, input, value) {\n  var index = Primitive(input.push(value) - 1);\n  known.set(value, index);\n  return index;\n};\n\nexport var parse = function parse(text, reviver) {\n  var input = $parse(text, Primitives).map(primitives);\n  var value = input[0];\n  var $ = reviver || noop;\n  var tmp = typeof value === object && value ? revive(input, new Set(), value, $) : value;\n  return $.call({\n    '': tmp\n  }, '', tmp);\n};\nexport var stringify = function stringify(value, replacer, space) {\n  var $ = replacer && typeof replacer === object ? function (k, v) {\n    return k === '' || -1 < replacer.indexOf(k) ? v : void 0;\n  } : replacer || noop;\n  var known = new Map();\n  var input = [];\n  var output = [];\n  var i = +set(known, input, $.call({\n    '': value\n  }, '', value));\n  var firstRun = !i;\n\n  while (i < input.length) {\n    firstRun = true;\n    output[i] = $stringify(input[i++], replace, space);\n  }\n\n  return '[' + output.join(',') + ']';\n\n  function replace(key, value) {\n    if (firstRun) {\n      firstRun = !firstRun;\n      return value;\n    }\n\n    var after = $.call(this, key, value);\n\n    switch (typeof after) {\n      case object:\n        if (after === null) return after;\n\n      case primitive:\n        return known.get(after) || set(known, input, after);\n    }\n\n    return after;\n  }\n};\nexport var toJSON = function toJSON(any) {\n  return $parse(stringify(any));\n};\nexport var fromJSON = function fromJSON(any) {\n  return parse($stringify(any));\n};","import _defineProperty from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _toConsumableArray from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _inherits from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _classCallCheck from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _regeneratorRuntime from \"D:/coding/tkfmtools/node_modules/@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { B as makeMove, g as gameEvent, C as alea } from './turn-order-406c4349.js';\nimport { C as CreateGameReducer } from './reducer-efc3ec3e.js';\nimport 'setimmediate';\n/*\r\n * Copyright 2018 The boardgame.io Authors\r\n *\r\n * Use of this source code is governed by a MIT-style\r\n * license that can be found in the LICENSE file or at\r\n * https://opensource.org/licenses/MIT.\r\n */\n\n/**\r\n * Base class that bots can extend.\r\n */\n\nvar Bot = /*#__PURE__*/function () {\n  function Bot(_ref) {\n    var enumerate = _ref.enumerate,\n        seed = _ref.seed;\n\n    _classCallCheck(this, Bot);\n\n    this.enumerateFn = enumerate;\n    this.seed = seed;\n    this.iterationCounter = 0;\n    this._opts = {};\n  }\n\n  _createClass(Bot, [{\n    key: \"addOpt\",\n    value: function addOpt(_ref2) {\n      var key = _ref2.key,\n          range = _ref2.range,\n          initial = _ref2.initial;\n      this._opts[key] = {\n        range: range,\n        value: initial\n      };\n    }\n  }, {\n    key: \"getOpt\",\n    value: function getOpt(key) {\n      return this._opts[key].value;\n    }\n  }, {\n    key: \"setOpt\",\n    value: function setOpt(key, value) {\n      if (key in this._opts) {\n        this._opts[key].value = value;\n      }\n    }\n  }, {\n    key: \"opts\",\n    value: function opts() {\n      return this._opts;\n    }\n  }, {\n    key: \"enumerate\",\n    value: function enumerate(G, ctx, playerID) {\n      var actions = this.enumerateFn(G, ctx, playerID);\n      return actions.map(function (a) {\n        if ('payload' in a) {\n          return a;\n        }\n\n        if ('move' in a) {\n          return makeMove(a.move, a.args, playerID);\n        }\n\n        if ('event' in a) {\n          return gameEvent(a.event, a.args, playerID);\n        }\n      });\n    }\n  }, {\n    key: \"random\",\n    value: function random(arg) {\n      var number;\n\n      if (this.seed !== undefined) {\n        var seed = this.prngstate ? '' : this.seed;\n        var rand = alea(seed, this.prngstate);\n        number = rand();\n        this.prngstate = rand.state();\n      } else {\n        number = Math.random();\n      }\n\n      if (arg) {\n        if (Array.isArray(arg)) {\n          var id = Math.floor(number * arg.length);\n          return arg[id];\n        } else {\n          return Math.floor(number * arg);\n        }\n      }\n\n      return number;\n    }\n  }]);\n\n  return Bot;\n}();\n/*\r\n * Copyright 2018 The boardgame.io Authors\r\n *\r\n * Use of this source code is governed by a MIT-style\r\n * license that can be found in the LICENSE file or at\r\n * https://opensource.org/licenses/MIT.\r\n */\n\n/**\r\n * The number of iterations to run before yielding to\r\n * the JS event loop (in async mode).\r\n */\n\n\nvar CHUNK_SIZE = 25;\n/**\r\n * Bot that uses Monte-Carlo Tree Search to find promising moves.\r\n */\n\nvar MCTSBot = /*#__PURE__*/function (_Bot) {\n  _inherits(MCTSBot, _Bot);\n\n  var _super = _createSuper(MCTSBot);\n\n  function MCTSBot(_ref3) {\n    var _this;\n\n    var enumerate = _ref3.enumerate,\n        seed = _ref3.seed,\n        objectives = _ref3.objectives,\n        game = _ref3.game,\n        iterations = _ref3.iterations,\n        playoutDepth = _ref3.playoutDepth,\n        iterationCallback = _ref3.iterationCallback;\n\n    _classCallCheck(this, MCTSBot);\n\n    _this = _super.call(this, {\n      enumerate: enumerate,\n      seed: seed\n    });\n\n    if (objectives === undefined) {\n      objectives = function objectives() {\n        return {};\n      };\n    }\n\n    _this.objectives = objectives;\n\n    _this.iterationCallback = iterationCallback || function () {};\n\n    _this.reducer = CreateGameReducer({\n      game: game\n    });\n    _this.iterations = iterations;\n    _this.playoutDepth = playoutDepth;\n\n    _this.addOpt({\n      key: 'async',\n      initial: false\n    });\n\n    _this.addOpt({\n      key: 'iterations',\n      initial: typeof iterations === 'number' ? iterations : 1000,\n      range: {\n        min: 1,\n        max: 2000\n      }\n    });\n\n    _this.addOpt({\n      key: 'playoutDepth',\n      initial: typeof playoutDepth === 'number' ? playoutDepth : 50,\n      range: {\n        min: 1,\n        max: 100\n      }\n    });\n\n    return _this;\n  }\n\n  _createClass(MCTSBot, [{\n    key: \"createNode\",\n    value: function createNode(_ref4) {\n      var state = _ref4.state,\n          parentAction = _ref4.parentAction,\n          parent = _ref4.parent,\n          playerID = _ref4.playerID;\n      var G = state.G,\n          ctx = state.ctx;\n      var actions = [];\n      var objectives = [];\n\n      if (playerID !== undefined) {\n        actions = this.enumerate(G, ctx, playerID);\n        objectives = this.objectives(G, ctx, playerID);\n      } else if (ctx.activePlayers) {\n        for (var _playerID in ctx.activePlayers) {\n          var _actions;\n\n          (_actions = actions).push.apply(_actions, _toConsumableArray(this.enumerate(G, ctx, _playerID)));\n\n          objectives.push(this.objectives(G, ctx, _playerID));\n        }\n      } else {\n        actions = this.enumerate(G, ctx, ctx.currentPlayer);\n        objectives = this.objectives(G, ctx, ctx.currentPlayer);\n      }\n\n      return {\n        state: state,\n        parent: parent,\n        parentAction: parentAction,\n        actions: actions,\n        objectives: objectives,\n        children: [],\n        visits: 0,\n        value: 0\n      };\n    }\n  }, {\n    key: \"select\",\n    value: function select(node) {\n      // This node has unvisited children.\n      if (node.actions.length > 0) {\n        return node;\n      } // This is a terminal node.\n\n\n      if (node.children.length === 0) {\n        return node;\n      }\n\n      var selectedChild = null;\n      var best = 0;\n\n      var _iterator = _createForOfIteratorHelper(node.children),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var child = _step.value;\n          var childVisits = child.visits + Number.EPSILON;\n          var uct = child.value / childVisits + Math.sqrt(2 * Math.log(node.visits) / childVisits);\n\n          if (selectedChild == null || uct > best) {\n            best = uct;\n            selectedChild = child;\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      return this.select(selectedChild);\n    }\n  }, {\n    key: \"expand\",\n    value: function expand(node) {\n      var actions = node.actions;\n\n      if (actions.length === 0 || node.state.ctx.gameover !== undefined) {\n        return node;\n      }\n\n      var id = this.random(actions.length);\n      var action = actions[id];\n      node.actions.splice(id, 1);\n      var childState = this.reducer(node.state, action);\n      var childNode = this.createNode({\n        state: childState,\n        parentAction: action,\n        parent: node\n      });\n      node.children.push(childNode);\n      return childNode;\n    }\n  }, {\n    key: \"playout\",\n    value: function playout(_ref5) {\n      var _this2 = this;\n\n      var state = _ref5.state;\n      var playoutDepth = this.getOpt('playoutDepth');\n\n      if (typeof this.playoutDepth === 'function') {\n        playoutDepth = this.playoutDepth(state.G, state.ctx);\n      }\n\n      var _loop = function _loop(i) {\n        var _state = state,\n            G = _state.G,\n            ctx = _state.ctx;\n        var playerID = ctx.currentPlayer;\n\n        if (ctx.activePlayers) {\n          playerID = Object.keys(ctx.activePlayers)[0];\n        }\n\n        var moves = _this2.enumerate(G, ctx, playerID); // Check if any objectives are met.\n\n\n        var objectives = _this2.objectives(G, ctx, playerID);\n\n        var score = Object.keys(objectives).reduce(function (score, key) {\n          var objective = objectives[key];\n\n          if (objective.checker(G, ctx)) {\n            return score + objective.weight;\n          }\n\n          return score;\n        }, 0); // If so, stop and return the score.\n\n        if (score > 0) {\n          return {\n            v: {\n              score: score\n            }\n          };\n        }\n\n        if (!moves || moves.length === 0) {\n          return {\n            v: undefined\n          };\n        }\n\n        var id = _this2.random(moves.length);\n\n        var childState = _this2.reducer(state, moves[id]);\n\n        state = childState;\n      };\n\n      for (var i = 0; i < playoutDepth && state.ctx.gameover === undefined; i++) {\n        var _ret = _loop(i);\n\n        if (typeof _ret === \"object\") return _ret.v;\n      }\n\n      return state.ctx.gameover;\n    }\n  }, {\n    key: \"backpropagate\",\n    value: function backpropagate(node) {\n      var result = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      node.visits++;\n\n      if (result.score !== undefined) {\n        node.value += result.score;\n      }\n\n      if (result.draw === true) {\n        node.value += 0.5;\n      }\n\n      if (node.parentAction && result.winner === node.parentAction.payload.playerID) {\n        node.value++;\n      }\n\n      if (node.parent) {\n        this.backpropagate(node.parent, result);\n      }\n    }\n  }, {\n    key: \"play\",\n    value: function play(state, playerID) {\n      var _this3 = this;\n\n      var root = this.createNode({\n        state: state,\n        playerID: playerID\n      });\n      var numIterations = this.getOpt('iterations');\n\n      if (typeof this.iterations === 'function') {\n        numIterations = this.iterations(state.G, state.ctx);\n      }\n\n      var getResult = function getResult() {\n        var selectedChild = null;\n\n        var _iterator2 = _createForOfIteratorHelper(root.children),\n            _step2;\n\n        try {\n          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n            var child = _step2.value;\n\n            if (selectedChild == null || child.visits > selectedChild.visits) {\n              selectedChild = child;\n            }\n          }\n        } catch (err) {\n          _iterator2.e(err);\n        } finally {\n          _iterator2.f();\n        }\n\n        var action = selectedChild && selectedChild.parentAction;\n        var metadata = root;\n        return {\n          action: action,\n          metadata: metadata\n        };\n      };\n\n      return new Promise(function (resolve) {\n        var iteration = function iteration() {\n          for (var i = 0; i < CHUNK_SIZE && _this3.iterationCounter < numIterations; i++) {\n            var leaf = _this3.select(root);\n\n            var child = _this3.expand(leaf);\n\n            var result = _this3.playout(child);\n\n            _this3.backpropagate(child, result);\n\n            _this3.iterationCounter++;\n          }\n\n          _this3.iterationCallback({\n            iterationCounter: _this3.iterationCounter,\n            numIterations: numIterations,\n            metadata: root\n          });\n        };\n\n        _this3.iterationCounter = 0;\n\n        if (_this3.getOpt('async')) {\n          var asyncIteration = function asyncIteration() {\n            if (_this3.iterationCounter < numIterations) {\n              iteration();\n              setImmediate(asyncIteration);\n            } else {\n              resolve(getResult());\n            }\n          };\n\n          asyncIteration();\n        } else {\n          while (_this3.iterationCounter < numIterations) {\n            iteration();\n          }\n\n          resolve(getResult());\n        }\n      });\n    }\n  }]);\n\n  return MCTSBot;\n}(Bot);\n/*\r\n * Copyright 2018 The boardgame.io Authors\r\n *\r\n * Use of this source code is governed by a MIT-style\r\n * license that can be found in the LICENSE file or at\r\n * https://opensource.org/licenses/MIT.\r\n */\n\n/**\r\n * Bot that picks a move at random.\r\n */\n\n\nvar RandomBot = /*#__PURE__*/function (_Bot2) {\n  _inherits(RandomBot, _Bot2);\n\n  var _super2 = _createSuper(RandomBot);\n\n  function RandomBot() {\n    _classCallCheck(this, RandomBot);\n\n    return _super2.apply(this, arguments);\n  }\n\n  _createClass(RandomBot, [{\n    key: \"play\",\n    value: function play(_ref6, playerID) {\n      var G = _ref6.G,\n          ctx = _ref6.ctx;\n      var moves = this.enumerate(G, ctx, playerID);\n      return Promise.resolve({\n        action: this.random(moves)\n      });\n    }\n  }]);\n\n  return RandomBot;\n}(Bot);\n/*\r\n * Copyright 2018 The boardgame.io Authors\r\n *\r\n * Use of this source code is governed by a MIT-style\r\n * license that can be found in the LICENSE file or at\r\n * https://opensource.org/licenses/MIT.\r\n */\n\n/**\r\n * Make a single move on the client with a bot.\r\n *\r\n * @param {...object} client - The game client.\r\n * @param {...object} bot - The bot.\r\n */\n\n\nfunction Step(_x, _x2) {\n  return _Step.apply(this, arguments);\n}\n/**\r\n * Simulates the game till the end or a max depth.\r\n *\r\n * @param {...object} game - The game object.\r\n * @param {...object} bots - An array of bots.\r\n * @param {...object} state - The game state to start from.\r\n */\n\n\nfunction _Step() {\n  _Step = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(client, bot) {\n    var state, playerID, _yield$bot$play, action, metadata, a;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            state = client.store.getState();\n            playerID = state.ctx.currentPlayer;\n\n            if (state.ctx.activePlayers) {\n              playerID = Object.keys(state.ctx.activePlayers)[0];\n            }\n\n            _context.next = 5;\n            return bot.play(state, playerID);\n\n          case 5:\n            _yield$bot$play = _context.sent;\n            action = _yield$bot$play.action;\n            metadata = _yield$bot$play.metadata;\n\n            if (!action) {\n              _context.next = 12;\n              break;\n            }\n\n            a = _objectSpread(_objectSpread({}, action), {}, {\n              payload: _objectSpread(_objectSpread({}, action.payload), {}, {\n                metadata: metadata\n              })\n            });\n            client.store.dispatch(a);\n            return _context.abrupt(\"return\", a);\n\n          case 12:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _Step.apply(this, arguments);\n}\n\nfunction Simulate(_x3) {\n  return _Simulate.apply(this, arguments);\n}\n\nfunction _Simulate() {\n  _Simulate = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(_ref7) {\n    var game, bots, state, depth, reducer, metadata, iter, playerID, bot, t;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            game = _ref7.game, bots = _ref7.bots, state = _ref7.state, depth = _ref7.depth;\n            if (depth === undefined) depth = 10000;\n            reducer = CreateGameReducer({\n              game: game\n            });\n            metadata = null;\n            iter = 0;\n\n          case 5:\n            if (!(state.ctx.gameover === undefined && iter < depth)) {\n              _context2.next = 19;\n              break;\n            }\n\n            playerID = state.ctx.currentPlayer;\n\n            if (state.ctx.activePlayers) {\n              playerID = Object.keys(state.ctx.activePlayers)[0];\n            }\n\n            bot = bots instanceof Bot ? bots : bots[playerID];\n            _context2.next = 11;\n            return bot.play(state, playerID);\n\n          case 11:\n            t = _context2.sent;\n\n            if (t.action) {\n              _context2.next = 14;\n              break;\n            }\n\n            return _context2.abrupt(\"break\", 19);\n\n          case 14:\n            metadata = t.metadata;\n            state = reducer(state, t.action);\n            iter++;\n            _context2.next = 5;\n            break;\n\n          case 19:\n            return _context2.abrupt(\"return\", {\n              state: state,\n              metadata: metadata\n            });\n\n          case 20:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _Simulate.apply(this, arguments);\n}\n\nexport { Bot as B, MCTSBot as M, RandomBot as R, Step as S, Simulate as a };","import _defineProperty from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _createClass from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _classCallCheck from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _inherits from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _wrapNativeSuper from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/wrapNativeSuper\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport _regeneratorRuntime from \"D:/coding/tkfmtools/node_modules/@babel/runtime/regenerator\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nvar assertString = function assertString(str, label) {\n  if (!str || typeof str !== 'string') {\n    throw new Error(\"Expected \".concat(label, \" string, got \\\"\").concat(str, \"\\\".\"));\n  }\n};\n\nvar assertGameName = function assertGameName(name) {\n  return assertString(name, 'game name');\n};\n\nvar assertMatchID = function assertMatchID(id) {\n  return assertString(id, 'match ID');\n};\n\nvar validateBody = function validateBody(body, schema) {\n  if (!body) throw new Error(\"Expected body, got \\u201C\".concat(body, \"\\u201D.\"));\n\n  for (var key in schema) {\n    var propSchema = schema[key];\n    var types = Array.isArray(propSchema) ? propSchema : [propSchema];\n    var received = body[key];\n\n    if (!types.includes(typeof received)) {\n      var union = types.join('|');\n      throw new TypeError(\"Expected body.\".concat(key, \" to be of type \").concat(union, \", got \\u201C\").concat(received, \"\\u201D.\"));\n    }\n  }\n};\n\nvar LobbyClientError = /*#__PURE__*/function (_Error) {\n  _inherits(LobbyClientError, _Error);\n\n  var _super = _createSuper(LobbyClientError);\n\n  function LobbyClientError(message, details) {\n    var _this;\n\n    _classCallCheck(this, LobbyClientError);\n\n    _this = _super.call(this, message);\n    _this.details = details;\n    return _this;\n  }\n\n  return LobbyClientError;\n}( /*#__PURE__*/_wrapNativeSuper(Error));\n/**\r\n * Create a boardgame.io Lobby API client.\r\n * @param server The APIs base URL, e.g. `http://localhost:8000`.\r\n */\n\n\nvar LobbyClient = /*#__PURE__*/function () {\n  function LobbyClient() {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        _ref$server = _ref.server,\n        server = _ref$server === void 0 ? '' : _ref$server;\n\n    _classCallCheck(this, LobbyClient);\n\n    // strip trailing slash if passed\n    this.server = server.replace(/\\/$/, '');\n  }\n\n  _createClass(LobbyClient, [{\n    key: \"request\",\n    value: function () {\n      var _request = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(route, init) {\n        var response, details;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return fetch(this.server + route, init);\n\n              case 2:\n                response = _context.sent;\n\n                if (response.ok) {\n                  _context.next = 22;\n                  break;\n                }\n\n                _context.prev = 4;\n                _context.next = 7;\n                return response.clone().json();\n\n              case 7:\n                details = _context.sent;\n                _context.next = 21;\n                break;\n\n              case 10:\n                _context.prev = 10;\n                _context.t0 = _context[\"catch\"](4);\n                _context.prev = 12;\n                _context.next = 15;\n                return response.text();\n\n              case 15:\n                details = _context.sent;\n                _context.next = 21;\n                break;\n\n              case 18:\n                _context.prev = 18;\n                _context.t1 = _context[\"catch\"](12);\n                details = _context.t1.message;\n\n              case 21:\n                throw new LobbyClientError(\"HTTP status \".concat(response.status), details);\n\n              case 22:\n                return _context.abrupt(\"return\", response.json());\n\n              case 23:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[4, 10], [12, 18]]);\n      }));\n\n      function request(_x, _x2) {\n        return _request.apply(this, arguments);\n      }\n\n      return request;\n    }()\n  }, {\n    key: \"post\",\n    value: function () {\n      var _post = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(route, opts) {\n        var init;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                init = {\n                  method: 'post',\n                  body: JSON.stringify(opts.body),\n                  headers: {\n                    'Content-Type': 'application/json'\n                  }\n                };\n                if (opts.init) init = _objectSpread(_objectSpread(_objectSpread({}, init), opts.init), {}, {\n                  headers: _objectSpread(_objectSpread({}, init.headers), opts.init.headers)\n                });\n                return _context2.abrupt(\"return\", this.request(route, init));\n\n              case 3:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function post(_x3, _x4) {\n        return _post.apply(this, arguments);\n      }\n\n      return post;\n    }()\n    /**\r\n     * Get a list of the game names available on this server.\r\n     * @param  init Optional RequestInit interface to override defaults.\r\n     * @return Array of game names.\r\n     *\r\n     * @example\r\n     * lobbyClient.listGames()\r\n     *   .then(console.log); // => ['chess', 'tic-tac-toe']\r\n     */\n\n  }, {\n    key: \"listGames\",\n    value: function () {\n      var _listGames = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(init) {\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                return _context3.abrupt(\"return\", this.request('/games', init));\n\n              case 1:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function listGames(_x5) {\n        return _listGames.apply(this, arguments);\n      }\n\n      return listGames;\n    }()\n    /**\r\n     * Get a list of the matches for a specific game type on the server.\r\n     * @param  gameName The game to list for, e.g. 'tic-tac-toe'.\r\n     * @param  where    Options to filter matches by update time or gameover state\r\n     * @param  init     Optional RequestInit interface to override defaults.\r\n     * @return Array of match metadata objects.\r\n     *\r\n     * @example\r\n     * lobbyClient.listMatches('tic-tac-toe', where: { isGameover: false })\r\n     *   .then(data => console.log(data.matches));\r\n     * // => [\r\n     * //   {\r\n     * //     matchID: 'xyz',\r\n     * //     gameName: 'tic-tac-toe',\r\n     * //     players: [{ id: 0, name: 'Alice' }, { id: 1 }]\r\n     * //   },\r\n     * //   ...\r\n     * // ]\r\n     */\n\n  }, {\n    key: \"listMatches\",\n    value: function () {\n      var _listMatches = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(gameName, where, init) {\n        var query, queries, isGameover, updatedBefore, updatedAfter;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                assertGameName(gameName);\n                query = '';\n\n                if (where) {\n                  queries = [];\n                  isGameover = where.isGameover, updatedBefore = where.updatedBefore, updatedAfter = where.updatedAfter;\n                  if (isGameover !== undefined) queries.push(\"isGameover=\".concat(isGameover));\n                  if (updatedBefore) queries.push(\"updatedBefore=\".concat(updatedBefore));\n                  if (updatedAfter) queries.push(\"updatedAfter=\".concat(updatedAfter));\n                  if (queries.length > 0) query = '?' + queries.join('&');\n                }\n\n                return _context4.abrupt(\"return\", this.request(\"/games/\".concat(gameName).concat(query), init));\n\n              case 4:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function listMatches(_x6, _x7, _x8) {\n        return _listMatches.apply(this, arguments);\n      }\n\n      return listMatches;\n    }()\n    /**\r\n     * Get metadata for a specific match.\r\n     * @param  gameName The matchs game type, e.g. 'tic-tac-toe'.\r\n     * @param  matchID  Match ID for the match to fetch.\r\n     * @param  init     Optional RequestInit interface to override defaults.\r\n     * @return A match metadata object.\r\n     *\r\n     * @example\r\n     * lobbyClient.getMatch('tic-tac-toe', 'xyz').then(console.log);\r\n     * // => {\r\n     * //   matchID: 'xyz',\r\n     * //   gameName: 'tic-tac-toe',\r\n     * //   players: [{ id: 0, name: 'Alice' }, { id: 1 }]\r\n     * // }\r\n     */\n\n  }, {\n    key: \"getMatch\",\n    value: function () {\n      var _getMatch = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(gameName, matchID, init) {\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                assertGameName(gameName);\n                assertMatchID(matchID);\n                return _context5.abrupt(\"return\", this.request(\"/games/\".concat(gameName, \"/\").concat(matchID), init));\n\n              case 3:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function getMatch(_x9, _x10, _x11) {\n        return _getMatch.apply(this, arguments);\n      }\n\n      return getMatch;\n    }()\n    /**\r\n     * Create a new match for a specific game type.\r\n     * @param  gameName The game to create a match for, e.g. 'tic-tac-toe'.\r\n     * @param  body     Options required to configure match creation.\r\n     * @param  init     Optional RequestInit interface to override defaults.\r\n     * @return An object containing the created `matchID`.\r\n     *\r\n     * @example\r\n     * lobbyClient.createMatch('tic-tac-toe', { numPlayers: 2 })\r\n     *   .then(console.log);\r\n     * // => { matchID: 'xyz' }\r\n     */\n\n  }, {\n    key: \"createMatch\",\n    value: function () {\n      var _createMatch = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(gameName, body, init) {\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                assertGameName(gameName);\n                validateBody(body, {\n                  numPlayers: 'number'\n                });\n                return _context6.abrupt(\"return\", this.post(\"/games/\".concat(gameName, \"/create\"), {\n                  body: body,\n                  init: init\n                }));\n\n              case 3:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      function createMatch(_x12, _x13, _x14) {\n        return _createMatch.apply(this, arguments);\n      }\n\n      return createMatch;\n    }()\n    /**\r\n     * Join a match using its matchID.\r\n     * @param  gameName The matchs game type, e.g. 'tic-tac-toe'.\r\n     * @param  matchID  Match ID for the match to join.\r\n     * @param  body     Options required to join match.\r\n     * @param  init     Optional RequestInit interface to override defaults.\r\n     * @return Object containing `playerCredentials` for the player who joined.\r\n     *\r\n     * @example\r\n     * lobbyClient.joinMatch('tic-tac-toe', 'xyz', {\r\n     *   playerID: '1',\r\n     *   playerName: 'Bob',\r\n     * }).then(console.log);\r\n     * // => { playerID: '1', playerCredentials: 'random-string' }\r\n     */\n\n  }, {\n    key: \"joinMatch\",\n    value: function () {\n      var _joinMatch = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(gameName, matchID, body, init) {\n        return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                assertGameName(gameName);\n                assertMatchID(matchID);\n                validateBody(body, {\n                  playerID: ['string', 'undefined'],\n                  playerName: 'string'\n                });\n                return _context7.abrupt(\"return\", this.post(\"/games/\".concat(gameName, \"/\").concat(matchID, \"/join\"), {\n                  body: body,\n                  init: init\n                }));\n\n              case 4:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this);\n      }));\n\n      function joinMatch(_x15, _x16, _x17, _x18) {\n        return _joinMatch.apply(this, arguments);\n      }\n\n      return joinMatch;\n    }()\n    /**\r\n     * Leave a previously joined match.\r\n     * @param  gameName The matchs game type, e.g. 'tic-tac-toe'.\r\n     * @param  matchID  Match ID for the match to leave.\r\n     * @param  body     Options required to leave match.\r\n     * @param  init     Optional RequestInit interface to override defaults.\r\n     * @return Promise resolves if successful.\r\n     *\r\n     * @example\r\n     * lobbyClient.leaveMatch('tic-tac-toe', 'xyz', {\r\n     *   playerID: '1',\r\n     *   credentials: 'credentials-returned-when-joining',\r\n     * })\r\n     *   .then(() => console.log('Left match.'))\r\n     *   .catch(error => console.error('Error leaving match', error));\r\n     */\n\n  }, {\n    key: \"leaveMatch\",\n    value: function () {\n      var _leaveMatch = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8(gameName, matchID, body, init) {\n        return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                assertGameName(gameName);\n                assertMatchID(matchID);\n                validateBody(body, {\n                  playerID: 'string',\n                  credentials: 'string'\n                });\n                _context8.next = 5;\n                return this.post(\"/games/\".concat(gameName, \"/\").concat(matchID, \"/leave\"), {\n                  body: body,\n                  init: init\n                });\n\n              case 5:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this);\n      }));\n\n      function leaveMatch(_x19, _x20, _x21, _x22) {\n        return _leaveMatch.apply(this, arguments);\n      }\n\n      return leaveMatch;\n    }()\n    /**\r\n     * Update a players name or custom metadata.\r\n     * @param  gameName The matchs game type, e.g. 'tic-tac-toe'.\r\n     * @param  matchID  Match ID for the match to update.\r\n     * @param  body     Options required to update player.\r\n     * @param  init     Optional RequestInit interface to override defaults.\r\n     * @return Promise resolves if successful.\r\n     *\r\n     * @example\r\n     * lobbyClient.updatePlayer('tic-tac-toe', 'xyz', {\r\n     *   playerID: '0',\r\n     *   credentials: 'credentials-returned-when-joining',\r\n     *   newName: 'Al',\r\n     * })\r\n     *   .then(() => console.log('Updated player data.'))\r\n     *   .catch(error => console.error('Error updating data', error));\r\n     */\n\n  }, {\n    key: \"updatePlayer\",\n    value: function () {\n      var _updatePlayer = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9(gameName, matchID, body, init) {\n        return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                assertGameName(gameName);\n                assertMatchID(matchID);\n                validateBody(body, {\n                  playerID: 'string',\n                  credentials: 'string'\n                });\n                _context9.next = 5;\n                return this.post(\"/games/\".concat(gameName, \"/\").concat(matchID, \"/update\"), {\n                  body: body,\n                  init: init\n                });\n\n              case 5:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, this);\n      }));\n\n      function updatePlayer(_x23, _x24, _x25, _x26) {\n        return _updatePlayer.apply(this, arguments);\n      }\n\n      return updatePlayer;\n    }()\n    /**\r\n     * Create a new match based on the configuration of the current match.\r\n     * @param  gameName The matchs game type, e.g. 'tic-tac-toe'.\r\n     * @param  matchID  Match ID for the match to play again.\r\n     * @param  body     Options required to configure match.\r\n     * @param  init     Optional RequestInit interface to override defaults.\r\n     * @return Object containing `nextMatchID`.\r\n     *\r\n     * @example\r\n     * lobbyClient.playAgain('tic-tac-toe', 'xyz', {\r\n     *   playerID: '0',\r\n     *   credentials: 'credentials-returned-when-joining',\r\n     * })\r\n     *   .then(({ nextMatchID }) => {\r\n     *     return lobbyClient.joinMatch('tic-tac-toe', nextMatchID, {\r\n     *       playerID: '0',\r\n     *       playerName: 'Al',\r\n     *     })\r\n     *   })\r\n     *   .then({ playerCredentials } => {\r\n     *     console.log(playerCredentials);\r\n     *   })\r\n     *   .catch(console.error);\r\n     */\n\n  }, {\n    key: \"playAgain\",\n    value: function () {\n      var _playAgain = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee10(gameName, matchID, body, init) {\n        return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                assertGameName(gameName);\n                assertMatchID(matchID);\n                validateBody(body, {\n                  playerID: 'string',\n                  credentials: 'string'\n                });\n                return _context10.abrupt(\"return\", this.post(\"/games/\".concat(gameName, \"/\").concat(matchID, \"/playAgain\"), {\n                  body: body,\n                  init: init\n                }));\n\n              case 4:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10, this);\n      }));\n\n      function playAgain(_x27, _x28, _x29, _x30) {\n        return _playAgain.apply(this, arguments);\n      }\n\n      return playAgain;\n    }()\n  }]);\n\n  return LobbyClient;\n}();\n\nexport { LobbyClient as L, LobbyClientError as a };","import _asyncToGenerator from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _regeneratorRuntime from \"D:/coding/tkfmtools/node_modules/@babel/runtime/regenerator\";\nimport { I as InitializeGame } from './initialize-8da88d04.js';\nvar Type;\n\n(function (Type) {\n  Type[Type[\"SYNC\"] = 0] = \"SYNC\";\n  Type[Type[\"ASYNC\"] = 1] = \"ASYNC\";\n})(Type || (Type = {}));\n/**\r\n * Type guard that checks if a storage implementation is synchronous.\r\n */\n\n\nfunction isSynchronous(storageAPI) {\n  return storageAPI.type() === Type.SYNC;\n}\n\nvar Async = /*#__PURE__*/function () {\n  function Async() {\n    _classCallCheck(this, Async);\n  }\n\n  _createClass(Async, [{\n    key: \"type\",\n    value:\n    /* istanbul ignore next */\n    function type() {\n      /* istanbul ignore next */\n      return Type.ASYNC;\n    }\n    /**\r\n     * Create a new match.\r\n     *\r\n     * This might just need to call setState and setMetadata in\r\n     * most implementations.\r\n     *\r\n     * However, it exists as a separate call so that the\r\n     * implementation can provision things differently when\r\n     * a match is created.  For example, it might stow away the\r\n     * initial match state in a separate field for easier retrieval.\r\n     */\n\n    /* istanbul ignore next */\n\n  }, {\n    key: \"createMatch\",\n    value: function () {\n      var _createMatch = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(matchID, opts) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!this.createGame) {\n                  _context.next = 5;\n                  break;\n                }\n\n                console.warn('The database connector does not implement a createMatch method.', '\\nUsing the deprecated createGame method instead.');\n                return _context.abrupt(\"return\", this.createGame(matchID, opts));\n\n              case 5:\n                console.error('The database connector does not implement a createMatch method.');\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function createMatch(_x, _x2) {\n        return _createMatch.apply(this, arguments);\n      }\n\n      return createMatch;\n    }()\n    /**\r\n     * Return all matches.\r\n     */\n\n    /* istanbul ignore next */\n\n  }, {\n    key: \"listMatches\",\n    value: function () {\n      var _listMatches = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(opts) {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (!this.listGames) {\n                  _context2.next = 5;\n                  break;\n                }\n\n                console.warn('The database connector does not implement a listMatches method.', '\\nUsing the deprecated listGames method instead.');\n                return _context2.abrupt(\"return\", this.listGames(opts));\n\n              case 5:\n                console.error('The database connector does not implement a listMatches method.');\n\n              case 6:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function listMatches(_x3) {\n        return _listMatches.apply(this, arguments);\n      }\n\n      return listMatches;\n    }()\n  }]);\n\n  return Async;\n}();\n\nvar Sync = /*#__PURE__*/function () {\n  function Sync() {\n    _classCallCheck(this, Sync);\n  }\n\n  _createClass(Sync, [{\n    key: \"type\",\n    value: function type() {\n      return Type.SYNC;\n    }\n    /**\r\n     * Connect.\r\n     */\n\n  }, {\n    key: \"connect\",\n    value: function connect() {\n      return;\n    }\n    /**\r\n     * Create a new match.\r\n     *\r\n     * This might just need to call setState and setMetadata in\r\n     * most implementations.\r\n     *\r\n     * However, it exists as a separate call so that the\r\n     * implementation can provision things differently when\r\n     * a match is created.  For example, it might stow away the\r\n     * initial match state in a separate field for easier retrieval.\r\n     */\n\n    /* istanbul ignore next */\n\n  }, {\n    key: \"createMatch\",\n    value: function createMatch(matchID, opts) {\n      if (this.createGame) {\n        console.warn('The database connector does not implement a createMatch method.', '\\nUsing the deprecated createGame method instead.');\n        return this.createGame(matchID, opts);\n      } else {\n        console.error('The database connector does not implement a createMatch method.');\n      }\n    }\n    /**\r\n     * Return all matches.\r\n     */\n\n    /* istanbul ignore next */\n\n  }, {\n    key: \"listMatches\",\n    value: function listMatches(opts) {\n      if (this.listGames) {\n        console.warn('The database connector does not implement a listMatches method.', '\\nUsing the deprecated listGames method instead.');\n        return this.listGames(opts);\n      } else {\n        console.error('The database connector does not implement a listMatches method.');\n      }\n    }\n  }]);\n\n  return Sync;\n}();\n/**\r\n * Creates a new match metadata object.\r\n */\n\n\nvar createMetadata = function createMetadata(_ref) {\n  var game = _ref.game,\n      unlisted = _ref.unlisted,\n      setupData = _ref.setupData,\n      numPlayers = _ref.numPlayers;\n  var metadata = {\n    gameName: game.name,\n    unlisted: !!unlisted,\n    players: {},\n    createdAt: Date.now(),\n    updatedAt: Date.now()\n  };\n  if (setupData !== undefined) metadata.setupData = setupData;\n\n  for (var playerIndex = 0; playerIndex < numPlayers; playerIndex++) {\n    metadata.players[playerIndex] = {\n      id: playerIndex\n    };\n  }\n\n  return metadata;\n};\n/**\r\n * Creates initial state and metadata for a new match.\r\n * If the provided `setupData` doesnt pass the games validation,\r\n * an error object is returned instead.\r\n */\n\n\nvar createMatch = function createMatch(_ref2) {\n  var game = _ref2.game,\n      numPlayers = _ref2.numPlayers,\n      setupData = _ref2.setupData,\n      unlisted = _ref2.unlisted;\n  if (!numPlayers || typeof numPlayers !== 'number') numPlayers = 2;\n  var setupDataError = game.validateSetupData && game.validateSetupData(setupData, numPlayers);\n  if (setupDataError !== undefined) return {\n    setupDataError: setupDataError\n  };\n  var metadata = createMetadata({\n    game: game,\n    numPlayers: numPlayers,\n    setupData: setupData,\n    unlisted: unlisted\n  });\n  var initialState = InitializeGame({\n    game: game,\n    numPlayers: numPlayers,\n    setupData: setupData\n  });\n  return {\n    metadata: metadata,\n    initialState: initialState\n  };\n};\n\nexport { Async as A, Sync as S, createMatch as c, isSynchronous as i };","import _asyncToGenerator from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _defineProperty from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectWithoutProperties from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"credentials\"],\n    _excluded2 = [\"credentials\"],\n    _excluded3 = [\"deltalog\"];\nimport _regeneratorRuntime from \"D:/coding/tkfmtools/node_modules/@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { applyMiddleware, createStore } from 'redux';\nimport { e as error, h as UNDO, R as REDO, M as MAKE_MOVE } from './turn-order-406c4349.js';\nimport { P as ProcessGameConfig, C as CreateGameReducer, T as TransientHandlingMiddleware, I as IsLongFormMove } from './reducer-efc3ec3e.js';\nimport { i as isSynchronous, c as createMatch } from './util-37c7b83c.js';\n/*\r\n * Copyright 2018 The boardgame.io Authors\r\n *\r\n * Use of this source code is governed by a MIT-style\r\n * license that can be found in the LICENSE file or at\r\n * https://opensource.org/licenses/MIT.\r\n */\n\n/**\r\n * Filter match data to get a player metadata object with credentials stripped.\r\n */\n\nvar filterMatchData = function filterMatchData(matchData) {\n  return Object.values(matchData.players).map(function (player) {\n    var credentials = player.credentials,\n        filteredData = _objectWithoutProperties(player, _excluded);\n\n    return filteredData;\n  });\n};\n/**\r\n * Remove player credentials from action payload\r\n */\n\n\nvar stripCredentialsFromAction = function stripCredentialsFromAction(action) {\n  var _action$payload = action.payload,\n      credentials = _action$payload.credentials,\n      payload = _objectWithoutProperties(_action$payload, _excluded2);\n\n  return _objectSpread(_objectSpread({}, action), {}, {\n    payload: payload\n  });\n};\n/**\r\n * Master\r\n *\r\n * Class that runs the game and maintains the authoritative state.\r\n * It uses the transportAPI to communicate with clients and the\r\n * storageAPI to communicate with the database.\r\n */\n\n\nvar Master = /*#__PURE__*/function () {\n  function Master(game, storageAPI, transportAPI, auth) {\n    _classCallCheck(this, Master);\n\n    this.game = ProcessGameConfig(game);\n    this.storageAPI = storageAPI;\n    this.transportAPI = transportAPI;\n\n    this.subscribeCallback = function () {};\n\n    this.auth = auth;\n  }\n\n  _createClass(Master, [{\n    key: \"subscribe\",\n    value: function subscribe(fn) {\n      this.subscribeCallback = fn;\n    }\n    /**\r\n     * Called on each move / event made by the client.\r\n     * Computes the new value of the game state and returns it\r\n     * along with a deltalog.\r\n     */\n\n  }, {\n    key: \"onUpdate\",\n    value: function () {\n      var _onUpdate = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(credAction, stateID, matchID, playerID) {\n        var metadata, _this$storageAPI$fetc, _yield$this$storageAP, isAuthentic, action, key, state, _this$storageAPI$fetc2, _yield$this$storageAP2, reducer, middleware, store, hasActivePlayers, isCurrentPlayer, move, prevState, _state, deltalog, stateWithoutDeltalog, newMetadata, writes;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!(!credAction || !credAction.payload)) {\n                  _context.next = 2;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", {\n                  error: 'missing action or action payload'\n                });\n\n              case 2:\n                if (!isSynchronous(this.storageAPI)) {\n                  _context.next = 7;\n                  break;\n                }\n\n                _this$storageAPI$fetc = this.storageAPI.fetch(matchID, {\n                  metadata: true\n                });\n                metadata = _this$storageAPI$fetc.metadata;\n                _context.next = 11;\n                break;\n\n              case 7:\n                _context.next = 9;\n                return this.storageAPI.fetch(matchID, {\n                  metadata: true\n                });\n\n              case 9:\n                _yield$this$storageAP = _context.sent;\n                metadata = _yield$this$storageAP.metadata;\n\n              case 11:\n                if (!this.auth) {\n                  _context.next = 17;\n                  break;\n                }\n\n                _context.next = 14;\n                return this.auth.authenticateCredentials({\n                  playerID: playerID,\n                  credentials: credAction.payload.credentials,\n                  metadata: metadata\n                });\n\n              case 14:\n                isAuthentic = _context.sent;\n\n                if (isAuthentic) {\n                  _context.next = 17;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", {\n                  error: 'unauthorized action'\n                });\n\n              case 17:\n                action = stripCredentialsFromAction(credAction);\n                key = matchID;\n\n                if (!isSynchronous(this.storageAPI)) {\n                  _context.next = 24;\n                  break;\n                }\n\n                _this$storageAPI$fetc2 = this.storageAPI.fetch(key, {\n                  state: true\n                });\n                state = _this$storageAPI$fetc2.state;\n                _context.next = 28;\n                break;\n\n              case 24:\n                _context.next = 26;\n                return this.storageAPI.fetch(key, {\n                  state: true\n                });\n\n              case 26:\n                _yield$this$storageAP2 = _context.sent;\n                state = _yield$this$storageAP2.state;\n\n              case 28:\n                if (!(state === undefined)) {\n                  _context.next = 31;\n                  break;\n                }\n\n                error(\"game not found, matchID=[\".concat(key, \"]\"));\n                return _context.abrupt(\"return\", {\n                  error: 'game not found'\n                });\n\n              case 31:\n                if (!(state.ctx.gameover !== undefined)) {\n                  _context.next = 34;\n                  break;\n                }\n\n                error(\"game over - matchID=[\".concat(key, \"] - playerID=[\").concat(playerID, \"]\") + \" - action[\".concat(action.payload.type, \"]\"));\n                return _context.abrupt(\"return\");\n\n              case 34:\n                reducer = CreateGameReducer({\n                  game: this.game\n                });\n                middleware = applyMiddleware(TransientHandlingMiddleware);\n                store = createStore(reducer, state, middleware); // Only allow UNDO / REDO if there is exactly one player\n                // that can make moves right now and the person doing the\n                // action is that player.\n\n                if (!(action.type == UNDO || action.type == REDO)) {\n                  _context.next = 43;\n                  break;\n                }\n\n                hasActivePlayers = state.ctx.activePlayers !== null;\n                isCurrentPlayer = state.ctx.currentPlayer === playerID;\n\n                if (!( // If activePlayers is empty, non-current players cant undo.\n                !hasActivePlayers && !isCurrentPlayer || // If player is not active or multiple players are active, cant undo.\n                hasActivePlayers && (state.ctx.activePlayers[playerID] === undefined || Object.keys(state.ctx.activePlayers).length > 1))) {\n                  _context.next = 43;\n                  break;\n                }\n\n                error(\"playerID=[\".concat(playerID, \"] cannot undo / redo right now\"));\n                return _context.abrupt(\"return\");\n\n              case 43:\n                if (this.game.flow.isPlayerActive(state.G, state.ctx, playerID)) {\n                  _context.next = 46;\n                  break;\n                }\n\n                error(\"player not active - playerID=[\".concat(playerID, \"]\") + \" - action[\".concat(action.payload.type, \"]\"));\n                return _context.abrupt(\"return\");\n\n              case 46:\n                // Get move for further checks\n                move = action.type == MAKE_MOVE ? this.game.flow.getMove(state.ctx, action.payload.type, playerID) : null; // Check whether the player is allowed to make the move.\n\n                if (!(action.type == MAKE_MOVE && !move)) {\n                  _context.next = 50;\n                  break;\n                }\n\n                error(\"move not processed - canPlayerMakeMove=false - playerID=[\".concat(playerID, \"]\") + \" - action[\".concat(action.payload.type, \"]\"));\n                return _context.abrupt(\"return\");\n\n              case 50:\n                if (!(state._stateID !== stateID && !(move && IsLongFormMove(move) && move.ignoreStaleStateID))) {\n                  _context.next = 53;\n                  break;\n                }\n\n                error(\"invalid stateID, was=[\".concat(stateID, \"], expected=[\").concat(state._stateID, \"]\") + \" - playerID=[\".concat(playerID, \"] - action[\").concat(action.payload.type, \"]\"));\n                return _context.abrupt(\"return\");\n\n              case 53:\n                prevState = store.getState(); // Update server's version of the store.\n\n                store.dispatch(action);\n                state = store.getState();\n                this.subscribeCallback({\n                  state: state,\n                  action: action,\n                  matchID: matchID\n                });\n\n                if (this.game.deltaState) {\n                  this.transportAPI.sendAll({\n                    type: 'patch',\n                    args: [matchID, stateID, prevState, state]\n                  });\n                } else {\n                  this.transportAPI.sendAll({\n                    type: 'update',\n                    args: [matchID, state]\n                  });\n                }\n\n                _state = state, deltalog = _state.deltalog, stateWithoutDeltalog = _objectWithoutProperties(_state, _excluded3);\n\n                if (metadata && !('gameover' in metadata)) {\n                  newMetadata = _objectSpread(_objectSpread({}, metadata), {}, {\n                    updatedAt: Date.now()\n                  });\n\n                  if (state.ctx.gameover !== undefined) {\n                    newMetadata.gameover = state.ctx.gameover;\n                  }\n                }\n\n                if (!isSynchronous(this.storageAPI)) {\n                  _context.next = 65;\n                  break;\n                }\n\n                this.storageAPI.setState(key, stateWithoutDeltalog, deltalog);\n                if (newMetadata) this.storageAPI.setMetadata(key, newMetadata);\n                _context.next = 69;\n                break;\n\n              case 65:\n                writes = [this.storageAPI.setState(key, stateWithoutDeltalog, deltalog)];\n\n                if (newMetadata) {\n                  writes.push(this.storageAPI.setMetadata(key, newMetadata));\n                }\n\n                _context.next = 69;\n                return Promise.all(writes);\n\n              case 69:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function onUpdate(_x, _x2, _x3, _x4) {\n        return _onUpdate.apply(this, arguments);\n      }\n\n      return onUpdate;\n    }()\n    /**\r\n     * Called when the client connects / reconnects.\r\n     * Returns the latest game state and the entire log.\r\n     */\n\n  }, {\n    key: \"onSync\",\n    value: function () {\n      var _onSync = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(matchID, playerID, credentials) {\n        var numPlayers,\n            key,\n            fetchOpts,\n            fetchResult,\n            state,\n            initialState,\n            log,\n            metadata,\n            isAuthentic,\n            match,\n            filteredMetadata,\n            syncInfo,\n            _args2 = arguments;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                numPlayers = _args2.length > 3 && _args2[3] !== undefined ? _args2[3] : 2;\n                key = matchID;\n                fetchOpts = {\n                  state: true,\n                  metadata: true,\n                  log: true,\n                  initialState: true\n                };\n\n                if (!isSynchronous(this.storageAPI)) {\n                  _context2.next = 7;\n                  break;\n                }\n\n                _context2.t0 = this.storageAPI.fetch(key, fetchOpts);\n                _context2.next = 10;\n                break;\n\n              case 7:\n                _context2.next = 9;\n                return this.storageAPI.fetch(key, fetchOpts);\n\n              case 9:\n                _context2.t0 = _context2.sent;\n\n              case 10:\n                fetchResult = _context2.t0;\n                state = fetchResult.state, initialState = fetchResult.initialState, log = fetchResult.log, metadata = fetchResult.metadata;\n\n                if (!(this.auth && playerID !== undefined && playerID !== null)) {\n                  _context2.next = 18;\n                  break;\n                }\n\n                _context2.next = 15;\n                return this.auth.authenticateCredentials({\n                  playerID: playerID,\n                  credentials: credentials,\n                  metadata: metadata\n                });\n\n              case 15:\n                isAuthentic = _context2.sent;\n\n                if (isAuthentic) {\n                  _context2.next = 18;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\", {\n                  error: 'unauthorized'\n                });\n\n              case 18:\n                if (!(state === undefined)) {\n                  _context2.next = 31;\n                  break;\n                }\n\n                match = createMatch({\n                  game: this.game,\n                  unlisted: true,\n                  numPlayers: numPlayers,\n                  setupData: undefined\n                });\n\n                if (!('setupDataError' in match)) {\n                  _context2.next = 22;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\", {\n                  error: 'game requires setupData'\n                });\n\n              case 22:\n                initialState = state = match.initialState;\n                metadata = match.metadata;\n                this.subscribeCallback({\n                  state: state,\n                  matchID: matchID\n                });\n\n                if (!isSynchronous(this.storageAPI)) {\n                  _context2.next = 29;\n                  break;\n                }\n\n                this.storageAPI.createMatch(key, {\n                  initialState: initialState,\n                  metadata: metadata\n                });\n                _context2.next = 31;\n                break;\n\n              case 29:\n                _context2.next = 31;\n                return this.storageAPI.createMatch(key, {\n                  initialState: initialState,\n                  metadata: metadata\n                });\n\n              case 31:\n                filteredMetadata = metadata ? filterMatchData(metadata) : undefined;\n                syncInfo = {\n                  state: state,\n                  log: log,\n                  filteredMetadata: filteredMetadata,\n                  initialState: initialState\n                };\n                this.transportAPI.send({\n                  playerID: playerID,\n                  type: 'sync',\n                  args: [matchID, syncInfo]\n                });\n                return _context2.abrupt(\"return\");\n\n              case 35:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function onSync(_x5, _x6, _x7) {\n        return _onSync.apply(this, arguments);\n      }\n\n      return onSync;\n    }()\n    /**\r\n     * Called when a client connects or disconnects.\r\n     * Updates and sends out metadata to reflect the players connection status.\r\n     */\n\n  }, {\n    key: \"onConnectionChange\",\n    value: function () {\n      var _onConnectionChange = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(matchID, playerID, credentials, connected) {\n        var key, metadata, _this$storageAPI$fetc3, _yield$this$storageAP3, isAuthentic, filteredMetadata;\n\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                key = matchID; // Ignore changes for clients without a playerID, e.g. spectators.\n\n                if (!(playerID === undefined || playerID === null)) {\n                  _context3.next = 3;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\");\n\n              case 3:\n                if (!isSynchronous(this.storageAPI)) {\n                  _context3.next = 8;\n                  break;\n                }\n\n                _this$storageAPI$fetc3 = this.storageAPI.fetch(key, {\n                  metadata: true\n                });\n                metadata = _this$storageAPI$fetc3.metadata;\n                _context3.next = 12;\n                break;\n\n              case 8:\n                _context3.next = 10;\n                return this.storageAPI.fetch(key, {\n                  metadata: true\n                });\n\n              case 10:\n                _yield$this$storageAP3 = _context3.sent;\n                metadata = _yield$this$storageAP3.metadata;\n\n              case 12:\n                if (!(metadata === undefined)) {\n                  _context3.next = 15;\n                  break;\n                }\n\n                error(\"metadata not found for matchID=[\".concat(key, \"]\"));\n                return _context3.abrupt(\"return\", {\n                  error: 'metadata not found'\n                });\n\n              case 15:\n                if (!(metadata.players[playerID] === undefined)) {\n                  _context3.next = 18;\n                  break;\n                }\n\n                error(\"Player not in the match, matchID=[\".concat(key, \"] playerID=[\").concat(playerID, \"]\"));\n                return _context3.abrupt(\"return\", {\n                  error: 'player not in the match'\n                });\n\n              case 18:\n                if (!this.auth) {\n                  _context3.next = 24;\n                  break;\n                }\n\n                _context3.next = 21;\n                return this.auth.authenticateCredentials({\n                  playerID: playerID,\n                  credentials: credentials,\n                  metadata: metadata\n                });\n\n              case 21:\n                isAuthentic = _context3.sent;\n\n                if (isAuthentic) {\n                  _context3.next = 24;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\", {\n                  error: 'unauthorized'\n                });\n\n              case 24:\n                metadata.players[playerID].isConnected = connected;\n                filteredMetadata = filterMatchData(metadata);\n                this.transportAPI.sendAll({\n                  type: 'matchData',\n                  args: [matchID, filteredMetadata]\n                });\n\n                if (!isSynchronous(this.storageAPI)) {\n                  _context3.next = 31;\n                  break;\n                }\n\n                this.storageAPI.setMetadata(key, metadata);\n                _context3.next = 33;\n                break;\n\n              case 31:\n                _context3.next = 33;\n                return this.storageAPI.setMetadata(key, metadata);\n\n              case 33:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function onConnectionChange(_x8, _x9, _x10, _x11) {\n        return _onConnectionChange.apply(this, arguments);\n      }\n\n      return onConnectionChange;\n    }()\n  }, {\n    key: \"onChatMessage\",\n    value: function () {\n      var _onChatMessage = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(matchID, chatMessage, credentials) {\n        var key, _yield$this$storageAP4, metadata, isAuthentic;\n\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                key = matchID;\n\n                if (!this.auth) {\n                  _context4.next = 13;\n                  break;\n                }\n\n                _context4.next = 4;\n                return this.storageAPI.fetch(key, {\n                  metadata: true\n                });\n\n              case 4:\n                _yield$this$storageAP4 = _context4.sent;\n                metadata = _yield$this$storageAP4.metadata;\n\n                if (chatMessage && typeof chatMessage.sender === 'string') {\n                  _context4.next = 8;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\", {\n                  error: 'unauthorized'\n                });\n\n              case 8:\n                _context4.next = 10;\n                return this.auth.authenticateCredentials({\n                  playerID: chatMessage.sender,\n                  credentials: credentials,\n                  metadata: metadata\n                });\n\n              case 10:\n                isAuthentic = _context4.sent;\n\n                if (isAuthentic) {\n                  _context4.next = 13;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\", {\n                  error: 'unauthorized'\n                });\n\n              case 13:\n                this.transportAPI.sendAll({\n                  type: 'chat',\n                  args: [matchID, chatMessage]\n                });\n\n              case 14:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function onChatMessage(_x12, _x13, _x14) {\n        return _onChatMessage.apply(this, arguments);\n      }\n\n      return onChatMessage;\n    }()\n  }]);\n\n  return Master;\n}();\n\nexport { Master as M };","import _objectWithoutProperties from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _slicedToArray from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _defineProperty from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _excluded = [\"redact\"];\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { x as PlayerView } from './turn-order-406c4349.js';\nimport { createPatch } from 'rfc6902';\n\nvar applyPlayerView = function applyPlayerView(game, playerID, state) {\n  return _objectSpread(_objectSpread({}, state), {}, {\n    G: game.playerView(state.G, state.ctx, playerID),\n    plugins: PlayerView(state, {\n      playerID: playerID,\n      game: game\n    }),\n    deltalog: undefined,\n    _undo: [],\n    _redo: []\n  });\n};\n/** Gets a function that filters the TransportData for a given player and game. */\n\n\nvar getFilterPlayerView = function getFilterPlayerView(game) {\n  return function (playerID, payload) {\n    switch (payload.type) {\n      case 'patch':\n        {\n          var _payload$args = _slicedToArray(payload.args, 4),\n              matchID = _payload$args[0],\n              stateID = _payload$args[1],\n              prevState = _payload$args[2],\n              state = _payload$args[3];\n\n          var log = redactLog(state.deltalog, playerID);\n          var filteredState = applyPlayerView(game, playerID, state);\n          var newStateID = state._stateID;\n          var prevFilteredState = applyPlayerView(game, playerID, prevState);\n          var patch = createPatch(prevFilteredState, filteredState);\n          return {\n            type: 'patch',\n            args: [matchID, stateID, newStateID, patch, log]\n          };\n        }\n\n      case 'update':\n        {\n          var _payload$args2 = _slicedToArray(payload.args, 2),\n              _matchID = _payload$args2[0],\n              _state = _payload$args2[1];\n\n          var _log = redactLog(_state.deltalog, playerID);\n\n          var _filteredState = applyPlayerView(game, playerID, _state);\n\n          return {\n            type: 'update',\n            args: [_matchID, _filteredState, _log]\n          };\n        }\n\n      case 'sync':\n        {\n          var _payload$args3 = _slicedToArray(payload.args, 2),\n              _matchID2 = _payload$args3[0],\n              syncInfo = _payload$args3[1];\n\n          var _filteredState2 = applyPlayerView(game, playerID, syncInfo.state);\n\n          var _log2 = redactLog(syncInfo.log, playerID);\n\n          var newSyncInfo = _objectSpread(_objectSpread({}, syncInfo), {}, {\n            state: _filteredState2,\n            log: _log2\n          });\n\n          return {\n            type: 'sync',\n            args: [_matchID2, newSyncInfo]\n          };\n        }\n\n      default:\n        {\n          return payload;\n        }\n    }\n  };\n};\n/**\r\n * Redact the log.\r\n *\r\n * @param {Array} log - The game log (or deltalog).\r\n * @param {String} playerID - The playerID that this log is\r\n *                            to be sent to.\r\n */\n\n\nfunction redactLog(log, playerID) {\n  if (log === undefined) {\n    return log;\n  }\n\n  return log.map(function (logEvent) {\n    // filter for all other players and spectators.\n    if (playerID !== null && +playerID === +logEvent.action.payload.playerID) {\n      return logEvent;\n    }\n\n    if (logEvent.redact !== true) {\n      return logEvent;\n    }\n\n    var payload = _objectSpread(_objectSpread({}, logEvent.action.payload), {}, {\n      args: null\n    });\n\n    var filteredEvent = _objectSpread(_objectSpread({}, logEvent), {}, {\n      action: _objectSpread(_objectSpread({}, logEvent.action), {}, {\n        payload: payload\n      })\n    });\n\n    var redact = filteredEvent.redact,\n        remaining = _objectWithoutProperties(filteredEvent, _excluded);\n\n    return remaining;\n  });\n}\n\nexport { getFilterPlayerView as g };","import _asyncToGenerator from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectWithoutProperties from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _get from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/get\";\nimport _wrapNativeSuper from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/wrapNativeSuper\";\nimport _slicedToArray from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _toConsumableArray from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nvar _excluded = [\"playerID\"],\n    _excluded2 = [\"master\"],\n    _excluded3 = [\"socket\", \"socketOpts\", \"server\"];\nimport _regeneratorRuntime from \"D:/coding/tkfmtools/node_modules/@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { T as Transport } from './transport-ce07b771.js';\nimport { S as Sync } from './util-37c7b83c.js';\nimport { M as Master } from './master-6e556fa8.js';\nimport { g as getFilterPlayerView } from './filter-player-view-7cb2b79d.js';\nimport ioNamespace__default from 'socket.io-client';\n/*\r\n * Copyright 2017 The boardgame.io Authors\r\n *\r\n * Use of this source code is governed by a MIT-style\r\n * license that can be found in the LICENSE file or at\r\n * https://opensource.org/licenses/MIT.\r\n */\n\n/**\r\n * InMemory data storage.\r\n */\n\nvar InMemory = /*#__PURE__*/function (_Sync) {\n  _inherits(InMemory, _Sync);\n\n  var _super = _createSuper(InMemory);\n\n  /**\r\n   * Creates a new InMemory storage.\r\n   */\n  function InMemory() {\n    var _this;\n\n    _classCallCheck(this, InMemory);\n\n    _this = _super.call(this);\n    _this.state = new Map();\n    _this.initial = new Map();\n    _this.metadata = new Map();\n    _this.log = new Map();\n    return _this;\n  }\n  /**\r\n   * Create a new match.\r\n   *\r\n   * @override\r\n   */\n\n\n  _createClass(InMemory, [{\n    key: \"createMatch\",\n    value: function createMatch(matchID, opts) {\n      this.initial.set(matchID, opts.initialState);\n      this.setState(matchID, opts.initialState);\n      this.setMetadata(matchID, opts.metadata);\n    }\n    /**\r\n     * Write the match metadata to the in-memory object.\r\n     */\n\n  }, {\n    key: \"setMetadata\",\n    value: function setMetadata(matchID, metadata) {\n      this.metadata.set(matchID, metadata);\n    }\n    /**\r\n     * Write the match state to the in-memory object.\r\n     */\n\n  }, {\n    key: \"setState\",\n    value: function setState(matchID, state, deltalog) {\n      if (deltalog && deltalog.length > 0) {\n        var log = this.log.get(matchID) || [];\n        this.log.set(matchID, [].concat(_toConsumableArray(log), _toConsumableArray(deltalog)));\n      }\n\n      this.state.set(matchID, state);\n    }\n    /**\r\n     * Fetches state for a particular matchID.\r\n     */\n\n  }, {\n    key: \"fetch\",\n    value: function fetch(matchID, opts) {\n      var result = {};\n\n      if (opts.state) {\n        result.state = this.state.get(matchID);\n      }\n\n      if (opts.metadata) {\n        result.metadata = this.metadata.get(matchID);\n      }\n\n      if (opts.log) {\n        result.log = this.log.get(matchID) || [];\n      }\n\n      if (opts.initialState) {\n        result.initialState = this.initial.get(matchID);\n      }\n\n      return result;\n    }\n    /**\r\n     * Remove the match state from the in-memory object.\r\n     */\n\n  }, {\n    key: \"wipe\",\n    value: function wipe(matchID) {\n      this.state.delete(matchID);\n      this.metadata.delete(matchID);\n    }\n    /**\r\n     * Return all keys.\r\n     *\r\n     * @override\r\n     */\n\n  }, {\n    key: \"listMatches\",\n    value: function listMatches(opts) {\n      return _toConsumableArray(this.metadata.entries()).filter(function (_ref) {\n        var _ref2 = _slicedToArray(_ref, 2),\n            metadata = _ref2[1];\n\n        if (!opts) {\n          return true;\n        }\n\n        if (opts.gameName !== undefined && metadata.gameName !== opts.gameName) {\n          return false;\n        }\n\n        if (opts.where !== undefined) {\n          if (opts.where.isGameover !== undefined) {\n            var isGameover = metadata.gameover !== undefined;\n\n            if (isGameover !== opts.where.isGameover) {\n              return false;\n            }\n          }\n\n          if (opts.where.updatedBefore !== undefined && metadata.updatedAt >= opts.where.updatedBefore) {\n            return false;\n          }\n\n          if (opts.where.updatedAfter !== undefined && metadata.updatedAt <= opts.where.updatedAfter) {\n            return false;\n          }\n        }\n\n        return true;\n      }).map(function (_ref3) {\n        var _ref4 = _slicedToArray(_ref3, 1),\n            key = _ref4[0];\n\n        return key;\n      });\n    }\n  }]);\n\n  return InMemory;\n}(Sync);\n\nvar WithLocalStorageMap = /*#__PURE__*/function (_Map) {\n  _inherits(WithLocalStorageMap, _Map);\n\n  var _super2 = _createSuper(WithLocalStorageMap);\n\n  function WithLocalStorageMap(key) {\n    var _this2;\n\n    _classCallCheck(this, WithLocalStorageMap);\n\n    _this2 = _super2.call(this);\n    _this2.key = key;\n    var cache = JSON.parse(localStorage.getItem(_this2.key)) || [];\n    cache.forEach(function (entry) {\n      var _this3;\n\n      return (_this3 = _this2).set.apply(_this3, _toConsumableArray(entry));\n    });\n    return _this2;\n  }\n\n  _createClass(WithLocalStorageMap, [{\n    key: \"sync\",\n    value: function sync() {\n      var entries = _toConsumableArray(this.entries());\n\n      localStorage.setItem(this.key, JSON.stringify(entries));\n    }\n  }, {\n    key: \"set\",\n    value: function set(key, value) {\n      _get(_getPrototypeOf(WithLocalStorageMap.prototype), \"set\", this).call(this, key, value);\n\n      this.sync();\n      return this;\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete(key) {\n      var result = _get(_getPrototypeOf(WithLocalStorageMap.prototype), \"delete\", this).call(this, key);\n\n      this.sync();\n      return result;\n    }\n  }]);\n\n  return WithLocalStorageMap;\n}( /*#__PURE__*/_wrapNativeSuper(Map));\n/**\r\n * locaStorage data storage.\r\n */\n\n\nvar LocalStorage = /*#__PURE__*/function (_InMemory) {\n  _inherits(LocalStorage, _InMemory);\n\n  var _super3 = _createSuper(LocalStorage);\n\n  function LocalStorage() {\n    var _this4;\n\n    var storagePrefix = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'bgio';\n\n    _classCallCheck(this, LocalStorage);\n\n    _this4 = _super3.call(this);\n\n    var StorageMap = function StorageMap(stateKey) {\n      return new WithLocalStorageMap(\"\".concat(storagePrefix, \"_\").concat(stateKey));\n    };\n\n    _this4.state = StorageMap('state');\n    _this4.initial = StorageMap('initial');\n    _this4.metadata = StorageMap('metadata');\n    _this4.log = StorageMap('log');\n    return _this4;\n  }\n\n  return LocalStorage;\n}(InMemory);\n/*\r\n * Copyright 2018 The boardgame.io Authors\r\n *\r\n * Use of this source code is governed by a MIT-style\r\n * license that can be found in the LICENSE file or at\r\n * https://opensource.org/licenses/MIT.\r\n */\n\n/**\r\n * Returns null if it is not a bot's turn.\r\n * Otherwise, returns a playerID of a bot that may play now.\r\n */\n\n\nfunction GetBotPlayer(state, bots) {\n  if (state.ctx.gameover !== undefined) {\n    return null;\n  }\n\n  if (state.ctx.activePlayers) {\n    for (var _i = 0, _Object$keys = Object.keys(bots); _i < _Object$keys.length; _i++) {\n      var key = _Object$keys[_i];\n\n      if (key in state.ctx.activePlayers) {\n        return key;\n      }\n    }\n  } else if (state.ctx.currentPlayer in bots) {\n    return state.ctx.currentPlayer;\n  }\n\n  return null;\n}\n/**\r\n * Creates a local version of the master that the client\r\n * can interact with.\r\n */\n\n\nvar LocalMaster = /*#__PURE__*/function (_Master) {\n  _inherits(LocalMaster, _Master);\n\n  var _super4 = _createSuper(LocalMaster);\n\n  function LocalMaster(_ref5) {\n    var _this5;\n\n    var game = _ref5.game,\n        bots = _ref5.bots,\n        storageKey = _ref5.storageKey,\n        persist = _ref5.persist;\n\n    _classCallCheck(this, LocalMaster);\n\n    var clientCallbacks = {};\n    var initializedBots = {};\n\n    if (game && game.ai && bots) {\n      for (var playerID in bots) {\n        var bot = bots[playerID];\n        initializedBots[playerID] = new bot({\n          game: game,\n          enumerate: game.ai.enumerate,\n          seed: game.seed\n        });\n      }\n    }\n\n    var send = function send(_ref6) {\n      var playerID = _ref6.playerID,\n          data = _objectWithoutProperties(_ref6, _excluded);\n\n      var callback = clientCallbacks[playerID];\n\n      if (callback !== undefined) {\n        callback(filterPlayerView(playerID, data));\n      }\n    };\n\n    var filterPlayerView = getFilterPlayerView(game);\n    var transportAPI = {\n      send: send,\n      sendAll: function sendAll(payload) {\n        for (var _playerID in clientCallbacks) {\n          send(_objectSpread({\n            playerID: _playerID\n          }, payload));\n        }\n      }\n    };\n    var storage = persist ? new LocalStorage(storageKey) : new InMemory();\n    _this5 = _super4.call(this, game, storage, transportAPI);\n\n    _this5.connect = function (playerID, callback) {\n      clientCallbacks[playerID] = callback;\n    };\n\n    _this5.subscribe(function (_ref7) {\n      var state = _ref7.state,\n          matchID = _ref7.matchID;\n\n      if (!bots) {\n        return;\n      }\n\n      var botPlayer = GetBotPlayer(state, initializedBots);\n\n      if (botPlayer !== null) {\n        setTimeout( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n          var botAction;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  _context.next = 2;\n                  return initializedBots[botPlayer].play(state, botPlayer);\n\n                case 2:\n                  botAction = _context.sent;\n                  _context.next = 5;\n                  return _this5.onUpdate(botAction.action, state._stateID, matchID, botAction.action.payload.playerID);\n\n                case 5:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        })), 100);\n      }\n    });\n\n    return _this5;\n  }\n\n  return LocalMaster;\n}(Master);\n/**\r\n * Local\r\n *\r\n * Transport interface that embeds a GameMaster within it\r\n * that you can connect multiple clients to.\r\n */\n\n\nvar LocalTransport = /*#__PURE__*/function (_Transport) {\n  _inherits(LocalTransport, _Transport);\n\n  var _super5 = _createSuper(LocalTransport);\n\n  /**\r\n   * Creates a new Mutiplayer instance.\r\n   * @param {string} matchID - The game ID to connect to.\r\n   * @param {string} playerID - The player ID associated with this client.\r\n   * @param {string} gameName - The game type (the `name` field in `Game`).\r\n   * @param {string} numPlayers - The number of players.\r\n   */\n  function LocalTransport(_ref9) {\n    var _this6;\n\n    var master = _ref9.master,\n        opts = _objectWithoutProperties(_ref9, _excluded2);\n\n    _classCallCheck(this, LocalTransport);\n\n    _this6 = _super5.call(this, opts);\n    _this6.master = master;\n    return _this6;\n  }\n\n  _createClass(LocalTransport, [{\n    key: \"sendChatMessage\",\n    value: function sendChatMessage(matchID, chatMessage) {\n      var _this$master;\n\n      var args = [matchID, chatMessage, this.credentials];\n\n      (_this$master = this.master).onChatMessage.apply(_this$master, args);\n    }\n  }, {\n    key: \"sendAction\",\n    value: function sendAction(state, action) {\n      this.master.onUpdate(action, state._stateID, this.matchID, this.playerID);\n    }\n  }, {\n    key: \"requestSync\",\n    value: function requestSync() {\n      this.master.onSync(this.matchID, this.playerID, this.credentials, this.numPlayers);\n    }\n  }, {\n    key: \"connect\",\n    value: function connect() {\n      var _this7 = this;\n\n      this.setConnectionStatus(true);\n      this.master.connect(this.playerID, function (data) {\n        return _this7.notifyClient(data);\n      });\n      this.requestSync();\n    }\n  }, {\n    key: \"disconnect\",\n    value: function disconnect() {\n      this.setConnectionStatus(false);\n    }\n  }, {\n    key: \"updateMatchID\",\n    value: function updateMatchID(id) {\n      this.matchID = id;\n      this.connect();\n    }\n  }, {\n    key: \"updatePlayerID\",\n    value: function updatePlayerID(id) {\n      this.playerID = id;\n      this.connect();\n    }\n  }, {\n    key: \"updateCredentials\",\n    value: function updateCredentials(credentials) {\n      this.credentials = credentials;\n      this.connect();\n    }\n  }]);\n\n  return LocalTransport;\n}(Transport);\n/**\r\n * Global map storing local master instances.\r\n */\n\n\nvar localMasters = new Map();\n/**\r\n * Create a local transport.\r\n */\n\nfunction Local() {\n  var _ref10 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      bots = _ref10.bots,\n      persist = _ref10.persist,\n      storageKey = _ref10.storageKey;\n\n  return function (transportOpts) {\n    var gameKey = transportOpts.gameKey,\n        game = transportOpts.game;\n    var master;\n    var instance = localMasters.get(gameKey);\n\n    if (instance && instance.bots === bots && instance.storageKey === storageKey && instance.persist === persist) {\n      master = instance.master;\n    }\n\n    if (!master) {\n      master = new LocalMaster({\n        game: game,\n        bots: bots,\n        persist: persist,\n        storageKey: storageKey\n      });\n      localMasters.set(gameKey, {\n        master: master,\n        bots: bots,\n        persist: persist,\n        storageKey: storageKey\n      });\n    }\n\n    return new LocalTransport(_objectSpread({\n      master: master\n    }, transportOpts));\n  };\n}\n/*\r\n * Copyright 2017 The boardgame.io Authors\r\n *\r\n * Use of this source code is governed by a MIT-style\r\n * license that can be found in the LICENSE file or at\r\n * https://opensource.org/licenses/MIT.\r\n */\n\n\nvar io = ioNamespace__default;\n/**\r\n * SocketIO\r\n *\r\n * Transport interface that interacts with the Master via socket.io.\r\n */\n\nvar SocketIOTransport = /*#__PURE__*/function (_Transport2) {\n  _inherits(SocketIOTransport, _Transport2);\n\n  var _super6 = _createSuper(SocketIOTransport);\n\n  /**\r\n   * Creates a new Multiplayer instance.\r\n   * @param {object} socket - Override for unit tests.\r\n   * @param {object} socketOpts - Options to pass to socket.io.\r\n   * @param {object} store - Redux store\r\n   * @param {string} matchID - The game ID to connect to.\r\n   * @param {string} playerID - The player ID associated with this client.\r\n   * @param {string} credentials - Authentication credentials\r\n   * @param {string} gameName - The game type (the `name` field in `Game`).\r\n   * @param {string} numPlayers - The number of players.\r\n   * @param {string} server - The game server in the form of 'hostname:port'. Defaults to the server serving the client if not provided.\r\n   */\n  function SocketIOTransport(_ref11) {\n    var _this8;\n\n    var socket = _ref11.socket,\n        socketOpts = _ref11.socketOpts,\n        server = _ref11.server,\n        opts = _objectWithoutProperties(_ref11, _excluded3);\n\n    _classCallCheck(this, SocketIOTransport);\n\n    _this8 = _super6.call(this, opts);\n    _this8.server = server;\n    _this8.socket = socket;\n    _this8.socketOpts = socketOpts;\n    return _this8;\n  }\n\n  _createClass(SocketIOTransport, [{\n    key: \"sendAction\",\n    value: function sendAction(state, action) {\n      var _this$socket;\n\n      var args = [action, state._stateID, this.matchID, this.playerID];\n\n      (_this$socket = this.socket).emit.apply(_this$socket, ['update'].concat(args));\n    }\n  }, {\n    key: \"sendChatMessage\",\n    value: function sendChatMessage(matchID, chatMessage) {\n      var _this$socket2;\n\n      var args = [matchID, chatMessage, this.credentials];\n\n      (_this$socket2 = this.socket).emit.apply(_this$socket2, ['chat'].concat(args));\n    }\n  }, {\n    key: \"connect\",\n    value: function connect() {\n      var _this9 = this;\n\n      if (!this.socket) {\n        if (this.server) {\n          var server = this.server;\n\n          if (server.search(/^https?:\\/\\//) == -1) {\n            server = 'http://' + this.server;\n          }\n\n          if (server.slice(-1) != '/') {\n            // add trailing slash if not already present\n            server = server + '/';\n          }\n\n          this.socket = io(server + this.gameName, this.socketOpts);\n        } else {\n          this.socket = io('/' + this.gameName, this.socketOpts);\n        }\n      } // Called when another player makes a move and the\n      // master broadcasts the update as a patch to other clients (including\n      // this one).\n\n\n      this.socket.on('patch', function (matchID, prevStateID, stateID, patch, deltalog) {\n        _this9.notifyClient({\n          type: 'patch',\n          args: [matchID, prevStateID, stateID, patch, deltalog]\n        });\n      }); // Called when another player makes a move and the\n      // master broadcasts the update to other clients (including\n      // this one).\n\n      this.socket.on('update', function (matchID, state, deltalog) {\n        _this9.notifyClient({\n          type: 'update',\n          args: [matchID, state, deltalog]\n        });\n      }); // Called when the client first connects to the master\n      // and requests the current game state.\n\n      this.socket.on('sync', function (matchID, syncInfo) {\n        _this9.notifyClient({\n          type: 'sync',\n          args: [matchID, syncInfo]\n        });\n      }); // Called when new player joins the match or changes\n      // it's connection status\n\n      this.socket.on('matchData', function (matchID, matchData) {\n        _this9.notifyClient({\n          type: 'matchData',\n          args: [matchID, matchData]\n        });\n      });\n      this.socket.on('chat', function (matchID, chatMessage) {\n        _this9.notifyClient({\n          type: 'chat',\n          args: [matchID, chatMessage]\n        });\n      }); // Keep track of connection status.\n\n      this.socket.on('connect', function () {\n        // Initial sync to get game state.\n        _this9.requestSync();\n\n        _this9.setConnectionStatus(true);\n      });\n      this.socket.on('disconnect', function () {\n        _this9.setConnectionStatus(false);\n      });\n    }\n  }, {\n    key: \"disconnect\",\n    value: function disconnect() {\n      this.socket.close();\n      this.socket = null;\n      this.setConnectionStatus(false);\n    }\n  }, {\n    key: \"requestSync\",\n    value: function requestSync() {\n      if (this.socket) {\n        var _this$socket3;\n\n        var args = [this.matchID, this.playerID, this.credentials, this.numPlayers];\n\n        (_this$socket3 = this.socket).emit.apply(_this$socket3, ['sync'].concat(args));\n      }\n    }\n  }, {\n    key: \"updateMatchID\",\n    value: function updateMatchID(id) {\n      this.matchID = id;\n      this.requestSync();\n    }\n  }, {\n    key: \"updatePlayerID\",\n    value: function updatePlayerID(id) {\n      this.playerID = id;\n      this.requestSync();\n    }\n  }, {\n    key: \"updateCredentials\",\n    value: function updateCredentials(credentials) {\n      this.credentials = credentials;\n      this.requestSync();\n    }\n  }]);\n\n  return SocketIOTransport;\n}(Transport);\n\nfunction SocketIO() {\n  var _ref12 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      server = _ref12.server,\n      socketOpts = _ref12.socketOpts;\n\n  return function (transportOpts) {\n    return new SocketIOTransport(_objectSpread({\n      server: server,\n      socketOpts: socketOpts\n    }, transportOpts));\n  };\n}\n\nexport { Local as L, SocketIO as S };","import _toConsumableArray from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _asyncToGenerator from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:/coding/tkfmtools/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _regeneratorRuntime from \"D:/coding/tkfmtools/node_modules/@babel/runtime/regenerator\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport 'nanoid/non-secure';\nimport './Debug-f39f426b.js';\nimport 'redux';\nimport './turn-order-406c4349.js';\nimport 'immer';\nimport 'lodash.isplainobject';\nimport './reducer-efc3ec3e.js';\nimport 'rfc6902';\nimport './initialize-8da88d04.js';\nimport './transport-ce07b771.js';\nimport { C as Client$1 } from './client-48f68c72.js';\nimport 'flatted';\nimport 'setimmediate';\nimport { M as MCTSBot } from './ai-7a5eea10.js';\nimport { L as LobbyClient } from './client-5f57c3f2.js';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Cookies from 'react-cookies';\nimport './util-37c7b83c.js';\nimport { S as SocketIO, L as Local } from './socketio-6e1083c8.js';\nimport './master-6e556fa8.js';\nimport './filter-player-view-7cb2b79d.js';\nimport 'socket.io-client';\n/*\r\n * Copyright 2017 The boardgame.io Authors\r\n *\r\n * Use of this source code is governed by a MIT-style\r\n * license that can be found in the LICENSE file or at\r\n * https://opensource.org/licenses/MIT.\r\n */\n\n/**\r\n * Client\r\n *\r\n * boardgame.io React client.\r\n *\r\n * @param {...object} game - The return value of `Game`.\r\n * @param {...object} numPlayers - The number of players.\r\n * @param {...object} board - The React component for the game.\r\n * @param {...object} loading - (optional) The React component for the loading state.\r\n * @param {...object} multiplayer - Set to a falsy value or a transportFactory, e.g., SocketIO()\r\n * @param {...object} debug - Enables the Debug UI.\r\n * @param {...object} enhancer - Optional enhancer to send to the Redux store\r\n *\r\n * Returns:\r\n *   A React component that wraps board and provides an\r\n *   API through props for it to interact with the framework\r\n *   and dispatch actions such as MAKE_MOVE, GAME_EVENT, RESET,\r\n *   UNDO and REDO.\r\n */\n\nfunction Client(opts) {\n  var _a;\n\n  var game = opts.game,\n      numPlayers = opts.numPlayers,\n      loading = opts.loading,\n      board = opts.board,\n      multiplayer = opts.multiplayer,\n      enhancer = opts.enhancer,\n      debug = opts.debug; // Component that is displayed before the client has synced\n  // with the game master.\n\n  if (loading === undefined) {\n    var Loading = function Loading() {\n      return React.createElement(\"div\", {\n        className: \"bgio-loading\"\n      }, \"connecting...\");\n    };\n\n    loading = Loading;\n  }\n  /*\r\n   * WrappedBoard\r\n   *\r\n   * The main React component that wraps the passed in\r\n   * board component and adds the API to its props.\r\n   */\n\n\n  return _a = /*#__PURE__*/function (_React$Component) {\n    _inherits(WrappedBoard, _React$Component);\n\n    var _super = _createSuper(WrappedBoard);\n\n    function WrappedBoard(props) {\n      var _this;\n\n      _classCallCheck(this, WrappedBoard);\n\n      _this = _super.call(this, props);\n\n      if (debug === undefined) {\n        debug = props.debug;\n      }\n\n      _this.client = Client$1({\n        game: game,\n        debug: debug,\n        numPlayers: numPlayers,\n        multiplayer: multiplayer,\n        matchID: props.matchID,\n        playerID: props.playerID,\n        credentials: props.credentials,\n        enhancer: enhancer\n      });\n      return _this;\n    }\n\n    _createClass(WrappedBoard, [{\n      key: \"componentDidMount\",\n      value: function componentDidMount() {\n        var _this2 = this;\n\n        this.unsubscribe = this.client.subscribe(function () {\n          return _this2.forceUpdate();\n        });\n        this.client.start();\n      }\n    }, {\n      key: \"componentWillUnmount\",\n      value: function componentWillUnmount() {\n        this.client.stop();\n        this.unsubscribe();\n      }\n    }, {\n      key: \"componentDidUpdate\",\n      value: function componentDidUpdate(prevProps) {\n        if (this.props.matchID != prevProps.matchID) {\n          this.client.updateMatchID(this.props.matchID);\n        }\n\n        if (this.props.playerID != prevProps.playerID) {\n          this.client.updatePlayerID(this.props.playerID);\n        }\n\n        if (this.props.credentials != prevProps.credentials) {\n          this.client.updateCredentials(this.props.credentials);\n        }\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var state = this.client.getState();\n\n        if (state === null) {\n          return React.createElement(loading);\n        }\n\n        var _board = null;\n\n        if (board) {\n          _board = React.createElement(board, _objectSpread(_objectSpread(_objectSpread({}, state), this.props), {}, {\n            isMultiplayer: !!multiplayer,\n            moves: this.client.moves,\n            events: this.client.events,\n            matchID: this.client.matchID,\n            playerID: this.client.playerID,\n            reset: this.client.reset,\n            undo: this.client.undo,\n            redo: this.client.redo,\n            log: this.client.log,\n            matchData: this.client.matchData,\n            sendChatMessage: this.client.sendChatMessage,\n            chatMessages: this.client.chatMessages\n          }));\n        }\n\n        return React.createElement(\"div\", {\n          className: \"bgio-client\"\n        }, _board);\n      }\n    }]);\n\n    return WrappedBoard;\n  }(React.Component), _a.propTypes = {\n    // The ID of a game to connect to.\n    // Only relevant in multiplayer.\n    matchID: PropTypes.string,\n    // The ID of the player associated with this client.\n    // Only relevant in multiplayer.\n    playerID: PropTypes.string,\n    // This client's authentication credentials.\n    // Only relevant in multiplayer.\n    credentials: PropTypes.string,\n    // Enable / disable the Debug UI.\n    debug: PropTypes.any\n  }, _a.defaultProps = {\n    matchID: 'default',\n    playerID: null,\n    credentials: null,\n    debug: true\n  }, _a;\n}\n/*\r\n * Copyright 2018 The boardgame.io Authors\r\n *\r\n * Use of this source code is governed by a MIT-style\r\n * license that can be found in the LICENSE file or at\r\n * https://opensource.org/licenses/MIT.\r\n */\n\n\nvar _LobbyConnectionImpl = /*#__PURE__*/function () {\n  function _LobbyConnectionImpl(_ref) {\n    var server = _ref.server,\n        gameComponents = _ref.gameComponents,\n        playerName = _ref.playerName,\n        playerCredentials = _ref.playerCredentials;\n\n    _classCallCheck(this, _LobbyConnectionImpl);\n\n    this.client = new LobbyClient({\n      server: server\n    });\n    this.gameComponents = gameComponents;\n    this.playerName = playerName || 'Visitor';\n    this.playerCredentials = playerCredentials;\n    this.matches = [];\n  }\n\n  _createClass(_LobbyConnectionImpl, [{\n    key: \"refresh\",\n    value: function () {\n      var _refresh = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var games, _iterator, _step, _this$matches, game, _yield$this$client$li, matches;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                this.matches = [];\n                _context.next = 4;\n                return this.client.listGames();\n\n              case 4:\n                games = _context.sent;\n                _iterator = _createForOfIteratorHelper(games);\n                _context.prev = 6;\n\n                _iterator.s();\n\n              case 8:\n                if ((_step = _iterator.n()).done) {\n                  _context.next = 19;\n                  break;\n                }\n\n                game = _step.value;\n\n                if (this._getGameComponents(game)) {\n                  _context.next = 12;\n                  break;\n                }\n\n                return _context.abrupt(\"continue\", 17);\n\n              case 12:\n                _context.next = 14;\n                return this.client.listMatches(game);\n\n              case 14:\n                _yield$this$client$li = _context.sent;\n                matches = _yield$this$client$li.matches;\n\n                (_this$matches = this.matches).push.apply(_this$matches, _toConsumableArray(matches));\n\n              case 17:\n                _context.next = 8;\n                break;\n\n              case 19:\n                _context.next = 24;\n                break;\n\n              case 21:\n                _context.prev = 21;\n                _context.t0 = _context[\"catch\"](6);\n\n                _iterator.e(_context.t0);\n\n              case 24:\n                _context.prev = 24;\n\n                _iterator.f();\n\n                return _context.finish(24);\n\n              case 27:\n                _context.next = 32;\n                break;\n\n              case 29:\n                _context.prev = 29;\n                _context.t1 = _context[\"catch\"](0);\n                throw new Error('failed to retrieve list of matches (' + _context.t1 + ')');\n\n              case 32:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 29], [6, 21, 24, 27]]);\n      }));\n\n      function refresh() {\n        return _refresh.apply(this, arguments);\n      }\n\n      return refresh;\n    }()\n  }, {\n    key: \"_getMatchInstance\",\n    value: function _getMatchInstance(matchID) {\n      var _iterator2 = _createForOfIteratorHelper(this.matches),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var inst = _step2.value;\n          if (inst['matchID'] === matchID) return inst;\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n    }\n  }, {\n    key: \"_getGameComponents\",\n    value: function _getGameComponents(gameName) {\n      var _iterator3 = _createForOfIteratorHelper(this.gameComponents),\n          _step3;\n\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var comp = _step3.value;\n          if (comp.game.name === gameName) return comp;\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n    }\n  }, {\n    key: \"_findPlayer\",\n    value: function _findPlayer(playerName) {\n      var _iterator4 = _createForOfIteratorHelper(this.matches),\n          _step4;\n\n      try {\n        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n          var inst = _step4.value;\n          if (inst.players.some(function (player) {\n            return player.name === playerName;\n          })) return inst;\n        }\n      } catch (err) {\n        _iterator4.e(err);\n      } finally {\n        _iterator4.f();\n      }\n    }\n  }, {\n    key: \"join\",\n    value: function () {\n      var _join = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(gameName, matchID, playerID) {\n        var inst, json;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                inst = this._findPlayer(this.playerName);\n\n                if (!inst) {\n                  _context2.next = 4;\n                  break;\n                }\n\n                throw new Error('player has already joined ' + inst.matchID);\n\n              case 4:\n                inst = this._getMatchInstance(matchID);\n\n                if (inst) {\n                  _context2.next = 7;\n                  break;\n                }\n\n                throw new Error('game instance ' + matchID + ' not found');\n\n              case 7:\n                _context2.next = 9;\n                return this.client.joinMatch(gameName, matchID, {\n                  playerID: playerID,\n                  playerName: this.playerName\n                });\n\n              case 9:\n                json = _context2.sent;\n                inst.players[Number.parseInt(playerID)].name = this.playerName;\n                this.playerCredentials = json.playerCredentials;\n                _context2.next = 17;\n                break;\n\n              case 14:\n                _context2.prev = 14;\n                _context2.t0 = _context2[\"catch\"](0);\n                throw new Error('failed to join match ' + matchID + ' (' + _context2.t0 + ')');\n\n              case 17:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[0, 14]]);\n      }));\n\n      function join(_x, _x2, _x3) {\n        return _join.apply(this, arguments);\n      }\n\n      return join;\n    }()\n  }, {\n    key: \"leave\",\n    value: function () {\n      var _leave = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(gameName, matchID) {\n        var inst, _iterator5, _step5, player;\n\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                inst = this._getMatchInstance(matchID);\n\n                if (inst) {\n                  _context3.next = 4;\n                  break;\n                }\n\n                throw new Error('match instance not found');\n\n              case 4:\n                _iterator5 = _createForOfIteratorHelper(inst.players);\n                _context3.prev = 5;\n\n                _iterator5.s();\n\n              case 7:\n                if ((_step5 = _iterator5.n()).done) {\n                  _context3.next = 17;\n                  break;\n                }\n\n                player = _step5.value;\n\n                if (!(player.name === this.playerName)) {\n                  _context3.next = 15;\n                  break;\n                }\n\n                _context3.next = 12;\n                return this.client.leaveMatch(gameName, matchID, {\n                  playerID: player.id.toString(),\n                  credentials: this.playerCredentials\n                });\n\n              case 12:\n                delete player.name;\n                delete this.playerCredentials;\n                return _context3.abrupt(\"return\");\n\n              case 15:\n                _context3.next = 7;\n                break;\n\n              case 17:\n                _context3.next = 22;\n                break;\n\n              case 19:\n                _context3.prev = 19;\n                _context3.t0 = _context3[\"catch\"](5);\n\n                _iterator5.e(_context3.t0);\n\n              case 22:\n                _context3.prev = 22;\n\n                _iterator5.f();\n\n                return _context3.finish(22);\n\n              case 25:\n                throw new Error('player not found in match');\n\n              case 28:\n                _context3.prev = 28;\n                _context3.t1 = _context3[\"catch\"](0);\n                throw new Error('failed to leave match ' + matchID + ' (' + _context3.t1 + ')');\n\n              case 31:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this, [[0, 28], [5, 19, 22, 25]]);\n      }));\n\n      function leave(_x4, _x5) {\n        return _leave.apply(this, arguments);\n      }\n\n      return leave;\n    }()\n  }, {\n    key: \"disconnect\",\n    value: function () {\n      var _disconnect = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n        var inst;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                inst = this._findPlayer(this.playerName);\n\n                if (!inst) {\n                  _context4.next = 4;\n                  break;\n                }\n\n                _context4.next = 4;\n                return this.leave(inst.gameName, inst.matchID);\n\n              case 4:\n                this.matches = [];\n                this.playerName = 'Visitor';\n\n              case 6:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function disconnect() {\n        return _disconnect.apply(this, arguments);\n      }\n\n      return disconnect;\n    }()\n  }, {\n    key: \"create\",\n    value: function () {\n      var _create = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(gameName, numPlayers) {\n        var comp;\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.prev = 0;\n                comp = this._getGameComponents(gameName);\n\n                if (comp) {\n                  _context5.next = 4;\n                  break;\n                }\n\n                throw new Error('game not found');\n\n              case 4:\n                if (!(numPlayers < comp.game.minPlayers || numPlayers > comp.game.maxPlayers)) {\n                  _context5.next = 6;\n                  break;\n                }\n\n                throw new Error('invalid number of players ' + numPlayers);\n\n              case 6:\n                _context5.next = 8;\n                return this.client.createMatch(gameName, {\n                  numPlayers: numPlayers\n                });\n\n              case 8:\n                _context5.next = 13;\n                break;\n\n              case 10:\n                _context5.prev = 10;\n                _context5.t0 = _context5[\"catch\"](0);\n                throw new Error('failed to create match for ' + gameName + ' (' + _context5.t0 + ')');\n\n              case 13:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this, [[0, 10]]);\n      }));\n\n      function create(_x6, _x7) {\n        return _create.apply(this, arguments);\n      }\n\n      return create;\n    }()\n  }]);\n\n  return _LobbyConnectionImpl;\n}();\n/**\r\n * LobbyConnection\r\n *\r\n * Lobby model.\r\n *\r\n * @param {string}   server - '<host>:<port>' of the server.\r\n * @param {Array}    gameComponents - A map of Board and Game objects for the supported games.\r\n * @param {string}   playerName - The name of the player.\r\n * @param {string}   playerCredentials - The credentials currently used by the player, if any.\r\n *\r\n * Returns:\r\n *   A JS object that synchronizes the list of running game instances with the server and provides an API to create/join/start instances.\r\n */\n\n\nfunction LobbyConnection(opts) {\n  return new _LobbyConnectionImpl(opts);\n}\n/*\r\n * Copyright 2018 The boardgame.io Authors.\r\n *\r\n * Use of this source code is governed by a MIT-style\r\n * license that can be found in the LICENSE file or at\r\n * https://opensource.org/licenses/MIT.\r\n */\n\n\nvar LobbyLoginForm = /*#__PURE__*/function (_React$Component2) {\n  _inherits(LobbyLoginForm, _React$Component2);\n\n  var _super2 = _createSuper(LobbyLoginForm);\n\n  function LobbyLoginForm() {\n    var _this3;\n\n    _classCallCheck(this, LobbyLoginForm);\n\n    _this3 = _super2.apply(this, arguments);\n    _this3.state = {\n      playerName: _this3.props.playerName,\n      nameErrorMsg: ''\n    };\n\n    _this3.onClickEnter = function () {\n      if (_this3.state.playerName === '') return;\n\n      _this3.props.onEnter(_this3.state.playerName);\n    };\n\n    _this3.onKeyPress = function (event) {\n      if (event.key === 'Enter') {\n        _this3.onClickEnter();\n      }\n    };\n\n    _this3.onChangePlayerName = function (event) {\n      var name = event.target.value.trim();\n\n      _this3.setState({\n        playerName: name,\n        nameErrorMsg: name.length > 0 ? '' : 'empty player name'\n      });\n    };\n\n    return _this3;\n  }\n\n  _createClass(LobbyLoginForm, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", null, React.createElement(\"p\", {\n        className: \"phase-title\"\n      }, \"Choose a player name:\"), React.createElement(\"input\", {\n        type: \"text\",\n        value: this.state.playerName,\n        onChange: this.onChangePlayerName,\n        onKeyPress: this.onKeyPress\n      }), React.createElement(\"span\", {\n        className: \"buttons\"\n      }, React.createElement(\"button\", {\n        className: \"buttons\",\n        onClick: this.onClickEnter\n      }, \"Enter\")), React.createElement(\"br\", null), React.createElement(\"span\", {\n        className: \"error-msg\"\n      }, this.state.nameErrorMsg, React.createElement(\"br\", null)));\n    }\n  }]);\n\n  return LobbyLoginForm;\n}(React.Component);\n\nLobbyLoginForm.defaultProps = {\n  playerName: ''\n};\n/*\r\n * Copyright 2018 The boardgame.io Authors.\r\n *\r\n * Use of this source code is governed by a MIT-style\r\n * license that can be found in the LICENSE file or at\r\n * https://opensource.org/licenses/MIT.\r\n */\n\nvar LobbyMatchInstance = /*#__PURE__*/function (_React$Component3) {\n  _inherits(LobbyMatchInstance, _React$Component3);\n\n  var _super3 = _createSuper(LobbyMatchInstance);\n\n  function LobbyMatchInstance() {\n    var _this4;\n\n    _classCallCheck(this, LobbyMatchInstance);\n\n    _this4 = _super3.apply(this, arguments);\n\n    _this4._createSeat = function (player) {\n      return player.name || '[free]';\n    };\n\n    _this4._createButtonJoin = function (inst, seatId) {\n      return React.createElement(\"button\", {\n        key: 'button-join-' + inst.matchID,\n        onClick: function onClick() {\n          return _this4.props.onClickJoin(inst.gameName, inst.matchID, '' + seatId);\n        }\n      }, \"Join\");\n    };\n\n    _this4._createButtonLeave = function (inst) {\n      return React.createElement(\"button\", {\n        key: 'button-leave-' + inst.matchID,\n        onClick: function onClick() {\n          return _this4.props.onClickLeave(inst.gameName, inst.matchID);\n        }\n      }, \"Leave\");\n    };\n\n    _this4._createButtonPlay = function (inst, seatId) {\n      return React.createElement(\"button\", {\n        key: 'button-play-' + inst.matchID,\n        onClick: function onClick() {\n          return _this4.props.onClickPlay(inst.gameName, {\n            matchID: inst.matchID,\n            playerID: '' + seatId,\n            numPlayers: inst.players.length\n          });\n        }\n      }, \"Play\");\n    };\n\n    _this4._createButtonSpectate = function (inst) {\n      return React.createElement(\"button\", {\n        key: 'button-spectate-' + inst.matchID,\n        onClick: function onClick() {\n          return _this4.props.onClickPlay(inst.gameName, {\n            matchID: inst.matchID,\n            numPlayers: inst.players.length\n          });\n        }\n      }, \"Spectate\");\n    };\n\n    _this4._createInstanceButtons = function (inst) {\n      var playerSeat = inst.players.find(function (player) {\n        return player.name === _this4.props.playerName;\n      });\n      var freeSeat = inst.players.find(function (player) {\n        return !player.name;\n      });\n\n      if (playerSeat && freeSeat) {\n        // already seated: waiting for match to start\n        return _this4._createButtonLeave(inst);\n      }\n\n      if (freeSeat) {\n        // at least 1 seat is available\n        return _this4._createButtonJoin(inst, freeSeat.id);\n      } // match is full\n\n\n      if (playerSeat) {\n        return React.createElement(\"div\", null, [_this4._createButtonPlay(inst, playerSeat.id), _this4._createButtonLeave(inst)]);\n      } // allow spectating\n\n\n      return _this4._createButtonSpectate(inst);\n    };\n\n    return _this4;\n  }\n\n  _createClass(LobbyMatchInstance, [{\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      var match = this.props.match;\n      var status = 'OPEN';\n\n      if (!match.players.some(function (player) {\n        return !player.name;\n      })) {\n        status = 'RUNNING';\n      }\n\n      return React.createElement(\"tr\", {\n        key: 'line-' + match.matchID\n      }, React.createElement(\"td\", {\n        key: 'cell-name-' + match.matchID\n      }, match.gameName), React.createElement(\"td\", {\n        key: 'cell-status-' + match.matchID\n      }, status), React.createElement(\"td\", {\n        key: 'cell-seats-' + match.matchID\n      }, match.players.map(function (player) {\n        return _this5._createSeat(player);\n      }).join(', ')), React.createElement(\"td\", {\n        key: 'cell-buttons-' + match.matchID\n      }, this._createInstanceButtons(match)));\n    }\n  }]);\n\n  return LobbyMatchInstance;\n}(React.Component);\n/*\r\n * Copyright 2018 The boardgame.io Authors.\r\n *\r\n * Use of this source code is governed by a MIT-style\r\n * license that can be found in the LICENSE file or at\r\n * https://opensource.org/licenses/MIT.\r\n */\n\n\nvar LobbyCreateMatchForm = /*#__PURE__*/function (_React$Component4) {\n  _inherits(LobbyCreateMatchForm, _React$Component4);\n\n  var _super4 = _createSuper(LobbyCreateMatchForm);\n\n  function LobbyCreateMatchForm(props) {\n    var _this6;\n\n    _classCallCheck(this, LobbyCreateMatchForm);\n\n    _this6 = _super4.call(this, props);\n    _this6.state = {\n      selectedGame: 0,\n      numPlayers: 2\n    };\n\n    _this6._createGameNameOption = function (game, idx) {\n      return React.createElement(\"option\", {\n        key: 'name-option-' + idx,\n        value: idx\n      }, game.game.name);\n    };\n\n    _this6._createNumPlayersOption = function (idx) {\n      return React.createElement(\"option\", {\n        key: 'num-option-' + idx,\n        value: idx\n      }, idx);\n    };\n\n    _this6._createNumPlayersRange = function (game) {\n      return Array.from({\n        length: game.maxPlayers + 1\n      }).map(function (_, i) {\n        return i;\n      }).slice(game.minPlayers);\n    };\n\n    _this6.onChangeNumPlayers = function (event) {\n      _this6.setState({\n        numPlayers: Number.parseInt(event.target.value)\n      });\n    };\n\n    _this6.onChangeSelectedGame = function (event) {\n      var idx = Number.parseInt(event.target.value);\n\n      _this6.setState({\n        selectedGame: idx,\n        numPlayers: _this6.props.games[idx].game.minPlayers\n      });\n    };\n\n    _this6.onClickCreate = function () {\n      _this6.props.createMatch(_this6.props.games[_this6.state.selectedGame].game.name, _this6.state.numPlayers);\n    };\n    /* fix min and max number of players */\n\n\n    var _iterator6 = _createForOfIteratorHelper(props.games),\n        _step6;\n\n    try {\n      for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n        var game = _step6.value;\n        var matchDetails = game.game;\n\n        if (!matchDetails.minPlayers) {\n          matchDetails.minPlayers = 1;\n        }\n\n        if (!matchDetails.maxPlayers) {\n          matchDetails.maxPlayers = 4;\n        }\n\n        console.assert(matchDetails.maxPlayers >= matchDetails.minPlayers);\n      }\n    } catch (err) {\n      _iterator6.e(err);\n    } finally {\n      _iterator6.f();\n    }\n\n    _this6.state = {\n      selectedGame: 0,\n      numPlayers: props.games[0].game.minPlayers\n    };\n    return _this6;\n  }\n\n  _createClass(LobbyCreateMatchForm, [{\n    key: \"render\",\n    value: function render() {\n      var _this7 = this;\n\n      return React.createElement(\"div\", null, React.createElement(\"select\", {\n        value: this.state.selectedGame,\n        onChange: function onChange(evt) {\n          return _this7.onChangeSelectedGame(evt);\n        }\n      }, this.props.games.map(function (game, index) {\n        return _this7._createGameNameOption(game, index);\n      })), React.createElement(\"span\", null, \"Players:\"), React.createElement(\"select\", {\n        value: this.state.numPlayers,\n        onChange: this.onChangeNumPlayers\n      }, this._createNumPlayersRange(this.props.games[this.state.selectedGame].game).map(function (number) {\n        return _this7._createNumPlayersOption(number);\n      })), React.createElement(\"span\", {\n        className: \"buttons\"\n      }, React.createElement(\"button\", {\n        onClick: this.onClickCreate\n      }, \"Create\")));\n    }\n  }]);\n\n  return LobbyCreateMatchForm;\n}(React.Component);\n/*\r\n * Copyright 2018 The boardgame.io Authors.\r\n *\r\n * Use of this source code is governed by a MIT-style\r\n * license that can be found in the LICENSE file or at\r\n * https://opensource.org/licenses/MIT.\r\n */\n\n\nvar LobbyPhases;\n\n(function (LobbyPhases) {\n  LobbyPhases[\"ENTER\"] = \"enter\";\n  LobbyPhases[\"PLAY\"] = \"play\";\n  LobbyPhases[\"LIST\"] = \"list\";\n})(LobbyPhases || (LobbyPhases = {}));\n/**\r\n * Lobby\r\n *\r\n * React lobby component.\r\n *\r\n * @param {Array}  gameComponents - An array of Board and Game objects for the supported games.\r\n * @param {string} lobbyServer - Address of the lobby server (for example 'localhost:8000').\r\n *                               If not set, defaults to the server that served the page.\r\n * @param {string} gameServer - Address of the game server (for example 'localhost:8001').\r\n *                              If not set, defaults to the server that served the page.\r\n * @param {function} clientFactory - Function that is used to create the game clients.\r\n * @param {number} refreshInterval - Interval between server updates (default: 2000ms).\r\n * @param {bool}   debug - Enable debug information (default: false).\r\n *\r\n * Returns:\r\n *   A React component that provides a UI to create, list, join, leave, play or\r\n *   spectate matches (game instances).\r\n */\n\n\nvar Lobby = /*#__PURE__*/function (_React$Component5) {\n  _inherits(Lobby, _React$Component5);\n\n  var _super5 = _createSuper(Lobby);\n\n  function Lobby(props) {\n    var _this8;\n\n    _classCallCheck(this, Lobby);\n\n    _this8 = _super5.call(this, props);\n    _this8.state = {\n      phase: LobbyPhases.ENTER,\n      playerName: 'Visitor',\n      runningMatch: null,\n      errorMsg: '',\n      credentialStore: {}\n    };\n\n    _this8._createConnection = function (props) {\n      var name = _this8.state.playerName;\n      _this8.connection = LobbyConnection({\n        server: props.lobbyServer,\n        gameComponents: props.gameComponents,\n        playerName: name,\n        playerCredentials: _this8.state.credentialStore[name]\n      });\n    };\n\n    _this8._updateCredentials = function (playerName, credentials) {\n      _this8.setState(function (prevState) {\n        // clone store or componentDidUpdate will not be triggered\n        var store = Object.assign({}, prevState.credentialStore);\n        store[playerName] = credentials;\n        return {\n          credentialStore: store\n        };\n      });\n    };\n\n    _this8._updateConnection = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6() {\n      return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              _context6.next = 2;\n              return _this8.connection.refresh();\n\n            case 2:\n              _this8.forceUpdate();\n\n            case 3:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, _callee6);\n    }));\n\n    _this8._enterLobby = function (playerName) {\n      _this8.setState({\n        playerName: playerName,\n        phase: LobbyPhases.LIST\n      });\n    };\n\n    _this8._exitLobby = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7() {\n      return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              _context7.next = 2;\n              return _this8.connection.disconnect();\n\n            case 2:\n              _this8.setState({\n                phase: LobbyPhases.ENTER,\n                errorMsg: ''\n              });\n\n            case 3:\n            case \"end\":\n              return _context7.stop();\n          }\n        }\n      }, _callee7);\n    }));\n\n    _this8._createMatch = /*#__PURE__*/function () {\n      var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8(gameName, numPlayers) {\n        return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                _context8.prev = 0;\n                _context8.next = 3;\n                return _this8.connection.create(gameName, numPlayers);\n\n              case 3:\n                _context8.next = 5;\n                return _this8.connection.refresh();\n\n              case 5:\n                // rerender\n                _this8.setState({});\n\n                _context8.next = 11;\n                break;\n\n              case 8:\n                _context8.prev = 8;\n                _context8.t0 = _context8[\"catch\"](0);\n\n                _this8.setState({\n                  errorMsg: _context8.t0.message\n                });\n\n              case 11:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, null, [[0, 8]]);\n      }));\n\n      return function (_x8, _x9) {\n        return _ref4.apply(this, arguments);\n      };\n    }();\n\n    _this8._joinMatch = /*#__PURE__*/function () {\n      var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9(gameName, matchID, playerID) {\n        return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                _context9.prev = 0;\n                _context9.next = 3;\n                return _this8.connection.join(gameName, matchID, playerID);\n\n              case 3:\n                _context9.next = 5;\n                return _this8.connection.refresh();\n\n              case 5:\n                _this8._updateCredentials(_this8.connection.playerName, _this8.connection.playerCredentials);\n\n                _context9.next = 11;\n                break;\n\n              case 8:\n                _context9.prev = 8;\n                _context9.t0 = _context9[\"catch\"](0);\n\n                _this8.setState({\n                  errorMsg: _context9.t0.message\n                });\n\n              case 11:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, null, [[0, 8]]);\n      }));\n\n      return function (_x10, _x11, _x12) {\n        return _ref5.apply(this, arguments);\n      };\n    }();\n\n    _this8._leaveMatch = /*#__PURE__*/function () {\n      var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee10(gameName, matchID) {\n        return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                _context10.prev = 0;\n                _context10.next = 3;\n                return _this8.connection.leave(gameName, matchID);\n\n              case 3:\n                _context10.next = 5;\n                return _this8.connection.refresh();\n\n              case 5:\n                _this8._updateCredentials(_this8.connection.playerName, _this8.connection.playerCredentials);\n\n                _context10.next = 11;\n                break;\n\n              case 8:\n                _context10.prev = 8;\n                _context10.t0 = _context10[\"catch\"](0);\n\n                _this8.setState({\n                  errorMsg: _context10.t0.message\n                });\n\n              case 11:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10, null, [[0, 8]]);\n      }));\n\n      return function (_x13, _x14) {\n        return _ref6.apply(this, arguments);\n      };\n    }();\n\n    _this8._startMatch = function (gameName, matchOpts) {\n      var gameCode = _this8.connection._getGameComponents(gameName);\n\n      if (!gameCode) {\n        _this8.setState({\n          errorMsg: 'game ' + gameName + ' not supported'\n        });\n\n        return;\n      }\n\n      var multiplayer = undefined;\n\n      if (matchOpts.numPlayers > 1) {\n        multiplayer = _this8.props.gameServer ? SocketIO({\n          server: _this8.props.gameServer\n        }) : SocketIO();\n      }\n\n      if (matchOpts.numPlayers == 1) {\n        var maxPlayers = gameCode.game.maxPlayers;\n        var bots = {};\n\n        for (var i = 1; i < maxPlayers; i++) {\n          bots[i + ''] = MCTSBot;\n        }\n\n        multiplayer = Local({\n          bots: bots\n        });\n      }\n\n      var app = _this8.props.clientFactory({\n        game: gameCode.game,\n        board: gameCode.board,\n        debug: _this8.props.debug,\n        multiplayer: multiplayer\n      });\n\n      var match = {\n        app: app,\n        matchID: matchOpts.matchID,\n        playerID: matchOpts.numPlayers > 1 ? matchOpts.playerID : '0',\n        credentials: _this8.connection.playerCredentials\n      };\n\n      _this8.setState({\n        phase: LobbyPhases.PLAY,\n        runningMatch: match\n      });\n    };\n\n    _this8._exitMatch = function () {\n      _this8.setState({\n        phase: LobbyPhases.LIST,\n        runningMatch: null\n      });\n    };\n\n    _this8._getPhaseVisibility = function (phase) {\n      return _this8.state.phase !== phase ? 'hidden' : 'phase';\n    };\n\n    _this8.renderMatches = function (matches, playerName) {\n      return matches.map(function (match) {\n        var matchID = match.matchID,\n            gameName = match.gameName,\n            players = match.players;\n        return React.createElement(LobbyMatchInstance, {\n          key: 'instance-' + matchID,\n          match: {\n            matchID: matchID,\n            gameName: gameName,\n            players: Object.values(players)\n          },\n          playerName: playerName,\n          onClickJoin: _this8._joinMatch,\n          onClickLeave: _this8._leaveMatch,\n          onClickPlay: _this8._startMatch\n        });\n      });\n    };\n\n    _this8._createConnection(_this8.props);\n\n    return _this8;\n  }\n\n  _createClass(Lobby, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var cookie = Cookies.load('lobbyState') || {};\n\n      if (cookie.phase && cookie.phase === LobbyPhases.PLAY) {\n        cookie.phase = LobbyPhases.LIST;\n      }\n\n      this.setState({\n        phase: cookie.phase || LobbyPhases.ENTER,\n        playerName: cookie.playerName || 'Visitor',\n        credentialStore: cookie.credentialStore || {}\n      });\n\n      this._startRefreshInterval();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      var name = this.state.playerName;\n      var creds = this.state.credentialStore[name];\n\n      if (prevState.phase !== this.state.phase || prevState.credentialStore[name] !== creds || prevState.playerName !== name) {\n        this._createConnection(this.props);\n\n        this._updateConnection();\n\n        var cookie = {\n          phase: this.state.phase,\n          playerName: name,\n          credentialStore: this.state.credentialStore\n        };\n        Cookies.save('lobbyState', cookie, {\n          path: '/'\n        });\n      }\n\n      if (prevProps.refreshInterval !== this.props.refreshInterval) {\n        this._startRefreshInterval();\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this._clearRefreshInterval();\n    }\n  }, {\n    key: \"_startRefreshInterval\",\n    value: function _startRefreshInterval() {\n      this._clearRefreshInterval();\n\n      this._currentInterval = setInterval(this._updateConnection, this.props.refreshInterval);\n    }\n  }, {\n    key: \"_clearRefreshInterval\",\n    value: function _clearRefreshInterval() {\n      clearInterval(this._currentInterval);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          gameComponents = _this$props.gameComponents,\n          renderer = _this$props.renderer;\n      var _this$state = this.state,\n          errorMsg = _this$state.errorMsg,\n          playerName = _this$state.playerName,\n          phase = _this$state.phase,\n          runningMatch = _this$state.runningMatch;\n\n      if (renderer) {\n        return renderer({\n          errorMsg: errorMsg,\n          gameComponents: gameComponents,\n          matches: this.connection.matches,\n          phase: phase,\n          playerName: playerName,\n          runningMatch: runningMatch,\n          handleEnterLobby: this._enterLobby,\n          handleExitLobby: this._exitLobby,\n          handleCreateMatch: this._createMatch,\n          handleJoinMatch: this._joinMatch,\n          handleLeaveMatch: this._leaveMatch,\n          handleExitMatch: this._exitMatch,\n          handleRefreshMatches: this._updateConnection,\n          handleStartMatch: this._startMatch\n        });\n      }\n\n      return React.createElement(\"div\", {\n        id: \"lobby-view\",\n        style: {\n          padding: 50\n        }\n      }, React.createElement(\"div\", {\n        className: this._getPhaseVisibility(LobbyPhases.ENTER)\n      }, React.createElement(LobbyLoginForm, {\n        key: playerName,\n        playerName: playerName,\n        onEnter: this._enterLobby\n      })), React.createElement(\"div\", {\n        className: this._getPhaseVisibility(LobbyPhases.LIST)\n      }, React.createElement(\"p\", null, \"Welcome, \", playerName), React.createElement(\"div\", {\n        className: \"phase-title\",\n        id: \"match-creation\"\n      }, React.createElement(\"span\", null, \"Create a match:\"), React.createElement(LobbyCreateMatchForm, {\n        games: gameComponents,\n        createMatch: this._createMatch\n      })), React.createElement(\"p\", {\n        className: \"phase-title\"\n      }, \"Join a match:\"), React.createElement(\"div\", {\n        id: \"instances\"\n      }, React.createElement(\"table\", null, React.createElement(\"tbody\", null, this.renderMatches(this.connection.matches, playerName))), React.createElement(\"span\", {\n        className: \"error-msg\"\n      }, errorMsg, React.createElement(\"br\", null))), React.createElement(\"p\", {\n        className: \"phase-title\"\n      }, \"Matches that become empty are automatically deleted.\")), React.createElement(\"div\", {\n        className: this._getPhaseVisibility(LobbyPhases.PLAY)\n      }, runningMatch && React.createElement(runningMatch.app, {\n        matchID: runningMatch.matchID,\n        playerID: runningMatch.playerID,\n        credentials: runningMatch.credentials\n      }), React.createElement(\"div\", {\n        className: \"buttons\",\n        id: \"match-exit\"\n      }, React.createElement(\"button\", {\n        onClick: this._exitMatch\n      }, \"Exit match\"))), React.createElement(\"div\", {\n        className: \"buttons\",\n        id: \"lobby-exit\"\n      }, React.createElement(\"button\", {\n        onClick: this._exitLobby\n      }, \"Exit lobby\")));\n    }\n  }]);\n\n  return Lobby;\n}(React.Component);\n\nLobby.defaultProps = {\n  debug: false,\n  clientFactory: Client,\n  refreshInterval: 2000\n};\nexport { Client, Lobby };","import React, { useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { Button as MuiButton, Tooltip } from \"@material-ui/core\";\r\nimport {\r\n  BattleCtx,\r\n  BattleCharacter as Character,\r\n  IGameState,\r\n  PlayerID,\r\n} from \"types/battle\";\r\nimport { useLanguage } from \"containers/LanguageProvider\";\r\nimport CharacterDetailsPopover from \"./CharacterDetailsPopover\";\r\nimport ImageSupplier from \"components/ImageSupplier\";\r\nimport IconButton from \"components/IconButton\";\r\nimport {\r\n  ClockIcon,\r\n  ElseIcon,\r\n  GuardIcon,\r\n  ParalysisIcon,\r\n  SilenceIcon,\r\n  SleepIcon,\r\n  TauntIcon,\r\n} from \"components/icon\";\r\n\r\nenum CharacterButtonState {\r\n  PLAIN,\r\n  NOT_MOVABLE,\r\n  CAN_ULTIMATE,\r\n  SELECTED,\r\n  TARGETED,\r\n}\r\n\r\nexport const getCharacterButtonState = (\r\n  G: IGameState,\r\n  ctx: BattleCtx,\r\n  character: Character,\r\n  player: string\r\n) => {\r\n  if (\r\n    ctx.currentPlayer !== player &&\r\n    G.target[ctx.currentPlayer] === character.teamPosition\r\n  ) {\r\n    return CharacterButtonState.TARGETED;\r\n  }\r\n  if (\r\n    (player === \"1\" && ctx.turn === 1) ||\r\n    character.isDead ||\r\n    character.isMoved ||\r\n    character.isParalysis ||\r\n    character.isSleep ||\r\n    character.isBroken\r\n  ) {\r\n    return CharacterButtonState.NOT_MOVABLE;\r\n  }\r\n  if (ctx.currentPlayer === player) {\r\n    if (G.selected[ctx.currentPlayer] === character.teamPosition) {\r\n      return CharacterButtonState.SELECTED;\r\n    }\r\n    if (character.currentCD === 0 && !character.isSilence) {\r\n      return CharacterButtonState.CAN_ULTIMATE;\r\n    }\r\n  }\r\n  return CharacterButtonState.PLAIN;\r\n};\r\n\r\nconst CharacterStateTooltip = ({\r\n  tooltipText,\r\n  active,\r\n  children,\r\n}: {\r\n  tooltipText: string;\r\n  active: boolean;\r\n  children: React.ReactNode;\r\n}): JSX.Element => {\r\n  return (\r\n    <Tooltip title={<TooltipTextWrapper>{tooltipText}</TooltipTextWrapper>}>\r\n      <StateIcon $active={active}>{children}</StateIcon>\r\n    </Tooltip>\r\n  );\r\n};\r\n\r\nconst StateIcon = styled.span<{ $active: boolean }>`\r\n  margin-left: 0.4rem;\r\n  svg {\r\n    width: 1rem;\r\n    height: 1rem;\r\n    margin-bottom: 1px;\r\n    fill: ${(props) =>\r\n      props.theme.colors[props.$active ? \"secondary\" : \"dropdownHover\"]};\r\n  }\r\n`;\r\nconst TooltipTextWrapper = styled.span`\r\n  font-size: small;\r\n`;\r\n\r\nconst CharacterStateList = ({\r\n  character,\r\n}: {\r\n  character: Character;\r\n}): JSX.Element => {\r\n  const { pageString }: any = useLanguage();\r\n\r\n  return (\r\n    <ListWrapper>\r\n      <CharacterStateTooltip\r\n        tooltipText={\"CD\"}\r\n        active={character.currentCD === 0}\r\n      >\r\n        {ClockIcon}\r\n      </CharacterStateTooltip>\r\n      <TextWrapper>{` ${character.currentCD}`}</TextWrapper>\r\n      <CharacterStateTooltip\r\n        tooltipText={pageString.battle.index.controlPanel.guard}\r\n        active={character.isGuard}\r\n      >\r\n        {GuardIcon}\r\n      </CharacterStateTooltip>\r\n      <CharacterStateTooltip\r\n        tooltipText={pageString.battle.index.taunt}\r\n        active={character.isTaunt}\r\n      >\r\n        {TauntIcon}\r\n      </CharacterStateTooltip>\r\n      <CharacterStateTooltip\r\n        tooltipText={pageString.battle.index.silence}\r\n        active={character.isSilence}\r\n      >\r\n        {SilenceIcon}\r\n      </CharacterStateTooltip>\r\n      <CharacterStateTooltip\r\n        tooltipText={pageString.battle.index.sleep}\r\n        active={character.isSleep}\r\n      >\r\n        {SleepIcon}\r\n      </CharacterStateTooltip>\r\n      <CharacterStateTooltip\r\n        tooltipText={pageString.battle.index.paralysis}\r\n        active={character.isParalysis}\r\n      >\r\n        {ParalysisIcon}\r\n      </CharacterStateTooltip>\r\n    </ListWrapper>\r\n  );\r\n};\r\n\r\nconst ListWrapper = styled.div`\r\n  margin-left: 0.3rem;\r\n  white-space: nowrap;\r\n  > span:first-child {\r\n    margin-left: 0;\r\n  }\r\n  @media screen and (max-width: 600px) {\r\n    > span:nth-child(n + 4) {\r\n      display: none;\r\n    }\r\n  }\r\n`;\r\nconst TextWrapper = styled.span`\r\n  line-height: 1rem;\r\n  vertical-align: middle;\r\n  font-weight: bold;\r\n`;\r\n\r\nconst CharacterStats = ({\r\n  character,\r\n}: {\r\n  character: Character;\r\n}): JSX.Element => {\r\n  const { HP, maxHP, shield } = character;\r\n  const HPPercent = Math.round((HP / maxHP) * 1000) / 10;\r\n  const shieldPercent = Math.round((shield / maxHP) * 1000) / 10;\r\n\r\n  return (\r\n    <CharacterStatsWrapper>\r\n      <span>{`${HP}`}</span>\r\n      <HPBar HPPercent={HPPercent} shieldPercent={shieldPercent} />\r\n      <CharacterStateList character={character} />\r\n    </CharacterStatsWrapper>\r\n  );\r\n};\r\n\r\nconst CharacterStatsWrapper = styled.div`\r\n  position: relative;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n  padding: 0.4rem;\r\n  > span {\r\n    margin-left: 0.3rem;\r\n    font-size: 0.9rem;\r\n  }\r\n  @media screen and (max-width: 600px) {\r\n    > span:first-child {\r\n      display: none;\r\n    }\r\n  }\r\n`;\r\n\r\ntype HPBarProps = {\r\n  HPPercent: number;\r\n  shieldPercent: number;\r\n  originalHPPercent?: number;\r\n  originalShieldPercent?: number;\r\n};\r\n\r\nexport const HPBar = ({\r\n  HPPercent,\r\n  shieldPercent,\r\n  originalHPPercent,\r\n  originalShieldPercent,\r\n  className,\r\n}: HPBarProps & React.HTMLAttributes<HTMLDivElement>): JSX.Element => (\r\n  <StyledHPBar\r\n    $HP={HPPercent}\r\n    $shield={shieldPercent > 100 ? 100 : shieldPercent}\r\n    $originalHP={originalHPPercent}\r\n    $originalShield={\r\n      originalShieldPercent && originalShieldPercent > 100\r\n        ? 100\r\n        : originalShieldPercent\r\n    }\r\n    className={className}\r\n  >\r\n    <div />\r\n    <div />\r\n    <div />\r\n    <div />\r\n  </StyledHPBar>\r\n);\r\n\r\nconst StyledHPBar = styled.div<{\r\n  $HP: number;\r\n  $shield: number;\r\n  $originalHP?: number;\r\n  $originalShield?: number;\r\n}>`\r\n  position: relative;\r\n  height: 0.5rem;\r\n  width: 100%;\r\n  max-width: 9.2rem;\r\n  margin-left: 0.2rem;\r\n  margin-bottom: 0.5rem;\r\n  background-color: ${(props) => props.theme.colors.dropdownHover};\r\n  border-radius: 0.25rem;\r\n  div {\r\n    height: 100%;\r\n    border-radius: 0.25rem;\r\n    transition: width 1s;\r\n  }\r\n  > div:nth-child(1) {\r\n    position: absolute;\r\n    width: ${(props) => (props.$originalHP ? props.$originalHP : 0)}%;\r\n    background-color: ${(props) => props.theme.colors.shadow};\r\n  }\r\n  > div:nth-child(2) {\r\n    position: absolute;\r\n    top: 0.7rem;\r\n    width: ${(props) => (props.$originalShield ? props.$originalShield : 0)}%;\r\n    height: 60%;\r\n    background-color: ${(props) => props.theme.colors.shadow};\r\n  }\r\n  > div:nth-child(3) {\r\n    position: absolute;\r\n    width: ${(props) => props.$HP}%;\r\n    background-color: ${(props) => props.theme.colors.secondary};\r\n  }\r\n  > div:nth-child(4) {\r\n    position: absolute;\r\n    top: 0.7rem;\r\n    width: ${(props) => props.$shield}%;\r\n    height: 60%;\r\n    background-color: ${(props) => props.theme.chart.colors[1]};\r\n  }\r\n  @media screen and (max-width: 600px) {\r\n    margin-top: 1rem;\r\n  }\r\n`;\r\n\r\nconst CharacterButton = ({\r\n  G,\r\n  ctx,\r\n  player,\r\n  character,\r\n  onClick,\r\n}: {\r\n  G: IGameState;\r\n  ctx: BattleCtx;\r\n  player: PlayerID;\r\n  character: Character;\r\n  onClick: () => void;\r\n}): JSX.Element => {\r\n  const { charString, pageString }: any = useLanguage();\r\n  const [anchorEl, setAnchorEl] = useState<HTMLButtonElement | null>(null);\r\n\r\n  const handleClick = (event: React.MouseEvent<HTMLButtonElement>) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const open = Boolean(anchorEl);\r\n  const id = open ? \"simple-popover\" : undefined;\r\n\r\n  return (\r\n    <ButtonWrapper>\r\n      <DetailsButton\r\n        onClick={handleClick}\r\n        ariaDescribedby={id}\r\n        tooltipText={pageString.battle.index.details}\r\n      >\r\n        {ElseIcon}\r\n      </DetailsButton>\r\n      <CharacterDetailsPopover\r\n        G={G}\r\n        character={character}\r\n        player={player}\r\n        id={id}\r\n        open={Boolean(anchorEl)}\r\n        anchorEl={anchorEl}\r\n        onClose={handleClose}\r\n      />\r\n      <StyledCharacterMuiButton\r\n        $state={getCharacterButtonState(G, ctx, character, player)}\r\n        onClick={onClick}\r\n      >\r\n        <CharacterAvatar\r\n          key={character.id}\r\n          name={`char_small_${character.id}`}\r\n          alt={\r\n            character.id === \"scarecrow\"\r\n              ? character.id\r\n              : charString.name[character.id]\r\n          }\r\n          $grayscale={character.isDead}\r\n          $attr={character.attribute}\r\n        />\r\n        <CharacterStats character={character} />\r\n      </StyledCharacterMuiButton>\r\n    </ButtonWrapper>\r\n  );\r\n};\r\n\r\nconst ButtonWrapper = styled.div`\r\n  position: relative;\r\n`;\r\nconst DetailsButton = styled(IconButton)`\r\n  && {\r\n    position: absolute;\r\n    z-index: 1;\r\n    top: 0.2rem;\r\n    right: 0.4rem;\r\n    padding: 0.4rem;\r\n    color: ${(props) => props.theme.colors.onBackground};\r\n  }\r\n`;\r\n\r\nexport const CharacterAvatar = styled(ImageSupplier)<{\r\n  $grayscale: boolean;\r\n  $attr: number;\r\n}>`\r\n  z-index: 1;\r\n  width: 4rem;\r\n  height: 4rem;\r\n  @media screen and (max-width: 600px) {\r\n    width: 3.5rem;\r\n    height: 3.5rem;\r\n  }\r\n  border: 0.2rem solid\r\n    ${(props) =>\r\n      props.$grayscale\r\n        ? props.theme.colors.dropdownHover\r\n        : props.theme.chart.colors[props.$attr]};\r\n  border-radius: 100%;\r\n  background-color: ${(props) => props.theme.colors.background};\r\n  filter: grayscale(${(props) => (props.$grayscale ? 1 : 0)});\r\n`;\r\n\r\nconst Button = styled(MuiButton)`\r\n  && {\r\n    color: ${(props) => props.theme.colors.onBackground};\r\n  }\r\n`;\r\nconst StyledCharacterMuiButton = styled(Button)<{\r\n  $state: CharacterButtonState;\r\n}>`\r\n  && {\r\n    display: flex;\r\n    margin-bottom: 0.5rem;\r\n    border: 2px solid\r\n      ${(props) => {\r\n        switch (props.$state) {\r\n          case CharacterButtonState.SELECTED:\r\n            return props.theme.colors.secondary;\r\n          case CharacterButtonState.TARGETED:\r\n            return props.theme.chart.colors[1];\r\n          default:\r\n            return props.theme.colors.shadow;\r\n        }\r\n      }};\r\n    ${(props) =>\r\n      props.$state === CharacterButtonState.NOT_MOVABLE\r\n        ? \"background-color: rgba(0, 0, 0, 0.1);\"\r\n        : \"\"}\r\n    filter: brightness(\r\n      ${(props) =>\r\n      props.$state === CharacterButtonState.NOT_MOVABLE ? 0.7 : 1}\r\n    );\r\n  }\r\n`;\r\n\r\nexport default CharacterButton;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Header from \"components/Header\";\r\nimport { useLanguage } from \"containers/LanguageProvider\";\r\n\r\nconst BattleHelp = (): JSX.Element => {\r\n  const { pageString }: any = useLanguage();\r\n\r\n  return (\r\n    <div>\r\n      {pageString.battle.index.help.map(\r\n        (item: { title: string; content: string[] }, ind: number) => (\r\n          <React.Fragment key={ind}>\r\n            <SettingHeader title={item.title} />\r\n            {item.content.map((text, ind) => (\r\n              <TextWrapper key={ind}>{text}</TextWrapper>\r\n            ))}\r\n          </React.Fragment>\r\n        )\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst SettingHeader = styled(Header)`\r\n  margin-bottom: 0.5rem;\r\n  border-bottom: 1px solid ${(props) => props.theme.colors.secondary};\r\n  font-size: 1rem;\r\n`;\r\nconst TextWrapper = styled.div`\r\n  padding: 0.4rem 0;\r\n  font-size: 0.875rem;\r\n`;\r\n\r\nexport default BattleHelp;\r\n","import React from \"react\";\r\nimport { useTheme } from \"styled-components\";\r\nimport { Popover } from \"@material-ui/core\";\r\nimport {\r\n  BattleCharacter as Character,\r\n  IGameState,\r\n  PlayerID,\r\n} from \"types/battle\";\r\nimport {\r\n  SkillActionType,\r\n  SkillCondition,\r\n  SkillEffect,\r\n  SkillEffectBasis,\r\n  SkillEffectType,\r\n  SkillOn,\r\n} from \"types/skills\";\r\nimport { useLanguage } from \"containers/LanguageProvider\";\r\n\r\nconst validateEffect = (\r\n  character: Character,\r\n  lineup: Character[],\r\n  effect: SkillEffect\r\n) => {\r\n  if (effect.otherConditionValue) {\r\n    switch (effect.otherCondition) {\r\n      case SkillCondition.HP_GREATER_THAN:\r\n        if (character.HP / character.maxHP < effect.otherConditionValue) {\r\n          return false;\r\n        }\r\n        break;\r\n      case SkillCondition.HP_LESS_THAN:\r\n        if (character.HP / character.maxHP >= effect.otherConditionValue) {\r\n          return false;\r\n        }\r\n        break;\r\n      case SkillCondition.EXIST_CHARACTER:\r\n        if (\r\n          !lineup.some(\r\n            (c) => !c.isDead && c.id === (effect.otherConditionValue as string)\r\n          )\r\n        ) {\r\n          return false;\r\n        }\r\n        break;\r\n    }\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nconst effectString = (effect: SkillEffect, skillString: any) => {\r\n  let string =\r\n    effect.on === SkillOn.TURN_END\r\n      ? skillString.endTurnEffect[\r\n          effect.type === SkillActionType.HEAL ? \"heal\" : \"damage\"\r\n        ]\r\n      : skillString.type[effect.type];\r\n\r\n  if (effect.value) {\r\n    const stack = effect.stack ? effect.stack : 1;\r\n    const value =\r\n      (effect.type === SkillEffectType.ATTACK_POWER &&\r\n        effect.basis === SkillEffectBasis.SELF_ATK) ||\r\n      effect.type in SkillActionType\r\n        ? Math.abs(Math.floor(effect.value)).toString()\r\n        : Math.abs(Math.round(effect.value * stack * 1000) / 10).toString() +\r\n          \"%\";\r\n\r\n    string = string[string.length === 1 || effect.value > 0 ? 0 : 1].replace(\r\n      \"{value}\",\r\n      value\r\n    );\r\n\r\n    if (effect.byAttribute !== undefined) {\r\n      string = string.replace(\r\n        \"{attribute}\",\r\n        skillString.attribute[effect.byAttribute]\r\n      );\r\n    }\r\n  }\r\n\r\n  if (effect.duration) {\r\n    string += ` ${effect.duration}T`;\r\n  }\r\n  return string;\r\n};\r\n\r\ntype PopoverProps = {\r\n  G: IGameState;\r\n  character: Character;\r\n  player: PlayerID;\r\n  id?: string;\r\n  open: boolean;\r\n  anchorEl: HTMLButtonElement | null;\r\n  onClose: () => void;\r\n};\r\n\r\nconst CharacterDetailsPopover = ({\r\n  G,\r\n  character,\r\n  player,\r\n  id,\r\n  open,\r\n  anchorEl,\r\n  onClose,\r\n}: PopoverProps): JSX.Element => {\r\n  const { colors }: any = useTheme();\r\n  const { charString, pageString, skillString }: any = useLanguage();\r\n\r\n  return (\r\n    <Popover\r\n      id={id}\r\n      open={open}\r\n      anchorEl={anchorEl}\r\n      onClose={onClose}\r\n      anchorOrigin={{\r\n        vertical: \"center\",\r\n        horizontal: \"right\",\r\n      }}\r\n      transformOrigin={{\r\n        vertical: \"center\",\r\n        horizontal: \"left\",\r\n      }}\r\n      PaperProps={{\r\n        style: {\r\n          padding: \"1rem\",\r\n          backgroundColor: colors.surface,\r\n          color: colors.onSurface,\r\n          fontSize: \"small\",\r\n        },\r\n      }}\r\n    >\r\n      <div>{`${pageString.battle.index.HP}: ${character.HP}/${character.maxHP}`}</div>\r\n      <div>{`${pageString.battle.index.ATK}: ${character.ATK}`}</div>\r\n      <div>{`${pageString.battle.index.shield}: ${character.shield}`}</div>\r\n      <div>{`CD: ${character.currentCD}/${character.CD}`}</div>\r\n      <div>\r\n        {`${pageString.battle.index.effect}:`}\r\n        {character.effects.map((e, ind) =>\r\n          validateEffect(character, G.lineups[player], e) ? (\r\n            <div key={ind}>\r\n              {effectString(e, skillString) +\r\n                ` (${charString.name[G.lineups[e.fromPlayer][e.from].id]} (${\r\n                  e.from + 1\r\n                }))`}\r\n            </div>\r\n          ) : null\r\n        )}\r\n      </div>\r\n    </Popover>\r\n  );\r\n};\r\n\r\nexport default CharacterDetailsPopover;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { TableBody, TableRow, TableCell } from \"@material-ui/core\";\r\nimport { IGameState, ILog } from \"types/battle\";\r\nimport { useLanguage } from \"containers/LanguageProvider\";\r\nimport Scrollable from \"containers/Scrollable\";\r\nimport { HPBar } from \"./CharacterButton\";\r\nimport Table from \"components/Table\";\r\nimport { ArrowIcon } from \"components/icon\";\r\n\r\nconst LogCell = ({\r\n  children,\r\n  colSpan,\r\n}: {\r\n  children: React.ReactNode;\r\n  colSpan?: number;\r\n}): JSX.Element => (\r\n  <TableCell align=\"center\" size=\"small\" colSpan={colSpan}>\r\n    <TextWrapper>{children}</TextWrapper>\r\n  </TableCell>\r\n);\r\n\r\nconst TextWrapper = styled.span`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  font-size: small;\r\n  svg {\r\n    width: 1.2rem;\r\n    height: 1.2rem;\r\n    fill: ${(props) => props.theme.colors.onSurface};\r\n  }\r\n`;\r\n\r\nconst MoveLog = ({\r\n  G,\r\n  moveLog,\r\n}: {\r\n  G: IGameState;\r\n  moveLog: ILog;\r\n}): JSX.Element => {\r\n  const { charString, skillString }: any = useLanguage();\r\n  const fromCharacter = G.lineups[moveLog.from.player][moveLog.from.position];\r\n  const toCharacter = G.lineups[moveLog.to.player][moveLog.to.position];\r\n\r\n  return (\r\n    <TableRow>\r\n      <LogCell>\r\n        <CharacterTextWrapper $isEnemy={moveLog.from.player === \"1\"}>\r\n          {`${charString.name[fromCharacter.id]} (${\r\n            fromCharacter.teamPosition + 1\r\n          })`}\r\n        </CharacterTextWrapper>\r\n      </LogCell>\r\n      <LogCell>{ArrowIcon}</LogCell>\r\n      <LogCell>{`${moveLog.value ? moveLog.value : \"\"} (${(\r\n        skillString.type[moveLog.type][0] as string\r\n      ).replace(\" {value}\", \"\")})`}</LogCell>\r\n      {moveLog.value || moveLog.from.position !== moveLog.to.position ? (\r\n        <>\r\n          <LogCell>{ArrowIcon}</LogCell>\r\n          <LogCell>\r\n            <CharacterTextWrapper $isEnemy={moveLog.to.player === \"1\"}>\r\n              {`${charString.name[toCharacter.id]} (${\r\n                toCharacter.teamPosition + 1\r\n              })`}\r\n            </CharacterTextWrapper>\r\n          </LogCell>\r\n          <LogCell>\r\n            <HPTextWrapper>{`${moveLog.to.HP}${\r\n              moveLog.to.shield ? ` (${moveLog.to.shield})` : \"\"\r\n            }`}</HPTextWrapper>\r\n            <LogHPBar\r\n              HPPercent={(moveLog.to.HP / toCharacter.maxHP) * 100}\r\n              shieldPercent={(moveLog.to.shield / toCharacter.maxHP) * 100}\r\n              originalHPPercent={\r\n                (moveLog.to.originalHP / toCharacter.maxHP) * 100\r\n              }\r\n              originalShieldPercent={\r\n                (moveLog.to.originalShield / toCharacter.maxHP) * 100\r\n              }\r\n            />\r\n          </LogCell>\r\n        </>\r\n      ) : null}\r\n    </TableRow>\r\n  );\r\n};\r\n\r\nconst CharacterTextWrapper = styled.span<{ $isEnemy: boolean }>`\r\n  color: ${(props) =>\r\n    props.theme.colors[props.$isEnemy ? \"secondary\" : \"onSurface\"]};\r\n`;\r\nconst HPTextWrapper = styled(TextWrapper)`\r\n  margin-left: 0.3rem;\r\n  font-size: 0.75rem;\r\n  @media screen and (max-width: 600px) {\r\n    display: none;\r\n  }\r\n`;\r\nconst LogHPBar = styled(HPBar)`\r\n  width: 6.5rem;\r\n  margin-top: 0;\r\n  @media screen and (max-width: 600px) {\r\n    display: none;\r\n  }\r\n`;\r\n\r\ntype Props = {\r\n  G: IGameState;\r\n};\r\n\r\nconst BattleLog = ({ G }: Props): JSX.Element => {\r\n  const { pageString }: any = useLanguage();\r\n  const logLength = G.log.length;\r\n\r\n  return (\r\n    <TableWrapper>\r\n      <Table>\r\n        <TableBody>\r\n          {G.log\r\n            .slice(0)\r\n            .reverse()\r\n            .map((logPerTurn, ind) => (\r\n              <React.Fragment key={logLength - ind}>\r\n                <TableRow>\r\n                  <LogCell colSpan={6}>\r\n                    <TurnTextWrapper>\r\n                      {`${pageString.battle.index.turn} ${\r\n                        Math.floor((logLength - ind) / 2) + 1\r\n                      } (${\r\n                        pageString.battle.index.log[\r\n                          ind % 2 === 0 ? \"you\" : \"enemy\"\r\n                        ]\r\n                      })`}\r\n                    </TurnTextWrapper>\r\n                  </LogCell>\r\n                </TableRow>\r\n                {logPerTurn.map((logPerMove, i) => (\r\n                  <MoveLog G={G} key={i} moveLog={logPerMove} />\r\n                ))}\r\n              </React.Fragment>\r\n            ))}\r\n        </TableBody>\r\n      </Table>\r\n    </TableWrapper>\r\n  );\r\n};\r\n\r\nconst TableWrapper = styled(Scrollable)`\r\n  max-height: calc(80vh - 2.7rem);\r\n  overflow-x: hidden;\r\n  overflow-y: auto;\r\n  tr {\r\n    > td:nth-child(even) {\r\n      padding: 0;\r\n    }\r\n  }\r\n`;\r\nconst TurnTextWrapper = styled(TextWrapper)`\r\n  font-weight: bold;\r\n`;\r\n\r\nexport default BattleLog;\r\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport withStyles from '../styles/withStyles';\n\nvar styles = function styles(theme) {\n  return {\n    thumb: {\n      '&$open': {\n        '& $offset': {\n          transform: 'scale(1) translateY(-10px)'\n        }\n      }\n    },\n    open: {},\n    offset: _extends({\n      zIndex: 1\n    }, theme.typography.body2, {\n      fontSize: theme.typography.pxToRem(12),\n      lineHeight: 1.2,\n      transition: theme.transitions.create(['transform'], {\n        duration: theme.transitions.duration.shortest\n      }),\n      top: -34,\n      transformOrigin: 'bottom center',\n      transform: 'scale(0)',\n      position: 'absolute'\n    }),\n    circle: {\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      width: 32,\n      height: 32,\n      borderRadius: '50% 50% 50% 0',\n      backgroundColor: 'currentColor',\n      transform: 'rotate(-45deg)'\n    },\n    label: {\n      color: theme.palette.primary.contrastText,\n      transform: 'rotate(45deg)'\n    }\n  };\n};\n/**\n * @ignore - internal component.\n */\n\n\nfunction ValueLabel(props) {\n  var children = props.children,\n      classes = props.classes,\n      className = props.className,\n      open = props.open,\n      value = props.value,\n      valueLabelDisplay = props.valueLabelDisplay;\n\n  if (valueLabelDisplay === 'off') {\n    return children;\n  }\n\n  return /*#__PURE__*/React.cloneElement(children, {\n    className: clsx(children.props.className, (open || valueLabelDisplay === 'on') && classes.open, classes.thumb)\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: clsx(classes.offset, className)\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: classes.circle\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: classes.label\n  }, value))));\n}\n\nexport default withStyles(styles, {\n  name: 'PrivateValueLabel'\n})(ValueLabel);","import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport { chainPropTypes } from '@material-ui/utils';\nimport withStyles from '../styles/withStyles';\nimport useTheme from '../styles/useTheme';\nimport { alpha, lighten, darken } from '../styles/colorManipulator';\nimport useIsFocusVisible from '../utils/useIsFocusVisible';\nimport ownerDocument from '../utils/ownerDocument';\nimport useEventCallback from '../utils/useEventCallback';\nimport useForkRef from '../utils/useForkRef';\nimport capitalize from '../utils/capitalize';\nimport useControlled from '../utils/useControlled';\nimport ValueLabel from './ValueLabel';\n\nfunction asc(a, b) {\n  return a - b;\n}\n\nfunction clamp(value, min, max) {\n  return Math.min(Math.max(min, value), max);\n}\n\nfunction findClosest(values, currentValue) {\n  var _values$reduce = values.reduce(function (acc, value, index) {\n    var distance = Math.abs(currentValue - value);\n\n    if (acc === null || distance < acc.distance || distance === acc.distance) {\n      return {\n        distance: distance,\n        index: index\n      };\n    }\n\n    return acc;\n  }, null),\n      closestIndex = _values$reduce.index;\n\n  return closestIndex;\n}\n\nfunction trackFinger(event, touchId) {\n  if (touchId.current !== undefined && event.changedTouches) {\n    for (var i = 0; i < event.changedTouches.length; i += 1) {\n      var touch = event.changedTouches[i];\n\n      if (touch.identifier === touchId.current) {\n        return {\n          x: touch.clientX,\n          y: touch.clientY\n        };\n      }\n    }\n\n    return false;\n  }\n\n  return {\n    x: event.clientX,\n    y: event.clientY\n  };\n}\n\nfunction valueToPercent(value, min, max) {\n  return (value - min) * 100 / (max - min);\n}\n\nfunction percentToValue(percent, min, max) {\n  return (max - min) * percent + min;\n}\n\nfunction getDecimalPrecision(num) {\n  // This handles the case when num is very small (0.00000001), js will turn this into 1e-8.\n  // When num is bigger than 1 or less than -1 it won't get converted to this notation so it's fine.\n  if (Math.abs(num) < 1) {\n    var parts = num.toExponential().split('e-');\n    var matissaDecimalPart = parts[0].split('.')[1];\n    return (matissaDecimalPart ? matissaDecimalPart.length : 0) + parseInt(parts[1], 10);\n  }\n\n  var decimalPart = num.toString().split('.')[1];\n  return decimalPart ? decimalPart.length : 0;\n}\n\nfunction roundValueToStep(value, step, min) {\n  var nearest = Math.round((value - min) / step) * step + min;\n  return Number(nearest.toFixed(getDecimalPrecision(step)));\n}\n\nfunction setValueIndex(_ref) {\n  var values = _ref.values,\n      source = _ref.source,\n      newValue = _ref.newValue,\n      index = _ref.index; // Performance shortcut\n\n  if (values[index] === newValue) {\n    return source;\n  }\n\n  var output = values.slice();\n  output[index] = newValue;\n  return output;\n}\n\nfunction focusThumb(_ref2) {\n  var sliderRef = _ref2.sliderRef,\n      activeIndex = _ref2.activeIndex,\n      setActive = _ref2.setActive;\n\n  if (!sliderRef.current.contains(document.activeElement) || Number(document.activeElement.getAttribute('data-index')) !== activeIndex) {\n    sliderRef.current.querySelector(\"[role=\\\"slider\\\"][data-index=\\\"\".concat(activeIndex, \"\\\"]\")).focus();\n  }\n\n  if (setActive) {\n    setActive(activeIndex);\n  }\n}\n\nvar axisProps = {\n  horizontal: {\n    offset: function offset(percent) {\n      return {\n        left: \"\".concat(percent, \"%\")\n      };\n    },\n    leap: function leap(percent) {\n      return {\n        width: \"\".concat(percent, \"%\")\n      };\n    }\n  },\n  'horizontal-reverse': {\n    offset: function offset(percent) {\n      return {\n        right: \"\".concat(percent, \"%\")\n      };\n    },\n    leap: function leap(percent) {\n      return {\n        width: \"\".concat(percent, \"%\")\n      };\n    }\n  },\n  vertical: {\n    offset: function offset(percent) {\n      return {\n        bottom: \"\".concat(percent, \"%\")\n      };\n    },\n    leap: function leap(percent) {\n      return {\n        height: \"\".concat(percent, \"%\")\n      };\n    }\n  }\n};\n\nvar Identity = function Identity(x) {\n  return x;\n};\n\nexport var styles = function styles(theme) {\n  return {\n    /* Styles applied to the root element. */\n    root: {\n      height: 2,\n      width: '100%',\n      boxSizing: 'content-box',\n      padding: '13px 0',\n      display: 'inline-block',\n      position: 'relative',\n      cursor: 'pointer',\n      touchAction: 'none',\n      color: theme.palette.primary.main,\n      WebkitTapHighlightColor: 'transparent',\n      '&$disabled': {\n        pointerEvents: 'none',\n        cursor: 'default',\n        color: theme.palette.grey[400]\n      },\n      '&$vertical': {\n        width: 2,\n        height: '100%',\n        padding: '0 13px'\n      },\n      // The primary input mechanism of the device includes a pointing device of limited accuracy.\n      '@media (pointer: coarse)': {\n        // Reach 42px touch target, about ~8mm on screen.\n        padding: '20px 0',\n        '&$vertical': {\n          padding: '0 20px'\n        }\n      },\n      '@media print': {\n        colorAdjust: 'exact'\n      }\n    },\n\n    /* Styles applied to the root element if `color=\"primary\"`. */\n    colorPrimary: {// TODO v5: move the style here\n    },\n\n    /* Styles applied to the root element if `color=\"secondary\"`. */\n    colorSecondary: {\n      color: theme.palette.secondary.main\n    },\n\n    /* Styles applied to the root element if `marks` is provided with at least one label. */\n    marked: {\n      marginBottom: 20,\n      '&$vertical': {\n        marginBottom: 'auto',\n        marginRight: 20\n      }\n    },\n\n    /* Pseudo-class applied to the root element if `orientation=\"vertical\"`. */\n    vertical: {},\n\n    /* Pseudo-class applied to the root and thumb element if `disabled={true}`. */\n    disabled: {},\n\n    /* Styles applied to the rail element. */\n    rail: {\n      display: 'block',\n      position: 'absolute',\n      width: '100%',\n      height: 2,\n      borderRadius: 1,\n      backgroundColor: 'currentColor',\n      opacity: 0.38,\n      '$vertical &': {\n        height: '100%',\n        width: 2\n      }\n    },\n\n    /* Styles applied to the track element. */\n    track: {\n      display: 'block',\n      position: 'absolute',\n      height: 2,\n      borderRadius: 1,\n      backgroundColor: 'currentColor',\n      '$vertical &': {\n        width: 2\n      }\n    },\n\n    /* Styles applied to the track element if `track={false}`. */\n    trackFalse: {\n      '& $track': {\n        display: 'none'\n      }\n    },\n\n    /* Styles applied to the track element if `track=\"inverted\"`. */\n    trackInverted: {\n      '& $track': {\n        backgroundColor: // Same logic as the LinearProgress track color\n        theme.palette.type === 'light' ? lighten(theme.palette.primary.main, 0.62) : darken(theme.palette.primary.main, 0.5)\n      },\n      '& $rail': {\n        opacity: 1\n      }\n    },\n\n    /* Styles applied to the thumb element. */\n    thumb: {\n      position: 'absolute',\n      width: 12,\n      height: 12,\n      marginLeft: -6,\n      marginTop: -5,\n      boxSizing: 'border-box',\n      borderRadius: '50%',\n      outline: 0,\n      backgroundColor: 'currentColor',\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      transition: theme.transitions.create(['box-shadow'], {\n        duration: theme.transitions.duration.shortest\n      }),\n      '&::after': {\n        position: 'absolute',\n        content: '\"\"',\n        borderRadius: '50%',\n        // reach 42px hit target (2 * 15 + thumb diameter)\n        left: -15,\n        top: -15,\n        right: -15,\n        bottom: -15\n      },\n      '&$focusVisible,&:hover': {\n        boxShadow: \"0px 0px 0px 8px \".concat(alpha(theme.palette.primary.main, 0.16)),\n        '@media (hover: none)': {\n          boxShadow: 'none'\n        }\n      },\n      '&$active': {\n        boxShadow: \"0px 0px 0px 14px \".concat(alpha(theme.palette.primary.main, 0.16))\n      },\n      '&$disabled': {\n        width: 8,\n        height: 8,\n        marginLeft: -4,\n        marginTop: -3,\n        '&:hover': {\n          boxShadow: 'none'\n        }\n      },\n      '$vertical &': {\n        marginLeft: -5,\n        marginBottom: -6\n      },\n      '$vertical &$disabled': {\n        marginLeft: -3,\n        marginBottom: -4\n      }\n    },\n\n    /* Styles applied to the thumb element if `color=\"primary\"`. */\n    thumbColorPrimary: {// TODO v5: move the style here\n    },\n\n    /* Styles applied to the thumb element if `color=\"secondary\"`. */\n    thumbColorSecondary: {\n      '&$focusVisible,&:hover': {\n        boxShadow: \"0px 0px 0px 8px \".concat(alpha(theme.palette.secondary.main, 0.16))\n      },\n      '&$active': {\n        boxShadow: \"0px 0px 0px 14px \".concat(alpha(theme.palette.secondary.main, 0.16))\n      }\n    },\n\n    /* Pseudo-class applied to the thumb element if it's active. */\n    active: {},\n\n    /* Pseudo-class applied to the thumb element if keyboard focused. */\n    focusVisible: {},\n\n    /* Styles applied to the thumb label element. */\n    valueLabel: {\n      // IE 11 centering bug, to remove from the customization demos once no longer supported\n      left: 'calc(-50% - 4px)'\n    },\n\n    /* Styles applied to the mark element. */\n    mark: {\n      position: 'absolute',\n      width: 2,\n      height: 2,\n      borderRadius: 1,\n      backgroundColor: 'currentColor'\n    },\n\n    /* Styles applied to the mark element if active (depending on the value). */\n    markActive: {\n      backgroundColor: theme.palette.background.paper,\n      opacity: 0.8\n    },\n\n    /* Styles applied to the mark label element. */\n    markLabel: _extends({}, theme.typography.body2, {\n      color: theme.palette.text.secondary,\n      position: 'absolute',\n      top: 26,\n      transform: 'translateX(-50%)',\n      whiteSpace: 'nowrap',\n      '$vertical &': {\n        top: 'auto',\n        left: 26,\n        transform: 'translateY(50%)'\n      },\n      '@media (pointer: coarse)': {\n        top: 40,\n        '$vertical &': {\n          left: 31\n        }\n      }\n    }),\n\n    /* Styles applied to the mark label element if active (depending on the value). */\n    markLabelActive: {\n      color: theme.palette.text.primary\n    }\n  };\n};\nvar Slider = /*#__PURE__*/React.forwardRef(function Slider(props, ref) {\n  var ariaLabel = props['aria-label'],\n      ariaLabelledby = props['aria-labelledby'],\n      ariaValuetext = props['aria-valuetext'],\n      classes = props.classes,\n      className = props.className,\n      _props$color = props.color,\n      color = _props$color === void 0 ? 'primary' : _props$color,\n      _props$component = props.component,\n      Component = _props$component === void 0 ? 'span' : _props$component,\n      defaultValue = props.defaultValue,\n      _props$disabled = props.disabled,\n      disabled = _props$disabled === void 0 ? false : _props$disabled,\n      getAriaLabel = props.getAriaLabel,\n      getAriaValueText = props.getAriaValueText,\n      _props$marks = props.marks,\n      marksProp = _props$marks === void 0 ? false : _props$marks,\n      _props$max = props.max,\n      max = _props$max === void 0 ? 100 : _props$max,\n      _props$min = props.min,\n      min = _props$min === void 0 ? 0 : _props$min,\n      name = props.name,\n      onChange = props.onChange,\n      onChangeCommitted = props.onChangeCommitted,\n      onMouseDown = props.onMouseDown,\n      _props$orientation = props.orientation,\n      orientation = _props$orientation === void 0 ? 'horizontal' : _props$orientation,\n      _props$scale = props.scale,\n      scale = _props$scale === void 0 ? Identity : _props$scale,\n      _props$step = props.step,\n      step = _props$step === void 0 ? 1 : _props$step,\n      _props$ThumbComponent = props.ThumbComponent,\n      ThumbComponent = _props$ThumbComponent === void 0 ? 'span' : _props$ThumbComponent,\n      _props$track = props.track,\n      track = _props$track === void 0 ? 'normal' : _props$track,\n      valueProp = props.value,\n      _props$ValueLabelComp = props.ValueLabelComponent,\n      ValueLabelComponent = _props$ValueLabelComp === void 0 ? ValueLabel : _props$ValueLabelComp,\n      _props$valueLabelDisp = props.valueLabelDisplay,\n      valueLabelDisplay = _props$valueLabelDisp === void 0 ? 'off' : _props$valueLabelDisp,\n      _props$valueLabelForm = props.valueLabelFormat,\n      valueLabelFormat = _props$valueLabelForm === void 0 ? Identity : _props$valueLabelForm,\n      other = _objectWithoutProperties(props, [\"aria-label\", \"aria-labelledby\", \"aria-valuetext\", \"classes\", \"className\", \"color\", \"component\", \"defaultValue\", \"disabled\", \"getAriaLabel\", \"getAriaValueText\", \"marks\", \"max\", \"min\", \"name\", \"onChange\", \"onChangeCommitted\", \"onMouseDown\", \"orientation\", \"scale\", \"step\", \"ThumbComponent\", \"track\", \"value\", \"ValueLabelComponent\", \"valueLabelDisplay\", \"valueLabelFormat\"]);\n\n  var theme = useTheme();\n  var touchId = React.useRef(); // We can't use the :active browser pseudo-classes.\n  // - The active state isn't triggered when clicking on the rail.\n  // - The active state isn't transfered when inversing a range slider.\n\n  var _React$useState = React.useState(-1),\n      active = _React$useState[0],\n      setActive = _React$useState[1];\n\n  var _React$useState2 = React.useState(-1),\n      open = _React$useState2[0],\n      setOpen = _React$useState2[1];\n\n  var _useControlled = useControlled({\n    controlled: valueProp,\n    default: defaultValue,\n    name: 'Slider'\n  }),\n      _useControlled2 = _slicedToArray(_useControlled, 2),\n      valueDerived = _useControlled2[0],\n      setValueState = _useControlled2[1];\n\n  var range = Array.isArray(valueDerived);\n  var values = range ? valueDerived.slice().sort(asc) : [valueDerived];\n  values = values.map(function (value) {\n    return clamp(value, min, max);\n  });\n  var marks = marksProp === true && step !== null ? _toConsumableArray(Array(Math.floor((max - min) / step) + 1)).map(function (_, index) {\n    return {\n      value: min + step * index\n    };\n  }) : marksProp || [];\n\n  var _useIsFocusVisible = useIsFocusVisible(),\n      isFocusVisible = _useIsFocusVisible.isFocusVisible,\n      onBlurVisible = _useIsFocusVisible.onBlurVisible,\n      focusVisibleRef = _useIsFocusVisible.ref;\n\n  var _React$useState3 = React.useState(-1),\n      focusVisible = _React$useState3[0],\n      setFocusVisible = _React$useState3[1];\n\n  var sliderRef = React.useRef();\n  var handleFocusRef = useForkRef(focusVisibleRef, sliderRef);\n  var handleRef = useForkRef(ref, handleFocusRef);\n  var handleFocus = useEventCallback(function (event) {\n    var index = Number(event.currentTarget.getAttribute('data-index'));\n\n    if (isFocusVisible(event)) {\n      setFocusVisible(index);\n    }\n\n    setOpen(index);\n  });\n  var handleBlur = useEventCallback(function () {\n    if (focusVisible !== -1) {\n      setFocusVisible(-1);\n      onBlurVisible();\n    }\n\n    setOpen(-1);\n  });\n  var handleMouseOver = useEventCallback(function (event) {\n    var index = Number(event.currentTarget.getAttribute('data-index'));\n    setOpen(index);\n  });\n  var handleMouseLeave = useEventCallback(function () {\n    setOpen(-1);\n  });\n  var isRtl = theme.direction === 'rtl';\n  var handleKeyDown = useEventCallback(function (event) {\n    var index = Number(event.currentTarget.getAttribute('data-index'));\n    var value = values[index];\n    var tenPercents = (max - min) / 10;\n    var marksValues = marks.map(function (mark) {\n      return mark.value;\n    });\n    var marksIndex = marksValues.indexOf(value);\n    var newValue;\n    var increaseKey = isRtl ? 'ArrowLeft' : 'ArrowRight';\n    var decreaseKey = isRtl ? 'ArrowRight' : 'ArrowLeft';\n\n    switch (event.key) {\n      case 'Home':\n        newValue = min;\n        break;\n\n      case 'End':\n        newValue = max;\n        break;\n\n      case 'PageUp':\n        if (step) {\n          newValue = value + tenPercents;\n        }\n\n        break;\n\n      case 'PageDown':\n        if (step) {\n          newValue = value - tenPercents;\n        }\n\n        break;\n\n      case increaseKey:\n      case 'ArrowUp':\n        if (step) {\n          newValue = value + step;\n        } else {\n          newValue = marksValues[marksIndex + 1] || marksValues[marksValues.length - 1];\n        }\n\n        break;\n\n      case decreaseKey:\n      case 'ArrowDown':\n        if (step) {\n          newValue = value - step;\n        } else {\n          newValue = marksValues[marksIndex - 1] || marksValues[0];\n        }\n\n        break;\n\n      default:\n        return;\n    } // Prevent scroll of the page\n\n\n    event.preventDefault();\n\n    if (step) {\n      newValue = roundValueToStep(newValue, step, min);\n    }\n\n    newValue = clamp(newValue, min, max);\n\n    if (range) {\n      var previousValue = newValue;\n      newValue = setValueIndex({\n        values: values,\n        source: valueDerived,\n        newValue: newValue,\n        index: index\n      }).sort(asc);\n      focusThumb({\n        sliderRef: sliderRef,\n        activeIndex: newValue.indexOf(previousValue)\n      });\n    }\n\n    setValueState(newValue);\n    setFocusVisible(index);\n\n    if (onChange) {\n      onChange(event, newValue);\n    }\n\n    if (onChangeCommitted) {\n      onChangeCommitted(event, newValue);\n    }\n  });\n  var previousIndex = React.useRef();\n  var axis = orientation;\n\n  if (isRtl && orientation !== \"vertical\") {\n    axis += '-reverse';\n  }\n\n  var getFingerNewValue = function getFingerNewValue(_ref3) {\n    var finger = _ref3.finger,\n        _ref3$move = _ref3.move,\n        move = _ref3$move === void 0 ? false : _ref3$move,\n        values2 = _ref3.values,\n        source = _ref3.source;\n    var slider = sliderRef.current;\n\n    var _slider$getBoundingCl = slider.getBoundingClientRect(),\n        width = _slider$getBoundingCl.width,\n        height = _slider$getBoundingCl.height,\n        bottom = _slider$getBoundingCl.bottom,\n        left = _slider$getBoundingCl.left;\n\n    var percent;\n\n    if (axis.indexOf('vertical') === 0) {\n      percent = (bottom - finger.y) / height;\n    } else {\n      percent = (finger.x - left) / width;\n    }\n\n    if (axis.indexOf('-reverse') !== -1) {\n      percent = 1 - percent;\n    }\n\n    var newValue;\n    newValue = percentToValue(percent, min, max);\n\n    if (step) {\n      newValue = roundValueToStep(newValue, step, min);\n    } else {\n      var marksValues = marks.map(function (mark) {\n        return mark.value;\n      });\n      var closestIndex = findClosest(marksValues, newValue);\n      newValue = marksValues[closestIndex];\n    }\n\n    newValue = clamp(newValue, min, max);\n    var activeIndex = 0;\n\n    if (range) {\n      if (!move) {\n        activeIndex = findClosest(values2, newValue);\n      } else {\n        activeIndex = previousIndex.current;\n      }\n\n      var previousValue = newValue;\n      newValue = setValueIndex({\n        values: values2,\n        source: source,\n        newValue: newValue,\n        index: activeIndex\n      }).sort(asc);\n      activeIndex = newValue.indexOf(previousValue);\n      previousIndex.current = activeIndex;\n    }\n\n    return {\n      newValue: newValue,\n      activeIndex: activeIndex\n    };\n  };\n\n  var handleTouchMove = useEventCallback(function (event) {\n    var finger = trackFinger(event, touchId);\n\n    if (!finger) {\n      return;\n    }\n\n    var _getFingerNewValue = getFingerNewValue({\n      finger: finger,\n      move: true,\n      values: values,\n      source: valueDerived\n    }),\n        newValue = _getFingerNewValue.newValue,\n        activeIndex = _getFingerNewValue.activeIndex;\n\n    focusThumb({\n      sliderRef: sliderRef,\n      activeIndex: activeIndex,\n      setActive: setActive\n    });\n    setValueState(newValue);\n\n    if (onChange) {\n      onChange(event, newValue);\n    }\n  });\n  var handleTouchEnd = useEventCallback(function (event) {\n    var finger = trackFinger(event, touchId);\n\n    if (!finger) {\n      return;\n    }\n\n    var _getFingerNewValue2 = getFingerNewValue({\n      finger: finger,\n      values: values,\n      source: valueDerived\n    }),\n        newValue = _getFingerNewValue2.newValue;\n\n    setActive(-1);\n\n    if (event.type === 'touchend') {\n      setOpen(-1);\n    }\n\n    if (onChangeCommitted) {\n      onChangeCommitted(event, newValue);\n    }\n\n    touchId.current = undefined;\n    var doc = ownerDocument(sliderRef.current);\n    doc.removeEventListener('mousemove', handleTouchMove);\n    doc.removeEventListener('mouseup', handleTouchEnd);\n    doc.removeEventListener('touchmove', handleTouchMove);\n    doc.removeEventListener('touchend', handleTouchEnd);\n  });\n  var handleTouchStart = useEventCallback(function (event) {\n    // Workaround as Safari has partial support for touchAction: 'none'.\n    event.preventDefault();\n    var touch = event.changedTouches[0];\n\n    if (touch != null) {\n      // A number that uniquely identifies the current finger in the touch session.\n      touchId.current = touch.identifier;\n    }\n\n    var finger = trackFinger(event, touchId);\n\n    var _getFingerNewValue3 = getFingerNewValue({\n      finger: finger,\n      values: values,\n      source: valueDerived\n    }),\n        newValue = _getFingerNewValue3.newValue,\n        activeIndex = _getFingerNewValue3.activeIndex;\n\n    focusThumb({\n      sliderRef: sliderRef,\n      activeIndex: activeIndex,\n      setActive: setActive\n    });\n    setValueState(newValue);\n\n    if (onChange) {\n      onChange(event, newValue);\n    }\n\n    var doc = ownerDocument(sliderRef.current);\n    doc.addEventListener('touchmove', handleTouchMove);\n    doc.addEventListener('touchend', handleTouchEnd);\n  });\n  React.useEffect(function () {\n    var slider = sliderRef.current;\n    slider.addEventListener('touchstart', handleTouchStart);\n    var doc = ownerDocument(slider);\n    return function () {\n      slider.removeEventListener('touchstart', handleTouchStart);\n      doc.removeEventListener('mousemove', handleTouchMove);\n      doc.removeEventListener('mouseup', handleTouchEnd);\n      doc.removeEventListener('touchmove', handleTouchMove);\n      doc.removeEventListener('touchend', handleTouchEnd);\n    };\n  }, [handleTouchEnd, handleTouchMove, handleTouchStart]);\n  var handleMouseDown = useEventCallback(function (event) {\n    if (onMouseDown) {\n      onMouseDown(event);\n    }\n\n    event.preventDefault();\n    var finger = trackFinger(event, touchId);\n\n    var _getFingerNewValue4 = getFingerNewValue({\n      finger: finger,\n      values: values,\n      source: valueDerived\n    }),\n        newValue = _getFingerNewValue4.newValue,\n        activeIndex = _getFingerNewValue4.activeIndex;\n\n    focusThumb({\n      sliderRef: sliderRef,\n      activeIndex: activeIndex,\n      setActive: setActive\n    });\n    setValueState(newValue);\n\n    if (onChange) {\n      onChange(event, newValue);\n    }\n\n    var doc = ownerDocument(sliderRef.current);\n    doc.addEventListener('mousemove', handleTouchMove);\n    doc.addEventListener('mouseup', handleTouchEnd);\n  });\n  var trackOffset = valueToPercent(range ? values[0] : min, min, max);\n  var trackLeap = valueToPercent(values[values.length - 1], min, max) - trackOffset;\n\n  var trackStyle = _extends({}, axisProps[axis].offset(trackOffset), axisProps[axis].leap(trackLeap));\n\n  return /*#__PURE__*/React.createElement(Component, _extends({\n    ref: handleRef,\n    className: clsx(classes.root, classes[\"color\".concat(capitalize(color))], className, disabled && classes.disabled, marks.length > 0 && marks.some(function (mark) {\n      return mark.label;\n    }) && classes.marked, track === false && classes.trackFalse, orientation === 'vertical' && classes.vertical, track === 'inverted' && classes.trackInverted),\n    onMouseDown: handleMouseDown\n  }, other), /*#__PURE__*/React.createElement(\"span\", {\n    className: classes.rail\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: classes.track,\n    style: trackStyle\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    value: values.join(','),\n    name: name,\n    type: \"hidden\"\n  }), marks.map(function (mark, index) {\n    var percent = valueToPercent(mark.value, min, max);\n    var style = axisProps[axis].offset(percent);\n    var markActive;\n\n    if (track === false) {\n      markActive = values.indexOf(mark.value) !== -1;\n    } else {\n      markActive = track === 'normal' && (range ? mark.value >= values[0] && mark.value <= values[values.length - 1] : mark.value <= values[0]) || track === 'inverted' && (range ? mark.value <= values[0] || mark.value >= values[values.length - 1] : mark.value >= values[0]);\n    }\n\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      key: mark.value\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      style: style,\n      \"data-index\": index,\n      className: clsx(classes.mark, markActive && classes.markActive)\n    }), mark.label != null ? /*#__PURE__*/React.createElement(\"span\", {\n      \"aria-hidden\": true,\n      \"data-index\": index,\n      style: style,\n      className: clsx(classes.markLabel, markActive && classes.markLabelActive)\n    }, mark.label) : null);\n  }), values.map(function (value, index) {\n    var percent = valueToPercent(value, min, max);\n    var style = axisProps[axis].offset(percent);\n    return /*#__PURE__*/React.createElement(ValueLabelComponent, {\n      key: index,\n      valueLabelFormat: valueLabelFormat,\n      valueLabelDisplay: valueLabelDisplay,\n      className: classes.valueLabel,\n      value: typeof valueLabelFormat === 'function' ? valueLabelFormat(scale(value), index) : valueLabelFormat,\n      index: index,\n      open: open === index || active === index || valueLabelDisplay === 'on',\n      disabled: disabled\n    }, /*#__PURE__*/React.createElement(ThumbComponent, {\n      className: clsx(classes.thumb, classes[\"thumbColor\".concat(capitalize(color))], active === index && classes.active, disabled && classes.disabled, focusVisible === index && classes.focusVisible),\n      tabIndex: disabled ? null : 0,\n      role: \"slider\",\n      style: style,\n      \"data-index\": index,\n      \"aria-label\": getAriaLabel ? getAriaLabel(index) : ariaLabel,\n      \"aria-labelledby\": ariaLabelledby,\n      \"aria-orientation\": orientation,\n      \"aria-valuemax\": scale(max),\n      \"aria-valuemin\": scale(min),\n      \"aria-valuenow\": scale(value),\n      \"aria-valuetext\": getAriaValueText ? getAriaValueText(scale(value), index) : ariaValuetext,\n      onKeyDown: handleKeyDown,\n      onFocus: handleFocus,\n      onBlur: handleBlur,\n      onMouseOver: handleMouseOver,\n      onMouseLeave: handleMouseLeave\n    }));\n  }));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiSlider'\n})(Slider);","import React, { useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { Button, ButtonProps, Slider } from \"@material-ui/core\";\r\nimport { BattleSetupData } from \"types/battle\";\r\nimport { useLanguage } from \"containers/LanguageProvider\";\r\nimport Header from \"components/Header\";\r\nimport LocalizedLink from \"components/LocalizedLink\";\r\nimport RadioGroup, { Radio } from \"components/RadioGroup\";\r\nimport { OpenIcon } from \"components/icon\";\r\n\r\nexport interface IGameSetupProps {\r\n  lineups: BattleSetupData[\"lineups\"];\r\n  botIndex: number;\r\n  iterations: number;\r\n  playoutDepth: number;\r\n  handleSelectScarecrow: () => void;\r\n  handleSelectScarecrows: () => void;\r\n  handleBotChange: (event: React.ChangeEvent<HTMLInputElement>) => void;\r\n  handleIterationsChange: (newValue: number) => () => void;\r\n  handlePlayoutDepthChange: (newValue: number) => () => void;\r\n}\r\n\r\nexport const SelectTeamButton = ({\r\n  isFromPlayer,\r\n  lineups,\r\n  text,\r\n  className,\r\n}: {\r\n  isFromPlayer: boolean;\r\n  lineups: BattleSetupData[\"lineups\"];\r\n  text: string;\r\n} & React.HTMLAttributes<HTMLDivElement>): JSX.Element => (\r\n  <StyledButton\r\n    component={StyledLink}\r\n    to=\"/team/\"\r\n    state={{\r\n      isFromPlayer: isFromPlayer,\r\n      isFromEnemies: !isFromPlayer,\r\n      lineups,\r\n    }}\r\n    replace\r\n    className={className}\r\n  >\r\n    {text}\r\n    {OpenIcon}\r\n  </StyledButton>\r\n);\r\n\r\ntype LinkProps = {\r\n  component: React.ReactNode;\r\n  to: string;\r\n  state: any;\r\n  replace: boolean;\r\n};\r\n\r\nconst BattleSettings = ({\r\n  lineups,\r\n  botIndex,\r\n  iterations,\r\n  playoutDepth,\r\n  handleSelectScarecrow,\r\n  handleSelectScarecrows,\r\n  handleBotChange,\r\n  handleIterationsChange,\r\n  handlePlayoutDepthChange,\r\n}: IGameSetupProps): JSX.Element => {\r\n  const { pageString }: any = useLanguage();\r\n  const [iterationsValue, setIterationsValue] = useState(iterations);\r\n  const [playoutDepthValue, setPlayoutDepthValue] = useState(playoutDepth);\r\n\r\n  return (\r\n    <div>\r\n      <SettingHeader title={pageString.battle.index.setting.team} />\r\n      <SelectTeamButton\r\n        isFromPlayer={true}\r\n        lineups={lineups}\r\n        text={pageString.battle.index.setting.select}\r\n      />\r\n      <SettingHeader title={pageString.battle.index.setting.enemy} />\r\n      <StyledButton onClick={handleSelectScarecrow}>\r\n        {pageString.battle.index.setting.scarecrow}\r\n      </StyledButton>\r\n      <StyledButton onClick={handleSelectScarecrows}>\r\n        {`${pageString.battle.index.setting.scarecrow} 5`}\r\n      </StyledButton>\r\n      <SelectTeamButton\r\n        isFromPlayer={false}\r\n        lineups={lineups}\r\n        text={pageString.battle.index.setting.select}\r\n      />\r\n      <SettingHeader title={pageString.battle.index.setting.bot} />\r\n      <StyledRadioGroup\r\n        label={pageString.battle.index.setting.groupLabel}\r\n        value={pageString.battle.index.setting.labels[botIndex]}\r\n        handleChange={handleBotChange}\r\n      >\r\n        {pageString.battle.index.setting.labels.map((label: string) => (\r\n          <Radio label={label} value={label} key={label} />\r\n        ))}\r\n      </StyledRadioGroup>\r\n      {botIndex === 2 && (\r\n        <div>\r\n          <TextWrapper id=\"iterations-slider\">\r\n            {pageString.battle.index.setting.iterations}\r\n          </TextWrapper>\r\n          <StyledSlider\r\n            value={iterationsValue}\r\n            max={1000}\r\n            min={1}\r\n            valueLabelDisplay=\"auto\"\r\n            onChange={(_, value: number | number[]) =>\r\n              setIterationsValue(value as number)\r\n            }\r\n            onChangeCommitted={handleIterationsChange(iterationsValue)}\r\n            aria-labelledby=\"iterations-slider\"\r\n          />\r\n          <TextWrapper id=\"playoutDepth-slider\">\r\n            {pageString.battle.index.setting.playoutDepth}\r\n          </TextWrapper>\r\n          <StyledSlider\r\n            value={playoutDepthValue}\r\n            max={100}\r\n            min={1}\r\n            valueLabelDisplay=\"auto\"\r\n            onChange={(_, value: number | number[]) =>\r\n              setPlayoutDepthValue(value as number)\r\n            }\r\n            onChangeCommitted={handlePlayoutDepthChange(playoutDepthValue)}\r\n            aria-labelledby=\"playoutDepth-slider\"\r\n          />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst SettingHeader = styled(Header)`\r\n  margin-bottom: 0.5rem;\r\n  border-bottom: 1px solid ${(props) => props.theme.colors.secondary};\r\n  font-size: 1rem;\r\n`;\r\nconst StyledButton = styled(Button)`\r\n  && {\r\n    margin-right: 0.5rem;\r\n    border: 1px solid ${(props) => props.theme.colors.secondaryBorder};\r\n    border-radius: 0.25rem;\r\n    background-color: ${(props) => props.theme.colors.surface};\r\n    color: ${(props) => props.theme.colors.onSurface};\r\n    &:hover {\r\n      border: 1px solid ${(props) => props.theme.colors.secondary};\r\n      box-shadow: inset 0 0 0.5rem ${(props) => props.theme.colors.secondary},\r\n        0 0 0.1rem ${(props) => props.theme.colors.secondary};\r\n    }\r\n  }\r\n` as React.ComponentType<ButtonProps | LinkProps>;\r\nconst StyledLink = styled(LocalizedLink)`\r\n  && {\r\n    text-decoration: none;\r\n    svg {\r\n      width: 1.4rem;\r\n      height: 1.4rem;\r\n      margin-left: 0.4rem;\r\n      fill: ${(props) => props.theme.colors.onSurface};\r\n    }\r\n  }\r\n`;\r\nconst StyledRadioGroup = styled(RadioGroup)`\r\n  && {\r\n    margin-top: 0.4rem;\r\n  }\r\n  label,\r\n  span {\r\n    font-size: 0.875rem;\r\n  }\r\n`;\r\nconst TextWrapper = styled.div`\r\n  font-size: 0.875rem;\r\n`;\r\n\r\nconst StyledSlider = styled(Slider)`\r\n  && {\r\n    color: ${(props) => props.theme.colors.secondary};\r\n    max-width: 18rem;\r\n    .MuiSlider-valueLabel > span > span {\r\n      color: ${(props) => props.theme.colors.onSecondary};\r\n    }\r\n  }\r\n`;\r\n\r\nexport default BattleSettings;\r\n","import {\r\n  ISkill,\r\n  SkillActionType,\r\n  SkillCondition,\r\n  SkillEffect,\r\n  SkillEffectBasis,\r\n  SkillEffectType,\r\n  SkillOn,\r\n} from \"types/skills\";\r\nimport { BattleCharacter as Character } from \"types/battle\";\r\nimport { CharacterAttribute } from \"types/characters\";\r\n\r\nconst correctionTerm = 0.0001;\r\n\r\nexport const calcAttack = (character: Character) => {\r\n  let ATKEffectPercentage = 0;\r\n  let ATKEffectValue = 0;\r\n\r\n  character.effects.forEach((e) => {\r\n    if (e.type === SkillEffectType.ATTACK_POWER && e.value !== undefined) {\r\n      if (e.basis === SkillEffectBasis.SELF_ATK) {\r\n        ATKEffectValue += e.value;\r\n      } else if (e.basis === SkillEffectBasis.TARGET_ATK) {\r\n        const stack = e.stack ? e.stack : 1;\r\n        // check the condition of conditional skill\r\n        if (\r\n          !(\r\n            (e.otherConditionValue &&\r\n              e.otherCondition === SkillCondition.HP_GREATER_THAN &&\r\n              character.HP / character.maxHP < e.otherConditionValue) ||\r\n            (e.otherConditionValue &&\r\n              e.otherCondition === SkillCondition.HP_LESS_THAN &&\r\n              character.HP / character.maxHP >= e.otherConditionValue)\r\n          )\r\n        ) {\r\n          ATKEffectPercentage += e.value * stack;\r\n        }\r\n      }\r\n    }\r\n  });\r\n\r\n  return (\r\n    Math.floor(character.baseATK * (1 + ATKEffectPercentage) + correctionTerm) +\r\n    ATKEffectValue\r\n  );\r\n};\r\n\r\n/**\r\n * A chart describing the damage rate among attributes\r\n * rate = ATTRIBUTE_CHART[from][to]\r\n */\r\nconst ATTRIBUTE_CHART = [\r\n  [0, -0.25, 0.5, 0, 0],\r\n  [0.5, 0, -0.25, 0, 0],\r\n  [-0.25, 0.5, 0, 0, 0],\r\n  [0, 0, 0, 0, 0.5],\r\n  [0, 0, 0, 0.5, 0],\r\n];\r\n\r\nexport const calcDamage = (\r\n  from: Character,\r\n  to: Character,\r\n  action: ISkill | SkillEffect,\r\n  fromLineup?: Character[],\r\n  toLineup?: Character[]\r\n) => {\r\n  if (\r\n    !action.value ||\r\n    !(\r\n      action.type === SkillActionType.COUNTER_STRIKE ||\r\n      action.type === SkillActionType.NORMAL_ATTACK ||\r\n      action.type === SkillActionType.ULTIMATE ||\r\n      action.type === SkillActionType.FOLLOW_UP_ATTACK ||\r\n      action.type === SkillActionType.REAL_ATTACK\r\n    )\r\n  ) {\r\n    throw \"invalid argument: wrong skill type\";\r\n  }\r\n\r\n  let dealtDamageEffect = 1;\r\n  let attackDamageEffect = 1;\r\n  let attributeEffect =\r\n    from.attribute === CharacterAttribute.NONE ||\r\n    to.attribute === CharacterAttribute.NONE ||\r\n    action.on === SkillOn.TURN_END ||\r\n    action.type === SkillActionType.REAL_ATTACK\r\n      ? 0\r\n      : ATTRIBUTE_CHART[from.attribute][to.attribute];\r\n  let guardEffect = to.isGuard ? 0.5 : 1;\r\n  let breakEffect = to.isBroken ? 1.25 : 1;\r\n  let damagedEffect = 1;\r\n  let attributeDamagedEffect = 1;\r\n\r\n  to.effects.forEach((e) => {\r\n    if (e.value === undefined) {\r\n      return true;\r\n    }\r\n\r\n    if (e.otherConditionValue) {\r\n      switch (e.otherCondition) {\r\n        case SkillCondition.HP_GREATER_THAN:\r\n          if (from.HP / from.maxHP < e.otherConditionValue) {\r\n            return true;\r\n          }\r\n          break;\r\n        case SkillCondition.HP_LESS_THAN:\r\n          if (from.HP / from.maxHP >= e.otherConditionValue) {\r\n            return true;\r\n          }\r\n          break;\r\n        case SkillCondition.EXIST_CHARACTER:\r\n          if (\r\n            !toLineup ||\r\n            !toLineup.some(\r\n              (c) => !c.isDead && c.id === (e.otherConditionValue as string)\r\n            )\r\n          ) {\r\n            return true;\r\n          }\r\n          break;\r\n      }\r\n    }\r\n\r\n    const stack = e.stack ? e.stack : 1;\r\n\r\n    switch (e.type) {\r\n      case SkillEffectType.ATTRIBUTE_DAMAGED:\r\n        if (e.byAttribute === from.attribute) {\r\n          attributeDamagedEffect += e.value * stack;\r\n        }\r\n        break;\r\n      case SkillEffectType.ATTRIBUTE_EFFECT:\r\n        attributeEffect *= 1 + e.value * stack;\r\n        break;\r\n      case SkillEffectType.DAMAGED:\r\n        damagedEffect += e.value * stack;\r\n        break;\r\n      case SkillEffectType.NORMAL_ATTACK_DAMAGED:\r\n        if (action.type === SkillActionType.NORMAL_ATTACK) {\r\n          attackDamageEffect += e.value * stack;\r\n        }\r\n        break;\r\n      case SkillEffectType.ULTIMATE_DAMAGED:\r\n        if (\r\n          action.type === SkillActionType.ULTIMATE ||\r\n          action.type === SkillActionType.FOLLOW_UP_ATTACK ||\r\n          action.type === SkillActionType.COUNTER_STRIKE\r\n        ) {\r\n          attackDamageEffect += e.value * stack;\r\n        }\r\n        break;\r\n      case SkillEffectType.GUARD_EFFECT:\r\n        if (to.isGuard) {\r\n          guardEffect -= e.value * stack;\r\n        }\r\n        break;\r\n    }\r\n\r\n    return true;\r\n  });\r\n\r\n  if (action.basis === SkillEffectBasis.TARGET_CURRENT_HP) {\r\n    return Math.floor(to.HP * action.value * guardEffect + correctionTerm);\r\n  }\r\n\r\n  if (action.basis === SkillEffectBasis.TARGET_MAX_HP) {\r\n    return Math.floor(to.maxHP * action.value * guardEffect + correctionTerm);\r\n  }\r\n\r\n  if (action.on === SkillOn.TURN_END) {\r\n    return Math.floor(\r\n      (action.on === SkillOn.TURN_END &&\r\n      action.basis === SkillEffectBasis.SELF_ATK\r\n        ? 1\r\n        : from.ATK) *\r\n        guardEffect *\r\n        damagedEffect *\r\n        action.value +\r\n        correctionTerm\r\n    );\r\n  }\r\n\r\n  from.effects.forEach((e) => {\r\n    if (e.value === undefined) {\r\n      return true;\r\n    }\r\n\r\n    if (e.otherConditionValue) {\r\n      switch (e.otherCondition) {\r\n        case SkillCondition.HP_GREATER_THAN:\r\n          if (from.HP / from.maxHP < e.otherConditionValue) {\r\n            return true;\r\n          }\r\n          break;\r\n        case SkillCondition.HP_LESS_THAN:\r\n          if (from.HP / from.maxHP >= e.otherConditionValue) {\r\n            return true;\r\n          }\r\n          break;\r\n        case SkillCondition.EXIST_CHARACTER:\r\n          if (\r\n            !fromLineup ||\r\n            !fromLineup.some(\r\n              (c) => !c.isDead && c.id === (e.otherConditionValue as string)\r\n            )\r\n          ) {\r\n            return true;\r\n          }\r\n          break;\r\n      }\r\n    }\r\n\r\n    const stack = e.stack ? e.stack : 1;\r\n\r\n    switch (e.type) {\r\n      case SkillEffectType.ATTRIBUTE_EFFECT:\r\n        attributeEffect *= 1 + e.value * stack;\r\n        break;\r\n      case SkillEffectType.DEALT_DAMAGE:\r\n        dealtDamageEffect += e.value * stack;\r\n        break;\r\n      case SkillEffectType.NORMAL_ATTACK_DAMAGE:\r\n        if (action.type === SkillActionType.NORMAL_ATTACK) {\r\n          attackDamageEffect += e.value * stack;\r\n        }\r\n        break;\r\n      case SkillEffectType.ULTIMATE_DAMAGE:\r\n        if (\r\n          action.type === SkillActionType.ULTIMATE ||\r\n          action.type === SkillActionType.FOLLOW_UP_ATTACK ||\r\n          action.type === SkillActionType.COUNTER_STRIKE\r\n        ) {\r\n          attackDamageEffect += e.value * stack;\r\n        }\r\n        break;\r\n    }\r\n\r\n    return true;\r\n  });\r\n\r\n  return Math.floor(\r\n    from.ATK *\r\n      dealtDamageEffect *\r\n      attackDamageEffect *\r\n      (1 + attributeEffect) *\r\n      guardEffect *\r\n      breakEffect *\r\n      damagedEffect *\r\n      attributeDamagedEffect *\r\n      action.value +\r\n      correctionTerm\r\n  );\r\n};\r\n\r\nexport const calcHeal = (\r\n  from: Character,\r\n  to: Character,\r\n  action: ISkill | SkillEffect,\r\n  damage?: number\r\n) => {\r\n  if (!action.value || action.type !== SkillActionType.HEAL) {\r\n    throw \"invalid argument\";\r\n  }\r\n\r\n  let base: number;\r\n  let healEffect = 1;\r\n  let healedEffect = 1;\r\n  let damageEffect = 1;\r\n\r\n  if (action.on === SkillOn.TURN_END) {\r\n    base = 1;\r\n  } else {\r\n    switch (action.basis) {\r\n      case SkillEffectBasis.SELF_ATK:\r\n        base = from.ATK;\r\n        break;\r\n      case SkillEffectBasis.TARGET_ATK:\r\n        base = to.ATK;\r\n        break;\r\n      case SkillEffectBasis.TARGET_MAX_HP:\r\n        base = to.maxHP;\r\n        break;\r\n      case SkillEffectBasis.TARGET_CURRENT_HP:\r\n        base = to.HP;\r\n        break;\r\n      case SkillEffectBasis.DAMAGE:\r\n        if (damage === undefined) {\r\n          throw new Error(\"invalid argument\");\r\n        }\r\n\r\n        base = damage;\r\n        break;\r\n      default:\r\n        throw new Error(\"invalid argument\");\r\n    }\r\n  }\r\n\r\n  if (\r\n    action.on !== SkillOn.TURN_END &&\r\n    action.basis !== SkillEffectBasis.DAMAGE &&\r\n    action.basis !== SkillEffectBasis.TARGET_MAX_HP &&\r\n    action.basis !== SkillEffectBasis.TARGET_CURRENT_HP\r\n  ) {\r\n    from.effects.forEach((e): boolean | void => {\r\n      if (e.value === undefined) {\r\n        return true;\r\n      }\r\n\r\n      const stack = e.stack ? e.stack : 1;\r\n\r\n      switch (e.type) {\r\n        case SkillEffectType.HEAL_EFFECT:\r\n          healEffect += e.value * stack;\r\n          break;\r\n        case SkillEffectType.NORMAL_ATTACK_DAMAGE:\r\n          if (\r\n            action.condition === SkillCondition.ATTACK ||\r\n            action.condition === SkillCondition.NORMAL_ATTACK\r\n          ) {\r\n            damageEffect += e.value * stack;\r\n          }\r\n          break;\r\n        case SkillEffectType.ULTIMATE_DAMAGE:\r\n          if (\r\n            action.condition === SkillCondition.ATTACK ||\r\n            action.condition === SkillCondition.ULTIMATE\r\n          ) {\r\n            damageEffect += e.value * stack;\r\n          }\r\n          break;\r\n      }\r\n    });\r\n  }\r\n\r\n  to.effects.forEach((e) => {\r\n    if (e.value !== undefined && e.type === SkillEffectType.HEALED) {\r\n      const stack = e.stack ? e.stack : 1;\r\n      healedEffect += e.value * stack;\r\n    }\r\n  });\r\n\r\n  return Math.floor(\r\n    base * healEffect * healedEffect * damageEffect * action.value +\r\n      correctionTerm\r\n  );\r\n};\r\n\r\nexport const calcShield = (\r\n  from: Character,\r\n  to: Character,\r\n  action: ISkill | SkillEffect\r\n) => {\r\n  if (!action.value || action.type !== SkillActionType.SHIELD) {\r\n    throw \"invalid argument\";\r\n  }\r\n\r\n  let base: number;\r\n  let shieldEffect = 1;\r\n  let shieldedEffect = 1;\r\n  let damageEffect = 1;\r\n\r\n  switch (action.basis) {\r\n    case SkillEffectBasis.SELF_ATK:\r\n      base = from.ATK;\r\n      break;\r\n    case SkillEffectBasis.TARGET_ATK:\r\n      base = to.ATK;\r\n      break;\r\n    case SkillEffectBasis.TARGET_MAX_HP:\r\n      base = to.maxHP;\r\n      break;\r\n    default:\r\n      throw \"invalid argument\";\r\n  }\r\n\r\n  if (action.basis !== SkillEffectBasis.TARGET_MAX_HP) {\r\n    from.effects.forEach((e) => {\r\n      if (e.value !== undefined) {\r\n        const stack = e.stack ? e.stack : 1;\r\n\r\n        switch (e.type) {\r\n          case SkillEffectType.SHIELD_EFFECT:\r\n            shieldEffect += e.value * stack;\r\n            break;\r\n          case SkillEffectType.NORMAL_ATTACK_DAMAGE:\r\n            if (\r\n              action.condition === SkillCondition.ATTACK ||\r\n              action.condition === SkillCondition.NORMAL_ATTACK\r\n            ) {\r\n              damageEffect += e.value * stack;\r\n            }\r\n            break;\r\n          case SkillEffectType.ULTIMATE_DAMAGE:\r\n            if (\r\n              action.condition === SkillCondition.ATTACK ||\r\n              action.condition === SkillCondition.ULTIMATE\r\n            ) {\r\n              damageEffect += e.value * stack;\r\n            }\r\n            break;\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  to.effects.forEach((e) => {\r\n    if (e.value !== undefined && e.type === SkillEffectType.SHIELDED) {\r\n      const stack = e.stack ? e.stack : 1;\r\n      shieldedEffect += e.value * stack;\r\n    }\r\n  });\r\n\r\n  return Math.floor(\r\n    base * shieldEffect * shieldedEffect * damageEffect * action.value +\r\n      correctionTerm\r\n  );\r\n};\r\n","import type { Ctx } from \"boardgame.io\";\r\nimport { SkillEffect } from \"types/skills\";\r\nimport { IGameState } from \"types/battle\";\r\n\r\nexport const sameEffect = <T extends SkillEffect>(e1: T, e2: T) => {\r\n  for (let p in e1) {\r\n    if (p !== \"duration\" && p !== \"stack\" && e1[p] !== e2[p]) {\r\n      return false;\r\n    }\r\n  }\r\n  return true;\r\n};\r\n\r\n// always two players\r\nexport const getEnemies = (G: IGameState, ctx: Ctx) =>\r\n  G.lineups[ctx.currentPlayer === \"0\" ? \"1\" : \"0\"];\r\n\r\nexport const merge = <T extends { [key: string]: any }[]>(...objects: T) =>\r\n  objects.reduce((result, current) => {\r\n    Object.keys(current).forEach((key) => {\r\n      if (typeof result[key] === \"object\" && typeof current[key] === \"object\") {\r\n        result[key] = merge(result[key], current[key]);\r\n      } else {\r\n        result[key] = current[key];\r\n      }\r\n    });\r\n\r\n    return result;\r\n  }, {}) as any;\r\n\r\nexport const generateMaxedCharacterSetupData = (id: string) => ({\r\n  id: id,\r\n  level: 60,\r\n  potential: +id[0] < 3 ? 12 : 6,\r\n  potentialSub: Array(6).fill(true),\r\n  discipline: +id[0] < 4 ? 3 : 0,\r\n  star: 5,\r\n  bond: 5,\r\n});\r\n","import {\r\n  ISkill,\r\n  SkillActionType,\r\n  SkillCondition,\r\n  SkillEffect,\r\n  SkillEffectBasis,\r\n  SkillOn,\r\n  SkillTarget,\r\n  SkillEffectType,\r\n  FollowUpAttackSkill,\r\n  UltimateSkill,\r\n  ExtraSkill,\r\n} from \"types/skills\";\r\nimport {\r\n  BattleCtx,\r\n  BattleCharacter as Character,\r\n  IGameState,\r\n  ILog,\r\n  PlayerID,\r\n} from \"types/battle\";\r\nimport { calcAttack, calcDamage, calcHeal, calcShield } from \"./calculators\";\r\nimport { getEnemies, sameEffect } from \"./helpers\";\r\n\r\nconst correctionTerm = 0.0001;\r\n\r\nexport const takeEffect = (\r\n  G: IGameState,\r\n  ctx: BattleCtx,\r\n  from: { character: Character },\r\n  to: { characters: Character[]; player: PlayerID },\r\n  skill: ISkill | ExtraSkill | SkillEffect,\r\n  logArr?: ILog[]\r\n) => {\r\n  let effect = {\r\n    ...skill,\r\n    fromPlayer: (skill as SkillEffect).fromPlayer\r\n      ? (skill as SkillEffect).fromPlayer\r\n      : ctx.currentPlayer,\r\n    from: from.character.teamPosition,\r\n  } as SkillEffect;\r\n\r\n  let ATKBuffValues: [number, number] | undefined;\r\n  if (\r\n    skill.type === SkillEffectType.ATTACK_POWER &&\r\n    skill.basis === SkillEffectBasis.SELF_ATK &&\r\n    skill.value\r\n  ) {\r\n    const value = Math.floor(from.character.ATK * skill.value + correctionTerm);\r\n    const valueAfterSelf = Math.floor(\r\n      (from.character.ATK + value) * skill.value + correctionTerm\r\n    );\r\n\r\n    ATKBuffValues = [value, valueAfterSelf];\r\n  }\r\n\r\n  to.characters.forEach((target): boolean | void => {\r\n    if (target.isDead) {\r\n      return true;\r\n    }\r\n\r\n    if (\r\n      (skill as ISkill).possibility !== undefined &&\r\n      skill.type !== SkillActionType.PARALYSIS &&\r\n      skill.type !== SkillActionType.SLEEP &&\r\n      skill.type !== SkillActionType.SILENCE\r\n    ) {\r\n      const r = ctx.random?.Number();\r\n      if (!r || r > (skill as ISkill).possibility!) {\r\n        return true;\r\n      }\r\n    }\r\n\r\n    // check stackable\r\n    const existEffect = target.effects.find((e) => sameEffect(e, effect));\r\n    if (existEffect && existEffect.on !== SkillOn.TURN_END) {\r\n      if (!existEffect.maxStack && !existEffect.duration) {\r\n        return true;\r\n      } else if (existEffect.maxStack && existEffect.stack) {\r\n        if (existEffect.stack < existEffect.maxStack) {\r\n          existEffect.stack++;\r\n        }\r\n        return true;\r\n      }\r\n    } else if (effect.maxStack) {\r\n      effect.stack = 1;\r\n    }\r\n\r\n    switch (skill.type) {\r\n      case SkillActionType.ADDSKILL:\r\n        if (skill.skill) {\r\n          target.extraSkill.push({ ...skill.skill });\r\n        }\r\n        break;\r\n      case SkillEffectType.ATTACK_POWER:\r\n        if (effect.value) {\r\n          // if is behind character then multiple its value again\r\n          if (ATKBuffValues) {\r\n            effect.value =\r\n              ATKBuffValues[\r\n                from.character.teamPosition >= target.teamPosition ? 0 : 1\r\n              ];\r\n          }\r\n\r\n          target.effects.push({ ...effect });\r\n          target.ATK = calcAttack(target);\r\n        }\r\n        break;\r\n      case SkillActionType.CANCEL_GUARD:\r\n        target.isGuard = false;\r\n        break;\r\n      case SkillActionType.CHANGE_CD:\r\n        if (skill.value !== undefined) {\r\n          target.CD += skill.value;\r\n          target.currentCD = target.currentCD === 0 ? 0 : target.CD;\r\n        }\r\n        break;\r\n      case SkillActionType.CHANGE_CURRENT_CD:\r\n        if (\r\n          skill.value !== undefined &&\r\n          !target.skillSet.passive.some(\r\n            (e) => e.type === SkillEffectType.IMMUNE_CHANGE_CD\r\n          ) &&\r\n          !target.effects.some(\r\n            (e) => e.type === SkillEffectType.IMMUNE_CHANGE_CD\r\n          )\r\n        ) {\r\n          target.currentCD += skill.value;\r\n          target.currentCD = target.currentCD < 0 ? 0 : target.currentCD;\r\n        }\r\n        break;\r\n      case SkillActionType.CHANGE_MAX_HP:\r\n        if (skill.value !== undefined) {\r\n          target.maxHP *= 1 + skill.value;\r\n          target.HP = target.maxHP;\r\n        }\r\n        break;\r\n      case SkillActionType.CLEAR_ABNORMAL:\r\n        target.isParalysis = false;\r\n        target.isSleep = false;\r\n        target.isSilence = false;\r\n        break;\r\n      case SkillActionType.CLEAR_ATTACK_DEBUFF:\r\n        target.effects = target.effects.filter(\r\n          (e) =>\r\n            !(\r\n              e.value &&\r\n              e.value < 0 &&\r\n              (e.type === SkillEffectType.ATTACK_POWER ||\r\n                e.type == SkillEffectType.NORMAL_ATTACK_DAMAGE ||\r\n                e.type === SkillEffectType.ULTIMATE_DAMAGE)\r\n            )\r\n        );\r\n        break;\r\n      case SkillActionType.CLEAR_SUSTAIN_DEBUFF:\r\n        target.effects = target.effects.filter(\r\n          (e) =>\r\n            !(\r\n              e.value &&\r\n              ((e.value > 0 && e.type === SkillEffectType.DAMAGED) ||\r\n                (e.value < 0 && e.type == SkillEffectType.GUARD_EFFECT) ||\r\n                (e.value < 0 && e.type === SkillEffectType.HEALED))\r\n            )\r\n        );\r\n        break;\r\n      case SkillActionType.CLEAR_EFFECT_FROM_SELF:\r\n        if (skill.skill) {\r\n          target.effects = target.effects.filter(\r\n            (e) =>\r\n              !sameEffect(e, {\r\n                ...skill.skill,\r\n                from: from.character.teamPosition,\r\n                fromPlayer: ctx.currentPlayer,\r\n              } as typeof e)\r\n          );\r\n        }\r\n        break;\r\n      case SkillActionType.COUNTER_STRIKE:\r\n      case SkillActionType.NORMAL_ATTACK:\r\n      case SkillActionType.ULTIMATE:\r\n      case SkillActionType.FOLLOW_UP_ATTACK:\r\n      case SkillActionType.REAL_ATTACK:\r\n        const damage = calcDamage(\r\n          from.character,\r\n          target,\r\n          skill,\r\n          G.lineups[effect.fromPlayer],\r\n          G.lineups[to.player]\r\n        );\r\n        let restDamage = damage;\r\n\r\n        const damageLog = {\r\n          player: ctx.currentPlayer,\r\n          type: skill.type,\r\n          value: damage,\r\n          from: {\r\n            player: effect.fromPlayer,\r\n            position: from.character.teamPosition,\r\n          },\r\n          to: {\r\n            player: to.player,\r\n            position: target.teamPosition,\r\n            originalHP: target.HP,\r\n            originalShield: target.shield,\r\n          },\r\n        } as ILog;\r\n\r\n        if (skill.type !== SkillActionType.REAL_ATTACK) {\r\n          target.effects = target.effects.filter((e) => {\r\n            if (e.type === SkillActionType.SHIELD) {\r\n              if (!e.duration || !e.value) {\r\n                return false;\r\n              }\r\n\r\n              if (restDamage >= e.value) {\r\n                restDamage -= e.value;\r\n                target.shield -= e.value;\r\n                return false;\r\n              } else {\r\n                e.value -= restDamage;\r\n                target.shield -= restDamage;\r\n                restDamage = 0;\r\n              }\r\n            }\r\n            return true;\r\n          });\r\n        }\r\n        target.HP -= restDamage;\r\n        target.HP = target.HP < 0 ? 0 : target.HP;\r\n        target.isDead = target.HP === 0;\r\n\r\n        damageLog.to.HP = target.HP;\r\n        damageLog.to.shield = target.shield;\r\n        logArr?.push(damageLog);\r\n\r\n        if (!target.isDead) {\r\n          // wake character only when HP decreases\r\n          if (damageLog.to.originalHP !== damageLog.to.HP) {\r\n            target.isSleep = false;\r\n          }\r\n          // dot won't trigger attacked skills\r\n          if (skill.on === SkillOn.TURN_END) {\r\n            break;\r\n          }\r\n\r\n          // trigger target's passive\r\n          const enemyID = ctx.currentPlayer === \"0\" ? \"1\" : \"0\";\r\n          const tempG = {\r\n            ...G,\r\n            selected: {\r\n              ...G.selected,\r\n              [enemyID]: G.target[ctx.currentPlayer],\r\n            },\r\n            target: {\r\n              ...G.target,\r\n              [enemyID]: G.selected[ctx.currentPlayer],\r\n            },\r\n          };\r\n          const tempCtx = { ...ctx, currentPlayer: enemyID as PlayerID };\r\n\r\n          if (!target.isSilence && !target.isParalysis && !target.isSleep) {\r\n            target.skillSet.passive\r\n              .filter(\r\n                (s) =>\r\n                  s.condition === SkillCondition.ATTACKED &&\r\n                  !(\r\n                    s.type === SkillActionType.COUNTER_STRIKE &&\r\n                    (skill.type === SkillActionType.COUNTER_STRIKE ||\r\n                      skill.type === SkillActionType.FOLLOW_UP_ATTACK)\r\n                  )\r\n              )\r\n              .forEach((targetSkill) => {\r\n                trigger(tempG, tempCtx, targetSkill, logArr);\r\n              });\r\n          }\r\n        } else {\r\n          target.isTaunt = false;\r\n          G.taunt[to.player] = G.taunt[to.player].filter(\r\n            (i) => i !== target.teamPosition\r\n          );\r\n          target.isGuard = false;\r\n          target.isSilence = false;\r\n          target.isSleep = false;\r\n          target.isParalysis = false;\r\n          target.isBroken = false;\r\n          target.effects = [];\r\n        }\r\n        break;\r\n      case SkillActionType.GUARD:\r\n        target.isGuard = true;\r\n        logArr?.push({\r\n          player: ctx.currentPlayer,\r\n          type: skill.type,\r\n          from: {\r\n            player: effect.fromPlayer,\r\n            position: from.character.teamPosition,\r\n          },\r\n          to: {\r\n            player: to.player,\r\n            position: target.teamPosition,\r\n            originalHP: target.HP,\r\n            originalShield: target.shield,\r\n            HP: target.HP,\r\n            shield: target.shield,\r\n          },\r\n        });\r\n        break;\r\n      case SkillActionType.HEAL:\r\n        let healBasis: number | undefined;\r\n        if (skill.basis === SkillEffectBasis.DAMAGE && logArr) {\r\n          // search basis\r\n          for (let i = logArr.length - 1; i >= 0; i++) {\r\n            if (\r\n              logArr[i].from.position === from.character.teamPosition &&\r\n              (logArr[i].type === SkillActionType.NORMAL_ATTACK ||\r\n                logArr[i].type === SkillActionType.ULTIMATE)\r\n            ) {\r\n              healBasis = logArr[i].value;\r\n              break;\r\n            }\r\n          }\r\n        }\r\n        const heal = calcHeal(from.character, target, skill, healBasis);\r\n\r\n        const healLog = {\r\n          player: ctx.currentPlayer,\r\n          type: skill.type,\r\n          value: heal,\r\n          from: {\r\n            player: effect.fromPlayer,\r\n            position: from.character.teamPosition,\r\n          },\r\n          to: {\r\n            player: to.player,\r\n            position: target.teamPosition,\r\n            originalHP: target.HP,\r\n            originalShield: target.shield,\r\n          },\r\n        } as ILog;\r\n\r\n        target.HP += heal;\r\n        target.HP = target.HP > target.maxHP ? target.maxHP : target.HP;\r\n\r\n        healLog.to.HP = target.HP;\r\n        healLog.to.shield = target.shield;\r\n        logArr?.push(healLog);\r\n\r\n        if (!target.isSilence && !target.isParalysis && !target.isSleep) {\r\n          const tempG = {\r\n            ...G,\r\n            selected: {\r\n              ...G.selected,\r\n              [ctx.currentPlayer]: target.teamPosition,\r\n            },\r\n            target: {\r\n              ...G.target,\r\n              [ctx.currentPlayer]: from.character.teamPosition,\r\n            },\r\n          };\r\n          const tempCtx = {\r\n            ...ctx,\r\n            currentPlayer: to.player,\r\n          };\r\n          target.skillSet.passive\r\n            .filter((s) => s.condition === SkillCondition.HEALED)\r\n            .forEach((s) => {\r\n              trigger(tempG, tempCtx, s, logArr);\r\n            });\r\n        }\r\n        break;\r\n      case SkillActionType.SHIELD:\r\n        const shield = calcShield(from.character, target, skill);\r\n\r\n        const shieldLog = {\r\n          player: ctx.currentPlayer,\r\n          type: skill.type,\r\n          value: shield,\r\n          from: {\r\n            player: effect.fromPlayer,\r\n            position: from.character.teamPosition,\r\n          },\r\n          to: {\r\n            player: to.player,\r\n            position: target.teamPosition,\r\n            originalHP: target.HP,\r\n            HP: target.HP,\r\n            originalShield: target.shield,\r\n          },\r\n        } as ILog;\r\n\r\n        target.shield += shield;\r\n        target.effects.push({ ...effect, value: shield });\r\n\r\n        shieldLog.to.shield = target.shield;\r\n        logArr?.push(shieldLog);\r\n        break;\r\n      case SkillActionType.PARALYSIS:\r\n        if (\r\n          !(skill as ISkill).possibility ||\r\n          target.skillSet.passive.some(\r\n            (s) => s.type === SkillEffectType.IMMUNE_PARALYSIS\r\n          )\r\n        ) {\r\n          break;\r\n        }\r\n\r\n        const para = target.effects.find(\r\n          (e) => e.type === SkillEffectType.PARALYZED\r\n        );\r\n        const paraBuff = para?.value ? para.value : 0;\r\n        const rPara = ctx.random?.Number();\r\n\r\n        if (rPara && rPara <= (skill as ISkill).possibility! * (1 + paraBuff)) {\r\n          target.isParalysis = true;\r\n          target.effects.push(effect);\r\n        }\r\n        break;\r\n      case SkillActionType.SLEEP:\r\n        if (\r\n          !(skill as ISkill).possibility ||\r\n          target.skillSet.passive.some(\r\n            (s) => s.type === SkillEffectType.IMMUNE_SLEEP\r\n          )\r\n        ) {\r\n          break;\r\n        }\r\n\r\n        const sleep = target.effects.find(\r\n          (e) => e.type === SkillEffectType.SLEPT\r\n        );\r\n        const sleepBuff = sleep?.value ? sleep.value : 0;\r\n        const rSleep = ctx.random?.Number();\r\n\r\n        if (\r\n          rSleep &&\r\n          rSleep <= (skill as ISkill).possibility! * (1 + sleepBuff)\r\n        ) {\r\n          target.isSleep = true;\r\n          target.effects.push(effect);\r\n        }\r\n        break;\r\n      case SkillActionType.SILENCE:\r\n        if (\r\n          !(skill as ISkill).possibility ||\r\n          target.skillSet.passive.some(\r\n            (s) => s.type === SkillEffectType.IMMUNE_SILENCE\r\n          )\r\n        ) {\r\n          break;\r\n        }\r\n        const silence = target.effects.find(\r\n          (s) => s.type === SkillEffectType.SILENCED\r\n        );\r\n        const silenceBuff = silence?.value ? silence.value : 0;\r\n        const rSilence = ctx.random?.Number();\r\n\r\n        if (\r\n          rSilence &&\r\n          rSilence <= (skill as ISkill).possibility! * (1 + silenceBuff)\r\n        ) {\r\n          target.isSilence = true;\r\n          target.effects.push(effect);\r\n        }\r\n        break;\r\n      case SkillActionType.TAUNT:\r\n        target.isTaunt = true;\r\n        target.effects.push(effect);\r\n        G.taunt[to.player].push(target.teamPosition);\r\n        break;\r\n      default:\r\n        if (skill.type in SkillActionType) {\r\n          throw new Error(`action not allow in effects, type: ${skill.type}`);\r\n        }\r\n        target.effects.push(effect);\r\n        break;\r\n    }\r\n  });\r\n};\r\n\r\nexport const getSkillTargets = (\r\n  G: IGameState,\r\n  ctx: BattleCtx,\r\n  skill: ISkill | SkillEffect\r\n) => {\r\n  const enemies = getEnemies(G, ctx);\r\n  const selfTeam = G.lineups[ctx.currentPlayer];\r\n  const selected = G.selected[ctx.currentPlayer];\r\n  let targets: Character[];\r\n  let isEnemy = false;\r\n\r\n  switch (skill.target) {\r\n    case SkillTarget.SELF:\r\n      targets = [selfTeam[selected]];\r\n      break;\r\n    case SkillTarget.TEAM:\r\n      targets = selfTeam.filter((c) => !c.isDead);\r\n      break;\r\n    case SkillTarget.TEAM_EXCEPT_SELF:\r\n      targets = selfTeam.filter((c, ind) => !c.isDead && ind !== selected);\r\n      break;\r\n    case SkillTarget.TEAM_LEAST_HP:\r\n      const leastHP = selfTeam.reduce((arr, c) => {\r\n        if (!c.isDead) {\r\n          if (!arr[0] || c.HP / c.maxHP < arr[0].HP / arr[0].maxHP) {\r\n            arr = [c];\r\n          } else if (c.HP / c.maxHP === arr[0].HP / arr[0].maxHP) {\r\n            arr.push(c);\r\n          }\r\n        }\r\n        return arr;\r\n      }, [] as Character[]);\r\n\r\n      const ind =\r\n        leastHP.length === 1 || !ctx.random?.Die\r\n          ? 0\r\n          : ctx.random.Die(leastHP.length) - 1;\r\n\r\n      targets = leastHP.length === 0 ? [] : [leastHP[ind]];\r\n      break;\r\n    case SkillTarget.ALL_ENEMIES:\r\n      targets = enemies.filter((c) => !c.isDead);\r\n      isEnemy = true;\r\n      break;\r\n    case SkillTarget.SINGLE_ENEMY:\r\n      targets = [enemies[G.target[ctx.currentPlayer]]];\r\n      isEnemy = true;\r\n      break;\r\n    case SkillTarget.FIRE:\r\n      targets = selfTeam.filter((c) => !c.isDead && c.attribute === 0);\r\n      break;\r\n    case SkillTarget.WATER:\r\n      targets = selfTeam.filter((c) => !c.isDead && c.attribute === 1);\r\n      break;\r\n    case SkillTarget.WIND:\r\n      targets = selfTeam.filter((c) => !c.isDead && c.attribute === 2);\r\n      break;\r\n    case SkillTarget.LIGHT:\r\n      targets = selfTeam.filter((c) => !c.isDead && c.attribute === 3);\r\n      break;\r\n    case SkillTarget.DARK:\r\n      targets = selfTeam.filter((c) => !c.isDead && c.attribute === 4);\r\n      break;\r\n    case SkillTarget.ATTACKER:\r\n      targets = selfTeam.filter((c) => !c.isDead && c.position === 5);\r\n      break;\r\n    case SkillTarget.PROTECTOR:\r\n      targets = selfTeam.filter((c) => !c.isDead && c.position === 6);\r\n      break;\r\n    case SkillTarget.HEALER:\r\n      targets = selfTeam.filter((c) => !c.isDead && c.position === 7);\r\n      break;\r\n    case SkillTarget.OBSTRUCTER:\r\n      targets = selfTeam.filter((c) => !c.isDead && c.position === 8);\r\n      break;\r\n    case SkillTarget.SUPPORT:\r\n      targets = selfTeam.filter((c) => !c.isDead && c.position === 9);\r\n      break;\r\n    case SkillTarget.LEFTMOST:\r\n      const leftmost = selfTeam.find((c) => !c.isDead);\r\n      targets = leftmost ? [leftmost] : [];\r\n      break;\r\n    default:\r\n      if (typeof skill.target === \"object\") {\r\n        if (typeof skill.target[0] === \"number\") {\r\n          // unimplemented: position specific skill may change in actual game if someone is dead\r\n          targets = selfTeam.filter(\r\n            (c, ind) => !c.isDead && (skill.target as number[]).includes(ind)\r\n          );\r\n          break;\r\n        } else if (typeof skill.target[0] === \"string\") {\r\n          targets = selfTeam.filter(\r\n            (c) => !c.isDead && (skill.target as string[]).includes(c.id)\r\n          );\r\n          break;\r\n        }\r\n      }\r\n\r\n      throw new Error(`invalid skill target type: ${typeof skill.target}`);\r\n  }\r\n\r\n  return { targets, isEnemy };\r\n};\r\n\r\nexport const trigger = (\r\n  G: IGameState,\r\n  ctx: BattleCtx,\r\n  skill: ISkill | ExtraSkill | SkillEffect,\r\n  logArr?: ILog[]\r\n) => {\r\n  const { targets, isEnemy } = getSkillTargets(G, ctx, skill);\r\n\r\n  if (targets.length === 0) {\r\n    return;\r\n  }\r\n\r\n  const selfTeam = G.lineups[ctx.currentPlayer];\r\n  const selected = G.selected[ctx.currentPlayer];\r\n  const { CD, skillDuration, repeat, ...rest } = skill as UltimateSkill &\r\n    ExtraSkill &\r\n    FollowUpAttackSkill;\r\n  let repeatTimes = repeat !== undefined ? repeat : 1;\r\n\r\n  for (let i = 0; i < repeatTimes; i++) {\r\n    if (skill.on === SkillOn.TURN_END) {\r\n      if (\r\n        !(\r\n          skill.type === SkillActionType.NORMAL_ATTACK ||\r\n          skill.type === SkillActionType.ULTIMATE ||\r\n          skill.type === SkillActionType.HEAL\r\n        )\r\n      ) {\r\n        throw new Error(\r\n          `invalid type for end turn effect, type: ${skill.type}`\r\n        );\r\n      }\r\n\r\n      targets.forEach((c) => {\r\n        const endTurnEffect = {\r\n          ...rest,\r\n          from: selfTeam[selected].teamPosition,\r\n          fromPlayer: ctx.currentPlayer,\r\n        };\r\n\r\n        if (skill.value) {\r\n          switch (skill.basis) {\r\n            case SkillEffectBasis.SELF_ATK:\r\n              endTurnEffect.value = Math.floor(\r\n                selfTeam[selected].ATK * skill.value + correctionTerm\r\n              );\r\n              break;\r\n            case SkillEffectBasis.TARGET_ATK:\r\n              endTurnEffect.value = skill.value * c.ATK;\r\n              break;\r\n            case SkillEffectBasis.TARGET_MAX_HP:\r\n              endTurnEffect.value = skill.value * c.maxHP;\r\n              break;\r\n            case SkillEffectBasis.TARGET_CURRENT_HP:\r\n              endTurnEffect.value = skill.value * c.HP;\r\n              break;\r\n          }\r\n        }\r\n\r\n        c.effects.push(endTurnEffect);\r\n      });\r\n    } else {\r\n      takeEffect(\r\n        G,\r\n        ctx,\r\n        { character: selfTeam[selected] },\r\n        {\r\n          characters: targets,\r\n          player: isEnemy\r\n            ? ctx.currentPlayer === \"0\"\r\n              ? \"1\"\r\n              : \"0\"\r\n            : ctx.currentPlayer,\r\n        },\r\n        rest,\r\n        logArr\r\n      );\r\n    }\r\n  }\r\n};\r\n","import {\r\n  SkillActionType,\r\n  SkillCondition,\r\n  SkillOn,\r\n  SkillTarget,\r\n  SkillEffectType,\r\n  ExtraSkill,\r\n  ISkill,\r\n} from \"types/skills\";\r\nimport { CharacterStats, ICharacterData } from \"types/characters\";\r\nimport {\r\n  BattleCtx,\r\n  BattleCharacter as Character,\r\n  BattleSetupData,\r\n  IGameState,\r\n  ILog,\r\n  ScarecrowStats,\r\n  PlayerID,\r\n} from \"types/battle\";\r\nimport {\r\n  attack,\r\n  doNothing,\r\n  guard,\r\n  ultimate,\r\n  switchMember,\r\n  switchTarget,\r\n  canSelect,\r\n} from \".\";\r\nimport { trigger, takeEffect } from \"./processSkill\";\r\nimport { calcAttack } from \"./calculators\";\r\nimport { getEnemies, merge } from \"./helpers\";\r\nimport calcCharStats from \"utils/calcCharStats\";\r\nimport { data as skillData } from \"data/characterSkill\";\r\nimport charMap from \"data/charMap\";\r\n\r\nexport const initCharacter = (\r\n  characterStats: CharacterStats | ScarecrowStats,\r\n  teamPosition: number\r\n): Character => {\r\n  if (characterStats.id === \"scarecrow\") {\r\n    const { attribute, ATK, HP } = characterStats as ScarecrowStats;\r\n    return {\r\n      id: \"scarecrow\",\r\n      attribute: attribute,\r\n      position: 5,\r\n      baseATK: ATK,\r\n      baseHP: HP,\r\n      maxHP: HP,\r\n      skillSet: {\r\n        normalAttack: [],\r\n        ultimate: [],\r\n        passive: [],\r\n      },\r\n      extraSkill: [],\r\n      ATK: ATK,\r\n      HP: HP,\r\n      shield: 0,\r\n      CD: 0,\r\n      currentCD: 51,\r\n      teamPosition,\r\n      effects: [],\r\n      isMoved: false,\r\n      isGuard: false,\r\n      isBroken: false,\r\n      isTaunt: false,\r\n      isParalysis: false,\r\n      isSleep: false,\r\n      isSilence: false,\r\n      isDead: false,\r\n    };\r\n  }\r\n\r\n  const { id, level, potential, potentialSub, discipline, star, bond } =\r\n    characterStats as CharacterStats;\r\n\r\n  if (!skillData[id]) {\r\n    throw new Error(`invalid character id: ${id}`);\r\n  }\r\n\r\n  const res = calcCharStats({\r\n    id,\r\n    level,\r\n    potential,\r\n    potentialSub,\r\n    discipline,\r\n    star,\r\n  });\r\n\r\n  if (!res) {\r\n    throw new Error(\"invalid argumnet\");\r\n  }\r\n\r\n  const { ATK: baseATK, HP: baseHP } = res;\r\n\r\n  const { ultimate, starPassive, potentialPassive, leader, ...rest } =\r\n    skillData[id];\r\n\r\n  // get skills according to character stats\r\n  let currUltimate = ultimate.common.map((s, ind) =>\r\n    merge(s, ultimate.bond[bond - 1][ind] ? ultimate.bond[bond - 1][ind] : {})\r\n  );\r\n\r\n  let passive = [] as ISkill[];\r\n\r\n  if (teamPosition === 0) {\r\n    passive.push(...leader);\r\n  }\r\n  starPassive.forEach((s) => {\r\n    if (s.star <= star) {\r\n      const { star, ...rest } = s;\r\n      passive.push(rest);\r\n    }\r\n  });\r\n  potentialPassive.forEach((s) => {\r\n    if (\r\n      s.potential < potential ||\r\n      (s.potential === potential && potentialSub[0])\r\n    ) {\r\n      const { potential, ...rest } = s;\r\n      passive.push(rest);\r\n    }\r\n  });\r\n\r\n  return {\r\n    id,\r\n    attribute: ((charMap as any)[id] as ICharacterData).tags.attribute,\r\n    position: ((charMap as any)[id] as ICharacterData).tags.position,\r\n    baseATK,\r\n    baseHP,\r\n    maxHP: baseHP,\r\n    skillSet: {\r\n      ...rest,\r\n      ultimate: currUltimate,\r\n      passive: passive,\r\n    },\r\n    extraSkill: [],\r\n    ATK: baseATK,\r\n    HP: baseHP,\r\n    shield: 0,\r\n    CD: currUltimate[0].CD,\r\n    currentCD: currUltimate[0].CD,\r\n    teamPosition,\r\n    effects: [],\r\n    isMoved: false,\r\n    isGuard: false,\r\n    isBroken: false,\r\n    isTaunt: false,\r\n    isParalysis: false,\r\n    isSleep: false,\r\n    isSilence: false,\r\n    isDead: false,\r\n  };\r\n};\r\n\r\nexport const nextTarget = (G: IGameState, ctx: BattleCtx) => {\r\n  const enemies = getEnemies(G, ctx);\r\n  const opponent = ctx.currentPlayer === \"0\" ? \"1\" : \"0\";\r\n\r\n  return G.taunt[opponent].length === 0\r\n    ? enemies[G.target[ctx.currentPlayer]].isDead\r\n      ? enemies.findIndex((c) => !c.isDead)\r\n      : G.target[ctx.currentPlayer]\r\n    : G.taunt[opponent][0];\r\n};\r\n\r\nexport const endMove = (G: IGameState, ctx: BattleCtx) => {\r\n  const lineup = G.lineups[ctx.currentPlayer];\r\n  lineup[G.selected[ctx.currentPlayer]].isMoved = true;\r\n\r\n  const next = lineup.findIndex((_, ind) => canSelect(G, ctx, ind));\r\n  if (next !== -1) {\r\n    G.selected[ctx.currentPlayer] = next;\r\n  }\r\n\r\n  G.target[ctx.currentPlayer] = nextTarget(G, ctx);\r\n};\r\n\r\nexport const Battle = (setupData: BattleSetupData) => ({\r\n  name: \"tkfm-battle-simulator\",\r\n  setup: (ctx: BattleCtx) => {\r\n    const lineups = setupData.lineups.map((lineup) =>\r\n      lineup.map((c, ind) => initCharacter(c, ind))\r\n    );\r\n    const G = {\r\n      lineups: { \"0\": lineups[0], \"1\": lineups[1] },\r\n      selected: { \"0\": 0, \"1\": 0 },\r\n      target: { \"0\": 0, \"1\": 0 },\r\n      taunt: { \"0\": [], \"1\": [] },\r\n      skillQueue: [],\r\n      log: [],\r\n    } as IGameState;\r\n\r\n    Object.entries(G.lineups).forEach(([playerID, lineup]) => {\r\n      lineup.forEach((c, ind) => {\r\n        const tempG = {\r\n          ...G,\r\n          selected: { ...G.selected, [playerID]: ind },\r\n        };\r\n        const tempCtx = { ...ctx, currentPlayer: playerID as PlayerID };\r\n\r\n        // 1st turn passives\r\n        c.skillSet.passive.forEach((s) => {\r\n          if (s.condition === SkillCondition.BATTLE_BEGIN) {\r\n            trigger(tempG, tempCtx, s);\r\n          }\r\n        });\r\n      });\r\n    });\r\n\r\n    return G;\r\n  },\r\n  moves: {\r\n    attack,\r\n    ultimate,\r\n    guard,\r\n    switchMember,\r\n    switchTarget,\r\n    doNothing,\r\n  },\r\n  turn: {\r\n    onBegin: (G: IGameState, ctx: BattleCtx) => {\r\n      const selfTeam = G.lineups[ctx.currentPlayer];\r\n\r\n      // update target\r\n      G.target[ctx.currentPlayer] = nextTarget(G, ctx);\r\n      G.log.push([]);\r\n\r\n      // update character states\r\n      selfTeam.forEach((c): boolean | void => {\r\n        if (c.isDead) {\r\n          return true;\r\n        }\r\n        c.isBroken = false;\r\n        c.isGuard = false;\r\n        c.isMoved = false;\r\n        // CD reduction\r\n        if (ctx.turn > 2) {\r\n          if (!c.effects.some((e) => e.type === SkillEffectType.CD_FREEZED)) {\r\n            c.currentCD = c.currentCD === 0 ? 0 : c.currentCD - 1;\r\n          }\r\n        }\r\n      });\r\n\r\n      // clear expired effects\r\n      if (ctx.turn > 2) {\r\n        Object.values(G.lineups).forEach((lineup) => {\r\n          lineup.forEach((c) => {\r\n            c.effects = c.effects.filter((s) => {\r\n              if (\r\n                s.duration !== undefined &&\r\n                s.fromPlayer === ctx.currentPlayer\r\n              ) {\r\n                s.duration--;\r\n              }\r\n              if (s.duration === 0) {\r\n                switch (s.type) {\r\n                  case SkillActionType.SHIELD:\r\n                    if (s.value) {\r\n                      c.shield -= s.value;\r\n                    }\r\n                    break;\r\n                  case SkillActionType.TAUNT:\r\n                    c.isTaunt = false;\r\n                    G.taunt[ctx.currentPlayer] = G.taunt[\r\n                      ctx.currentPlayer\r\n                    ].filter((i) => i !== c.teamPosition);\r\n                    break;\r\n                  case SkillActionType.PARALYSIS:\r\n                    c.isParalysis = false;\r\n                    break;\r\n                  case SkillActionType.SLEEP:\r\n                    c.isSleep = false;\r\n                    break;\r\n                  case SkillActionType.SILENCE:\r\n                    c.isSilence = false;\r\n                    break;\r\n                }\r\n                return false;\r\n              }\r\n\r\n              return true;\r\n            });\r\n          });\r\n        });\r\n      }\r\n\r\n      selfTeam.forEach((c, ind): boolean | void => {\r\n        if (c.isDead) {\r\n          return true;\r\n        }\r\n\r\n        // aside from battle begin\r\n        if (ctx.turn > 2) {\r\n          // clear expired extra skills\r\n          c.extraSkill = c.extraSkill.filter((s) => {\r\n            const extraSkill = s as ExtraSkill;\r\n            if (extraSkill.skillDuration !== undefined) {\r\n              extraSkill.skillDuration--;\r\n            } else {\r\n              return true;\r\n            }\r\n            return extraSkill.skillDuration !== 0;\r\n          });\r\n        }\r\n\r\n        // turn-based skills\r\n        let skills = [];\r\n\r\n        if (!c.isSilence && !c.isParalysis && !c.isSleep) {\r\n          skills.push(...c.skillSet.passive);\r\n        }\r\n\r\n        skills.forEach((s) => {\r\n          if (\r\n            s.condition === SkillCondition.TURN_BASED &&\r\n            s.on === SkillOn.TURN_BEGIN &&\r\n            Math.floor((ctx.turn + 1) / 2) !== 1 &&\r\n            s.conditionValue !== undefined &&\r\n            (Math.floor((ctx.turn + 1) / 2) - 1) % s.conditionValue === 0\r\n          ) {\r\n            trigger(\r\n              { ...G, selected: { ...G.selected, [ctx.currentPlayer]: ind } },\r\n              ctx,\r\n              s\r\n            );\r\n          }\r\n        });\r\n\r\n        c.ATK = calcAttack(c);\r\n      });\r\n\r\n      // update selected\r\n      G.selected[ctx.currentPlayer] = selfTeam.findIndex((_, ind) =>\r\n        canSelect(G, ctx, ind)\r\n      );\r\n    },\r\n    onEnd: (G: IGameState, ctx: BattleCtx) => {\r\n      const selfTeam = G.lineups[ctx.currentPlayer];\r\n      const log: ILog[] = [];\r\n      selfTeam.forEach((c, ind) => {\r\n        c.effects.forEach((s) => {\r\n          if (s.on === SkillOn.TURN_END) {\r\n            const fromCharacter =\r\n              s.fromPlayer === ctx.currentPlayer\r\n                ? selfTeam[s.from]\r\n                : getEnemies(G, ctx).find((c) => c.teamPosition === s.from);\r\n\r\n            if (fromCharacter) {\r\n              takeEffect(\r\n                { ...G, selected: { ...G.selected, [ctx.currentPlayer]: ind } },\r\n                ctx,\r\n                { character: fromCharacter },\r\n                { characters: [c], player: ctx.currentPlayer },\r\n                { ...s, target: SkillTarget.SELF },\r\n                log\r\n              );\r\n            }\r\n          }\r\n        });\r\n      });\r\n\r\n      G.log.slice(-1)[0].push(...log);\r\n    },\r\n    endIf: (G: IGameState, ctx: BattleCtx) =>\r\n      !G.lineups[ctx.currentPlayer].some((_, ind) => canSelect(G, ctx, ind)),\r\n  },\r\n  minPlayers: 2,\r\n  maxPlayers: 2,\r\n  endIf: (G: IGameState, ctx: BattleCtx): any => {\r\n    const isAllDead = Object.values(G.lineups).map((lineup) =>\r\n      lineup.every((c) => c.isDead)\r\n    );\r\n\r\n    if (ctx.turn > 100 || isAllDead[0] || isAllDead[1]) {\r\n      return { winner: isAllDead[1] ? \"0\" : \"1\" };\r\n    }\r\n  },\r\n  disableUndo: false,\r\n  ai: {\r\n    enumerate: () => [],\r\n    iterations: setupData.iterations,\r\n    playoutDepth: setupData.playoutDepth,\r\n  },\r\n});\r\n","import { MCTSBot } from \"boardgame.io/ai\";\r\nimport { BattleCtx, IGameState } from \"types/battle\";\r\nimport { canAttack, canSelect, canTarget, canUltimate } from \"utils/battle\";\r\nimport { getEnemies } from \"./helpers\";\r\nimport { BattleCharacter as Character } from \"types/battle\";\r\n\r\nconst findAllIndices = (\r\n  lineup: Character[],\r\n  condition: (ind: number) => boolean\r\n) =>\r\n  lineup.reduce((res, _, i) => {\r\n    if (condition(i)) {\r\n      res.push(i);\r\n    }\r\n    return res;\r\n  }, [] as number[]);\r\n\r\nexport class CustomMCTSBot extends MCTSBot {\r\n  constructor(opts: any) {\r\n    // allow to set ai objectives and settings\r\n    super({\r\n      ...opts,\r\n      ...opts.game.ai,\r\n      enumerate: (G: IGameState, ctx: BattleCtx) => {\r\n        let moves = [];\r\n        const lineup = G.lineups[ctx.currentPlayer];\r\n        const enemies = getEnemies(G, ctx);\r\n        const selected = findAllIndices(lineup, (ind) =>\r\n          canSelect(G, ctx, ind)\r\n        );\r\n        const targets = findAllIndices(enemies, (ind) =>\r\n          canTarget(G, ctx, ind)\r\n        );\r\n\r\n        for (let s of selected) {\r\n          for (let t of targets) {\r\n            if (canAttack(G, ctx, s, t)) {\r\n              moves.push({\r\n                move: \"attack\",\r\n                args: [s, t],\r\n              });\r\n            }\r\n            if (canSelect(G, ctx, s)) {\r\n              moves.push({\r\n                move: \"guard\",\r\n                args: [s],\r\n              });\r\n            }\r\n            if (canUltimate(G, ctx, s, t)) {\r\n              moves.push({\r\n                move: \"ultimate\",\r\n                args: [s, t],\r\n              });\r\n            }\r\n          }\r\n        }\r\n\r\n        return moves;\r\n      },\r\n      objectives: () => ({\r\n        kill: {\r\n          checker: (G: IGameState, ctx: BattleCtx) => {\r\n            const moves = G.log[ctx.turn - 1];\r\n            if (moves.length === 0) {\r\n              return false;\r\n            }\r\n            return moves.some(\r\n              (move) =>\r\n                move.to.player !== ctx.currentPlayer &&\r\n                move.to.originalHP > 0 &&\r\n                move.to.HP === 0\r\n            );\r\n          },\r\n          weight: 1,\r\n        },\r\n        dontDie: {\r\n          checker: (G: IGameState, ctx: BattleCtx) =>\r\n            G.lineups[ctx.currentPlayer].some((c) => c.isDead),\r\n          weight: -1,\r\n        },\r\n      }),\r\n    });\r\n  }\r\n}\r\n\r\nexport class AutoBot extends MCTSBot {\r\n  constructor(opts: any) {\r\n    super({\r\n      ...opts,\r\n      enumerate: (G: IGameState, ctx: BattleCtx) => {\r\n        const lineup = G.lineups[ctx.currentPlayer];\r\n        const enemies = getEnemies(G, ctx);\r\n\r\n        const selected = lineup.findIndex((_, ind) => canSelect(G, ctx, ind));\r\n        if (selected === -1) {\r\n          return [{ move: \"doNothing\", args: [] }];\r\n        }\r\n\r\n        const targets = enemies\r\n          .filter((_, ind) => canTarget(G, ctx, ind))\r\n          .reduce((max, c) => {\r\n            if (!max[0] || c.HP / c.maxHP > max[0].HP / max[0].maxHP) {\r\n              return [c];\r\n            }\r\n            if (c.HP / c.maxHP === max[0].HP / max[0].maxHP) {\r\n              max.push(c);\r\n            }\r\n            return max;\r\n          }, [] as Character[]);\r\n\r\n        if (targets.length === 0) {\r\n          return [{ move: \"doNothing\", args: [] }];\r\n        }\r\n        let target: number;\r\n        if (targets.length === 1) {\r\n          target = targets[0].teamPosition;\r\n        } else {\r\n          const r = ctx.random?.Die(targets.length);\r\n          target = targets[r !== undefined ? r : 0].teamPosition;\r\n        }\r\n\r\n        return [\r\n          {\r\n            move: canUltimate(G, ctx, selected, target) ? \"ultimate\" : \"attack\",\r\n            args: [selected, target],\r\n          },\r\n        ];\r\n      },\r\n      iterations: 1,\r\n      playoutDepth: 1,\r\n    });\r\n  }\r\n}\r\n\r\nexport class DoNothingBot extends MCTSBot {\r\n  constructor(opts: any) {\r\n    super({\r\n      ...opts,\r\n      enumerate: () => [{ move: \"doNothing\", args: [] }],\r\n      iterations: 1,\r\n      playoutDepth: 1,\r\n    });\r\n  }\r\n}\r\n","import { INVALID_MOVE } from \"boardgame.io/core\";\r\nimport {\r\n  ISkill,\r\n  SkillActionType,\r\n  SkillCondition,\r\n  SkillOn,\r\n  SkillTarget,\r\n} from \"types/skills\";\r\nimport { BattleCtx, IGameState, ILog } from \"types/battle\";\r\nimport { endMove } from \".\";\r\nimport { trigger } from \"./processSkill\";\r\nimport { getEnemies } from \"./helpers\";\r\n\r\nexport const canSelect = (\r\n  G: IGameState,\r\n  ctx: BattleCtx,\r\n  selected: number\r\n): boolean => {\r\n  const selectedCharacter = G.lineups[ctx.currentPlayer][selected];\r\n\r\n  return !selectedCharacter\r\n    ? false\r\n    : !selectedCharacter.isMoved &&\r\n        !selectedCharacter.isDead &&\r\n        !selectedCharacter.isParalysis &&\r\n        !selectedCharacter.isSleep &&\r\n        !selectedCharacter.isBroken;\r\n};\r\n\r\nexport const canTarget = (G: IGameState, ctx: BattleCtx, target: number) => {\r\n  const enemies = getEnemies(G, ctx);\r\n  if (!enemies[target]) {\r\n    return false;\r\n  }\r\n  const tauntIndices = G.taunt[ctx.currentPlayer === \"0\" ? \"1\" : \"0\"];\r\n\r\n  return tauntIndices.length === 0\r\n    ? !enemies[target].isDead\r\n    : target === tauntIndices[0];\r\n};\r\n\r\nexport const canAttack = (\r\n  G: IGameState,\r\n  ctx: BattleCtx,\r\n  selected: number,\r\n  target: number\r\n): boolean => canSelect(G, ctx, selected) && canTarget(G, ctx, target);\r\n\r\nexport const attack = (\r\n  G: IGameState,\r\n  ctx: BattleCtx,\r\n  selected: number,\r\n  target: number\r\n): IGameState | typeof INVALID_MOVE | void => {\r\n  if (canAttack(G, ctx, selected, target)) {\r\n    G.selected[ctx.currentPlayer] = selected;\r\n    G.target[ctx.currentPlayer] = target;\r\n  } else {\r\n    return INVALID_MOVE;\r\n  }\r\n\r\n  const self = G.lineups[ctx.currentPlayer][selected];\r\n  const log: ILog[] = [];\r\n  let skills = [...self.skillSet.normalAttack];\r\n\r\n  if (!self.isSilence) {\r\n    skills.push(\r\n      ...self.extraSkill.map((s) => {\r\n        const { skillDuration, ...rest } = s;\r\n        return rest;\r\n      })\r\n    );\r\n    skills.push(...self.skillSet.passive);\r\n  } else {\r\n    skills.push(\r\n      ...self.extraSkill\r\n        .filter((s) => s.type === SkillActionType.NORMAL_ATTACK)\r\n        .map((s) => {\r\n          const { skillDuration, ...rest } = s;\r\n          return rest;\r\n        })\r\n    );\r\n  }\r\n\r\n  skills = skills.filter(\r\n    (s) =>\r\n      s.condition === SkillCondition.ATTACK ||\r\n      s.condition === SkillCondition.NORMAL_ATTACK\r\n  );\r\n  skills.sort((a, b) => a.on - b.on);\r\n  skills.forEach((s) => {\r\n    trigger(G, ctx, s, log);\r\n  });\r\n\r\n  G.log.slice(-1)[0].push(...log);\r\n  endMove(G, ctx);\r\n};\r\n\r\nexport const canUltimate = (\r\n  G: IGameState,\r\n  ctx: BattleCtx,\r\n  selected: number,\r\n  target: number\r\n): boolean => {\r\n  if (!(canSelect(G, ctx, selected) && canTarget(G, ctx, target))) {\r\n    return false;\r\n  }\r\n\r\n  const self = G.lineups[ctx.currentPlayer][selected];\r\n  return self.currentCD === 0 && !self.isSilence;\r\n};\r\n\r\nexport const ultimate = (\r\n  G: IGameState,\r\n  ctx: BattleCtx,\r\n  selected: number,\r\n  target: number\r\n): IGameState | typeof INVALID_MOVE | void => {\r\n  if (canUltimate(G, ctx, selected, target)) {\r\n    G.selected[ctx.currentPlayer] = selected;\r\n    G.target[ctx.currentPlayer] = target;\r\n  } else {\r\n    return INVALID_MOVE;\r\n  }\r\n\r\n  const self = G.lineups[ctx.currentPlayer][selected];\r\n  self.currentCD = self.CD;\r\n\r\n  const log: ILog[] = [];\r\n  let skills = [...self.skillSet.ultimate] as ISkill[];\r\n\r\n  if (!self.isSilence) {\r\n    skills.push(\r\n      ...self.extraSkill.map((s) => {\r\n        const { skillDuration, ...rest } = s;\r\n        return rest;\r\n      })\r\n    );\r\n    skills.push(...self.skillSet.passive);\r\n  } else {\r\n    skills.push(\r\n      ...self.extraSkill\r\n        .filter((s) => s.type === SkillActionType.ULTIMATE)\r\n        .map((s) => {\r\n          const { skillDuration, ...rest } = s;\r\n          return rest;\r\n        })\r\n    );\r\n  }\r\n\r\n  skills = skills.filter(\r\n    (s) =>\r\n      s.condition === SkillCondition.ATTACK ||\r\n      s.condition === SkillCondition.ULTIMATE\r\n  );\r\n  skills.sort((a, b) => a.on - b.on);\r\n  skills.forEach((s) => {\r\n    trigger(G, ctx, s, log);\r\n  });\r\n\r\n  G.log.slice(-1)[0].push(...log);\r\n  endMove(G, ctx);\r\n};\r\n\r\nexport const guard = (\r\n  G: IGameState,\r\n  ctx: BattleCtx,\r\n  selected: number\r\n): IGameState | typeof INVALID_MOVE | void => {\r\n  if (canSelect(G, ctx, selected)) {\r\n    G.selected[ctx.currentPlayer] = selected;\r\n  } else {\r\n    return INVALID_MOVE;\r\n  }\r\n  const selectedCharacter = G.lineups[ctx.currentPlayer][selected];\r\n\r\n  const log: ILog[] = [];\r\n  trigger(\r\n    G,\r\n    ctx,\r\n    {\r\n      type: SkillActionType.GUARD,\r\n      condition: SkillCondition.GUARD,\r\n      target: SkillTarget.SELF,\r\n      on: SkillOn.ON_ACTION,\r\n    },\r\n    log\r\n  );\r\n\r\n  // trigger guard passive\r\n  if (!selectedCharacter.isSilence) {\r\n    selectedCharacter.skillSet.passive.forEach((targetSkill) => {\r\n      if (targetSkill.condition === SkillCondition.GUARD) {\r\n        trigger(G, ctx, targetSkill, log);\r\n      }\r\n    });\r\n  }\r\n\r\n  G.log.slice(-1)[0].push(...log);\r\n  endMove(G, ctx);\r\n};\r\n\r\nexport const switchMember = (\r\n  G: IGameState,\r\n  ctx: BattleCtx,\r\n  ind: number\r\n): IGameState | typeof INVALID_MOVE | void => {\r\n  if (canSelect(G, ctx, ind)) {\r\n    G.selected[ctx.currentPlayer] = ind;\r\n  } else {\r\n    return INVALID_MOVE;\r\n  }\r\n};\r\n\r\nexport const switchTarget = (\r\n  G: IGameState,\r\n  ctx: BattleCtx,\r\n  ind: number\r\n): IGameState | typeof INVALID_MOVE | void => {\r\n  if (canTarget(G, ctx, ind)) {\r\n    G.target[ctx.currentPlayer] = ind;\r\n  } else {\r\n    return INVALID_MOVE;\r\n  }\r\n};\r\n\r\nexport const doNothing = (G: IGameState, ctx: BattleCtx) => {\r\n  if (G.selected[ctx.currentPlayer] !== -1) {\r\n    G.lineups[ctx.currentPlayer][G.selected[ctx.currentPlayer]].isMoved = true;\r\n    endMove(G, ctx);\r\n  } else {\r\n    G.lineups[ctx.currentPlayer].forEach((c) => {\r\n      c.isMoved = true;\r\n    });\r\n  }\r\n};\r\n","import React, { useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { CircularProgress, Tab, Tabs } from \"@material-ui/core\";\r\nimport { BoardProps } from \"boardgame.io/react\";\r\nimport { BattleCtx, IGameState, PlayerID } from \"types/battle\";\r\nimport Panels from \"containers/Panels\";\r\nimport { useLanguage } from \"containers/LanguageProvider\";\r\nimport useLocalStorage from \"hooks/useLocalStorage\";\r\nimport BattleHelp from \"./BattleHelp\";\r\nimport BattleLog from \"./BattleLog\";\r\nimport BattleSettings, {\r\n  IGameSetupProps,\r\n  SelectTeamButton,\r\n} from \"./BattleSettings\";\r\nimport CharacterButton from \"./CharacterButton\";\r\nimport Header from \"components/Header\";\r\nimport IconButton from \"components/IconButton\";\r\nimport {\r\n  AttackIcon,\r\n  GuardIcon,\r\n  UltimateIcon,\r\n  UndoIcon,\r\n  RedoIcon,\r\n  ResetIcon,\r\n  SettingIcon,\r\n  HelpIcon,\r\n  NoteIcon,\r\n} from \"components/icon\";\r\nimport Snackbar from \"components/Snackbar\";\r\nimport { canAttack, canSelect, canTarget, canUltimate } from \"utils/battle\";\r\n\r\nconst TabPanel = ({\r\n  children,\r\n  value,\r\n  index,\r\n}: {\r\n  children: React.ReactNode;\r\n  value: number;\r\n  index: number;\r\n}): JSX.Element => (\r\n  <div\r\n    role=\"tabpanel\"\r\n    hidden={value !== index}\r\n    id={`info-tabpanel-${index}`}\r\n    aria-labelledby={`info-tab-${index}`}\r\n  >\r\n    {value === index && children}\r\n  </div>\r\n);\r\n\r\nconst tabIcons = [NoteIcon, SettingIcon, HelpIcon];\r\n\r\nconst InfoTabs = ({\r\n  G,\r\n  settingProps,\r\n}: {\r\n  G: IGameState;\r\n} & { settingProps: IGameSetupProps }): JSX.Element => {\r\n  const { pageString }: any = useLanguage();\r\n\r\n  const [tabIndex, setTabIndex] = useLocalStorage(\"battle-setting-tab\", 0);\r\n\r\n  const handleChange = (_: React.ChangeEvent<{}>, newValue: number) => {\r\n    setTabIndex(newValue);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <StyledTabs\r\n        value={tabIndex}\r\n        onChange={handleChange}\r\n        aria-label=\"Info tabs\"\r\n        variant=\"fullWidth\"\r\n      >\r\n        {pageString.battle.index.tabs.map((tab: string, ind: number) => (\r\n          <StyledTab\r\n            label={tab}\r\n            id={`info-tab-${ind}`}\r\n            aria-controls={`info-tabpanel-${ind}`}\r\n            icon={tabIcons[ind]}\r\n            $selected={tabIndex === ind}\r\n            key={ind}\r\n          />\r\n        ))}\r\n      </StyledTabs>\r\n      <TabPanel value={tabIndex} index={0}>\r\n        <BattleLog G={G} />\r\n      </TabPanel>\r\n      <TabPanel value={tabIndex} index={1}>\r\n        <BattleSettings {...settingProps} />\r\n      </TabPanel>\r\n      <TabPanel value={tabIndex} index={2}>\r\n        <BattleHelp />\r\n      </TabPanel>\r\n    </>\r\n  );\r\n};\r\n\r\nconst StyledTabs = styled(Tabs)`\r\n  && {\r\n    min-height: 0;\r\n    .MuiTabs-indicator {\r\n      background-color: ${(props) => props.theme.colors.secondary};\r\n    }\r\n  }\r\n`;\r\nconst StyledTab = styled(Tab)<{ $selected: boolean }>`\r\n  && {\r\n    padding: 0.3rem 0.5rem;\r\n    min-width: 120px;\r\n    min-height: 0;\r\n    .MuiTab-wrapper {\r\n      flex-direction: row;\r\n      margin-bottom: 0.5rem;\r\n      svg {\r\n        height: 1.6rem;\r\n        width: 1.6rem;\r\n        margin-right: 0.4rem;\r\n        margin-bottom: 0;\r\n        fill: ${(props) =>\r\n          props.theme.colors[props.$selected ? \"secondary\" : \"onSurface\"]};\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport type BattleBoardProps = BoardProps<IGameState> & {\r\n  ctx: BattleCtx;\r\n  settingProps: IGameSetupProps;\r\n  handleReset: () => void;\r\n};\r\n\r\nexport const BattleBoard = ({\r\n  G,\r\n  ctx,\r\n  moves,\r\n  undo,\r\n  redo,\r\n  settingProps,\r\n  handleReset,\r\n}: BattleBoardProps): JSX.Element => {\r\n  const { pageString }: any = useLanguage();\r\n  const [isSnackbarOpen, setSnackbarOpen] = useState(false);\r\n  const selected = G.selected[ctx.currentPlayer];\r\n  const target = G.target[ctx.currentPlayer];\r\n\r\n  const handleCharacterClick = (ind: number, player: string) => () => {\r\n    if (ctx.turn > 0 && !ctx.gameover) {\r\n      if (ctx.currentPlayer === player) {\r\n        if (canSelect(G, ctx, ind)) {\r\n          moves.switchMember(ind);\r\n          return;\r\n        }\r\n      } else if (canTarget(G, ctx, ind)) {\r\n        moves.switchTarget(ind);\r\n        return;\r\n      }\r\n    }\r\n    setSnackbarOpen(true);\r\n  };\r\n\r\n  const handleAttackClick = () => {\r\n    if (ctx.turn > 0 && !ctx.gameover && canAttack(G, ctx, selected, target)) {\r\n      moves.attack(selected, target);\r\n      return;\r\n    }\r\n    setSnackbarOpen(true);\r\n  };\r\n\r\n  const handleUltimateClick = () => {\r\n    if (\r\n      ctx.turn > 0 &&\r\n      !ctx.gameover &&\r\n      canUltimate(G, ctx, selected, target)\r\n    ) {\r\n      moves.ultimate(selected, target);\r\n      return;\r\n    }\r\n    setSnackbarOpen(true);\r\n  };\r\n\r\n  const handleGuardClick = () => {\r\n    if (ctx.turn > 0 && !ctx.gameover && canSelect(G, ctx, selected)) {\r\n      moves.guard(selected);\r\n      return;\r\n    }\r\n    setSnackbarOpen(true);\r\n  };\r\n\r\n  const handleUndoClick = () => {\r\n    if (ctx.turn > 0 && !ctx.gameover) {\r\n      undo();\r\n      return;\r\n    }\r\n    setSnackbarOpen(true);\r\n  };\r\n\r\n  const handleRedoClick = () => {\r\n    if (ctx.turn > 0 && !ctx.gameover) {\r\n      redo();\r\n      return;\r\n    }\r\n    setSnackbarOpen(true);\r\n  };\r\n\r\n  const handleSnackbarClose = () => {\r\n    setSnackbarOpen(false);\r\n  };\r\n\r\n  return (\r\n    <Panels panelsWidth={[\"37.5%\", \"62.5%\"]}>\r\n      <MainPanel $isBattleOver={ctx.turn > 0 && ctx.gameover !== undefined}>\r\n        <div>\r\n          {\r\n            pageString.battle.index[\r\n              ctx.gameover?.winner === \"0\" ? \"win\" : \"lose\"\r\n            ]\r\n          }\r\n        </div>\r\n        <StyledHeader\r\n          title={`${pageString.battle.index.turn}: ${Math.floor(\r\n            (ctx.turn + 1) / 2\r\n          )}`}\r\n          end={\r\n            ctx.currentPlayer === \"1\" &&\r\n            !ctx.gameover && (\r\n              <SpinnerWrapper>\r\n                <span>{pageString.battle.index.calculating}</span>\r\n                <StyledSpinner size={24} thickness={6} disableShrink />\r\n              </SpinnerWrapper>\r\n            )\r\n          }\r\n        />\r\n        <LineupsContainer>\r\n          {Object.entries(G.lineups).map(([player, lineup]) => (\r\n            <div key={player}>\r\n              {lineup.length === 0 ? (\r\n                <StyledSelectTeamButton\r\n                  isFromPlayer={player === \"0\"}\r\n                  lineups={settingProps.lineups}\r\n                  text={\r\n                    pageString.battle.index[\r\n                      player === \"0\" ? \"selectYourTeam\" : \"selectEnemies\"\r\n                    ]\r\n                  }\r\n                />\r\n              ) : (\r\n                lineup.map((c, ind) => (\r\n                  <CharacterButton\r\n                    key={ind}\r\n                    G={G}\r\n                    ctx={ctx}\r\n                    player={player as PlayerID}\r\n                    character={c}\r\n                    onClick={handleCharacterClick(ind, player)}\r\n                  />\r\n                ))\r\n              )}\r\n            </div>\r\n          ))}\r\n        </LineupsContainer>\r\n        <ControlPanel>\r\n          <IconButton\r\n            onClick={handleAttackClick}\r\n            tooltipText={pageString.battle.index.controlPanel.attack}\r\n          >\r\n            {AttackIcon}\r\n          </IconButton>\r\n          <IconButton\r\n            onClick={handleUltimateClick}\r\n            tooltipText={pageString.battle.index.controlPanel.ultimate}\r\n          >\r\n            {UltimateIcon}\r\n          </IconButton>\r\n          <IconButton\r\n            onClick={handleGuardClick}\r\n            tooltipText={pageString.battle.index.controlPanel.guard}\r\n          >\r\n            {GuardIcon}\r\n          </IconButton>\r\n          <IconButton\r\n            onClick={handleUndoClick}\r\n            tooltipText={pageString.battle.index.controlPanel.undo}\r\n          >\r\n            {UndoIcon}\r\n          </IconButton>\r\n          <IconButton\r\n            onClick={handleRedoClick}\r\n            tooltipText={pageString.battle.index.controlPanel.redo}\r\n          >\r\n            {RedoIcon}\r\n          </IconButton>\r\n          <IconButton\r\n            onClick={handleReset}\r\n            tooltipText={pageString.battle.index.controlPanel.reset}\r\n          >\r\n            {ResetIcon}\r\n          </IconButton>\r\n        </ControlPanel>\r\n        <Snackbar\r\n          open={isSnackbarOpen}\r\n          onClose={handleSnackbarClose}\r\n          message={pageString.battle.index.invalidMove}\r\n          type=\"error\"\r\n        />\r\n      </MainPanel>\r\n      <InfoTabs G={G} settingProps={settingProps} />\r\n    </Panels>\r\n  );\r\n};\r\n\r\nconst LineupsContainer = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  @media screen and (min-width: 1001px) {\r\n    min-height: calc(80vh - 5.3rem);\r\n  }\r\n  > div:first-child {\r\n    margin-right: 1rem;\r\n  }\r\n`;\r\nconst MainPanel = styled.div<{ $isBattleOver: boolean }>`\r\n  position: relative;\r\n  > div:first-child {\r\n    display: ${(props) => (props.$isBattleOver ? \"flex\" : \"none\")};\r\n    align-items: center;\r\n    justify-content: center;\r\n    position: absolute;\r\n    z-index: 1;\r\n    top: -1.5rem;\r\n    left: -1rem;\r\n    width: calc(100% + 2rem);\r\n    height: calc(100% + 2rem);\r\n    border-radius: 0.25rem;\r\n    background-color: rgba(0, 0, 0, 0.4);\r\n    color: white;\r\n  }\r\n`;\r\nconst StyledHeader = styled(Header)`\r\n  margin-bottom: 0.5rem;\r\n  border-bottom: 2px solid ${(props) => props.theme.colors.secondary};\r\n`;\r\nconst ControlPanel = styled.div`\r\n  position: relative;\r\n  z-index: 1;\r\n  display: flex;\r\n  justify-content: space-around;\r\n  flex-wrap: wrap;\r\n  margin-bottom: -0.5rem;\r\n`;\r\nconst SpinnerWrapper = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  font-size: 0.875rem;\r\n`;\r\nconst StyledSpinner = styled(CircularProgress)`\r\n  && {\r\n    margin: 0 0.5rem;\r\n    color: ${(props) => props.theme.colors.secondary};\r\n  }\r\n`;\r\nconst StyledSelectTeamButton = styled(SelectTeamButton)`\r\n  &&&& {\r\n    height: 100%;\r\n    padding: 1rem;\r\n  }\r\n`;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { PageProps } from \"gatsby\";\r\nimport { Client as BgioClient } from \"boardgame.io/react\";\r\nimport { Local } from \"boardgame.io/multiplayer\";\r\nimport { BattleCtx, BattleSetupData, IGameState } from \"types/battle\";\r\nimport useLocalStorage from \"hooks/useLocalStorage\";\r\nimport { useLanguage } from \"containers/LanguageProvider\";\r\nimport { BattleBoard, BattleBoardProps } from \"./BattleBoard\";\r\nimport { Battle, AutoBot, CustomMCTSBot, DoNothingBot } from \"utils/battle\";\r\n\r\nconst scarecrow = {\r\n  id: \"scarecrow\",\r\n  attribute: 5,\r\n  ATK: 0,\r\n  HP: 5000000000,\r\n};\r\n\r\n// use wrapper to get generic function's type\r\nconst wrapper = () =>\r\n  BgioClient<IGameState, BattleBoardProps, BattleCtx>({\r\n    game: Battle({ lineups: [[], []] }),\r\n    board: BattleBoard,\r\n  });\r\n\r\nconst bots = [AutoBot, DoNothingBot, CustomMCTSBot];\r\nexport const defaultLineups = [[], [scarecrow]] as BattleSetupData[\"lineups\"];\r\n\r\nexport const BattleApp = ({\r\n  location,\r\n  board,\r\n}: Pick<PageProps, \"location\"> & {\r\n  board: React.ComponentType<BattleBoardProps>;\r\n}): JSX.Element => {\r\n  const { pageString }: any = useLanguage();\r\n\r\n  const lineupsFromTeam = (location.state as any)?.lineups;\r\n  const [lineups, setLineups] = useState<BattleSetupData[\"lineups\"]>(\r\n    lineupsFromTeam ? lineupsFromTeam : defaultLineups\r\n  );\r\n\r\n  const [botIndex, setBotIndex] = useLocalStorage(\"bot-type\", 0);\r\n  const [iterations, setIterations] = useState(100);\r\n  const [playoutDepth, setPlayoutDepth] = useState(30);\r\n  // reset by useEffect rather than use the built-in function of library due to its issue\r\n  const [resetFlag, setResetFlag] = useState(false);\r\n\r\n  const [Client, setClient] = useState<\r\n    ReturnType<typeof wrapper> | undefined\r\n  >();\r\n\r\n  const initBattle = (setupData: BattleSetupData, botIndex: number) => {\r\n    setClient(() =>\r\n      BgioClient({\r\n        game: Battle(setupData),\r\n        board: board,\r\n        numPlayers: 2,\r\n        debug: false,\r\n        multiplayer: Local({ bots: { 1: bots[botIndex] } }),\r\n      })\r\n    );\r\n  };\r\n\r\n  const settingProps = {\r\n    lineups,\r\n    botIndex,\r\n    iterations,\r\n    playoutDepth,\r\n    handleSelectScarecrow: () => {\r\n      const newLineups = [\r\n        lineups[0],\r\n        [scarecrow],\r\n      ] as BattleSetupData[\"lineups\"];\r\n      setLineups(newLineups);\r\n      window.history.replaceState({ lineups: newLineups }, \"\");\r\n    },\r\n    handleSelectScarecrows: () => {\r\n      const newLineups = [\r\n        lineups[0],\r\n        Array(5).fill(scarecrow),\r\n      ] as BattleSetupData[\"lineups\"];\r\n      setLineups(newLineups);\r\n      window.history.replaceState({ lineups: newLineups }, \"\");\r\n    },\r\n    handleBotChange: (event: React.ChangeEvent<HTMLInputElement>) => {\r\n      setBotIndex(\r\n        pageString.battle.index.setting.labels.indexOf(event.target.value)\r\n      );\r\n    },\r\n    handleIterationsChange: (newValue: number | number[]) => () =>\r\n      setIterations(newValue as number),\r\n    handlePlayoutDepthChange: (newValue: number | number[]) => () =>\r\n      setPlayoutDepth(newValue as number),\r\n  };\r\n\r\n  useEffect(() => {\r\n    initBattle({ lineups, iterations, playoutDepth }, botIndex);\r\n  }, [lineups, iterations, playoutDepth, botIndex, resetFlag]);\r\n\r\n  return Client ? (\r\n    <Client\r\n      playerID=\"0\"\r\n      settingProps={settingProps}\r\n      handleReset={() => setResetFlag(!resetFlag)}\r\n    />\r\n  ) : (\r\n    <div />\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { PageProps } from \"gatsby\";\r\nimport { BattleApp, BattleBoard } from \"components/battle\";\r\n\r\nconst BattlePage = ({ location }: PageProps): JSX.Element => (\r\n  <BattleApp location={location} board={BattleBoard} />\r\n);\r\n\r\nexport default BattlePage;\r\n"],"names":["module","exports","instance","Constructor","TypeError","__esModule","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","superPropBase","_get","property","receiver","Reflect","get","base","desc","getOwnPropertyDescriptor","call","value","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","subClass","superClass","create","constructor","_typeof","assertThisInitialized","self","object","hasOwnProperty","FormControl","ref","children","classes","className","_props$color","color","_props$component","component","Component","_props$disabled","disabled","_props$error","error","_props$fullWidth","fullWidth","visuallyFocused","focused","_props$hiddenLabel","hiddenLabel","_props$margin","margin","_props$required","required","size","_props$variant","variant","other","_React$useState","initialAdornedStart","child","input","adornedStart","setAdornedStart","_React$useState2","initialFilled","filled","setFilled","_React$useState3","_focused","setFocused","undefined","onFilled","childContext","onBlur","onEmpty","onFocus","registerEffect","root","concat","display","flexDirection","position","minWidth","padding","border","verticalAlign","marginNormal","marginTop","marginBottom","marginDense","width","name","FormControlContext","useFormControl","formControlState","_ref","states","muiFormControl","reduce","acc","state","FormLabel","fcs","asterisk","theme","palette","text","secondary","typography","body1","lineHeight","primary","main","colorSecondary","hasValue","Array","isArray","isFilled","obj","SSR","arguments","defaultValue","isAdornedStart","startAdornment","Backoff","opts","this","ms","min","max","factor","jitter","attempts","duration","Math","pow","rand","random","deviation","floor","reset","setMin","setMax","setJitter","chars","encode","arraybuffer","bytes","Uint8Array","len","base64","substring","decode","encoded1","encoded2","encoded3","encoded4","bufferLength","p","ArrayBuffer","indexOf","Emitter","mixin","on","addEventListener","event","fn","_callbacks","push","once","off","apply","removeListener","removeAllListeners","removeEventListener","cb","callbacks","splice","emit","args","slice","listeners","hasListeners","warned","formatArgs","useColors","namespace","humanize","diff","c","index","lastC","replace","match","save","namespaces","storage","setItem","removeItem","load","r","getItem","process","DEBUG","window","type","__nwjs","navigator","userAgent","toLowerCase","document","documentElement","style","WebkitAppearance","console","firebug","exception","table","parseInt","RegExp","$1","localStorage","localstorage","destroy","warn","colors","log","debug","formatters","j","v","JSON","stringify","message","_toConsumableArray","env","createDebug","prevTime","namespacesCache","enabledCache","enableOverride","_len","_key","enabled","curr","Number","Date","prev","coerce","unshift","format","formatter","val","logFn","selectColor","extend","set","init","delimiter","newDebug","toNamespace","regexp","toString","default","Error","stack","disable","names","map","skips","join","enable","split","substr","test","keys","forEach","hash","charCodeAt","abs","PACKET_TYPES","PACKET_TYPES_REVERSE","ERROR_PACKET","data","base64decoder","_require","decodeBase64Packet","binaryType","decoded","mapBinary","Blob","encodedPacket","charAt","withNativeBlob","withNativeArrayBuffer","encodeBlobAsBase64","callback","fileReader","FileReader","onload","content","result","readAsDataURL","supportsBinary","isView","buffer","encodePacket","decodePacket","SEPARATOR","String","fromCharCode","protocol","encodePayload","packets","encodedPackets","count","packet","decodePayload","encodedPayload","decodedPacket","Function","Socket","uri","Transport","transports","parser","_classCallCheck","_createClass","_inherits","_possibleConstructorReturn","_createSuper","Derived","hasNativeReflectConstruct","construct","sham","Proxy","Boolean","valueOf","e","_isNativeReflectConstruct","Super","NewTarget","parseuri","parseqs","_Emitter","_super","_this","hostname","host","secure","port","query","location","readyState","writeBuffer","prevBufferLen","assign","path","agent","withCredentials","upgrade","jsonp","timestampParam","rememberUpgrade","rejectUnauthorized","perMessageDeflate","threshold","transportOptions","id","upgrades","pingInterval","pingTimeout","pingTimeoutTimer","transport","close","open","clone","EIO","sid","socket","priorWebsocketSuccess","setTimeout","createTransport","shift","setTransport","onDrain","onPacket","onError","onClose","probe","failed","onTransportOpen","onlyBinaryUpgrades","upgradeLosesBinary","send","msg","upgrading","pause","cleanup","flush","err","freezeTransport","onerror","onTransportClose","onclose","onupgrade","to","l","onHandshake","parse","resetPingTimeout","sendPacket","code","filterUpgrades","onOpen","_this2","clearTimeout","options","compress","cleanupAndClose","waitForUpgrade","reason","pingIntervalTimer","filteredUpgrades","description","doOpen","doClose","write","XMLHttpRequest","XHR","JSONP","websocket","polling","xd","xs","isSSL","xdomain","xscheme","forceJSONP","_assertThisInitialized","Polling","globalThis","rNewline","rEscapedNewline","JSONPPolling","_Polling","___eio","onData","script","parentNode","removeChild","form","iframe","createElement","async","src","insertAt","getElementsByTagName","insertBefore","head","body","appendChild","area","iframeId","top","left","method","setAttribute","complete","initIframe","html","action","submit","attachEvent","onreadystatechange","pick","empty","hasXHR2","responseType","forceBase64","Request","req","request","pollXhr","_super2","xhr","extraHeaders","setDisableHeaderCheck","setRequestHeader","requestTimeout","timeout","hasXDR","onLoad","responseText","status","requestsCount","requests","onSuccess","fromError","abort","XDomainRequest","enablesXDR","unloadHandler","yeast","_Transport","poll","onPause","total","doPoll","doWrite","schema","timestampRequests","b64","WebSocket","MozWebSocket","usingBrowserWebSocket","defaultBinaryType","_require2","isReactNative","product","WS","check","protocols","headers","ws","addEventListeners","onopen","onmessage","ev","Buffer","byteLength","done","attr","k","hasCORS","io","Manager","url_1","manager_1","socket_1","lookup","cache","managers","parsed","url","source","sameNamespace","forceNew","multiplex","queryKey","socket_io_parser_1","connect","manager_2","eio","on_1","nsps","subs","reconnection","reconnectionAttempts","Infinity","reconnectionDelay","reconnectionDelayMax","randomizationFactor","backoff","_readyState","_parser","encoder","Encoder","decoder","Decoder","_autoConnect","autoConnect","_reconnection","_reconnectionAttempts","_a","_reconnectionDelay","_randomizationFactor","_reconnectionDelayMax","_timeout","_reconnecting","reconnect","engine","skipReconnect","openSubDestroy","errorSub","maybeReconnectOnOpen","timer","onping","bind","ondata","ondecoded","add","nsp","_i","_nsps","active","_close","subDestroy","_this3","delay","onreconnect","attempt","_createForOfIteratorHelper","allowArrayLike","it","Symbol","iterator","minLen","_arrayLikeToArray","n","from","_unsupportedIterableToArray","F","s","_e","f","normalCompletion","didErr","step","next","_e2","return","arr","arr2","RESERVED_EVENTS","freeze","connect_error","disconnect","disconnecting","newListener","receiveBuffer","sendBuffer","ids","acks","flags","connected","disconnected","auth","onpacket","subEvents","_len2","_key2","PacketType","EVENT","pop","isTransportWritable","discardPacket","volatile","_packet","CONNECT","onconnect","BINARY_EVENT","onevent","ACK","BINARY_ACK","onack","DISCONNECT","ondisconnect","CONNECT_ERROR","ack","emitEvent","_anyListeners","_step","_iterator","sent","_len3","_key3","emitBuffered","_compress","listener","loc","ipv6","href","func","transform","funcProto","objectProto","funcToString","objectCtorString","objectToString","getPrototype","arg","isObjectLike","isHostObject","proto","Ctor","m","h","d","w","y","plural","msAbs","isPlural","round","str","exec","parseFloat","isFinite","long","fmtLong","fmtShort","encodeURIComponent","qs","qry","pairs","pair","decodeURIComponent","re","parts","b","authority","ipv6uri","pathNames","regx","$0","$2","_cookie2","_interopRequireDefault","_objectAssign2","IS_NODE","_rawCookie","_res","_isResWritable","headersSent","doNotParse","cookies","cookie","cookieVal","loadAll","select","regex","accumulator","newCookie","opt","serialize","remove","expires","maxAge","clearCookie","setRawCookie","rawCookie","plugToRequest","res","pairSplitRegExp","dec","eq_idx","trim","tryDecode","enc","fieldContentRegExp","isNaN","domain","toUTCString","httpOnly","sameSite","diffAny","diffObjects","diffArrays","intersection","subtract","isDestructive","pointer_1","util_1","minuend","subtrahend","add_key","del_key","objects","counter","appendArrayOperation","operation","operations","cost","output","ptr","memo","input_length","output_length","array_operations","dist","memo_key","memoized","Pointer","alternatives","remove_base","remove_operation","op","add_base","add_operation","replace_base","replace_operation","original","sort","a","array_operation","isArrayAdd","padded_index","index_token","isArrayRemove","replace_ptr","replace_operations","input_type","objectType","output_type","patch_1","diff_1","createTest","endpoint","fromJSON","evaluate","patch","wrappedDiff","custom_patch","wrapVoidableDiff","_extendStatics","__extends","__","InvalidOperationError","copy","move","TestError","MissingError","actual","expected","_add","_remove","parent","from_endpoint","unescape","token","escape","tokens","cursor","length_1","arrayTarget","objectTarget","global","setImmediate","registerImmediate","channel","messagePrefix","onGlobalMessage","nextHandle","tasksByHandle","currentlyRunningATask","doc","attachTo","handle","nextTick","runIfPresent","postMessage","importScripts","postMessageIsAsynchronous","oldOnMessage","canUsePostMessage","MessageChannel","port1","port2","task","clearImmediate","run","g","reconstructPacket","deconstructPacket","is_binary_1","_deconstructPacket","buffers","isBinary","placeholder","_placeholder","num","newData","_newData","_reconstructPacket","packetData","pack","attachments","binary_1","hasBinary","encodeAsString","encodeAsBinary","deconstruction","decodeString","reconstructor","BinaryReconstructor","takeBinaryData","start","buf","_start","_start2","_c","payload","tryParse","isPayloadValid","finishedReconstruction","reconPack","binData","withNativeFile","File","toJSON","alphabet","seed","encoded","now","urlAlphabet","nanoid","t","Q","Z","L","nn","u","has","delete","X","Map","q","Set","tn","clear","isFrozen","rn","_","U","O","S","P","M","x","H","A","I","R","D","z","E","N","T","C","en","revocable","revoke","proxy","J","K","G","W","B","for","ownKeys","getOwnPropertySymbols","getOwnPropertyNames","getOwnPropertyDescriptors","deleteProperty","un","produce","Promise","then","produceWithPatches","useProxies","setUseProxies","autoFreeze","setAutoFreeze","createDraft","finishDraft","applyPatches","$","an","enumerableOnly","symbols","filter","sym","_objectSpread","defineProperties","MAKE_MOVE","GAME_EVENT","REDO","RESET","SYNC","UNDO","UPDATE","PATCH","PLUGIN","STRIP_TRANSIENTS","makeMove","playerID","credentials","gameEvent","automaticGameEvent","automatic","sync","info","initialState","clientOnly","prevStateID","stateID","_patch","deltalog","update","undo","redo","stripTransients","ActionCreators","plugin","INVALID_MOVE","ImmerPlugin","fnWrap","ctx","isInvalid","newG","Alea","mash","Mash","s0","s1","s2","trunc","alea","xg","prng","GameMethod","Errors","Random","used","prngstate","number","_random","SpotValue","D4","D6","D8","D10","D12","D20","predefined","_loop","spotvalue","diceCount","Die","Shuffle","deck","sourceIndex","destinationIndex","shuffled","randomIndex","_private","RandomPlugin","noClient","api","isUsed","_ref2","getState","_ref3","setup","_ref4","game","playerView","Events","flow","dispatch","initialTurn","turn","updateTurnContext","maxEndedTurnsPerAction","numPlayers","events","eventNames","_loop2","phase","currentPhase","currentTurn","calledFrom","currentMethod","methodType","stateWithError","_ref5","plugins","EventQueue","turnHasEnded","MaxTurnEndings","CalledOutsideHook","gameover","TURN_ON_END","PHASE_ON_END","StageEventInOnEnd","PHASE_ON_BEGIN","StageEventInPhaseBegin","TURN_ON_BEGIN","StageEventInTurnBegin","EndTurnInOnEnd","PhaseEventInOnEnd","processEvent","EventsPlugin","_ref6","_ref7","unsetCurrentMethod","dangerouslyFlushRawState","_ref8","_ref9","SerializablePlugin","_len4","_key4","logfn","_console2","errorfn","CORE_PLUGINS","_ref10","setMetadata","metadata","DEFAULT_PLUGINS","ProcessAction","pluginState","EnhanceCtx","entries","_ref11","_ref12","FnWrap","methodToWrap","_ref13","Enhance","NoClient","includes","FlushAndValidate","updatedState","reverse","Flush","find","IsInvalid","PlayerView","_ref14","_ref15","_ref14$plugins","_ref16","supportDeprecatedMoveLimit","enforceMinMoves","moveLimit","minMoves","maxMoves","SetActivePlayers","activePlayers","_prevActivePlayers","_nextActivePlayers","_activePlayersMinMoves","_activePlayersMaxMoves","Stage","NULL","revert","_activePlayersNumMoves","currentPlayer","ApplyActivePlayerArgument","others","playOrder","all","_id2","_id3","_id4","_id5","stage","getCurrentPlayer","playOrderPos","UpdateErrorType","ActionErrorType","TurnOrder","first","_excluded","_excluded2","Flow","moves","phases","endIf","onEnd","phaseMap","moveMap","moveNames","startingPhase","HookWrapper","hook","hookType","withPlugins","ctxWithAPI","TriggerWrapper","trigger","wrapped","GAME_ON_END","phaseConfig","_Object$keys","onBegin","order","onMove","stages","_moves","_i2","_Object$keys2","_move","TURN_ON_MOVE","GetPhase","OnMove","Process","phasesEnded","turnsEnded","_events$i","rest","EndPhase","_phase","EndGame","shouldEndGame","ShouldEndGame","shouldEndPhase","ShouldEndPhase","UpdateStage","UpdateActivePlayers","shouldEndTurn","ShouldEndTurn","EndTurn","StartGame","StartPhase","StartTurn","posType","InitTurnOrderState","numMoves","_undo","_redo","UpdatePhase","UpdateTurn","_state2","_UpdateTurnOrderState","endTurnArg","endPhase","UpdateTurnOrderState","_ctx","currentPlayerMoves","_state$ctx","force","logEntry","_stateID","_state$ctx2","EndStage","_ctx2","playerInStage","_stage","lastIndex","_prevActivePlayers$la","UpdateActivePlayersOnceEmpty","GetMove","_moves2","eventHandlers","endStage","setStage","endTurn","_playerID","pass","setPhase","newPhase","endGame","setActivePlayers","enabledEventNames","isPlayerActive","_G","values","processMove","shouldCount","noLimit","_action$payload","getMove","ProcessGameConfig","IsProcessed","deltaState","disableUndo","pluginNames","moveFn","IsLongFormMove","MOVE","actionHasPlayerID","CanUndoMove","undoable","HasUndoable","updateUndoRedoState","undoEntry","moveType","initializeDeltalog","pluginLogMetadata","redact","flushAndValidatePlugins","oldState","pluginOpts","_FlushAndValidate","_FlushAndValidate2","newState","WithError","PluginActionInvalid","ExtractTransients","transientState","transients","errorType","TransientHandlingMiddleware","store","_ExtractTransients","isClient","stateWithTransients","_ExtractTransients3","_ExtractTransients4","GameOver","InactivePlayer","_flushAndValidatePlug","_flushAndValidatePlug2","UnavailableMove","client","InvalidMove","_stateWithError","_newState","_flushAndValidatePlug3","_flushAndValidatePlug4","_flushAndValidatePlug5","_flushAndValidatePlug6","ActionDisabled","_state5","_G2","ActionInvalid","last","restore","lastMove","_state6","_undo2","_redo2","_stateID2","_oldState","_newState2","patchError","hasError","some","entry","PatchFailed","InitializeGame","setupData","Setup","enhancedCtx","initial","transportDataCallback","gameName","matchID","connectionStatusCallback","isConnected","DummyImpl","DummyTransport","GlobalClientManager","ClientManager","debugPanel","currentClient","clients","subscribers","mountDebug","notifySubscribers","unmountDebug","_client","multiplayer","_step2","_iterator2","debugOpt","switchToClient","updatePlayerID","debuggableClients","getDebuggableClients","DebugImpl","impl","clientManager","$destroy","assumedPlayerID","createDispatchers","storeActionType","innerActionNames","_step3","dispatchers","_iterator3","createMoveDispatchers","createEventDispatchers","createPluginDispatchers","_ClientImpl","enhancer","manager","gameStateOverride","_running","reducer","undo$1","redo$1","middleware","baseState","sendAction","_deltalog","receiveTransportData","gameKey","chatMessages","sendChatMessage","sender","matchData","syncInfo","receiveMatchData","filteredMetadata","_data$args3","currentState","_action","_data$args4","patch$1","_deltalog2","currentStateID","_action2","requestSync","chatMessage","receiveChatMessage","register","unregister","_this4","subscribeToConnectionStatus","isActive","updateMatchID","updateCredentials","Bot","enumerate","enumerateFn","iterationCounter","_opts","range","MCTSBot","_Bot","objectives","iterations","playoutDepth","iterationCallback","addOpt","parentAction","actions","_actions","visits","node","selectedChild","best","childVisits","EPSILON","uct","sqrt","childState","childNode","createNode","getOpt","_state","score","objective","checker","weight","_ret","draw","winner","backpropagate","numIterations","getResult","resolve","iteration","leaf","expand","playout","asyncIteration","Type","assertString","label","assertGameName","assertMatchID","validateBody","propSchema","types","received","union","LobbyClientError","_Error","details","LobbyClient","_ref$server","server","_playAgain","_updatePlayer","_leaveMatch","_joinMatch","_createMatch","_getMatch","_listMatches","_listGames","_post","_request","_callee","route","response","_context","fetch","ok","json","t0","t1","abrupt","stop","_x","_x2","_callee2","_context2","_x3","_x4","_callee3","_context3","_x5","_callee4","where","queries","isGameover","updatedBefore","updatedAfter","_context4","_x6","_x7","_x8","_callee5","_context5","_x9","_x10","_x11","_callee6","_context6","post","_x12","_x13","_x14","_callee7","_context7","playerName","_x15","_x16","_x17","_x18","_callee8","_context8","_x19","_x20","_x21","_x22","_callee9","_context9","_x23","_x24","_x25","_x26","_callee10","_context10","_x27","_x28","_x29","_x30","isSynchronous","storageAPI","Sync","createGame","listGames","createMatch","unlisted","setupDataError","validateSetupData","players","createdAt","updatedAt","playerIndex","createMetadata","_excluded3","filterMatchData","player","stripCredentialsFromAction","Master","transportAPI","subscribeCallback","_onChatMessage","_onConnectionChange","_onSync","_onUpdate","credAction","_this$storageAPI$fetc","_yield$this$storageAP","_this$storageAPI$fetc2","_yield$this$storageAP2","hasActivePlayers","isCurrentPlayer","prevState","stateWithoutDeltalog","newMetadata","writes","authenticateCredentials","ignoreStaleStateID","sendAll","setState","fetchOpts","fetchResult","_args2","_this$storageAPI$fetc3","_yield$this$storageAP3","_yield$this$storageAP4","applyPlayerView","redactLog","logEvent","filteredEvent","InMemory","_Sync","WithLocalStorageMap","_Map","LocalStorage","_InMemory","_super3","storagePrefix","StorageMap","stateKey","LocalMaster","_Master","_super4","_this5","bots","storageKey","persist","clientCallbacks","initializedBots","ai","bot","filterPlayerView","_payload$args","filteredState","newStateID","prevFilteredState","_payload$args2","_matchID","_log","_payload$args3","_matchID2","_filteredState2","_log2","getFilterPlayerView","subscribe","botPlayer","GetBotPlayer","botAction","play","onUpdate","LocalTransport","_super5","_this6","master","_this$master","onChatMessage","onSync","_this7","setConnectionStatus","notifyClient","localMasters","Local","transportOpts","SocketIOTransport","_Transport2","_super6","_this8","socketOpts","_this$socket","_this$socket2","_this9","search","_this$socket3","SocketIO","loading","board","_React$Component","WrappedBoard","Client","unsubscribe","forceUpdate","prevProps","_board","isMultiplayer","propTypes","defaultProps","_LobbyConnectionImpl","gameComponents","playerCredentials","matches","_create","_disconnect","_leave","_join","_refresh","games","_this$matches","_yield$this$client$li","_getGameComponents","listMatches","finish","inst","comp","_step4","_iterator4","_findPlayer","_getMatchInstance","joinMatch","_iterator5","_step5","leaveMatch","leave","minPlayers","maxPlayers","LobbyLoginForm","_React$Component2","nameErrorMsg","onClickEnter","onEnter","onKeyPress","onChangePlayerName","onChange","onClick","LobbyPhases","LobbyMatchInstance","_React$Component3","_createSeat","_createButtonJoin","seatId","onClickJoin","_createButtonLeave","onClickLeave","_createButtonPlay","onClickPlay","_createButtonSpectate","_createInstanceButtons","playerSeat","freeSeat","LobbyCreateMatchForm","_React$Component4","selectedGame","_createGameNameOption","idx","_createNumPlayersOption","_createNumPlayersRange","onChangeNumPlayers","onChangeSelectedGame","onClickCreate","_step6","_iterator6","matchDetails","assert","evt","Lobby","_React$Component5","ENTER","runningMatch","errorMsg","credentialStore","_createConnection","connection","lobbyServer","_updateCredentials","_updateConnection","refresh","_enterLobby","LIST","_exitLobby","_startMatch","matchOpts","gameCode","gameServer","app","clientFactory","PLAY","_exitMatch","_getPhaseVisibility","renderMatches","_startRefreshInterval","creds","refreshInterval","_clearRefreshInterval","_currentInterval","setInterval","clearInterval","_this$props","renderer","_this$state","handleEnterLobby","handleExitLobby","handleCreateMatch","handleJoinMatch","handleLeaveMatch","handleExitMatch","handleRefreshMatches","handleStartMatch","CharacterButtonState","SettingHeader","styled","Header","TextWrapper","pageString","useLanguage","battle","help","item","ind","title","character","anchorEl","useTheme","charString","skillString","Popover","anchorOrigin","vertical","horizontal","transformOrigin","PaperProps","backgroundColor","surface","onSurface","fontSize","HP","maxHP","ATK","shield","currentCD","CD","effect","effects","lineup","otherConditionValue","otherCondition","SkillCondition","isDead","validateEffect","lineups","string","SkillOn","endTurnEffect","SkillActionType","SkillEffectType","basis","SkillEffectBasis","byAttribute","attribute","effectString","fromPlayer","getCharacterButtonState","teamPosition","TARGETED","isMoved","isParalysis","isSleep","isBroken","NOT_MOVABLE","selected","SELECTED","isSilence","CAN_ULTIMATE","PLAIN","CharacterStateTooltip","tooltipText","Tooltip","TooltipTextWrapper","StateIcon","$active","CharacterStateList","ListWrapper","ClockIcon","controlPanel","guard","isGuard","GuardIcon","taunt","isTaunt","TauntIcon","silence","SilenceIcon","sleep","SleepIcon","paralysis","ParalysisIcon","CharacterStats","HPPercent","shieldPercent","CharacterStatsWrapper","HPBar","originalHPPercent","originalShieldPercent","StyledHPBar","$HP","$shield","$originalHP","$originalShield","dropdownHover","shadow","chart","ButtonWrapper","DetailsButton","IconButton","onBackground","CharacterAvatar","ImageSupplier","$grayscale","$attr","background","Button","MuiButton","StyledCharacterMuiButton","$state","setAnchorEl","useState","currentTarget","ariaDescribedby","ElseIcon","alt","LogCell","colSpan","TableCell","align","MoveLog","moveLog","fromCharacter","toCharacter","TableRow","CharacterTextWrapper","$isEnemy","ArrowIcon","HPTextWrapper","LogHPBar","originalHP","originalShield","TableWrapper","Scrollable","TurnTextWrapper","logLength","Table","TableBody","logPerTurn","logPerMove","withStyles","thumb","offset","zIndex","body2","pxToRem","transition","transitions","shortest","circle","alignItems","justifyContent","height","borderRadius","contrastText","valueLabelDisplay","asc","clamp","findClosest","currentValue","distance","trackFinger","touchId","current","changedTouches","touch","identifier","clientX","clientY","valueToPercent","roundValueToStep","nearest","toFixed","toExponential","matissaDecimalPart","decimalPart","getDecimalPrecision","setValueIndex","newValue","focusThumb","sliderRef","activeIndex","setActive","contains","activeElement","getAttribute","querySelector","focus","axisProps","percent","leap","right","bottom","Identity","Slider","ariaLabel","ariaLabelledby","ariaValuetext","getAriaLabel","getAriaValueText","_props$marks","marks","marksProp","_props$max","_props$min","onChangeCommitted","onMouseDown","_props$orientation","orientation","_props$scale","scale","_props$step","_props$ThumbComponent","ThumbComponent","_props$track","track","valueProp","_props$ValueLabelComp","ValueLabelComponent","_props$valueLabelDisp","_props$valueLabelForm","valueLabelFormat","setOpen","_useControlled","useControlled","controlled","_useControlled2","valueDerived","setValueState","_useIsFocusVisible","useIsFocusVisible","isFocusVisible","onBlurVisible","focusVisibleRef","focusVisible","setFocusVisible","handleFocusRef","useForkRef","handleRef","handleFocus","useEventCallback","handleBlur","handleMouseOver","handleMouseLeave","isRtl","direction","handleKeyDown","tenPercents","marksValues","mark","marksIndex","increaseKey","decreaseKey","preventDefault","previousValue","previousIndex","axis","getFingerNewValue","finger","_ref3$move","values2","_slider$getBoundingCl","getBoundingClientRect","percentToValue","handleTouchMove","_getFingerNewValue","handleTouchEnd","ownerDocument","handleTouchStart","_getFingerNewValue3","slider","handleMouseDown","_getFingerNewValue4","trackOffset","trackLeap","trackStyle","capitalize","marked","trackFalse","trackInverted","rail","markActive","markLabel","markLabelActive","valueLabel","tabIndex","role","onKeyDown","onMouseOver","onMouseLeave","boxSizing","touchAction","WebkitTapHighlightColor","pointerEvents","grey","colorAdjust","colorPrimary","marginRight","opacity","marginLeft","outline","boxShadow","thumbColorPrimary","thumbColorSecondary","paper","whiteSpace","SelectTeamButton","isFromPlayer","StyledButton","StyledLink","isFromEnemies","OpenIcon","secondaryBorder","LocalizedLink","StyledRadioGroup","RadioGroup","StyledSlider","onSecondary","botIndex","handleSelectScarecrow","handleSelectScarecrows","handleBotChange","handleIterationsChange","handlePlayoutDepthChange","iterationsValue","setIterationsValue","playoutDepthValue","setPlayoutDepthValue","setting","team","enemy","scarecrow","groupLabel","labels","handleChange","correctionTerm","calcAttack","ATKEffectPercentage","ATKEffectValue","baseATK","ATTRIBUTE_CHART","sameEffect","e1","e2","getEnemies","merge","takeEffect","skill","logArr","ATKBuffValues","valueAfterSelf","characters","possibility","existEffect","maxStack","extraSkill","skillSet","passive","damage","fromLineup","toLineup","dealtDamageEffect","attackDamageEffect","attributeEffect","CharacterAttribute","guardEffect","breakEffect","damagedEffect","attributeDamagedEffect","calcDamage","restDamage","damageLog","enemyID","tempG","tempCtx","condition","targetSkill","healBasis","heal","healEffect","healedEffect","damageEffect","calcHeal","healLog","shieldEffect","shieldedEffect","calcShield","shieldLog","para","paraBuff","rPara","sleepBuff","rSleep","silenceBuff","rSilence","targets","isEnemy","enemies","selfTeam","SkillTarget","leastHP","leftmost","getSkillTargets","skillDuration","repeat","repeatTimes","initCharacter","characterStats","baseHP","normalAttack","ultimate","level","potential","potentialSub","discipline","star","bond","skillData","calcCharStats","starPassive","potentialPassive","leader","currUltimate","common","charMap","tags","nextTarget","opponent","findIndex","endMove","canSelect","Battle","skillQueue","attack","switchMember","switchTarget","doNothing","skills","conditionValue","isAllDead","every","findAllIndices","selectedCharacter","canTarget","tauntIndices","canAttack","canUltimate","TabPanel","hidden","tabIcons","NoteIcon","SettingIcon","HelpIcon","InfoTabs","settingProps","setTabIndex","useLocalStorage","StyledTabs","tabs","tab","StyledTab","icon","$selected","Tabs","Tab","BattleBoard","handleReset","isSnackbarOpen","setSnackbarOpen","handleCharacterClick","Panels","panelsWidth","MainPanel","$isBattleOver","StyledHeader","end","SpinnerWrapper","calculating","StyledSpinner","thickness","disableShrink","LineupsContainer","StyledSelectTeamButton","ControlPanel","AttackIcon","UltimateIcon","UndoIcon","RedoIcon","ResetIcon","Snackbar","invalidMove","CircularProgress","super","kill","dontDie","defaultLineups","BattleApp","lineupsFromTeam","setLineups","setBotIndex","setIterations","setPlayoutDepth","resetFlag","setResetFlag","setClient","newLineups","history","replaceState","fill","useEffect","BgioClient","initBattle"],"sourceRoot":""}